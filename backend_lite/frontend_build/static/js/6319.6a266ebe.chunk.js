/*! For license information please see 6319.6a266ebe.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[6319],{2054:(e,s,t)=>{t.d(s,{A:()=>l});const l=(0,t(7784).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},4919:(e,s,t)=>{t.d(s,{A:()=>l});const l=(0,t(7784).A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},5088:(e,s,t)=>{t.d(s,{A:()=>l});const l=(0,t(7784).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},6245:(e,s,t)=>{t.d(s,{A:()=>l});const l=(0,t(7784).A)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},6319:(e,s,t)=>{t.r(s),t.d(s,{default:()=>v});var l=t(5043),a=t(2054),c=t(6245),i=t(7719),r=t(4537),n=t(5088),d=t(3062),o=t(516),x=t(4919),m=t(6328),h=t(9688),u=t(8018),j=t(579);const b=e=>{let{title:s,value:t,subtitle:l,icon:a,color:c,iconColor:i}=e;return(0,j.jsxs)("div",{className:"".concat(c," border border-slate-700 p-6 rounded-lg"),children:[(0,j.jsx)("div",{className:"".concat(i," mb-3"),children:a}),(0,j.jsx)("div",{className:"text-3xl font-bold text-white mb-1",children:t}),(0,j.jsx)("div",{className:"text-sm text-slate-400",children:s}),l&&(0,j.jsx)("div",{className:"text-lg font-semibold text-white mt-1",children:l})]})},g=e=>{let{title:s,icon:t,children:l}=e;return(0,j.jsxs)("div",{className:"bg-slate-800/50 border border-slate-700 p-6 rounded-lg",children:[(0,j.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,j.jsx)("div",{className:"text-blue-400",children:t}),(0,j.jsx)("h3",{className:"text-xl font-bold text-white",children:s})]}),l]})},p=e=>{let{label:s,value:t,warning:l}=e;return(0,j.jsxs)("div",{className:"flex justify-between items-center py-1",children:[(0,j.jsx)("span",{className:"text-slate-400",children:s}),(0,j.jsx)("span",{className:"font-bold ".concat(l?"text-orange-400":"text-white"),children:t})]})},v=()=>{const[e,s]=(0,l.useState)(null),[t,v]=(0,l.useState)(!0),[N,y]=(0,l.useState)("24h"),[f,w]=(0,l.useState)(!0),_=(0,l.useRef)(!1),k=(0,l.useRef)(!0),A=(0,l.useCallback)(async()=>{if(!_.current){_.current=!0;try{const e=await(0,h.apiGet)("/api/admin/quality-control?time_range=".concat(N),{showErrorToast:!1});k.current&&(s(e),v(!1))}catch(e){u.v.error("Failed to fetch quality data:",e),k.current&&(m.oR.error("\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05d8\u05e2\u05d9\u05e0\u05ea \u05e0\u05ea\u05d5\u05e0\u05d9 \u05d1\u05e7\u05e8\u05ea \u05d0\u05d9\u05db\u05d5\u05ea"),v(!1))}finally{_.current=!1}}},[N]);(0,l.useEffect)(()=>{k.current=!0,A();let e=null;return f&&(e=setInterval(A,3e4)),()=>{k.current=!1,e&&clearInterval(e)}},[N,f,A]);return t?(0,j.jsx)("div",{className:"p-8 flex items-center justify-center",children:(0,j.jsxs)("div",{className:"text-center",children:[(0,j.jsx)(o.A,{className:"w-12 h-12 text-blue-500 animate-spin mx-auto mb-4"}),(0,j.jsx)("p",{className:"text-white text-lg",children:"\u05d8\u05d5\u05e2\u05df \u05e0\u05ea\u05d5\u05e0\u05d9 \u05d1\u05e7\u05e8\u05ea \u05d0\u05d9\u05db\u05d5\u05ea..."})]})}):e?(0,j.jsx)("div",{className:"p-6",dir:"rtl",children:(0,j.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,j.jsxs)("div",{className:"mb-6 flex justify-between items-center",children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"\ud83c\udfaf \u05d1\u05e7\u05e8\u05ea \u05d0\u05d9\u05db\u05d5\u05ea"}),(0,j.jsx)("p",{className:"text-slate-400",children:"\u05de\u05e2\u05e7\u05d1 \u05d5\u05d1\u05e7\u05e8\u05d4 \u05e2\u05dc \u05d0\u05d9\u05db\u05d5\u05ea \u05d4\u05e0\u05d9\u05ea\u05d5\u05d7\u05d9\u05dd \u05d1\u05de\u05e2\u05e8\u05db\u05ea"})]}),(0,j.jsxs)("div",{className:"flex gap-3",children:[(0,j.jsxs)("select",{value:N,onChange:e=>y(e.target.value),className:"bg-slate-800 border border-slate-700 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,j.jsx)("option",{value:"1h",children:"\u05e9\u05e2\u05d4 \u05d0\u05d7\u05e8\u05d5\u05e0\u05d4"}),(0,j.jsx)("option",{value:"6h",children:"6 \u05e9\u05e2\u05d5\u05ea"}),(0,j.jsx)("option",{value:"24h",children:"24 \u05e9\u05e2\u05d5\u05ea"}),(0,j.jsx)("option",{value:"7d",children:"\u05e9\u05d1\u05d5\u05e2"}),(0,j.jsx)("option",{value:"30d",children:"\u05d7\u05d5\u05d3\u05e9"}),(0,j.jsx)("option",{value:"all",children:"\u05d4\u05db\u05dc"})]}),(0,j.jsxs)("label",{className:"flex items-center gap-2 bg-slate-800 border border-slate-700 rounded-lg px-4 py-2 text-white cursor-pointer",children:[(0,j.jsx)("input",{type:"checkbox",checked:f,onChange:e=>w(e.target.checked),className:"w-4 h-4"}),(0,j.jsx)("span",{children:"\u05e8\u05e2\u05e0\u05d5\u05df \u05d0\u05d5\u05d8\u05d5\u05de\u05d8\u05d9"})]}),(0,j.jsxs)("button",{onClick:A,className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors",children:[(0,j.jsx)(o.A,{className:"w-4 h-4"}),"\u05e8\u05e2\u05e0\u05df"]})]})]}),e.alerts&&e.alerts.length>0&&(0,j.jsx)("div",{className:"mb-6 space-y-2",children:e.alerts.map((e,s)=>(0,j.jsx)("div",{className:"p-4 rounded-lg border-r-4 ".concat("high"===e.severity?"bg-red-500/10 border-red-500":"bg-yellow-500/10 border-yellow-500"),children:(0,j.jsxs)("div",{className:"flex items-start gap-3",children:[(0,j.jsx)(i.A,{className:"w-5 h-5 mt-0.5 ".concat("high"===e.severity?"text-red-500":"text-yellow-500")}),(0,j.jsxs)("div",{className:"flex-1",children:[(0,j.jsx)("div",{className:"font-bold text-white",children:e.message}),(0,j.jsxs)("div",{className:"text-sm text-slate-400 mt-1",children:["\ud83d\udca1 ",e.action]})]})]})},s))}),(0,j.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,j.jsx)(b,{title:"\u05e1\u05d4\u05f4\u05db \u05ea\u05d9\u05e7\u05d9\u05dd",value:e.summary.total_cases,icon:(0,j.jsx)(r.A,{className:"w-8 h-8"}),color:"bg-blue-500/10",iconColor:"text-blue-500"}),(0,j.jsx)(b,{title:"\u05d4\u05d5\u05e9\u05dc\u05de\u05d5",value:e.summary.completed,subtitle:"".concat(e.summary.success_rate.toFixed(1),"%"),icon:(0,j.jsx)(a.A,{className:"w-8 h-8"}),color:"bg-green-500/10",iconColor:"text-green-500"}),(0,j.jsx)(b,{title:"\u05e0\u05db\u05e9\u05dc\u05d5",value:e.summary.failed,subtitle:"".concat(e.summary.failure_rate.toFixed(1),"%"),icon:(0,j.jsx)(c.A,{className:"w-8 h-8"}),color:"bg-red-500/10",iconColor:"text-red-500"}),(0,j.jsx)(b,{title:"\u05d1\u05e2\u05d9\u05d1\u05d5\u05d3",value:e.summary.analyzing,icon:(0,j.jsx)(n.A,{className:"w-8 h-8"}),color:"bg-yellow-500/10",iconColor:"text-yellow-500"})]}),e.stuck_cases&&e.stuck_cases.length>0&&(0,j.jsxs)("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/30 rounded-lg",children:[(0,j.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,j.jsxs)("h3",{className:"text-lg font-bold text-red-400 flex items-center gap-2",children:[(0,j.jsx)(i.A,{className:"w-5 h-5"}),"\u05ea\u05d9\u05e7\u05d9\u05dd \u05ea\u05e7\u05d5\u05e2\u05d9\u05dd (",e.stuck_cases.length,")"]}),(0,j.jsx)("button",{onClick:async()=>{if(window.confirm("\u05d4\u05d0\u05dd \u05dc\u05d1\u05d8\u05dc \u05d0\u05ea \u05db\u05dc \u05d4\u05ea\u05d9\u05e7\u05d9\u05dd \u05d4\u05ea\u05e7\u05d5\u05e2\u05d9\u05dd?"))try{const e=await(0,h.$P)("/api/admin/fix-stuck-cases",{},{showErrorToast:!1});m.oR.success("\u2705 ".concat(e.fixed_count," \u05ea\u05d9\u05e7\u05d9\u05dd \u05ea\u05d5\u05e7\u05e0\u05d5 \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4!")),A()}catch(e){u.v.error("Error fixing stuck cases:",e),m.oR.error("\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05ea\u05d9\u05e7\u05d5\u05df \u05ea\u05d9\u05e7\u05d9\u05dd \u05ea\u05e7\u05d5\u05e2\u05d9\u05dd")}},className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-colors",children:"\ud83d\udd27 \u05ea\u05e7\u05df \u05ea\u05d9\u05e7\u05d9\u05dd \u05ea\u05e7\u05d5\u05e2\u05d9\u05dd"})]}),(0,j.jsx)("div",{className:"space-y-2",children:e.stuck_cases.map(e=>(0,j.jsxs)("div",{className:"flex justify-between items-center bg-slate-800/50 p-3 rounded-lg",children:[(0,j.jsxs)("span",{className:"font-mono text-sm text-slate-400",children:[e.case_id.substring(0,16),"..."]}),(0,j.jsx)("span",{className:"text-white",children:e.title}),(0,j.jsxs)("span",{className:"text-red-400 font-bold",children:[e.stuck_minutes.toFixed(1)," \u05d3\u05e7\u05d5\u05ea"]})]},e.case_id))})]}),(0,j.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[(0,j.jsxs)(g,{title:"\u23f1\ufe0f \u05e0\u05d9\u05ea\u05d5\u05d7 \u05d6\u05de\u05e0\u05d9\u05dd",icon:(0,j.jsx)(n.A,{className:"w-6 h-6"}),children:[(0,j.jsxs)("div",{className:"space-y-3",children:[(0,j.jsx)(p,{label:"\u05d6\u05de\u05df \u05de\u05de\u05d5\u05e6\u05e2",value:"".concat(e.timing.avg_duration_minutes.toFixed(1)," \u05d3\u05e7\u05d5\u05ea")}),(0,j.jsx)(p,{label:"\u05d7\u05e6\u05d9\u05d5\u05df",value:"".concat(e.timing.median_duration_minutes.toFixed(1)," \u05d3\u05e7\u05d5\u05ea")})]}),e.timing.slowest_cases&&e.timing.slowest_cases.length>0&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("h4",{className:"font-bold mt-4 mb-2 text-white",children:"\ud83d\udc0c \u05d4\u05ea\u05d9\u05e7\u05d9\u05dd \u05d4\u05d0\u05d9\u05d8\u05d9\u05d9\u05dd \u05d1\u05d9\u05d5\u05ea\u05e8:"}),(0,j.jsx)("div",{className:"space-y-2",children:e.timing.slowest_cases.slice(0,3).map((e,s)=>(0,j.jsxs)("div",{className:"text-sm flex justify-between bg-slate-800/30 p-2 rounded",children:[(0,j.jsxs)("span",{className:"font-mono text-slate-400",children:[e.case_id.substring(0,12),"..."]}),(0,j.jsxs)("span",{className:"font-bold text-orange-400",children:[e.duration_minutes.toFixed(1)," \u05d3\u05e7\u05d5\u05ea"]})]},s))})]})]}),(0,j.jsx)(g,{title:"\ud83d\udea8 \u05e0\u05d9\u05ea\u05d5\u05d7 \u05db\u05d9\u05e9\u05dc\u05d5\u05e0\u05d5\u05ea",icon:(0,j.jsx)(c.A,{className:"w-6 h-6"}),children:e.failures.by_category&&Object.keys(e.failures.by_category).length>0?(0,j.jsx)("div",{className:"space-y-2",children:Object.entries(e.failures.by_category).map(e=>{let[s,t]=e;return(0,j.jsxs)("div",{className:"flex justify-between items-center",children:[(0,j.jsx)("span",{className:"text-slate-300",children:s}),(0,j.jsx)("span",{className:"font-bold text-red-400",children:t})]},s)})}):(0,j.jsx)("div",{className:"text-center py-4 text-slate-400",children:"\u2705 \u05d0\u05d9\u05df \u05db\u05d9\u05e9\u05dc\u05d5\u05e0\u05d5\u05ea!"})})]}),(0,j.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[(0,j.jsx)(g,{title:"\ud83d\udcc8 \u05d0\u05d9\u05db\u05d5\u05ea \u05ea\u05d5\u05e6\u05d0\u05d5\u05ea",icon:(0,j.jsx)(x.A,{className:"w-6 h-6"}),children:(0,j.jsxs)("div",{className:"space-y-3",children:[(0,j.jsx)(p,{label:"\u05de\u05de\u05d5\u05e6\u05e2 \u05d8\u05e2\u05e0\u05d5\u05ea \u05dc\u05ea\u05d9\u05e7",value:e.quality.avg_claims_per_case.toFixed(1)}),(0,j.jsx)(p,{label:"\u05de\u05de\u05d5\u05e6\u05e2 \u05e1\u05ea\u05d9\u05e8\u05d5\u05ea \u05dc\u05ea\u05d9\u05e7",value:e.quality.avg_contradictions_per_case.toFixed(1)}),(0,j.jsx)(p,{label:"\u05ea\u05d9\u05e7\u05d9\u05dd \u05dc\u05dc\u05d0 \u05e1\u05ea\u05d9\u05e8\u05d5\u05ea",value:e.quality.cases_with_no_contradictions,warning:e.quality.cases_with_no_contradictions>0})]})}),(0,j.jsx)(g,{title:"\ud83d\udcb0 \u05e0\u05d9\u05ea\u05d5\u05d7 \u05e2\u05dc\u05d5\u05d9\u05d5\u05ea",icon:(0,j.jsx)(d.A,{className:"w-6 h-6"}),children:(0,j.jsxs)("div",{className:"space-y-3",children:[(0,j.jsx)(p,{label:"\u05e2\u05dc\u05d5\u05ea \u05db\u05d5\u05dc\u05dc\u05ea",value:e.costs.total_cost}),(0,j.jsx)(p,{label:"\u05e2\u05dc\u05d5\u05ea \u05de\u05de\u05d5\u05e6\u05e2\u05ea \u05dc\u05ea\u05d9\u05e7",value:e.costs.avg_cost_per_case})]})})]}),e.insights&&e.insights.length>0&&(0,j.jsx)(g,{title:"\ud83d\udca1 \u05ea\u05d5\u05d1\u05e0\u05d5\u05ea \u05d5\u05d4\u05de\u05dc\u05e6\u05d5\u05ea",icon:(0,j.jsx)(x.A,{className:"w-6 h-6"}),children:(0,j.jsx)("div",{className:"space-y-3",children:e.insights.map((e,s)=>(0,j.jsxs)("div",{className:"border-r-4 border-blue-500 pr-3 py-2",children:[(0,j.jsx)("div",{className:"font-semibold text-white",children:e.message}),e.recommendation&&(0,j.jsxs)("div",{className:"text-sm text-slate-400 mt-1",children:["\ud83d\udca1 ",e.recommendation]})]},s))})})]})}):(0,j.jsx)("div",{className:"p-8",children:(0,j.jsxs)("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-6 text-center",children:[(0,j.jsx)(i.A,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),(0,j.jsx)("p",{className:"text-white text-lg",children:"\u05d0\u05d9\u05df \u05e0\u05ea\u05d5\u05e0\u05d9\u05dd \u05dc\u05d4\u05e6\u05d2\u05d4"}),(0,j.jsx)("button",{onClick:A,className:"mt-4 px-6 py-2 bg-blue-500 hover:bg-blue-600 rounded-lg text-white",children:"\u05e0\u05e1\u05d4 \u05e9\u05d5\u05d1"})]})})}},7719:(e,s,t)=>{t.d(s,{A:()=>l});const l=(0,t(7784).A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])}}]);
//# sourceMappingURL=6319.6a266ebe.chunk.js.map