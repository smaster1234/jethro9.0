/*! For license information please see 6381.444a5081.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[6381],{797:(e,s,t)=>{t.d(s,{A:()=>l});const l=(0,t(7784).A)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])},2054:(e,s,t)=>{t.d(s,{A:()=>l});const l=(0,t(7784).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},2574:(e,s,t)=>{t.d(s,{A:()=>l});const l=(0,t(7784).A)("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]])},2629:(e,s,t)=>{t.d(s,{A:()=>l});const l=(0,t(7784).A)("crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]])},4669:(e,s,t)=>{t.d(s,{A:()=>l});const l=(0,t(7784).A)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]])},5469:(e,s,t)=>{t.d(s,{A:()=>l});const l=(0,t(7784).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},5569:(e,s,t)=>{t.d(s,{i:()=>c});var l=t(9379),a=t(4131),r=t(4893),n=t(9688),i=t(8018);const c=(0,a.v)()((0,r.Zr)((e,s)=>({selectedCase:null,selectedCaseId:null,cases:[],stats:null,casesLoading:!1,casesError:null,lastFetched:null,currentAnalysis:null,analysisLoading:!1,analysisError:null,intelligenceData:null,intelligenceLoading:!1,timelineData:null,graphData:null,setCases:s=>e({cases:s}),fetchCases:async function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{casesLoading:l,lastFetched:a,cases:r}=s();if(l)return{cases:r,stats:s().stats};if(!t&&r.length>0&&a){if(Date.now()-a<3e4)return{cases:r,stats:s().stats}}e({casesLoading:!0,casesError:null});try{const s=await(0,n.apiGet)("/api/cases",{showErrorToast:!1}),t={cases:s.cases||[],stats:s.stats||{total:0,critical:0,high:0,medium:0}};return e({cases:t.cases,stats:t.stats,casesLoading:!1,lastFetched:Date.now(),casesError:null}),t}catch(c){const s=c instanceof Error?c.message:"Failed to load cases";return i.v.error("Failed to fetch cases:",c),e({casesLoading:!1,casesError:s}),{cases:[],stats:null}}},invalidateCache:()=>e({lastFetched:null}),addCase:s=>e(e=>({cases:[s,...e.cases]})),updateCase:(s,t)=>e(e=>({cases:e.cases.map(e=>e.id===s?(0,l.A)((0,l.A)({},e),t):e)})),removeCase:s=>e(e=>(0,l.A)({cases:e.cases.filter(e=>e.id!==s)},e.selectedCaseId===s&&{selectedCase:null,selectedCaseId:null,currentAnalysis:null})),setCasesLoading:s=>e({casesLoading:s}),setCasesError:s=>e({casesError:s}),selectCase:s=>e({selectedCase:s,selectedCaseId:(null===s||void 0===s?void 0:s.id)||null}),clearSelectedCase:()=>e({selectedCase:null,selectedCaseId:null,currentAnalysis:null,intelligenceData:null,timelineData:null,graphData:null}),updateSelectedCase:s=>e(e=>({selectedCase:e.selectedCase?(0,l.A)((0,l.A)({},e.selectedCase),s):null})),setAnalysis:s=>e({currentAnalysis:s,analysisError:null}),setAnalysisLoading:s=>e({analysisLoading:s}),setAnalysisError:s=>e({analysisError:s}),updateAnalysis:(s,t)=>e(e=>({currentAnalysis:e.currentAnalysis?(0,l.A)((0,l.A)({},e.currentAnalysis),{},{[s]:t}):null})),setIntelligence:s=>e({intelligenceData:s}),setIntelligenceLoading:s=>e({intelligenceLoading:s}),clearIntelligence:()=>e({intelligenceData:null}),setTimeline:s=>e({timelineData:s}),setGraph:s=>e({graphData:s}),getCaseById:e=>{const{cases:t}=s();return t.find(s=>s.id===e)},getCasesByStatus:e=>{const{cases:t}=s();return t.filter(s=>s.status===e)},countByStatus:()=>{const{cases:e}=s();return{completed:e.filter(e=>"completed"===e.status).length,analyzing:e.filter(e=>"analyzing"===e.status).length,failed:e.filter(e=>"failed"===e.status).length,total:e.length}},getAnalysisResults:()=>{const{currentAnalysis:e}=s();return e?{contradictions:e.contradictions||[],claims:e.claims||[],entities:e.entities||[],insights:e.insights||[],roadmap:e.roadmap||[],strategies:e.strategies||[]}:null},reset:()=>e({selectedCase:null,selectedCaseId:null,cases:[],casesLoading:!1,casesError:null,currentAnalysis:null,analysisLoading:!1,analysisError:null,intelligenceData:null,intelligenceLoading:!1,timelineData:null,graphData:null})}),{name:"cases-storage",partialize:e=>({selectedCaseId:e.selectedCaseId})}))},5692:(e,s,t)=>{t.d(s,{A:()=>l});const l=(0,t(7784).A)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},6382:(e,s,t)=>{t.d(s,{A:()=>l});const l=(0,t(7784).A)("brain",[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]])},7104:(e,s,t)=>{t.d(s,{A:()=>l});const l=(0,t(7784).A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},7719:(e,s,t)=>{t.d(s,{A:()=>l});const l=(0,t(7784).A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},8046:(e,s,t)=>{t.r(s),t.d(s,{default:()=>ee});var l=t(9379),a=t(5043),r=t(3216),n=t(1360),i=t(6382),c=t(2629),d=t(7819),o=t(1680),x=t(4459),m=t(6099),u=t(5469),h=t(797),p=t(73),b=t(7033),g=t(4669);const f=(0,t(7784).A)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);var j=t(516),v=t(614),N=t(6328),w=t(6784),y=t(9292),C=t(2024),k=t(8646),_=t(2574),A=t(5569),z=t(579);const S=e=>{let{onClose:s,onSelectCase:t,onNewCase:l,onUploadToCase:r}=e;const[i,c]=(0,a.useState)(""),{cases:d,casesLoading:x,fetchCases:m}=(0,A.i)();(0,a.useEffect)(()=>{m()},[m]);const u=(0,a.useMemo)(()=>{if(!i.trim())return d;const e=i.toLowerCase();return d.filter(s=>{var t,l,a;return(null===(t=s.name)||void 0===t?void 0:t.toLowerCase().includes(e))||(null===(l=s.case_number)||void 0===l?void 0:l.toLowerCase().includes(e))||(null===(a=s.id)||void 0===a?void 0:a.toLowerCase().includes(e))})},[i,d]),h=e=>{t&&t(e)};return(0,z.jsx)("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-fade-in",children:(0,z.jsxs)("div",{className:"bg-slate-900/95 backdrop-blur-xl rounded-2xl shadow-2xl shadow-glass border border-white/10 w-full max-w-lg md:max-w-3xl max-h-[85vh] overflow-hidden flex flex-col animate-scale-in",children:[(0,z.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 p-4 md:p-6 text-white",children:(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("h2",{className:"text-xl md:text-2xl font-bold",children:"\u05e0\u05d9\u05ea\u05d5\u05d7 \u05de\u05e1\u05de\u05db\u05d9\u05dd"}),(0,z.jsx)("p",{className:"text-purple-100 text-xs md:text-sm mt-1",children:"\u05d1\u05d7\u05e8 \u05ea\u05d9\u05e7 \u05e7\u05d9\u05d9\u05dd \u05d0\u05d5 \u05e6\u05d5\u05e8 \u05ea\u05d9\u05e7 \u05d7\u05d3\u05e9"})]}),(0,z.jsx)("button",{onClick:s,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:(0,z.jsx)(v.A,{size:24})})]})}),(0,z.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:[(0,z.jsxs)("div",{className:"mb-8",children:[(0,z.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,z.jsx)("div",{className:"w-10 h-10 bg-blue-500/20 rounded-full flex items-center justify-center border border-blue-500/30",children:(0,z.jsx)(w.A,{className:"text-blue-400",size:20})}),(0,z.jsxs)("div",{children:[(0,z.jsx)("h3",{className:"text-lg font-bold text-white",children:"\u05d1\u05d7\u05e8 \u05ea\u05d9\u05e7 \u05e7\u05d9\u05d9\u05dd"}),(0,z.jsx)("p",{className:"text-sm text-slate-400",children:"\u05d4\u05d5\u05e1\u05e3 \u05de\u05e1\u05de\u05db\u05d9\u05dd \u05dc\u05ea\u05d9\u05e7 \u05e9\u05db\u05d1\u05e8 \u05e7\u05d9\u05d9\u05dd"})]})]}),(0,z.jsxs)("div",{className:"relative mb-4",children:[(0,z.jsx)(y.A,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400",size:20}),(0,z.jsx)("input",{type:"text",value:i,onChange:e=>{c(e.target.value)},placeholder:"\u05d7\u05e4\u05e9 \u05dc\u05e4\u05d9 \u05e9\u05dd \u05ea\u05d9\u05e7, \u05de\u05e1\u05e4\u05e8 \u05ea\u05d9\u05e7 \u05d0\u05d5 \u05de\u05d6\u05d4\u05d4...",className:"w-full pr-10 pl-4 py-3 bg-white/5 border border-white/10 rounded-xl focus:ring-2 focus:ring-purple-500/50 focus:border-purple-500/50 text-right text-white placeholder-slate-500"})]}),x?(0,z.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,z.jsx)(C.A,{className:"animate-spin text-purple-400",size:32})}):u.length>0?(0,z.jsx)("div",{className:"space-y-2 max-h-[300px] overflow-y-auto pr-1",children:u.map(e=>(0,z.jsx)("div",{className:"w-full text-right p-4 bg-white/5 border border-white/10 rounded-xl hover:border-purple-500/50 hover:bg-white/10 transition-all",children:(0,z.jsx)("div",{className:"flex items-center justify-between",children:(0,z.jsxs)("div",{className:"flex-1",children:[(0,z.jsx)("div",{className:"font-medium text-white",children:e.case_name||e.name||"\u05dc\u05dc\u05d0 \u05e9\u05dd"}),(0,z.jsxs)("div",{className:"flex items-center gap-4 mt-1 text-sm text-slate-400",children:[e.case_number&&(0,z.jsxs)("span",{children:["\u05de\u05e1\u05e4\u05e8: ",e.case_number]}),e.created_at&&(0,z.jsxs)("span",{className:"flex items-center gap-1",children:[(0,z.jsx)(k.A,{size:14}),new Date(e.created_at).toLocaleDateString("he-IL")]}),e.status&&(0,z.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs border ".concat("completed"===e.status?"bg-green-500/20 text-green-400 border-green-500/30":"analyzing"===e.status?"bg-blue-500/20 text-blue-400 border-blue-500/30":"bg-slate-500/20 text-slate-400 border-slate-500/30"),children:"completed"===e.status?"\u05d4\u05d5\u05e9\u05dc\u05dd":"analyzing"===e.status?"\u05d1\u05e0\u05d9\u05ea\u05d5\u05d7":e.status})]}),(0,z.jsxs)("div",{className:"flex items-center gap-2 mt-3",children:[(0,z.jsxs)("button",{onClick:()=>{r?r(e):h(e)},className:"px-4 py-1.5 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm font-medium flex items-center gap-1",children:[(0,z.jsx)(o.A,{size:16}),"\u05d4\u05e2\u05dc\u05d4 \u05de\u05e1\u05de\u05db\u05d9\u05dd"]}),"completed"===e.status&&(0,z.jsxs)("button",{onClick:s=>{s.stopPropagation(),h(e)},className:"px-3 py-1.5 bg-blue-500/20 text-blue-400 border border-blue-500/30 rounded-lg hover:bg-blue-500/30 transition-colors text-sm font-medium flex items-center gap-1",title:"\u05e9\u05d5\u05d7\u05d7 \u05e2\u05dd \u05d9\u05ea\u05e8\u05d5 \u05e2\u05dc \u05d4\u05ea\u05d9\u05e7",children:[(0,z.jsx)(_.A,{size:16}),"\u05e6'\u05d0\u05d8 \u05e2\u05dd \u05d9\u05ea\u05e8\u05d5"]})]})]})})},e.id))}):i?(0,z.jsxs)("div",{className:"text-center py-8",children:[(0,z.jsx)(y.A,{className:"mx-auto mb-2 text-slate-500",size:48}),(0,z.jsx)("p",{className:"text-slate-400",children:"\u05dc\u05d0 \u05e0\u05de\u05e6\u05d0\u05d5 \u05ea\u05d9\u05e7\u05d9\u05dd \u05d4\u05ea\u05d5\u05d0\u05de\u05d9\u05dd \u05d0\u05ea \u05d4\u05d7\u05d9\u05e4\u05d5\u05e9"})]}):(0,z.jsxs)("div",{className:"text-center py-8",children:[(0,z.jsx)(o.A,{className:"mx-auto mb-2 text-slate-500",size:48}),(0,z.jsx)("p",{className:"text-slate-400",children:"\u05d0\u05d9\u05df \u05ea\u05d9\u05e7\u05d9\u05dd \u05e7\u05d9\u05d9\u05de\u05d9\u05dd"})]})]}),(0,z.jsxs)("div",{className:"flex items-center gap-4 my-6",children:[(0,z.jsx)("div",{className:"flex-1 h-px bg-white/10"}),(0,z.jsx)("span",{className:"text-slate-500 text-sm",children:"\u05d0\u05d5"}),(0,z.jsx)("div",{className:"flex-1 h-px bg-white/10"})]}),(0,z.jsxs)("div",{children:[(0,z.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,z.jsx)("div",{className:"w-10 h-10 bg-purple-500/20 rounded-full flex items-center justify-center border border-purple-500/30",children:(0,z.jsx)(n.A,{className:"text-purple-400",size:20})}),(0,z.jsxs)("div",{children:[(0,z.jsx)("h3",{className:"text-lg font-bold text-white",children:"\u05e4\u05ea\u05d7 \u05ea\u05d9\u05e7 \u05d7\u05d3\u05e9"}),(0,z.jsx)("p",{className:"text-sm text-slate-400",children:"\u05e6\u05d5\u05e8 \u05ea\u05d9\u05e7 \u05d7\u05d3\u05e9 \u05d5\u05d4\u05e2\u05dc\u05d4 \u05de\u05e1\u05de\u05db\u05d9\u05dd"})]})]}),(0,z.jsxs)("button",{onClick:()=>{l&&l()},className:"w-full p-4 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-xl hover:from-purple-700 hover:to-blue-700 transition-all font-medium flex items-center justify-center gap-2 shadow-lg shadow-purple-500/20",children:[(0,z.jsx)(n.A,{size:20}),(0,z.jsx)("span",{children:"\u05d9\u05e6\u05d9\u05e8\u05ea \u05ea\u05d9\u05e7 \u05d7\u05d3\u05e9"})]})]})]})]})})};var L=t(793),E=t(3190),I=t(6210),D=t(9688),F=t(8018);const M=e=>{let{value:s,onChange:t,suggestions:l=[],placeholder:r="",className:n="",inputClassName:i="",labelClassName:c="",disabled:d=!1,maxSuggestions:o=8,minCharsToShow:x=0,label:m,required:u=!1,icon:h,variant:p="dark"}=e;const[b,g]=(0,a.useState)(!1),[f,j]=(0,a.useState)(-1),[v,N]=(0,a.useState)([]),w=(0,a.useRef)(null),y=(0,a.useRef)(null);(0,a.useEffect)(()=>{if(!l||0===l.length)return void N([]);const e=(s||"").toLowerCase().trim();if(e.length<x)N(l.slice(0,o));else{const s=l.filter(s=>s.toLowerCase().includes(e)).slice(0,o);N(s)}},[s,l,o,x]),(0,a.useEffect)(()=>{const e=e=>{y.current&&!y.current.contains(e.target)&&g(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const C=(0,a.useCallback)(e=>{t(e.target.value),g(!0),j(-1)},[t]),k=(0,a.useCallback)(()=>{v.length>0&&g(!0)},[v.length]),_=(0,a.useCallback)(e=>{var s;t(e),g(!1),j(-1),null===(s=w.current)||void 0===s||s.focus()},[t]),A=(0,a.useCallback)(e=>{if(b&&0!==v.length)switch(e.key){case"ArrowDown":e.preventDefault(),j(e=>e<v.length-1?e+1:0);break;case"ArrowUp":e.preventDefault(),j(e=>e>0?e-1:v.length-1);break;case"Enter":f>=0&&f<v.length&&(e.preventDefault(),_(v[f]));break;case"Escape":g(!1),j(-1);break;case"Tab":f>=0&&f<v.length&&_(v[f]),g(!1)}},[b,v,f,_]),S=b&&v.length>0,L="light"===p,E=L?"block text-sm font-semibold text-slate-700 mb-2":"block text-sm font-medium text-gray-300 mb-1",I=L?"w-full px-4 py-3 bg-white border border-slate-300 rounded-lg text-slate-900 placeholder-slate-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent":"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-white/40 focus:ring-2 focus:ring-purple-500/50 focus:border-purple-500/50",D=L?"text-slate-400":"text-gray-400";return(0,z.jsxs)("div",{ref:y,className:"relative ".concat(n),children:[m&&(0,z.jsxs)("label",{className:c||E,children:[m,u&&(0,z.jsx)("span",{className:"text-red-500 mr-1",children:"*"})]}),(0,z.jsxs)("div",{className:"relative",children:[h&&(0,z.jsx)("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 ".concat(D," pointer-events-none"),children:(0,z.jsx)(h,{size:18})}),(0,z.jsx)("input",{ref:w,type:"text",value:s,onChange:C,onFocus:k,onKeyDown:A,placeholder:r,disabled:d,className:"".concat(I," transition-all\n            ").concat(h?"pr-10":"","\n            ").concat(d?"opacity-50 cursor-not-allowed":"","\n            ").concat(i),autoComplete:"off"}),l.length>0&&!d&&(0,z.jsx)("button",{type:"button",onClick:()=>g(!b),className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-purple-400 transition-colors p-1",title:"\u05d4\u05d9\u05e1\u05d8\u05d5\u05e8\u05d9\u05d4",children:(0,z.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,z.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,z.jsx)("polyline",{points:"12 6 12 12 16 14"})]})})]}),S&&(0,z.jsxs)("div",{className:"absolute z-50 w-full mt-1 bg-gray-800 border border-white/20 rounded-xl shadow-lg overflow-hidden max-h-60 overflow-y-auto",children:[(0,z.jsx)("div",{className:"text-xs text-gray-400 px-3 py-1.5 border-b border-white/10",children:"\u05d4\u05d9\u05e1\u05d8\u05d5\u05e8\u05d9\u05d4 \u05d0\u05d7\u05e8\u05d5\u05e0\u05d4"}),v.map((e,s)=>(0,z.jsx)("button",{type:"button",onClick:()=>_(e),onMouseEnter:()=>j(s),className:"w-full text-right px-4 py-2.5 text-white transition-colors\n                ".concat(s===f?"bg-purple-500/30 text-purple-200":"hover:bg-white/10"),children:(0,z.jsx)("span",{className:"truncate block",children:e})},s))]})]})};var O=t(8211);const q=e=>{let{onClose:s,onCaseCreated:t}=e;const[l,r]=(0,a.useState)(4),[i,c]=(0,a.useState)(!1),[m,u]=(0,a.useState)(null),[p,b]=(0,a.useState)(""),[g,f]=(0,a.useState)(""),[j,w]=(0,a.useState)(""),[y,C]=(0,a.useState)(""),[k,_]=(0,a.useState)(""),[A,S]=(0,a.useState)("plaintiff"),[q,R]=(0,a.useState)(""),[T,P]=(0,a.useState)(""),[B,W]=(0,a.useState)(""),[G,$]=(0,a.useState)("defendant"),[H,U]=(0,a.useState)(""),[X,J]=(0,a.useState)(""),[Z,V]=(0,a.useState)(""),[K,Y]=(0,a.useState)([]),[Q,ee]=(0,a.useState)([]),[se,te]=(0,a.useState)(""),[le,ae]=(0,a.useState)(""),[re,ne]=(0,a.useState)(""),[ie,ce]=(0,a.useState)(""),[de,oe]=(0,a.useState)(""),[xe,me]=(0,a.useState)(""),[ue,he]=(0,a.useState)(""),[pe,be]=(0,a.useState)(""),[ge,fe]=(0,a.useState)([]),[je,ve]=(0,a.useState)({party_names:[],lawyer_names:[],court_names:[],judge_names:[],case_numbers:[],witness_names:[]});(0,a.useEffect)(()=>{(async()=>{try{const e=await(0,D.apiGet)("/api/auth/input-history");null!==e&&void 0!==e&&e.input_history&&(ve(e.input_history),F.v.log("\ud83d\udccb Loaded input history"))}catch(e){F.v.warn("Failed to load input history:",e)}})()},[]);const Ne=[{value:"plaintiff",label:"\u05ea\u05d5\u05d1\u05e2",opposite:"defendant"},{value:"defendant",label:"\u05e0\u05ea\u05d1\u05e2",opposite:"plaintiff"},{value:"petitioner",label:"\u05de\u05d1\u05e7\u05e9",opposite:"respondent"},{value:"respondent",label:"\u05de\u05e9\u05d9\u05d1",opposite:"petitioner"},{value:"appellant",label:"\u05de\u05e2\u05e8\u05e2\u05e8",opposite:"respondent"},{value:"counter_plaintiff",label:"\u05ea\u05d5\u05d1\u05e2 \u05e9\u05db\u05e0\u05d2\u05d3",opposite:"counter_defendant"},{value:"counter_defendant",label:"\u05e0\u05ea\u05d1\u05e2 \u05e9\u05db\u05e0\u05d2\u05d3",opposite:"counter_plaintiff"},{value:"plaintiff_counter_defendant",label:"\u05ea\u05d5\u05d1\u05e2 + \u05e0\u05ea\u05d1\u05e2 \u05e9\u05db\u05e0\u05d2\u05d3",opposite:"defendant_counter_plaintiff"},{value:"defendant_counter_plaintiff",label:"\u05e0\u05ea\u05d1\u05e2 + \u05ea\u05d5\u05d1\u05e2 \u05e9\u05db\u05e0\u05d2\u05d3",opposite:"plaintiff_counter_defendant"}],we=e=>{const s={name:"",role:"\u05e2\u05d3",description:""};"my"===e?Y([...K,s]):ee([...Q,s])},ye=(e,s)=>{"my"===e?Y(K.filter((e,t)=>t!==s)):ee(Q.filter((e,t)=>t!==s))},Ce=(e,s,t,l)=>{if("my"===e){const e=[...K];e[s][t]=l,Y(e)}else{const e=[...Q];e[s][t]=l,ee(e)}},ke=()=>{if(1===l&&!g.trim())return u("\u05e0\u05d0 \u05dc\u05d4\u05d6\u05d9\u05df \u05e9\u05dd \u05ea\u05d9\u05e7"),!1;if(2===l){if(!q.trim())return u("\u05e0\u05d0 \u05dc\u05d4\u05d6\u05d9\u05df \u05d0\u05ea \u05e9\u05de\u05da/\u05e9\u05dd \u05d4\u05dc\u05e7\u05d5\u05d7"),!1;if(!H.trim())return u("\u05e0\u05d0 \u05dc\u05d4\u05d6\u05d9\u05df \u05e9\u05dd \u05d4\u05e6\u05d3 \u05d4\u05e9\u05e0\u05d9"),!1}return 3!==l||le.trim()?4===l&&0===ge.length?(u("\u05e0\u05d0 \u05dc\u05d4\u05e2\u05dc\u05d5\u05ea \u05dc\u05e4\u05d7\u05d5\u05ea \u05e7\u05d5\u05d1\u05e5 \u05d0\u05d7\u05d3"),!1):(u(null),!0):(u("\u05e0\u05d0 \u05dc\u05ea\u05d0\u05e8 \u05d1\u05e7\u05e6\u05e8\u05d4 \u05e2\u05dc \u05de\u05d4 \u05d4\u05de\u05d7\u05dc\u05d5\u05e7\u05ea"),!1)};return(0,z.jsx)("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,z.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,z.jsxs)("div",{className:"sticky top-0 bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6 rounded-t-2xl",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsx)("h2",{className:"text-2xl font-bold",children:"\ud83c\udd95 \u05d9\u05e6\u05d9\u05e8\u05ea \u05ea\u05d9\u05e7 \u05d7\u05d3\u05e9"}),(0,z.jsx)("button",{onClick:s,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:(0,z.jsx)(v.A,{size:24})})]}),(0,z.jsx)("div",{className:"mt-4",children:(0,z.jsx)("p",{className:"text-blue-100 text-sm",children:"\u05d4\u05e2\u05dc\u05d4 \u05de\u05e1\u05de\u05db\u05d9\u05dd \u05de\u05e9\u05e4\u05d8\u05d9\u05d9\u05dd (\u05db\u05ea\u05d1\u05d9 \u05d8\u05e2\u05e0\u05d5\u05ea, \u05e4\u05e8\u05d5\u05d8\u05d5\u05e7\u05d5\u05dc\u05d9\u05dd \u05d5\u05db\u05d5') \u05d5\u05d9\u05ea\u05e8\u05d5 \u05d9\u05d1\u05e0\u05d4 \u05d0\u05ea \u05d4\u05ea\u05d9\u05e7 \u05d0\u05d5\u05d8\u05d5\u05de\u05d8\u05d9\u05ea"})})]}),(0,z.jsxs)("div",{className:"p-8",children:[m&&(0,z.jsxs)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3",children:[(0,z.jsx)(d.A,{className:"text-red-500 flex-shrink-0 mt-0.5",size:20}),(0,z.jsx)("p",{className:"text-red-700",children:m})]}),1===l&&(0,z.jsxs)("div",{className:"space-y-6",children:[(0,z.jsxs)("div",{className:"mb-6",children:[(0,z.jsx)("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"\ud83d\udccb \u05e4\u05e8\u05d8\u05d9 \u05ea\u05d9\u05e7 \u05d1\u05e1\u05d9\u05e1\u05d9\u05d9\u05dd"}),(0,z.jsx)("p",{className:"text-slate-600 text-sm",children:"\u2705 FLOW-103 FIX: \u05de\u05dc\u05d0 \u05d0\u05ea \u05d4\u05e4\u05e8\u05d8\u05d9\u05dd \u05d4\u05d1\u05e1\u05d9\u05e1\u05d9\u05d9\u05dd \u05e9\u05dc \u05d4\u05ea\u05d9\u05e7. \u05d6\u05d4 \u05d9\u05e2\u05d6\u05d5\u05e8 \u05dc\u05d9\u05ea\u05e8\u05d5 \u05dc\u05d4\u05d1\u05d9\u05df \u05d0\u05ea \u05d4\u05d4\u05e7\u05e9\u05e8"})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"\u05e9\u05dd \u05d4\u05ea\u05d9\u05e7 *"}),(0,z.jsx)("input",{type:"text",value:g,onChange:e=>f(e.target.value),placeholder:"\u05dc\u05de\u05e9\u05dc: \u05ea\u05d1\u05d9\u05e2\u05d4 \u05db\u05e1\u05e4\u05d9\u05ea \u05e0\u05d2\u05d3 \u05d7\u05d1\u05e8\u05ea ABC",className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"\u05de\u05e1\u05e4\u05e8 \u05ea\u05d9\u05e7 (\u05d0\u05d5\u05e4\u05e6\u05d9\u05d5\u05e0\u05dc\u05d9)"}),(0,z.jsx)("input",{type:"text",value:p,onChange:e=>b(e.target.value),placeholder:"\u05dc\u05de\u05e9\u05dc: \u05e2\u05f4\u05d0 53452-12-25",className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,z.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"\u05d1\u05d9\u05ea \u05de\u05e9\u05e4\u05d8"}),(0,z.jsxs)("select",{value:j,onChange:e=>w(e.target.value),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,z.jsx)("option",{value:"",children:"\u05d1\u05d7\u05e8 \u05d1\u05d9\u05ea \u05de\u05e9\u05e4\u05d8"}),["\u05d1\u05d9\u05ea \u05de\u05e9\u05e4\u05d8 \u05d4\u05e9\u05dc\u05d5\u05dd","\u05d1\u05d9\u05ea \u05de\u05e9\u05e4\u05d8 \u05de\u05d7\u05d5\u05d6\u05d9","\u05d1\u05d9\u05ea \u05de\u05e9\u05e4\u05d8 \u05e2\u05dc\u05d9\u05d5\u05df","\u05d1\u05d9\u05ea \u05d3\u05d9\u05df \u05dc\u05e2\u05d1\u05d5\u05d3\u05d4","\u05d1\u05d9\u05ea \u05de\u05e9\u05e4\u05d8 \u05dc\u05e2\u05e0\u05d9\u05d9\u05e0\u05d9 \u05de\u05e9\u05e4\u05d7\u05d4","\u05d1\u05d9\u05ea \u05de\u05e9\u05e4\u05d8 \u05dc\u05ea\u05d1\u05d9\u05e2\u05d5\u05ea \u05e7\u05d8\u05e0\u05d5\u05ea","\u05d0\u05d7\u05e8"].map(e=>(0,z.jsx)("option",{value:e,children:e},e))]})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"\u05e1\u05d5\u05d2 \u05ea\u05d9\u05e7"}),(0,z.jsxs)("select",{value:y,onChange:e=>C(e.target.value),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,z.jsx)("option",{value:"",children:"\u05d1\u05d7\u05e8 \u05e1\u05d5\u05d2 \u05ea\u05d9\u05e7"}),["\u05ea\u05d1\u05d9\u05e2\u05d4 \u05db\u05e1\u05e4\u05d9\u05ea","\u05ea\u05d1\u05d9\u05e2\u05d4 \u05e7\u05d8\u05e0\u05d4","\u05d4\u05e4\u05e8\u05ea \u05d7\u05d5\u05d6\u05d4","\u05e0\u05d6\u05d9\u05e7\u05d9\u05df","\u05e2\u05d1\u05d5\u05d3\u05d4","\u05de\u05e9\u05e4\u05d7\u05d4","\u05e4\u05dc\u05d9\u05dc\u05d9","\u05de\u05d9\u05e0\u05d4\u05dc\u05d9","\u05d0\u05d7\u05e8"].map(e=>(0,z.jsx)("option",{value:e,children:e},e))]})]})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)(M,{value:k,onChange:_,suggestions:je.judge_names,label:"\u05e9\u05dd \u05d4\u05e9\u05d5\u05e4\u05d8/\u05d9\u05dd (\u05d0\u05d5\u05e4\u05e6\u05d9\u05d5\u05e0\u05dc\u05d9)",placeholder:"\u05dc\u05d3\u05d5\u05d2\u05de\u05d4: \u05db\u05d1' \u05d4\u05e9\u05d5\u05e4\u05d8 \u05d9\u05e9\u05e8\u05d0\u05dc \u05d9\u05e9\u05e8\u05d0\u05dc\u05d9",icon:L.A,variant:"light"}),(0,z.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:"\u05e0\u05d9\u05ea\u05df \u05dc\u05d4\u05d6\u05d9\u05df \u05de\u05e1\u05e4\u05e8 \u05e9\u05d5\u05e4\u05d8\u05d9\u05dd \u05de\u05d5\u05e4\u05e8\u05d3\u05d9\u05dd \u05d1\u05e4\u05e1\u05d9\u05e7\u05d9\u05dd"})]})]}),2===l&&(0,z.jsxs)("div",{className:"space-y-6",children:[(0,z.jsxs)("div",{className:"mb-6",children:[(0,z.jsx)("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"\ud83d\udc65 \u05de\u05d9 \u05d4\u05e6\u05d3\u05d3\u05d9\u05dd \u05d1\u05ea\u05d9\u05e7?"}),(0,z.jsx)("p",{className:"text-slate-600 text-sm",children:"\u2705 FLOW-103 FIX: \u05de\u05dc\u05d0 \u05d0\u05ea \u05e4\u05e8\u05d8\u05d9 \u05d4\u05e6\u05d3\u05d3\u05d9\u05dd. \u05d6\u05d4 \u05d9\u05e2\u05d6\u05d5\u05e8 \u05dc\u05d9\u05ea\u05e8\u05d5 \u05dc\u05d6\u05d4\u05d5\u05ea \u05e1\u05ea\u05d9\u05e8\u05d5\u05ea \u05d5\u05dc\u05d4\u05d1\u05d9\u05df \u05d0\u05ea \u05d4\u05d4\u05e7\u05e9\u05e8"})]}),(0,z.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[(0,z.jsx)("h4",{className:"font-bold text-blue-900 mb-4",children:"\ud83d\udc64 \u05d4\u05e6\u05d3 \u05e9\u05dc\u05d9"}),(0,z.jsxs)("div",{className:"space-y-4",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"\u05de\u05d4 \u05d4\u05ea\u05e4\u05e7\u05d9\u05d3 \u05e9\u05dc\u05d9 \u05d1\u05ea\u05d9\u05e7? *"}),(0,z.jsx)("select",{value:A,onChange:e=>(e=>{S(e);const s=Ne.find(s=>s.value===e);s&&$(s.opposite)})(e.target.value),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:Ne.map(e=>(0,z.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,z.jsx)("div",{children:(0,z.jsx)(M,{value:q,onChange:R,suggestions:je.party_names,label:"\u05e9\u05dd (\u05e9\u05dc\u05d9 / \u05d4\u05dc\u05e7\u05d5\u05d7) *",placeholder:"\u05dc\u05de\u05e9\u05dc: \u05d7\u05d1\u05e8\u05ea XYZ \u05d1\u05e2\u05f4\u05de",icon:x.A,variant:"light",required:!0})}),(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"\u05ea\u05d9\u05d0\u05d5\u05e8 \u05e0\u05d5\u05e1\u05e3 (\u05d0\u05d5\u05e4\u05e6\u05d9\u05d5\u05e0\u05dc\u05d9)"}),(0,z.jsx)("textarea",{value:T,onChange:e=>P(e.target.value),placeholder:"\u05dc\u05de\u05e9\u05dc: \u05d7\u05d1\u05e8\u05d4 \u05e4\u05e8\u05d8\u05d9\u05ea \u05d4\u05e2\u05d5\u05e1\u05e7\u05ea \u05d1\u05ea\u05d7\u05d5\u05dd \u05d4\u05d1\u05e0\u05d9\u05d9\u05d4",rows:2,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,z.jsx)("div",{children:(0,z.jsx)(M,{value:B,onChange:W,suggestions:je.lawyer_names,label:"\ud83d\udc68\u200d\u2696\ufe0f \u05e9\u05dd \u05e2\u05d5\u05e8\u05da \u05d4\u05d3\u05d9\u05df \u05d4\u05de\u05d9\u05d9\u05e6\u05d2 (\u05d0\u05d5\u05e4\u05e6\u05d9\u05d5\u05e0\u05dc\u05d9)",placeholder:"\u05dc\u05de\u05e9\u05dc: \u05e2\u05d5\u05f4\u05d3 \u05d9\u05e9\u05e8\u05d0\u05dc \u05d9\u05e9\u05e8\u05d0\u05dc\u05d9",icon:E.A,variant:"light"})}),(0,z.jsxs)("div",{children:[(0,z.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,z.jsx)("label",{className:"block text-sm font-semibold text-slate-700",children:"\u05e2\u05d3\u05d9 \u05d4\u05ea\u05d1\u05d9\u05e2\u05d4 \u05e9\u05dc\u05d9"}),(0,z.jsxs)("button",{onClick:()=>we("my"),className:"flex items-center gap-1 text-sm text-blue-600 hover:text-blue-700",children:[(0,z.jsx)(n.A,{size:16}),"\u05d4\u05d5\u05e1\u05e3 \u05e2\u05d3"]})]}),K.map((e,s)=>(0,z.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,z.jsx)("input",{type:"text",value:e.name,onChange:e=>Ce("my",s,"name",e.target.value),placeholder:"\u05e9\u05dd \u05d4\u05e2\u05d3",className:"flex-1 px-3 py-2 border border-slate-300 rounded-lg text-sm"}),(0,z.jsx)("button",{onClick:()=>ye("my",s),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg",children:(0,z.jsx)(v.A,{size:18})})]},s))]})]})]}),(0,z.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[(0,z.jsx)("h4",{className:"font-bold text-red-900 mb-4",children:"\u2694\ufe0f \u05d4\u05e6\u05d3 \u05d4\u05e9\u05e0\u05d9"}),(0,z.jsxs)("div",{className:"space-y-4",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"\u05ea\u05e4\u05e7\u05d9\u05d3 \u05d4\u05e6\u05d3 \u05d4\u05e9\u05e0\u05d9 *"}),(0,z.jsx)("select",{value:G,onChange:e=>$(e.target.value),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-red-500",children:Ne.map(e=>(0,z.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,z.jsx)("div",{children:(0,z.jsx)(M,{value:H,onChange:U,suggestions:je.party_names,label:"\u05e9\u05dd \u05d4\u05e6\u05d3 \u05d4\u05e9\u05e0\u05d9 *",placeholder:"\u05dc\u05de\u05e9\u05dc: \u05d7\u05d1\u05e8\u05ea ABC \u05d1\u05e2\u05f4\u05de",icon:x.A,variant:"light",required:!0})}),(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"\u05ea\u05d9\u05d0\u05d5\u05e8 \u05e0\u05d5\u05e1\u05e3 (\u05d0\u05d5\u05e4\u05e6\u05d9\u05d5\u05e0\u05dc\u05d9)"}),(0,z.jsx)("textarea",{value:X,onChange:e=>J(e.target.value),placeholder:"\u05dc\u05de\u05e9\u05dc: \u05d7\u05d1\u05e8\u05d4 \u05d2\u05d3\u05d5\u05dc\u05d4 \u05d1\u05ea\u05d7\u05d5\u05dd \u05d4\u05ea\u05e2\u05e9\u05d9\u05d9\u05d4",rows:2,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-red-500"})]}),(0,z.jsx)("div",{children:(0,z.jsx)(M,{value:Z,onChange:V,suggestions:je.lawyer_names,label:"\ud83d\udc68\u200d\u2696\ufe0f \u05e9\u05dd \u05e2\u05d5\u05e8\u05da \u05d4\u05d3\u05d9\u05df \u05e9\u05dc \u05d4\u05d9\u05e8\u05d9\u05d1 (\u05d0\u05d5\u05e4\u05e6\u05d9\u05d5\u05e0\u05dc\u05d9)",placeholder:"\u05dc\u05de\u05e9\u05dc: \u05e2\u05d5\u05f4\u05d3 \u05d3\u05d5\u05d3 \u05d3\u05d5\u05d9\u05d3\u05d9",icon:E.A,variant:"light"})}),(0,z.jsxs)("div",{children:[(0,z.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,z.jsx)("label",{className:"block text-sm font-semibold text-slate-700",children:"\u05e2\u05d3\u05d9 \u05d4\u05e6\u05d3 \u05d4\u05e9\u05e0\u05d9"}),(0,z.jsxs)("button",{onClick:()=>we("opponent"),className:"flex items-center gap-1 text-sm text-red-600 hover:text-red-700",children:[(0,z.jsx)(n.A,{size:16}),"\u05d4\u05d5\u05e1\u05e3 \u05e2\u05d3"]})]}),Q.map((e,s)=>(0,z.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,z.jsx)("input",{type:"text",value:e.name,onChange:e=>Ce("opponent",s,"name",e.target.value),placeholder:"\u05e9\u05dd \u05d4\u05e2\u05d3",className:"flex-1 px-3 py-2 border border-slate-300 rounded-lg text-sm"}),(0,z.jsx)("button",{onClick:()=>ye("opponent",s),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg",children:(0,z.jsx)(v.A,{size:18})})]},s))]})]})]})]}),3===l&&(0,z.jsxs)("div",{className:"space-y-6",children:[(0,z.jsxs)("div",{className:"mb-6",children:[(0,z.jsx)("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"\ud83c\udfaf \u05ea\u05d3\u05e8\u05d9\u05da \u05d4\u05ea\u05d9\u05e7"}),(0,z.jsx)("p",{className:"text-slate-600 text-sm",children:"\ud83d\udca1 \u05db\u05db\u05dc \u05e9\u05ea\u05e1\u05e4\u05e7 \u05d9\u05d5\u05ea\u05e8 \u05de\u05d9\u05d3\u05e2, \u05d9\u05ea\u05e8\u05d5 \u05d9\u05d1\u05d9\u05df \u05d8\u05d5\u05d1 \u05d9\u05d5\u05ea\u05e8 \u05d0\u05ea \u05d4\u05ea\u05d9\u05e7 \u05d5\u05d9\u05d5\u05db\u05dc \u05dc\u05e2\u05d6\u05d5\u05e8 \u05dc\u05da \u05d1\u05e6\u05d5\u05e8\u05d4 \u05de\u05d3\u05d5\u05d9\u05e7\u05ea \u05d9\u05d5\u05ea\u05e8"})]}),(0,z.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,z.jsx)("label",{className:"block text-sm font-bold text-blue-900 mb-2",children:"\ud83d\udccb \u05ea\u05d9\u05d0\u05d5\u05e8 \u05d4\u05de\u05d7\u05dc\u05d5\u05e7\u05ea * (2-3 \u05de\u05e9\u05e4\u05d8\u05d9\u05dd)"}),(0,z.jsx)("textarea",{value:le,onChange:e=>ae(e.target.value),placeholder:"\u05dc\u05de\u05e9\u05dc: \u05d4\u05dc\u05e7\u05d5\u05d7 \u05e9\u05dc\u05d9 \u05d1\u05d9\u05e6\u05e2 \u05e2\u05d1\u05d5\u05d3\u05d4 \u05d1\u05e1\u05da 450,000 \u20aa \u05e2\u05d1\u05d5\u05e8 \u05d4\u05e0\u05ea\u05d1\u05e2, \u05d0\u05da \u05d4\u05e0\u05ea\u05d1\u05e2 \u05de\u05e1\u05e8\u05d1 \u05dc\u05e9\u05dc\u05dd \u05d1\u05d8\u05e2\u05e0\u05d4 \u05e9\u05d4\u05e2\u05d1\u05d5\u05d3\u05d4 \u05dc\u05d0 \u05d1\u05d5\u05e6\u05e2\u05d4 \u05db\u05d4\u05dc\u05db\u05d4. \u05d0\u05e0\u05d7\u05e0\u05d5 \u05d8\u05d5\u05e2\u05e0\u05d9\u05dd \u05e9\u05d4\u05e2\u05d1\u05d5\u05d3\u05d4 \u05d1\u05d5\u05e6\u05e2\u05d4 \u05e2\u05dc \u05e4\u05d9 \u05d4\u05d4\u05e1\u05db\u05dd \u05d5\u05d4\u05e0\u05ea\u05d1\u05e2 \u05d7\u05d9\u05d9\u05d1 \u05d1\u05ea\u05e9\u05dc\u05d5\u05dd.",rows:4,className:"w-full px-4 py-3 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white"})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"\ud83c\udfaf \u05de\u05d4 \u05d4\u05e1\u05e2\u05d3 / \u05d4\u05ea\u05d5\u05e6\u05d0\u05d4 \u05e9\u05d0\u05ea\u05d4 \u05de\u05d1\u05e7\u05e9?"}),(0,z.jsx)("textarea",{value:re,onChange:e=>ne(e.target.value),placeholder:"\u05dc\u05de\u05e9\u05dc: \u05ea\u05e9\u05dc\u05d5\u05dd 450,000 \u20aa + \u05e8\u05d9\u05d1\u05d9\u05ea \u05d5\u05d4\u05e6\u05de\u05d3\u05d4 \u05de\u05d9\u05d5\u05dd \u05d4\u05d2\u05e9\u05ea \u05d4\u05ea\u05d1\u05d9\u05e2\u05d4, \u05d4\u05d5\u05e6\u05d0\u05d5\u05ea \u05de\u05e9\u05e4\u05d8 \u05d5\u05e9\u05db\u05f4\u05d8 \u05e2\u05d5\u05f4\u05d3",rows:2,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,z.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,z.jsx)("label",{className:"block text-sm font-bold text-red-900 mb-2",children:"\u2694\ufe0f \u05de\u05d4 \u05d4\u05d8\u05e2\u05e0\u05d4 \u05d4\u05de\u05e8\u05db\u05d6\u05d9\u05ea \u05e9\u05dc \u05d4\u05e6\u05d3 \u05d4\u05e9\u05e0\u05d9?"}),(0,z.jsx)("textarea",{value:ie,onChange:e=>ce(e.target.value),placeholder:"\u05dc\u05de\u05e9\u05dc: \u05d4\u05e0\u05ea\u05d1\u05e2 \u05d8\u05d5\u05e2\u05df \u05e9\u05d4\u05e2\u05d1\u05d5\u05d3\u05d4 \u05dc\u05d0 \u05d1\u05d5\u05e6\u05e2\u05d4 \u05e2\u05dc \u05e4\u05d9 \u05d4\u05de\u05e4\u05e8\u05d8, \u05d4\u05d9\u05d5 \u05dc\u05d9\u05e7\u05d5\u05d9\u05d9\u05dd \u05e8\u05d1\u05d9\u05dd, \u05d5\u05dc\u05db\u05df \u05d4\u05d5\u05d0 \u05d6\u05db\u05d0\u05d9 \u05dc\u05e7\u05d6\u05d6 \u05d0\u05ea \u05e2\u05dc\u05d5\u05ea \u05d4\u05ea\u05d9\u05e7\u05d5\u05e0\u05d9\u05dd",rows:3,className:"w-full px-4 py-3 border border-red-300 rounded-lg focus:ring-2 focus:ring-red-500 bg-white"}),(0,z.jsx)("p",{className:"text-xs text-red-700 mt-2",children:"\ud83d\udca1 \u05d6\u05d4 \u05e7\u05e8\u05d9\u05d8\u05d9 - \u05db\u05db\u05dc \u05e9\u05ea\u05d1\u05d9\u05df \u05d8\u05d5\u05d1 \u05d9\u05d5\u05ea\u05e8 \u05d0\u05ea \u05e2\u05de\u05d3\u05ea \u05d4\u05d9\u05e8\u05d9\u05d1, \u05d9\u05ea\u05e8\u05d5 \u05d9\u05d5\u05db\u05dc \u05dc\u05e2\u05d6\u05d5\u05e8 \u05dc\u05da \u05dc\u05d4\u05ea\u05de\u05d5\u05d3\u05d3 \u05d0\u05d9\u05ea\u05d4"})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"\u2753 \u05de\u05d4 \u05d4\u05e4\u05dc\u05d5\u05d2\u05ea\u05d0\u05d5\u05ea \u05d4\u05de\u05e8\u05db\u05d6\u05d9\u05d5\u05ea? (\u05de\u05d4 \u05e9\u05e0\u05d5\u05d9 \u05d1\u05de\u05d7\u05dc\u05d5\u05e7\u05ea)"}),(0,z.jsx)("textarea",{value:pe,onChange:e=>be(e.target.value),placeholder:"\u05dc\u05de\u05e9\u05dc: 1. \u05d4\u05d0\u05dd \u05d4\u05e2\u05d1\u05d5\u05d3\u05d4 \u05d1\u05d5\u05e6\u05e2\u05d4 \u05e2\u05dc \u05e4\u05d9 \u05d4\u05de\u05e4\u05e8\u05d8? 2. \u05d4\u05d0\u05dd \u05d4\u05dc\u05d9\u05e7\u05d5\u05d9\u05d9\u05dd \u05d4\u05e0\u05d8\u05e2\u05e0\u05d9\u05dd \u05d0\u05db\u05df \u05e7\u05d9\u05d9\u05de\u05d9\u05dd? 3. \u05de\u05d4 \u05d2\u05d5\u05d1\u05d4 \u05d4\u05e0\u05d6\u05e7 \u05d4\u05d0\u05de\u05d9\u05ea\u05d9?",rows:3,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,z.jsx)("div",{className:"border border-slate-200 rounded-lg overflow-hidden",children:(0,z.jsxs)("details",{className:"group",children:[(0,z.jsxs)("summary",{className:"px-4 py-3 bg-slate-50 cursor-pointer hover:bg-slate-100 flex items-center justify-between",children:[(0,z.jsx)("span",{className:"font-semibold text-slate-700",children:"\ud83d\udcaa \u05e0\u05e7\u05d5\u05d3\u05d5\u05ea \u05d7\u05d5\u05d6\u05e7 \u05d5\u05d7\u05d5\u05dc\u05e9\u05d4 (\u05de\u05d5\u05de\u05dc\u05e5 \u05dc\u05de\u05dc\u05d0)"}),(0,z.jsx)("span",{className:"text-slate-400 group-open:rotate-180 transition-transform",children:"\u25bc"})]}),(0,z.jsxs)("div",{className:"p-4 space-y-4",children:[(0,z.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[(0,z.jsx)("label",{className:"block text-sm font-semibold text-green-800 mb-2",children:"\u2705 \u05e0\u05e7\u05d5\u05d3\u05d5\u05ea \u05d4\u05d7\u05d5\u05d6\u05e7 \u05e9\u05dc\u05d9"}),(0,z.jsx)("textarea",{value:de,onChange:e=>oe(e.target.value),placeholder:"\u05dc\u05de\u05e9\u05dc: \u05d9\u05e9 \u05dc\u05e0\u05d5 \u05d7\u05d5\u05d6\u05d4 \u05d7\u05ea\u05d5\u05dd, \u05ea\u05d9\u05e2\u05d5\u05d3 \u05de\u05dc\u05d0 \u05e9\u05dc \u05d4\u05e2\u05d1\u05d5\u05d3\u05d4, \u05d0\u05d9\u05e9\u05d5\u05e8\u05d9 \u05e7\u05d1\u05dc\u05d4 \u05de\u05d4\u05e0\u05ea\u05d1\u05e2",rows:2,className:"w-full px-3 py-2 border border-green-300 rounded-lg text-sm bg-white"})]}),(0,z.jsxs)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3",children:[(0,z.jsx)("label",{className:"block text-sm font-semibold text-amber-800 mb-2",children:"\u26a0\ufe0f \u05e0\u05e7\u05d5\u05d3\u05d5\u05ea \u05d4\u05d7\u05d5\u05dc\u05e9\u05d4 \u05e9\u05dc\u05d9 (\u05d7\u05e9\u05d5\u05d1 \u05dc\u05d4\u05d9\u05d5\u05ea \u05db\u05e0\u05d4)"}),(0,z.jsx)("textarea",{value:xe,onChange:e=>me(e.target.value),placeholder:"\u05dc\u05de\u05e9\u05dc: \u05d4\u05d9\u05d4 \u05e2\u05d9\u05db\u05d5\u05d1 \u05e9\u05dc \u05e9\u05d1\u05d5\u05e2\u05d9\u05d9\u05dd \u05d1\u05d1\u05d9\u05e6\u05d5\u05e2, \u05d7\u05dc\u05e7 \u05de\u05d4\u05e2\u05d1\u05d5\u05d3\u05d4 \u05dc\u05d0 \u05ea\u05d5\u05e2\u05d3",rows:2,className:"w-full px-3 py-2 border border-amber-300 rounded-lg text-sm bg-white"}),(0,z.jsx)("p",{className:"text-xs text-amber-700 mt-1",children:"\ud83d\udca1 \u05dc\u05d4\u05d9\u05d5\u05ea \u05db\u05e0\u05d4 \u05dc\u05d2\u05d1\u05d9 \u05d7\u05d5\u05dc\u05e9\u05d5\u05ea \u05d9\u05e2\u05d6\u05d5\u05e8 \u05dc\u05d9\u05ea\u05e8\u05d5 \u05dc\u05d4\u05db\u05d9\u05df \u05d0\u05d5\u05ea\u05da \u05dc\u05d8\u05d9\u05e2\u05d5\u05e0\u05d9 \u05d4\u05d9\u05e8\u05d9\u05d1"})]}),(0,z.jsxs)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-3",children:[(0,z.jsx)("label",{className:"block text-sm font-semibold text-purple-800 mb-2",children:"\ud83c\udfaf \u05e0\u05e7\u05d5\u05d3\u05d5\u05ea \u05d7\u05d5\u05dc\u05e9\u05d4 \u05e9\u05dc \u05d4\u05d9\u05e8\u05d9\u05d1"}),(0,z.jsx)("textarea",{value:ue,onChange:e=>he(e.target.value),placeholder:"\u05dc\u05de\u05e9\u05dc: \u05dc\u05d0 \u05e4\u05e0\u05d4 \u05d1\u05d6\u05de\u05df \u05d0\u05de\u05ea \u05dc\u05ea\u05e7\u05df, \u05d4\u05de\u05e9\u05d9\u05da \u05dc\u05d4\u05e9\u05ea\u05de\u05e9 \u05d1\u05ea\u05d5\u05e6\u05e8, \u05dc\u05d0 \u05d4\u05d5\u05db\u05d9\u05d7 \u05e0\u05d6\u05e7",rows:2,className:"w-full px-3 py-2 border border-purple-300 rounded-lg text-sm bg-white"})]})]})]})}),(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"\ud83d\udcdd \u05d4\u05e7\u05e9\u05e8 \u05e0\u05d5\u05e1\u05e3 (\u05d0\u05d5\u05e4\u05e6\u05d9\u05d5\u05e0\u05dc\u05d9)"}),(0,z.jsx)("textarea",{value:se,onChange:e=>te(e.target.value),placeholder:"\u05de\u05d9\u05d3\u05e2 \u05e0\u05d5\u05e1\u05e3 \u05e9\u05d7\u05e9\u05d5\u05d1 \u05e9\u05d9\u05ea\u05e8\u05d5 \u05d9\u05d3\u05e2 - \u05d4\u05d9\u05e1\u05d8\u05d5\u05e8\u05d9\u05d4 \u05d1\u05d9\u05df \u05d4\u05e6\u05d3\u05d3\u05d9\u05dd, \u05d4\u05dc\u05d9\u05db\u05d9\u05dd \u05e7\u05d5\u05d3\u05de\u05d9\u05dd, \u05d5\u05db\u05d5'",rows:3,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),4===l&&(0,z.jsxs)("div",{className:"space-y-6",children:[(0,z.jsxs)("div",{className:"mb-6",children:[(0,z.jsx)("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"\ud83d\udcc4 \u05d4\u05e2\u05dc\u05d0\u05ea \u05de\u05e1\u05de\u05db\u05d9\u05dd"}),(0,z.jsx)("p",{className:"text-slate-600 text-sm",children:"\u05d4\u05e2\u05dc\u05d4 \u05d0\u05ea \u05d4\u05de\u05e1\u05de\u05db\u05d9\u05dd \u05d4\u05de\u05e9\u05e4\u05d8\u05d9\u05d9\u05dd \u05e9\u05dc\u05da. \u05d9\u05ea\u05e8\u05d5 \u05d9\u05e0\u05ea\u05d7 \u05d0\u05d5\u05ea\u05dd \u05d0\u05d5\u05d8\u05d5\u05de\u05d8\u05d9\u05ea \u05d5\u05d9\u05d4\u05d9\u05d4 \u05d6\u05de\u05d9\u05df \u05dc\u05e2\u05e0\u05d5\u05ea \u05e2\u05dc \u05e9\u05d0\u05dc\u05d5\u05ea\u05d9\u05da."})]}),(0,z.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-sm text-blue-900",children:[(0,z.jsx)("p",{className:"font-semibold mb-2",children:"\ud83d\udca1 \u05d8\u05d9\u05e4\u05d9\u05dd \u05dc\u05d4\u05e2\u05dc\u05d0\u05d4 \u05de\u05d5\u05e6\u05dc\u05d7\u05ea:"}),(0,z.jsxs)("ul",{className:"list-disc list-inside space-y-1 mr-2",children:[(0,z.jsx)("li",{children:"\u05d4\u05e2\u05dc\u05d4 \u05e7\u05d1\u05e6\u05d9 PDF, Word, \u05d0\u05d5 \u05ea\u05de\u05d5\u05e0\u05d5\u05ea"}),(0,z.jsx)("li",{children:"\u05db\u05db\u05dc \u05e9\u05ea\u05e2\u05dc\u05d4 \u05d9\u05d5\u05ea\u05e8 \u05de\u05e1\u05de\u05db\u05d9\u05dd, \u05d9\u05ea\u05e8\u05d5 \u05d9\u05d1\u05d9\u05df \u05d8\u05d5\u05d1 \u05d9\u05d5\u05ea\u05e8 \u05d0\u05ea \u05d4\u05ea\u05d9\u05e7"}),(0,z.jsx)("li",{children:"\u05dc\u05d0\u05d7\u05e8 \u05d4\u05d4\u05e2\u05dc\u05d0\u05d4 \u05ea\u05d5\u05db\u05dc \u05dc\u05e9\u05d0\u05d5\u05dc \u05e9\u05d0\u05dc\u05d5\u05ea \u05e2\u05dc \u05d4\u05de\u05e1\u05de\u05db\u05d9\u05dd \u05d1\u05e6'\u05d0\u05d8"})]})]}),(0,z.jsxs)("div",{className:"border-2 border-dashed border-slate-300 rounded-lg p-8 text-center hover:border-blue-500 transition-colors",children:[(0,z.jsx)(h.A,{className:"mx-auto text-slate-400 mb-4",size:48}),(0,z.jsx)("input",{type:"file",multiple:!0,accept:".pdf,.png,.jpg,.jpeg,.txt,.docx",onChange:e=>{const s=Array.from(e.target.files||[]);fe(e=>[...e,...s.map(e=>({id:Date.now()+Math.random(),file:e,name:e.name,size:(e.size/1024/1024).toFixed(2)+" MB"}))])},className:"hidden",id:"file-upload-wizard"}),(0,z.jsx)("label",{htmlFor:"file-upload-wizard",className:"cursor-pointer text-blue-600 hover:text-blue-700 font-semibold",children:"\u05dc\u05d7\u05e5 \u05dc\u05d1\u05d7\u05d9\u05e8\u05ea \u05e7\u05d1\u05e6\u05d9\u05dd"}),(0,z.jsx)("p",{className:"text-slate-500 text-sm mt-2",children:"PDF, Word, PNG, JPG, TXT"})]}),ge.length>0&&(0,z.jsxs)("div",{className:"space-y-3",children:[(0,z.jsxs)("p",{className:"font-semibold text-slate-700",children:["\u05e7\u05d1\u05e6\u05d9\u05dd \u05e0\u05d1\u05d7\u05e8\u05d9\u05dd (",ge.length,")"]}),ge.map(e=>(0,z.jsxs)("div",{className:"bg-slate-50 p-3 rounded-lg border border-slate-200 flex items-center justify-between",children:[(0,z.jsxs)("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[(0,z.jsx)(o.A,{className:"text-blue-500 flex-shrink-0",size:20}),(0,z.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,z.jsx)("p",{className:"text-sm font-semibold text-slate-800 truncate",children:e.name}),(0,z.jsx)("p",{className:"text-xs text-slate-500",children:e.size})]})]}),(0,z.jsx)("button",{onClick:()=>{return s=e.id,void fe(e=>e.filter(e=>e.id!==s));var s},className:"text-red-500 hover:text-red-600 flex-shrink-0 ml-2",children:(0,z.jsx)(v.A,{size:20})})]},e.id))]})]})]}),(0,z.jsxs)("div",{className:"sticky bottom-0 bg-slate-50 border-t border-slate-200 p-6 rounded-b-2xl",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsx)("button",{onClick:s,className:"flex items-center gap-2 px-6 py-3 bg-white border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",children:"\u05d1\u05d9\u05d8\u05d5\u05dc"}),(0,z.jsx)("button",{onClick:async()=>{if(ke()){c(!0),u(null);try{const a=g.trim()||(ge.length>0?"\u05ea\u05d9\u05e7 ".concat((new Date).toLocaleDateString("he-IL")," - ").concat(ge[0].name.replace(/\.[^/.]+$/,"").slice(0,30)):"\u05ea\u05d9\u05e7 \u05d7\u05d3\u05e9 - ".concat((new Date).toLocaleDateString("he-IL"))),r={name:a,case_number:p||"",court:j||"",case_type:y||"general"},n=await(0,D.$P)("/api/cases",r,{showErrorToast:!1}),{case:i,warnings:c}=n,d=i.id;c&&c.length>0&&c.forEach(e=>{N.oR.warning(e.message,{duration:8e3,icon:"\u26a0\ufe0f",description:e.percent>=90?"\u05e9\u05d3\u05e8\u05d2 \u05d0\u05ea \u05d4\u05de\u05e0\u05d5\u05d9 \u05db\u05d3\u05d9 \u05dc\u05d4\u05de\u05e9\u05d9\u05da \u05dc\u05d9\u05e6\u05d5\u05e8 \u05ea\u05d9\u05e7\u05d9\u05dd":void 0})});const o=k.trim()?k.split(",").map(e=>({name:e.trim(),role:""})).filter(e=>e.name):[],x={court_info:j||p?{court_name:j||null,case_number:p||null}:null,my_side:q.trim()?{party_name:q.trim(),party_role:A,party_description:T||null,lawyer_name:B||null}:null,opposing_side:H.trim()?{party_name:H.trim(),party_role:G,party_description:X||null,lawyer_name:Z||null}:null,my_witnesses:K.filter(e=>e.name.trim()),opposing_witnesses:Q.filter(e=>e.name.trim()),judges:o,case_briefing:{dispute_summary:le.trim()||null,relief_sought:re.trim()||null,opponent_main_argument:ie.trim()||null,key_issues:pe.trim()||null,my_strengths:de.trim()||null,my_weaknesses:xe.trim()||null,opponent_weaknesses:ue.trim()||null,additional_context:se.trim()||null},case_context:"".concat(le,"\n\n").concat(se).trim()};try{await(0,D.$P)("/api/cases/".concat(d,"/context"),x,{showErrorToast:!1})}catch(e){F.v.warn("Failed to save context, but case created:",e)}if(ge.length>0){const e="case-".concat(d);(0,O.Pr)({id:e,type:"case",name:g,totalFiles:ge.length,processedFiles:0,documents:ge.map(e=>({filename:e.name,status:"pending",canRetry:!0}))});const s=new FormData;ge.forEach(e=>{s.append("files",e.file)}),s.append("file_sources",JSON.stringify(ge.map(()=>"self"))),s.append("document_types",JSON.stringify(ge.map(()=>"other"))),s.append("opponent_lawyer_names",JSON.stringify(ge.map(()=>"")));try{await(0,D.yX)("/api/cases/".concat(d,"/files"),s,{showErrorToast:!1}),F.v.log("[NewCaseWizard] Files uploaded, tracking progress for job ".concat(e))}catch(l){throw(0,O.vq)(e,l.message||"\u05d4\u05e2\u05dc\u05d0\u05ea \u05d4\u05e7\u05d1\u05e6\u05d9\u05dd \u05e0\u05db\u05e9\u05dc\u05d4",!0),l}}await(async()=>{const s=[];if(q.trim()&&s.push({field:"party_names",value:q.trim()}),H.trim()&&s.push({field:"party_names",value:H.trim()}),B.trim()&&s.push({field:"lawyer_names",value:B.trim()}),Z.trim()&&s.push({field:"lawyer_names",value:Z.trim()}),j.trim()&&s.push({field:"court_names",value:j.trim()}),k.trim()&&s.push({field:"judge_names",value:k.trim()}),p.trim()&&s.push({field:"case_numbers",value:p.trim()}),K.forEach(e=>{var t;null!==(t=e.name)&&void 0!==t&&t.trim()&&s.push({field:"witness_names",value:e.name.trim()})}),Q.forEach(e=>{var t;null!==(t=e.name)&&void 0!==t&&t.trim()&&s.push({field:"witness_names",value:e.name.trim()})}),ge.forEach(e=>{var t;null!==(t=e.opponent_lawyer_name)&&void 0!==t&&t.trim()&&s.push({field:"lawyer_names",value:e.opponent_lawyer_name.trim()})}),s.length>0)try{await(0,D.$P)("/api/auth/input-history/batch",{items:s}),F.v.log("\u2705 Saved ".concat(s.length," items to input history"))}catch(e){F.v.warn("Failed to save input history:",e)}})(),window.dispatchEvent(new CustomEvent("caseCreated",{detail:{caseId:d,caseName:a}})),t&&t(i.id||i),s&&s(),t||(window.location.href="/cases/".concat(d))}catch(e){const s=e.message||"\u05e9\u05d2\u05d9\u05d0\u05d4 \u05dc\u05d0 \u05d9\u05d3\u05d5\u05e2\u05d4";u("\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05d9\u05e6\u05d9\u05e8\u05ea \u05d4\u05ea\u05d9\u05e7: ".concat(s,". \u05d0\u05e0\u05d0 \u05e0\u05e1\u05d4 \u05e9\u05d5\u05d1 \u05d0\u05d5 \u05e4\u05e0\u05d4 \u05dc\u05ea\u05de\u05d9\u05db\u05d4 \u05d0\u05dd \u05d4\u05d1\u05e2\u05d9\u05d4 \u05e0\u05de\u05e9\u05db\u05ea."))}finally{c(!1)}}},disabled:i||0===ge.length,className:"flex items-center gap-2 px-8 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-lg hover:from-green-600 hover:to-emerald-700 transition-all font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:i?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"\u05de\u05e2\u05dc\u05d4 \u05d5\u05de\u05e0\u05ea\u05d7..."]}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(I.A,{size:20}),"\u05d4\u05e2\u05dc\u05d4 \u05d5\u05e0\u05ea\u05d7"]})})]}),(0,z.jsx)("p",{className:"text-center text-xs text-slate-500 mt-4",children:0===ge.length?"\u05d4\u05e2\u05dc\u05d4 \u05de\u05e1\u05de\u05db\u05d9\u05dd \u05dc\u05d4\u05de\u05e9\u05da":"".concat(ge.length," \u05e7\u05d1\u05e6\u05d9\u05dd \u05de\u05d5\u05db\u05e0\u05d9\u05dd \u05dc\u05d4\u05e2\u05dc\u05d0\u05d4")})]})]})})};var R=t(6060),T=t(8012),P=t(7365),B=t(5692);const W=[{id:"welcome",title:"\u05d1\u05e8\u05d5\u05da \u05d4\u05d1\u05d0",icon:T.A},{id:"identity",title:"\u05de\u05d9 \u05d0\u05ea\u05d4",icon:x.A},{id:"preferences",title:"\u05d0\u05d9\u05da \u05dc\u05e2\u05d1\u05d5\u05d3",icon:P.A},{id:"taste",title:"\u05e0\u05e0\u05e1\u05d4 \u05d9\u05d7\u05d3",icon:m.A}],G=[{value:"lawyer",label:"\u05e2\u05d5\u05e8\u05da/\u05ea \u05d3\u05d9\u05df",icon:"\u2696\ufe0f"},{value:"judge",label:"\u05e9\u05d5\u05e4\u05d8/\u05ea",icon:"\ud83d\udc68\u200d\u2696\ufe0f"},{value:"prosecutor",label:"\u05e4\u05e8\u05e7\u05dc\u05d9\u05d8/\u05d4",icon:"\ud83c\udfdb\ufe0f"},{value:"legal_advisor",label:"\u05d9\u05d5\u05e2\u05e5/\u05ea \u05de\u05e9\u05e4\u05d8\u05d9/\u05ea",icon:"\ud83d\udccb"},{value:"intern",label:"\u05de\u05ea\u05de\u05d7\u05d4",icon:"\ud83d\udcda"},{value:"student",label:"\u05e1\u05d8\u05d5\u05d3\u05e0\u05d8/\u05d9\u05ea",icon:"\ud83c\udf93"}],$=["\u05e0\u05d6\u05d9\u05e7\u05d9\u05df","\u05e8\u05e9\u05dc\u05e0\u05d5\u05ea \u05e8\u05e4\u05d5\u05d0\u05d9\u05ea","\u05ea\u05d0\u05d5\u05e0\u05d5\u05ea \u05d3\u05e8\u05db\u05d9\u05dd","\u05d1\u05d9\u05d8\u05d5\u05d7","\u05d3\u05d9\u05e0\u05d9 \u05e2\u05d1\u05d5\u05d3\u05d4","\u05de\u05e7\u05e8\u05e7\u05e2\u05d9\u05df","\u05de\u05e9\u05e4\u05d7\u05d4","\u05e4\u05dc\u05d9\u05dc\u05d9","\u05de\u05e1\u05d7\u05e8\u05d9","\u05d7\u05d1\u05e8\u05d5\u05ea"];function H(e){let{isOpen:s,onClose:t,onComplete:n}=e;const i=(0,r.Zp)(),[c,d]=(0,a.useState)(0),[o,h]=(0,a.useState)(!1),[b,f]=(0,a.useState)({displayName:"",role:"",yearsExperience:0,specializations:[],responseLength:"balanced",includesCitations:!0,proactiveSuggestions:!0}),[j,v]=(0,a.useState)(!1),w=async()=>{h(!0);try{var e;await(0,D.mu)("/api/user-profile",{professional_identity:{display_name:b.displayName,role:(null===(e=G.find(e=>e.value===b.role))||void 0===e?void 0:e.label)||b.role,years_experience:b.yearsExperience,specializations:b.specializations},work_preferences:{response_length:b.responseLength,include_citations:b.includesCitations,proactive_suggestions:b.proactiveSuggestions}}),N.oR.success("\u05d4\u05e4\u05e8\u05d5\u05e4\u05d9\u05dc \u05e0\u05e9\u05de\u05e8 \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4!"),n()}catch(s){console.error("Failed to save profile:",s),N.oR.error("\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05e9\u05de\u05d9\u05e8\u05ea \u05d4\u05e4\u05e8\u05d5\u05e4\u05d9\u05dc")}finally{h(!1)}};return s?(0,z.jsx)("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",dir:"rtl",children:(0,z.jsxs)("div",{className:"bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 rounded-3xl max-w-2xl w-full border border-white/20 shadow-2xl overflow-hidden",children:[(0,z.jsx)("div",{className:"h-1 bg-white/10",children:(0,z.jsx)("div",{className:"h-full bg-gradient-to-r from-blue-500 to-purple-500 transition-all duration-500",style:{width:"".concat((c+1)/W.length*100,"%")}})}),(0,z.jsx)("div",{className:"p-6 border-b border-white/10",children:(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsx)("div",{className:"flex items-center gap-4",children:W.map((e,s)=>(0,z.jsxs)("div",{className:"flex items-center gap-2 ".concat(s===c?"text-white":s<c?"text-green-400":"text-gray-500"),children:[(0,z.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center ".concat(s===c?"bg-blue-600":s<c?"bg-green-600":"bg-white/10"),children:s<c?(0,z.jsx)(I.A,{size:16}):(0,z.jsx)(e.icon,{size:16})}),s===c&&(0,z.jsx)("span",{className:"text-sm font-medium hidden sm:block",children:e.title})]},e.id))}),(0,z.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors",children:"\u05d3\u05dc\u05d2"})]})}),(0,z.jsxs)("div",{className:"p-8 min-h-[400px] transition-opacity duration-200 ".concat(j?"opacity-0":"opacity-100"),children:[0===c&&(0,z.jsxs)("div",{className:"text-center",children:[(0,z.jsx)("div",{className:"w-24 h-24 mx-auto mb-6 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:(0,z.jsx)(T.A,{className:"text-white",size:48})}),(0,z.jsx)("h2",{className:"text-3xl font-bold text-white mb-4",children:"\u05d1\u05e8\u05d5\u05da \u05d4\u05d1\u05d0 \u05dc\u05d9\u05ea\u05e8\u05d5"}),(0,z.jsx)("p",{className:"text-blue-200 text-lg mb-8 max-w-md mx-auto",children:"\u05d0\u05e0\u05d9 \u05db\u05d0\u05df \u05dc\u05e2\u05d6\u05d5\u05e8 \u05dc\u05da \u05dc\u05e0\u05ea\u05d7 \u05ea\u05d9\u05e7\u05d9\u05dd, \u05dc\u05de\u05e6\u05d5\u05d0 \u05e1\u05ea\u05d9\u05e8\u05d5\u05ea, \u05d5\u05dc\u05d4\u05db\u05d9\u05df \u05d0\u05d5\u05ea\u05da \u05dc\u05d3\u05d9\u05d5\u05e0\u05d9\u05dd. \u05d1\u05d5\u05d0 \u05e0\u05db\u05d9\u05e8 \u05d0\u05d7\u05d3 \u05d0\u05ea \u05d4\u05e9\u05e0\u05d9 \u05db\u05d3\u05d9 \u05e9\u05d0\u05d5\u05db\u05dc \u05dc\u05ea\u05ea \u05dc\u05da \u05d0\u05ea \u05d4\u05e2\u05e8\u05da \u05d4\u05d8\u05d5\u05d1 \u05d1\u05d9\u05d5\u05ea\u05e8."}),(0,z.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,z.jsxs)("div",{className:"flex items-center gap-2 text-green-400 bg-green-500/10 px-4 py-2 rounded-lg",children:[(0,z.jsx)(p.A,{size:18}),(0,z.jsx)("span",{children:"\u05d6\u05d9\u05d4\u05d5\u05d9 \u05e1\u05ea\u05d9\u05e8\u05d5\u05ea"})]}),(0,z.jsxs)("div",{className:"flex items-center gap-2 text-purple-400 bg-purple-500/10 px-4 py-2 rounded-lg",children:[(0,z.jsx)(g.A,{size:18}),(0,z.jsx)("span",{children:"\u05e9\u05d0\u05dc\u05d5\u05ea \u05d7\u05e7\u05d9\u05e8\u05d4"})]}),(0,z.jsxs)("div",{className:"flex items-center gap-2 text-blue-400 bg-blue-500/10 px-4 py-2 rounded-lg",children:[(0,z.jsx)(E.A,{size:18}),(0,z.jsx)("span",{children:"\u05d0\u05e1\u05d8\u05e8\u05d8\u05d2\u05d9\u05d4"})]})]})]}),1===c&&(0,z.jsxs)("div",{children:[(0,z.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:"\u05e1\u05e4\u05e8 \u05dc\u05d9 \u05e7\u05e6\u05ea \u05e2\u05dc \u05e2\u05e6\u05de\u05da"}),(0,z.jsx)("p",{className:"text-blue-200 mb-6",children:"\u05d6\u05d4 \u05d9\u05e2\u05d6\u05d5\u05e8 \u05dc\u05d9 \u05dc\u05d4\u05ea\u05d0\u05d9\u05dd \u05d0\u05ea \u05d4\u05ea\u05e9\u05d5\u05d1\u05d5\u05ea \u05dc\u05e6\u05e8\u05db\u05d9\u05dd \u05e9\u05dc\u05da"}),(0,z.jsxs)("div",{className:"space-y-6",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{className:"block text-blue-200 text-sm mb-2",children:"\u05d0\u05d9\u05da \u05dc\u05e7\u05e8\u05d5\u05d0 \u05dc\u05da?"}),(0,z.jsx)("input",{type:"text",value:b.displayName,onChange:e=>f((0,l.A)((0,l.A)({},b),{},{displayName:e.target.value})),placeholder:'\u05e2\u05d5"\u05d3 \u05d9\u05e9\u05e8\u05d0\u05dc \u05d9\u05e9\u05e8\u05d0\u05dc\u05d9',className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-gray-500 focus:border-blue-500 focus:outline-none"})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{className:"block text-blue-200 text-sm mb-3",children:"\u05de\u05d4 \u05d4\u05ea\u05e4\u05e7\u05d9\u05d3 \u05e9\u05dc\u05da?"}),(0,z.jsx)("div",{className:"grid grid-cols-3 gap-3",children:G.map(e=>(0,z.jsxs)("button",{onClick:()=>f((0,l.A)((0,l.A)({},b),{},{role:e.value})),className:"p-3 rounded-xl text-center transition-all ".concat(b.role===e.value?"bg-blue-600 text-white border-2 border-blue-400":"bg-white/10 text-gray-300 hover:bg-white/20 border-2 border-transparent"),children:[(0,z.jsx)("div",{className:"text-2xl mb-1",children:e.icon}),(0,z.jsx)("div",{className:"text-sm",children:e.label})]},e.value))})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{className:"block text-blue-200 text-sm mb-2",children:"\u05e9\u05e0\u05d5\u05ea \u05e0\u05d9\u05e1\u05d9\u05d5\u05df"}),(0,z.jsxs)("div",{className:"flex items-center gap-4",children:[(0,z.jsx)("input",{type:"range",min:"0",max:"40",value:b.yearsExperience,onChange:e=>f((0,l.A)((0,l.A)({},b),{},{yearsExperience:parseInt(e.target.value)})),className:"flex-1"}),(0,z.jsx)("span",{className:"text-white font-bold w-12 text-center",children:0===b.yearsExperience?"\u05d7\u05d3\u05e9":"".concat(b.yearsExperience,"+")})]})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{className:"block text-blue-200 text-sm mb-3",children:"\u05ea\u05d7\u05d5\u05de\u05d9 \u05d4\u05ea\u05de\u05d7\u05d5\u05ea (\u05e2\u05d3 5)"}),(0,z.jsx)("div",{className:"flex flex-wrap gap-2",children:$.map(e=>(0,z.jsx)("button",{onClick:()=>(e=>{const s=b.specializations;s.includes(e)?f((0,l.A)((0,l.A)({},b),{},{specializations:s.filter(s=>s!==e)})):s.length<5&&f((0,l.A)((0,l.A)({},b),{},{specializations:[...s,e]}))})(e),className:"px-3 py-1.5 rounded-full text-sm transition-all ".concat(b.specializations.includes(e)?"bg-purple-600 text-white":"bg-white/10 text-gray-300 hover:bg-white/20"),children:e},e))})]})]})]}),2===c&&(0,z.jsxs)("div",{children:[(0,z.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:"\u05d0\u05d9\u05da \u05d0\u05ea\u05d4 \u05d0\u05d5\u05d4\u05d1 \u05dc\u05e2\u05d1\u05d5\u05d3?"}),(0,z.jsx)("p",{className:"text-blue-200 mb-6",children:"\u05d0\u05e0\u05d9 \u05d0\u05ea\u05d0\u05d9\u05dd \u05d0\u05ea \u05d4\u05e1\u05d2\u05e0\u05d5\u05df \u05e9\u05dc\u05d9 \u05dc\u05d4\u05e2\u05d3\u05e4\u05d5\u05ea \u05e9\u05dc\u05da"}),(0,z.jsxs)("div",{className:"space-y-6",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{className:"block text-blue-200 text-sm mb-3",children:"\u05d0\u05d5\u05e8\u05da \u05ea\u05e9\u05d5\u05d1\u05d5\u05ea \u05de\u05d5\u05e2\u05d3\u05e3"}),(0,z.jsx)("div",{className:"grid grid-cols-3 gap-3",children:[{value:"concise",label:"\u05e7\u05e6\u05e8 \u05d5\u05ea\u05db\u05dc\u05d9\u05ea\u05d9",desc:"\u05e8\u05e7 \u05d4\u05ea\u05e9\u05d5\u05d1\u05d4",icon:"\u26a1"},{value:"balanced",label:"\u05de\u05d0\u05d5\u05d6\u05df",desc:"\u05ea\u05e9\u05d5\u05d1\u05d4 + \u05d4\u05e1\u05d1\u05e8 \u05e7\u05e6\u05e8",icon:"\u2696\ufe0f"},{value:"detailed",label:"\u05de\u05e4\u05d5\u05e8\u05d8",desc:"\u05e0\u05d9\u05ea\u05d5\u05d7 \u05de\u05dc\u05d0",icon:"\ud83d\udcda"}].map(e=>(0,z.jsxs)("button",{onClick:()=>f((0,l.A)((0,l.A)({},b),{},{responseLength:e.value})),className:"p-4 rounded-xl text-center transition-all ".concat(b.responseLength===e.value?"bg-blue-600 text-white border-2 border-blue-400":"bg-white/10 text-gray-300 hover:bg-white/20 border-2 border-transparent"),children:[(0,z.jsx)("div",{className:"text-2xl mb-2",children:e.icon}),(0,z.jsx)("div",{className:"font-medium",children:e.label}),(0,z.jsx)("div",{className:"text-xs opacity-70 mt-1",children:e.desc})]},e.value))})]}),(0,z.jsxs)("div",{className:"space-y-3",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-xl",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("div",{className:"text-white font-medium",children:"\u05db\u05dc\u05d5\u05dc \u05de\u05e7\u05d5\u05e8\u05d5\u05ea \u05d5\u05d4\u05e4\u05e0\u05d9\u05d5\u05ea"}),(0,z.jsx)("div",{className:"text-gray-400 text-sm",children:"\u05d4\u05e4\u05e0\u05d9\u05d5\u05ea \u05dc\u05e2\u05de\u05d5\u05d3\u05d9\u05dd \u05d5\u05de\u05e1\u05de\u05db\u05d9\u05dd"})]}),(0,z.jsx)("button",{onClick:()=>f((0,l.A)((0,l.A)({},b),{},{includesCitations:!b.includesCitations})),className:"w-12 h-6 rounded-full transition-colors ".concat(b.includesCitations?"bg-green-500":"bg-gray-600"),children:(0,z.jsx)("div",{className:"w-5 h-5 bg-white rounded-full transition-transform ".concat(b.includesCitations?"translate-x-6":"translate-x-1")})})]}),(0,z.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-xl",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("div",{className:"text-white font-medium",children:"\u05d4\u05e6\u05e2\u05d5\u05ea \u05d9\u05d6\u05d5\u05de\u05d5\u05ea"}),(0,z.jsx)("div",{className:"text-gray-400 text-sm",children:"\u05d9\u05ea\u05e8\u05d5 \u05d9\u05e6\u05d9\u05e2 \u05dc\u05e4\u05e0\u05d9 \u05e9\u05ea\u05d1\u05e7\u05e9"})]}),(0,z.jsx)("button",{onClick:()=>f((0,l.A)((0,l.A)({},b),{},{proactiveSuggestions:!b.proactiveSuggestions})),className:"w-12 h-6 rounded-full transition-colors ".concat(b.proactiveSuggestions?"bg-green-500":"bg-gray-600"),children:(0,z.jsx)("div",{className:"w-5 h-5 bg-white rounded-full transition-transform ".concat(b.proactiveSuggestions?"translate-x-6":"translate-x-1")})})]})]})]})]}),3===c&&(0,z.jsxs)("div",{className:"text-center",children:[(0,z.jsx)("div",{className:"w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center",children:(0,z.jsx)(m.A,{className:"text-white",size:40})}),(0,z.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"\u05de\u05e2\u05d5\u05dc\u05d4! \u05d0\u05e0\u05d7\u05e0\u05d5 \u05de\u05d5\u05db\u05e0\u05d9\u05dd"}),(0,z.jsxs)("p",{className:"text-blue-200 mb-8 max-w-md mx-auto",children:[b.displayName?"\u05e9\u05dc\u05d5\u05dd ".concat(b.displayName,"! "):"","\u05e2\u05db\u05e9\u05d9\u05d5 \u05d0\u05e0\u05d9 \u05de\u05db\u05d9\u05e8 \u05d0\u05d5\u05ea\u05da \u05d8\u05d5\u05d1 \u05d9\u05d5\u05ea\u05e8 \u05d5\u05d0\u05d5\u05db\u05dc \u05dc\u05ea\u05ea \u05dc\u05da \u05ea\u05e9\u05d5\u05d1\u05d5\u05ea \u05de\u05d5\u05ea\u05d0\u05de\u05d5\u05ea. \u05de\u05d4 \u05ea\u05e8\u05e6\u05d4 \u05dc\u05e2\u05e9\u05d5\u05ea \u05e2\u05db\u05e9\u05d9\u05d5?"]}),(0,z.jsxs)("div",{className:"grid grid-cols-2 gap-4 max-w-md mx-auto",children:[(0,z.jsxs)("button",{onClick:()=>{w(),i("/cases")},className:"p-4 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl text-white hover:opacity-90 transition-opacity",children:[(0,z.jsx)(E.A,{size:24,className:"mx-auto mb-2"}),(0,z.jsx)("div",{className:"font-medium",children:"\u05e6\u05d5\u05e8 \u05ea\u05d9\u05e7 \u05d7\u05d3\u05e9"}),(0,z.jsx)("div",{className:"text-xs opacity-70",children:"\u05d4\u05e2\u05dc\u05d4 \u05de\u05e1\u05de\u05db\u05d9\u05dd \u05d5\u05e0\u05ea\u05d7"})]}),(0,z.jsxs)("button",{onClick:()=>{w(),i("/profile")},className:"p-4 bg-white/10 border border-white/20 rounded-xl text-white hover:bg-white/20 transition-colors",children:[(0,z.jsx)(x.A,{size:24,className:"mx-auto mb-2"}),(0,z.jsx)("div",{className:"font-medium",children:"\u05d4\u05e9\u05dc\u05dd \u05e4\u05e8\u05d5\u05e4\u05d9\u05dc"}),(0,z.jsx)("div",{className:"text-xs opacity-70",children:"\u05d4\u05d5\u05e1\u05e3 \u05e9\u05d5\u05e4\u05d8\u05d9\u05dd \u05d5\u05d9\u05e8\u05d9\u05d1\u05d9\u05dd"})]})]})]})]}),(0,z.jsxs)("div",{className:"p-6 border-t border-white/10 flex justify-between",children:[(0,z.jsxs)("button",{onClick:()=>{c>0&&(v(!0),setTimeout(()=>{d(c-1),v(!1)},200))},disabled:0===c,className:"flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ".concat(0===c?"text-gray-500 cursor-not-allowed":"text-white hover:bg-white/10"),children:[(0,z.jsx)(B.A,{size:18}),"\u05d4\u05e7\u05d5\u05d3\u05dd"]}),c<W.length-1?(0,z.jsxs)("button",{onClick:()=>{c<W.length-1&&(v(!0),setTimeout(()=>{d(c+1),v(!1)},200))},className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:["\u05d4\u05d1\u05d0",(0,z.jsx)(u.A,{size:18})]}):(0,z.jsxs)("button",{onClick:w,disabled:o,className:"flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-lg hover:opacity-90 transition-opacity disabled:opacity-50",children:[o?(0,z.jsx)("span",{className:"animate-spin",children:"\u23f3"}):(0,z.jsx)(I.A,{size:18}),"\u05e1\u05d9\u05d9\u05dd \u05d5\u05d4\u05ea\u05d7\u05dc"]})]})]})}):null}var U=t(9855),X=t(7719),J=t(2054);const Z=e=>{let{isOpen:s,onClose:t,onConfirm:l,title:a,message:r,confirmText:n="\u05d0\u05d9\u05e9\u05d5\u05e8",cancelText:i="\u05d1\u05d9\u05d8\u05d5\u05dc",type:c="danger",icon:d,isLoading:o=!1}=e;if(!s)return null;const x=(()=>{switch(c){case"danger":default:return{gradient:"from-red-600 to-red-800",button:"bg-red-600 hover:bg-red-700",iconBg:"bg-red-500/20",iconColor:"text-red-400"};case"warning":return{gradient:"from-orange-600 to-orange-800",button:"bg-orange-600 hover:bg-orange-700",iconBg:"bg-orange-500/20",iconColor:"text-orange-400"};case"info":return{gradient:"from-blue-600 to-blue-800",button:"bg-blue-600 hover:bg-blue-700",iconBg:"bg-blue-500/20",iconColor:"text-blue-400"}}})(),m=d||(()=>{switch(c){case"danger":return(0,z.jsx)(U.A,{size:32});case"warning":default:return(0,z.jsx)(X.A,{size:32});case"info":return(0,z.jsx)(J.A,{size:32})}})();return(0,z.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",dir:"rtl",children:(0,z.jsxs)("div",{className:"bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 rounded-2xl shadow-2xl w-full max-w-md border border-white/20 overflow-hidden",children:[(0,z.jsxs)("div",{className:"bg-gradient-to-r ".concat(x.gradient," p-6 text-white flex items-center justify-between"),children:[(0,z.jsxs)("div",{className:"flex items-center gap-3",children:[(0,z.jsx)("div",{className:"w-12 h-12 ".concat(x.iconBg," rounded-xl flex items-center justify-center ").concat(x.iconColor),children:m}),(0,z.jsx)("div",{children:(0,z.jsx)("h2",{className:"text-xl font-bold",children:a})})]}),(0,z.jsx)("button",{onClick:t,disabled:o,className:"p-2 hover:bg-white/20 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:(0,z.jsx)(v.A,{size:24})})]}),(0,z.jsxs)("div",{className:"p-6",children:[(0,z.jsx)("p",{className:"text-white/90 text-right mb-6 leading-relaxed",children:r}),(0,z.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,z.jsx)("button",{onClick:t,disabled:o,className:"px-6 py-2 bg-white/10 text-white rounded-lg font-semibold hover:bg-white/20 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:i}),(0,z.jsx)("button",{onClick:l,disabled:o,className:"px-6 py-2 ".concat(x.button," text-white rounded-lg font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"),children:o?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),(0,z.jsx)("span",{children:"\u05de\u05e2\u05d1\u05d3..."})]}):n})]})]})]})})};var V=t(9569),K=t(2665),Y=t(3164),Q=t(6721);const ee=e=>{let{mode:s="full"}=e;const t=(0,r.Zp)(),{modals:w,closeModal:y}=(0,Y.j)(),{cases:C,stats:k,casesLoading:_,casesError:L,fetchCases:E,removeCase:I,invalidateCache:M}=(0,A.i)(),{data:O,fetchSubscription:T}=(0,Q.S)(),[P,B]=(0,a.useState)(!1),[W,G]=(0,a.useState)(w.newCaseWizard||!1),[$,U]=(0,a.useState)(!1),[X,J]=(0,a.useState)(null),[ee,se]=(0,a.useState)(!1);(0,a.useEffect)(()=>{w.newCaseWizard&&(G(!0),y("newCaseWizard"))},[w.newCaseWizard,y]);const[te,le]=(0,a.useState)("created_at"),[ae,re]=(0,a.useState)("desc"),[ne,ie]=(0,a.useState)(""),[ce,de]=(0,a.useState)("all"),[oe,xe]=(0,a.useState)("all"),[me,ue]=(0,a.useState)("all"),[he,pe]=(0,a.useState)(1),[be,ge]=(0,a.useState)(10),[fe,je]=(0,a.useState)({isOpen:!1,type:"delete",caseId:null,caseName:""}),[ve,Ne]=(0,a.useState)({isOpen:!1,caseId:null,currentName:"",newName:""});(0,a.useEffect)(()=>{E(),T()},[E,T]),(0,a.useEffect)(()=>{if(!_&&0===C.length){localStorage.getItem("onboarding_completed")||setTimeout(()=>se(!0),100)}},[_,C.length]);const we=()=>E(!0),ye=async(e,s)=>{if(s&&""!==s.trim()){N.oR.loading("\u05de\u05e9\u05e0\u05d4 \u05e9\u05dd...",{id:"rename-".concat(e)});try{await(0,D.$Y)("/api/cases/".concat(e,"/rename"),{name:s.trim()},{showErrorToast:!1}),N.oR.success("\u05e9\u05dd \u05d4\u05ea\u05d9\u05e7 \u05e9\u05d5\u05e0\u05d4 \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4",{id:"rename-".concat(e)}),M(),E(!0),Ne({isOpen:!1,caseId:null,currentName:"",newName:""})}catch(L){F.v.error("Error renaming case:",L),N.oR.error("\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05e9\u05d9\u05e0\u05d5\u05d9 \u05e9\u05dd \u05d4\u05ea\u05d9\u05e7",{id:"rename-".concat(e)})}}else N.oR.error("\u05e0\u05d0 \u05dc\u05d4\u05d6\u05d9\u05df \u05e9\u05dd \u05ea\u05d9\u05e7")},Ce=async e=>{N.oR.loading("\u05de\u05d0\u05ea\u05d7\u05dc \u05e0\u05d9\u05ea\u05d5\u05d7 \u05de\u05d7\u05d3\u05e9...",{id:"retry-".concat(e)});try{await(0,D.$P)("/api/cases/".concat(e,"/reset"),{},{showErrorToast:!1}),N.oR.success("\u05d4\u05e0\u05d9\u05ea\u05d5\u05d7 \u05d9\u05ea\u05d7\u05d9\u05dc \u05de\u05d7\u05d3\u05e9",{id:"retry-".concat(e)}),M(),E(!0)}catch(L){F.v.error("Error retrying case:",L),N.oR.error("\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05d4\u05e4\u05e2\u05dc\u05d4 \u05de\u05d7\u05d3\u05e9",{id:"retry-".concat(e)})}},ke=C.filter(e=>"failed"===e.status).length,_e=C.filter(e=>{if(ne&&!e.name.toLowerCase().includes(ne.toLowerCase()))return!1;if("all"!==ce){if("failed"===ce&&"failed"!==e.status)return!1;if("failed"!==ce&&"failed"===e.status)return!1;if("failed"!==ce&&e.status!==ce)return!1}else if("failed"===e.status)return!1;if("all"!==oe){const s=new Date(e.created_at),t=(new Date-s)/864e5;if("week"===oe&&t>7)return!1;if("month"===oe&&t>30)return!1;if("3months"===oe&&t>90)return!1}if("all"!==me){const s=e.critical_count||0;if("critical"===me&&0===s)return!1;if("high"===me&&s<3)return!1;if("medium"===me&&s>=3)return!1}return!0}),Ae=[..._e].sort((e,s)=>{let t,l;switch(te){case"name":t=e.name.toLowerCase(),l=s.name.toLowerCase();break;case"created_at":t=new Date(e.created_at),l=new Date(s.created_at);break;case"files_count":t=e.files_count||0,l=s.files_count||0;break;case"claims_count":t=e.claims_count||0,l=s.claims_count||0;break;case"contradictions_count":t=e.contradictions_count||0,l=s.contradictions_count||0;break;case"entities_count":t=e.entities_count||0,l=s.entities_count||0;break;default:return 0}return t<l?"asc"===ae?-1:1:t>l?"asc"===ae?1:-1:0}),ze="summary"===s?Ae.slice(0,5):Ae,Se=Math.ceil(ze.length/be),Le=(he-1)*be,Ee=Le+be,Ie="summary"===s?ze:ze.slice(Le,Ee);return _?(0,z.jsx)("div",{className:"p-8",children:(0,z.jsx)(K.O2,{})}):(0,z.jsxs)("div",{className:"p-8",children:[C.length>0&&(0,z.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("h1",{className:"text-4xl font-bold text-white mb-2",children:"summary"===s?"\u05d3\u05e9\u05d1\u05d5\u05e8\u05d3":"\u05d4\u05ea\u05d9\u05e7\u05d9\u05dd \u05e9\u05dc\u05d9"}),(0,z.jsx)("p",{className:"text-blue-200",children:"summary"===s?"\u05e1\u05e7\u05d9\u05e8\u05d4 \u05db\u05dc\u05dc\u05d9\u05ea \u05e9\u05dc \u05d4\u05ea\u05d9\u05e7\u05d9\u05dd \u05e9\u05dc\u05da":"\u05db\u05dc \u05d4\u05ea\u05d9\u05e7\u05d9\u05dd \u05e9\u05dc\u05da \u05d1\u05de\u05e7\u05d5\u05dd \u05d0\u05d7\u05d3"})]}),(0,z.jsxs)("button",{onClick:()=>B(!0),className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-xl font-semibold hover:from-green-600 hover:to-emerald-700 transition-all shadow-lg",children:[(0,z.jsx)(n.A,{size:20}),"\u05e0\u05d9\u05ea\u05d5\u05d7 \u05d7\u05d3\u05e9"]})]}),L&&(0,z.jsx)(V.A,{error:L,onRetry:()=>we(),onDismiss:()=>{},title:"\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05d8\u05e2\u05d9\u05e0\u05ea \u05d4\u05ea\u05d9\u05e7\u05d9\u05dd",className:"mb-6"}),C.length>0&&O&&!["professional","enterprise","pro","admin"].includes(((null===O||void 0===O?void 0:O.subscription_tier)||"free").toLowerCase())&&"admin"!==(null===O||void 0===O?void 0:O.role)&&(0,z.jsx)("div",{className:"mb-6 bg-gradient-to-r from-purple-600/20 to-pink-600/20 border border-purple-500/30 rounded-xl p-4",children:(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsxs)("div",{className:"flex items-center gap-3",children:[(0,z.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg flex items-center justify-center",children:(0,z.jsx)(i.A,{className:"text-white",size:20})}),(0,z.jsxs)("div",{children:[(0,z.jsx)("p",{className:"text-white font-semibold",children:"\u05e9\u05d3\u05e8\u05d2 \u05dc-Professional \u05d5\u05e7\u05d1\u05dc Intelligence Analysis"}),(0,z.jsx)("p",{className:"text-purple-200 text-sm",children:"\u05e0\u05d9\u05ea\u05d5\u05d7 \u05de\u05d5\u05d3\u05d9\u05e2\u05d9\u05e0\u05d9 \u05de\u05ea\u05e7\u05d3\u05dd, RAG, \u05d5\u05db\u05dc \u05d4\u05e4\u05d9\u05e6'\u05e8\u05d9\u05dd \u05d4\u05de\u05ea\u05e7\u05d3\u05de\u05d9\u05dd"})]})]}),(0,z.jsxs)("button",{onClick:()=>t("/pricing"),className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg font-semibold hover:from-purple-700 hover:to-pink-700 transition-all flex items-center gap-2 whitespace-nowrap",children:[(0,z.jsx)(c.A,{size:16}),"\u05e9\u05d3\u05e8\u05d2 \u05e2\u05db\u05e9\u05d9\u05d5"]})]})}),C.length>0&&ke>0&&"failed"!==ce&&(0,z.jsx)("div",{className:"mb-6 bg-orange-500/20 border border-orange-500 rounded-lg p-4",children:(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsxs)("div",{className:"flex items-center gap-3",children:[(0,z.jsx)(d.A,{className:"text-orange-400",size:20}),(0,z.jsxs)("div",{children:[(0,z.jsxs)("p",{className:"text-orange-200 font-semibold",children:[ke," \u05ea\u05d9\u05e7\u05d9\u05dd \u05e0\u05db\u05e9\u05dc\u05d5 \u05d1\u05e0\u05d9\u05ea\u05d5\u05d7"]}),(0,z.jsx)("p",{className:"text-orange-300 text-sm",children:"\u05d9\u05d9\u05ea\u05db\u05df \u05e9\u05d4\u05e7\u05d1\u05e6\u05d9\u05dd \u05dc\u05d0 \u05ea\u05e7\u05d9\u05e0\u05d9\u05dd \u05d0\u05d5 \u05e9\u05d4\u05d9\u05d9\u05ea\u05d4 \u05d1\u05e2\u05d9\u05d9\u05ea \u05d7\u05d9\u05d1\u05d5\u05e8"})]})]}),(0,z.jsx)("button",{onClick:()=>de("failed"),className:"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors text-sm font-semibold",children:"\u05d4\u05e6\u05d2 \u05ea\u05d9\u05e7\u05d9\u05dd \u05e9\u05e0\u05db\u05e9\u05dc\u05d5"})]})}),C.length>0&&(0,z.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6 mb-8",children:[(0,z.jsxs)("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-6 border border-white/20",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,z.jsx)("p",{className:"text-blue-200 text-sm",children:"\u05ea\u05d9\u05e7\u05d9\u05dd \u05e4\u05e2\u05d9\u05dc\u05d9\u05dd"}),(0,z.jsx)(o.A,{className:"text-blue-400",size:20})]}),(0,z.jsx)("p",{className:"text-4xl font-bold text-white",children:(null===k||void 0===k?void 0:k.total)||"0"}),(0,z.jsx)("p",{className:"text-blue-300 text-xs mt-2",children:'\u05e1\u05d4"\u05db \u05ea\u05d9\u05e7\u05d9\u05dd \u05d1\u05de\u05e2\u05e8\u05db\u05ea'})]}),(0,z.jsxs)("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-6 border border-white/20",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,z.jsx)("p",{className:"text-blue-200 text-sm",children:"\u05d8\u05e2\u05e0\u05d5\u05ea"}),(0,z.jsx)(o.A,{className:"text-green-400",size:20})]}),(0,z.jsx)("p",{className:"text-4xl font-bold text-white",children:C.reduce((e,s)=>e+(s.claims_count||0),0)}),(0,z.jsx)("p",{className:"text-blue-300 text-xs mt-2",children:'\u05e1\u05d4"\u05db \u05d8\u05e2\u05e0\u05d5\u05ea \u05e9\u05d6\u05d5\u05d4\u05d5'})]}),(0,z.jsxs)("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-6 border border-white/20",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,z.jsx)("p",{className:"text-blue-200 text-sm",children:"\u05e1\u05ea\u05d9\u05e8\u05d5\u05ea"}),(0,z.jsx)(d.A,{className:"text-red-400",size:20})]}),(0,z.jsx)("p",{className:"text-4xl font-bold text-white",children:((null===k||void 0===k?void 0:k.critical)||0)+((null===k||void 0===k?void 0:k.high)||0)+((null===k||void 0===k?void 0:k.medium)||0)}),(0,z.jsxs)("div",{className:"flex gap-2 mt-2 text-xs",children:[(0,z.jsxs)("span",{className:"text-red-300",children:["\ud83d\udd34 ",(null===k||void 0===k?void 0:k.critical)||0]}),(0,z.jsxs)("span",{className:"text-orange-300",children:["\ud83d\udfe0 ",(null===k||void 0===k?void 0:k.high)||0]}),(0,z.jsxs)("span",{className:"text-yellow-300",children:["\ud83d\udfe1 ",(null===k||void 0===k?void 0:k.medium)||0]})]})]}),(0,z.jsxs)("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-6 border border-white/20",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,z.jsx)("p",{className:"text-blue-200 text-sm",children:"\u05d9\u05e9\u05d5\u05d9\u05d5\u05ea"}),(0,z.jsx)(x.A,{className:"text-purple-400",size:20})]}),(0,z.jsx)("p",{className:"text-4xl font-bold text-white",children:C.reduce((e,s)=>e+(s.entities_count||0),0)}),(0,z.jsx)("p",{className:"text-blue-300 text-xs mt-2",children:"\u05d0\u05e0\u05e9\u05d9\u05dd \u05d5\u05d0\u05e8\u05d2\u05d5\u05e0\u05d9\u05dd"})]})]}),C.length>0&&"full"===s&&(0,z.jsxs)("div",{className:"mb-6 bg-white/10 backdrop-blur-xl rounded-xl p-4 border border-white/20",children:[(0,z.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-3",children:[(0,z.jsx)("div",{className:"lg:col-span-2",children:(0,z.jsx)("input",{type:"text",placeholder:"\ud83d\udd0d \u05d7\u05d9\u05e4\u05d5\u05e9 \u05ea\u05d9\u05e7...",value:ne,onChange:e=>ie(e.target.value),className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-blue-300 focus:outline-none focus:ring-2 focus:ring-blue-500"})}),(0,z.jsxs)("select",{value:ce,onChange:e=>de(e.target.value),className:"px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,z.jsx)("option",{value:"all",children:"\u05db\u05dc \u05d4\u05e1\u05d8\u05d8\u05d5\u05e1\u05d9\u05dd"}),(0,z.jsx)("option",{value:"completed",children:"\u2705 \u05d4\u05d5\u05e9\u05dc\u05dd"}),(0,z.jsx)("option",{value:"analyzing",children:"\ud83d\udd04 \u05de\u05e0\u05ea\u05d7"}),ke>0&&(0,z.jsxs)("option",{value:"failed",children:["\u274c \u05e0\u05db\u05e9\u05dc (",ke,")"]})]}),(0,z.jsxs)("select",{value:oe,onChange:e=>xe(e.target.value),className:"px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,z.jsx)("option",{value:"all",children:"\u05db\u05dc \u05d4\u05ea\u05d0\u05e8\u05d9\u05db\u05d9\u05dd"}),(0,z.jsx)("option",{value:"week",children:"\ud83d\udcc5 \u05e9\u05d1\u05d5\u05e2 \u05d0\u05d7\u05e8\u05d5\u05df"}),(0,z.jsx)("option",{value:"month",children:"\ud83d\udcc5 \u05d7\u05d5\u05d3\u05e9 \u05d0\u05d7\u05e8\u05d5\u05df"}),(0,z.jsx)("option",{value:"3months",children:"\ud83d\udcc5 3 \u05d7\u05d5\u05d3\u05e9\u05d9\u05dd"})]}),(0,z.jsxs)("select",{value:me,onChange:e=>ue(e.target.value),className:"px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,z.jsx)("option",{value:"all",children:"\u05db\u05dc \u05d4\u05d7\u05d5\u05de\u05e8\u05d5\u05ea"}),(0,z.jsx)("option",{value:"critical",children:"\ud83d\udd34 \u05e7\u05e8\u05d9\u05d8\u05d9 \u05d1\u05dc\u05d1\u05d3"}),(0,z.jsx)("option",{value:"high",children:"\ud83d\udfe0 \u05d2\u05d1\u05d5\u05d4 \u05d5\u05de\u05e2\u05dc\u05d4"}),(0,z.jsx)("option",{value:"medium",children:"\ud83d\udfe1 \u05d1\u05d9\u05e0\u05d5\u05e0\u05d9 \u05d5\u05de\u05d8\u05d4"})]})]}),(ne||"all"!==ce||"all"!==oe||"all"!==me)&&(0,z.jsxs)("div",{className:"mt-3 flex items-center gap-2 text-sm",children:[(0,z.jsx)("span",{className:"text-blue-300",children:"\u05e1\u05d9\u05e0\u05d5\u05e0\u05d9\u05dd \u05e4\u05e2\u05d9\u05dc\u05d9\u05dd:"}),(0,z.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[ne&&(0,z.jsxs)("span",{className:"px-2 py-1 bg-blue-500/20 text-blue-200 rounded-lg",children:["\ud83d\udd0d ",ne]}),"all"!==ce&&(0,z.jsxs)("span",{className:"px-2 py-1 bg-green-500/20 text-green-200 rounded-lg",children:["\u05e1\u05d8\u05d8\u05d5\u05e1: ","completed"===ce?"\u05d4\u05d5\u05e9\u05dc\u05dd":"\u05de\u05e0\u05ea\u05d7"]}),"all"!==oe&&(0,z.jsxs)("span",{className:"px-2 py-1 bg-purple-500/20 text-purple-200 rounded-lg",children:["\ud83d\udcc5 ","week"===oe?"\u05e9\u05d1\u05d5\u05e2 \u05d0\u05d7\u05e8\u05d5\u05df":"month"===oe?"\u05d7\u05d5\u05d3\u05e9 \u05d0\u05d7\u05e8\u05d5\u05df":"3 \u05d7\u05d5\u05d3\u05e9\u05d9\u05dd"]}),"all"!==me&&(0,z.jsxs)("span",{className:"px-2 py-1 bg-red-500/20 text-red-200 rounded-lg",children:["\u05d7\u05d5\u05de\u05e8\u05d4: ","critical"===me?"\u05e7\u05e8\u05d9\u05d8\u05d9":"high"===me?"\u05d2\u05d1\u05d5\u05d4":"\u05d1\u05d9\u05e0\u05d5\u05e0\u05d9"]}),(0,z.jsx)("button",{onClick:()=>{ie(""),de("all"),xe("all"),ue("all")},className:"px-2 py-1 bg-red-500/20 text-red-200 rounded-lg hover:bg-red-500/30 transition-colors",children:"\u2715 \u05e0\u05e7\u05d4 \u05d4\u05db\u05dc"})]})]}),(0,z.jsxs)("div",{className:"mt-3 flex items-center justify-between",children:[(0,z.jsxs)("span",{className:"text-blue-300 text-sm",children:["\u05de\u05e6\u05d9\u05d2 ",_e.length," \u05ea\u05d9\u05e7\u05d9\u05dd \u05de\u05ea\u05d5\u05da ",C.filter(e=>"failed"!==e.status).length]}),(0,z.jsxs)("select",{value:be,onChange:e=>ge(Number(e.target.value)),className:"px-3 py-1 bg-white/10 border border-white/20 rounded-lg text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,z.jsx)("option",{value:10,children:"10 \u05ea\u05d9\u05e7\u05d9\u05dd \u05dc\u05e2\u05de\u05d5\u05d3"}),(0,z.jsx)("option",{value:25,children:"25 \u05ea\u05d9\u05e7\u05d9\u05dd \u05dc\u05e2\u05de\u05d5\u05d3"}),(0,z.jsx)("option",{value:50,children:"50 \u05ea\u05d9\u05e7\u05d9\u05dd \u05dc\u05e2\u05de\u05d5\u05d3"})]})]})]}),C.length>0&&(0,z.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,z.jsx)("h2",{className:"text-2xl font-bold text-white",children:"summary"===s?"\u05ea\u05d9\u05e7\u05d9\u05dd \u05d0\u05d7\u05e8\u05d5\u05e0\u05d9\u05dd":"\u05db\u05dc \u05d4\u05ea\u05d9\u05e7\u05d9\u05dd (".concat(Ae.length,")")}),"summary"===s&&C.length>5&&(0,z.jsx)("button",{onClick:()=>t("/cases"),className:"text-blue-300 hover:text-white transition-colors text-sm",children:"\u05e6\u05e4\u05d4 \u05d1\u05db\u05dc \u05d4\u05ea\u05d9\u05e7\u05d9\u05dd \u2190"})]}),0===C.length?(0,z.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,z.jsxs)("div",{className:"bg-gradient-to-br from-purple-600/20 via-blue-600/20 to-cyan-600/20 backdrop-blur-xl rounded-3xl p-12 border border-white/20 text-center mb-8 animate-fade-in",children:[(0,z.jsx)("div",{className:"w-20 h-20 bg-gradient-to-br from-purple-500 to-blue-500 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg shadow-purple-500/30",children:(0,z.jsx)(m.A,{className:"text-white",size:40})}),(0,z.jsx)("h2",{className:"text-3xl font-bold text-white mb-4",children:"\u05d1\u05e8\u05d5\u05da \u05d4\u05d1\u05d0 \u05dc\u05d9\u05ea\u05e8\u05d5"}),(0,z.jsx)("p",{className:"text-xl text-blue-200 mb-8 max-w-2xl mx-auto",children:"\u05d4\u05de\u05e2\u05e8\u05db\u05ea \u05d4\u05de\u05ea\u05e7\u05d3\u05de\u05ea \u05dc\u05e0\u05d9\u05ea\u05d5\u05d7 \u05de\u05e1\u05de\u05db\u05d9\u05dd \u05de\u05e9\u05e4\u05d8\u05d9\u05d9\u05dd. \u05d4\u05e2\u05dc\u05d4 \u05d0\u05ea \u05d4\u05de\u05e1\u05de\u05db\u05d9\u05dd \u05e9\u05dc\u05da \u05d5\u05d9\u05ea\u05e8\u05d5 \u05d9\u05de\u05e6\u05d0 \u05e1\u05ea\u05d9\u05e8\u05d5\u05ea, \u05d9\u05d7\u05dc\u05e5 \u05d8\u05e2\u05e0\u05d5\u05ea \u05d5\u05d9\u05d1\u05e0\u05d4 \u05d0\u05e1\u05d8\u05e8\u05d8\u05d2\u05d9\u05d4."}),(0,z.jsxs)("button",{onClick:()=>G(!0),className:"group px-10 py-5 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-2xl font-bold text-xl hover:from-green-600 hover:to-emerald-700 transition-all shadow-xl shadow-green-500/30 flex items-center gap-3 mx-auto hover:scale-105",children:[(0,z.jsx)(n.A,{size:28}),"\u05d4\u05ea\u05d7\u05dc \u05e0\u05d9\u05ea\u05d5\u05d7 \u05e8\u05d0\u05e9\u05d5\u05df",(0,z.jsx)(u.A,{className:"group-hover:-translate-x-1 transition-transform",size:24})]})]}),(0,z.jsxs)("div",{className:"bg-white/5 backdrop-blur-xl rounded-2xl p-8 border border-white/10",children:[(0,z.jsx)("h3",{className:"text-xl font-bold text-white text-center mb-8",children:"\u05d0\u05d9\u05da \u05d6\u05d4 \u05e2\u05d5\u05d1\u05d3?"}),(0,z.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,z.jsxs)("div",{className:"text-center group",children:[(0,z.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500/20 to-blue-600/20 border border-blue-500/30 rounded-2xl flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition-transform",children:(0,z.jsx)(h.A,{className:"text-blue-400",size:32})}),(0,z.jsx)("div",{className:"text-3xl font-bold text-blue-400 mb-2",children:"1"}),(0,z.jsx)("h4",{className:"text-lg font-semibold text-white mb-2",children:"\u05d4\u05e2\u05dc\u05d4 \u05de\u05e1\u05de\u05db\u05d9\u05dd"}),(0,z.jsx)("p",{className:"text-sm text-slate-400",children:"PDF, Word, \u05ea\u05de\u05d5\u05e0\u05d5\u05ea \u05e1\u05e8\u05d5\u05e7\u05d5\u05ea - \u05d9\u05ea\u05e8\u05d5 \u05d9\u05e7\u05e8\u05d0 \u05d4\u05db\u05dc"})]}),(0,z.jsxs)("div",{className:"text-center group",children:[(0,z.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500/20 to-purple-600/20 border border-purple-500/30 rounded-2xl flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition-transform",children:(0,z.jsx)(p.A,{className:"text-purple-400",size:32})}),(0,z.jsx)("div",{className:"text-3xl font-bold text-purple-400 mb-2",children:"2"}),(0,z.jsx)("h4",{className:"text-lg font-semibold text-white mb-2",children:"\u05d9\u05ea\u05e8\u05d5 \u05de\u05e0\u05ea\u05d7"}),(0,z.jsx)("p",{className:"text-sm text-slate-400",children:"\u05d6\u05d9\u05d4\u05d5\u05d9 \u05e1\u05ea\u05d9\u05e8\u05d5\u05ea, \u05d7\u05d9\u05dc\u05d5\u05e5 \u05d8\u05e2\u05e0\u05d5\u05ea, \u05de\u05d9\u05e4\u05d5\u05d9 \u05d9\u05e9\u05d5\u05d9\u05d5\u05ea"})]}),(0,z.jsxs)("div",{className:"text-center group",children:[(0,z.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500/20 to-green-600/20 border border-green-500/30 rounded-2xl flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition-transform",children:(0,z.jsx)(b.A,{className:"text-green-400",size:32})}),(0,z.jsx)("div",{className:"text-3xl font-bold text-green-400 mb-2",children:"3"}),(0,z.jsx)("h4",{className:"text-lg font-semibold text-white mb-2",children:"\u05e7\u05d1\u05dc \u05ea\u05d5\u05e6\u05d0\u05d5\u05ea"}),(0,z.jsx)("p",{className:"text-sm text-slate-400",children:"\u05e1\u05d9\u05db\u05d5\u05dd \u05de\u05e0\u05d4\u05dc\u05d9\u05dd, \u05d0\u05e1\u05d8\u05e8\u05d8\u05d2\u05d9\u05d5\u05ea, \u05e9\u05d9\u05d7\u05d4 \u05e2\u05dd \u05d9\u05ea\u05e8\u05d5"})]})]})]})]}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{className:"md:hidden space-y-4",children:Ie.map(e=>(0,z.jsxs)("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl border border-white/20 p-4 hover:bg-white/15 transition-colors",children:[(0,z.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,z.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,z.jsx)("h3",{className:"text-white font-semibold text-lg truncate",children:e.name}),(0,z.jsxs)("div",{className:"flex gap-2 mt-1 flex-wrap",children:[e.document_source&&(0,z.jsx)("span",{className:"text-xs px-2 py-0.5 rounded ".concat("self"===e.document_source?"bg-blue-500/20 text-blue-300":"bg-red-500/20 text-red-300"),children:"self"===e.document_source?"\ud83d\udee1\ufe0f \u05e9\u05dc\u05d9":"\u2694\ufe0f \u05d9\u05e8\u05d9\u05d1"}),e.quality&&(0,z.jsxs)("span",{className:"text-xs px-2 py-0.5 rounded font-semibold ".concat("quality"===e.quality?"bg-green-500/20 text-green-300 border border-green-500":"balanced"===e.quality?"bg-yellow-500/20 text-yellow-300 border border-yellow-500":"bg-blue-500/20 text-blue-300 border border-blue-500"),children:["quality"===e.quality&&"\ud83d\udfe2 \u05de\u05e2\u05d5\u05dc\u05d4","balanced"===e.quality&&"\ud83d\udfe1 \u05de\u05d0\u05d5\u05d6\u05df","cost"===e.quality&&"\ud83d\udd35 \u05d1\u05e1\u05d9\u05e1\u05d9"]})]})]}),(0,z.jsx)("span",{className:"text-blue-300 text-sm whitespace-nowrap mr-2",children:new Date(e.created_at).toLocaleDateString("he-IL")})]}),(0,z.jsx)("div",{className:"mb-4",children:"analyzing"===e.status?(0,z.jsxs)("div",{className:"space-y-2",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,z.jsx)("span",{className:"text-orange-300 font-medium",children:"ocr"===e.current_stage?"\ud83d\udcc4 \u05e7\u05d5\u05e8\u05d0 \u05de\u05e1\u05de\u05db\u05d9\u05dd":"claims"===e.current_stage?"\ud83d\udccb \u05de\u05d7\u05dc\u05e5 \u05d8\u05e2\u05e0\u05d5\u05ea":"entities"===e.current_stage?"\ud83d\udc65 \u05de\u05d6\u05d4\u05d4 \u05d9\u05e9\u05d5\u05d9\u05d5\u05ea":"contradictions"===e.current_stage?"\u2696\ufe0f \u05de\u05d7\u05e4\u05e9 \u05e1\u05ea\u05d9\u05e8\u05d5\u05ea":"insights"===e.current_stage?"\ud83d\udca1 \u05de\u05d9\u05d9\u05e6\u05e8 \u05ea\u05d5\u05d1\u05e0\u05d5\u05ea":"\u05de\u05e2\u05d1\u05d3..."}),(0,z.jsxs)("span",{className:"text-blue-300",children:[e.overall_progress||0,"%"]})]}),(0,z.jsx)("div",{className:"w-full bg-white/10 rounded-full h-2 overflow-hidden",children:(0,z.jsx)("div",{className:"h-full bg-gradient-to-r from-orange-500 to-yellow-500 transition-all duration-300",style:{width:"".concat(e.overall_progress||0,"%")}})})]}):"completed"===e.status?(0,z.jsxs)("div",{className:"flex items-center gap-2 text-green-300 text-sm",children:[(0,z.jsx)("span",{children:"\u2713 \u05d4\u05d5\u05e9\u05dc\u05dd"}),(0,z.jsx)("div",{className:"flex-1 bg-white/10 rounded-full h-2 overflow-hidden",children:(0,z.jsx)("div",{className:"h-full bg-gradient-to-r from-green-500 to-emerald-500 w-full"})})]}):(0,z.jsx)("span",{className:"text-red-400 text-sm",children:"\u274c \u05e0\u05db\u05e9\u05dc"})}),(0,z.jsxs)("div",{className:"grid grid-cols-4 gap-2 mb-4",children:[(0,z.jsxs)("div",{className:"text-center p-2 bg-white/5 rounded-lg",children:[(0,z.jsx)("div",{className:"text-blue-300 font-bold",children:e.files_count||0}),(0,z.jsx)("div",{className:"text-xs text-blue-400",children:"\u05e7\u05d1\u05e6\u05d9\u05dd"})]}),(0,z.jsxs)("div",{className:"text-center p-2 bg-white/5 rounded-lg",children:[(0,z.jsx)("div",{className:"text-green-300 font-bold",children:e.claims_count||0}),(0,z.jsx)("div",{className:"text-xs text-green-400",children:"\u05d8\u05e2\u05e0\u05d5\u05ea"})]}),(0,z.jsxs)("div",{className:"text-center p-2 bg-white/5 rounded-lg",children:[(0,z.jsxs)("div",{className:"text-white font-bold flex items-center justify-center gap-1",children:[e.contradictions_count||0,e.critical_count>0&&(0,z.jsx)("span",{className:"text-red-400 text-xs",children:"\ud83d\udd34"})]}),(0,z.jsx)("div",{className:"text-xs text-slate-400",children:"\u05e1\u05ea\u05d9\u05e8\u05d5\u05ea"})]}),(0,z.jsxs)("div",{className:"text-center p-2 bg-white/5 rounded-lg",children:[(0,z.jsx)("div",{className:"text-purple-300 font-bold",children:e.entities_count||0}),(0,z.jsx)("div",{className:"text-xs text-purple-400",children:"\u05d9\u05e9\u05d5\u05d9\u05d5\u05ea"})]})]}),(0,z.jsx)("div",{className:"flex items-center gap-2",children:"completed"===e.status?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("button",{onClick:()=>t("/cases/".concat(e.id)),className:"flex-1 px-4 py-2 bg-gradient-to-r from-cyan-600 to-blue-600 text-white rounded-lg text-sm font-semibold hover:from-cyan-700 hover:to-blue-700 transition-all shadow-lg flex items-center justify-center gap-2",children:[(0,z.jsx)(g.A,{size:16}),"\u05e4\u05ea\u05d7 \u05ea\u05d9\u05e7"]}),(0,z.jsx)("button",{onClick:()=>Ne({isOpen:!0,caseId:e.id,currentName:e.name,newName:e.name}),className:"p-2 text-blue-400 hover:text-blue-300 hover:bg-blue-500/10 rounded-lg transition-colors",title:"\u05e9\u05e0\u05d4 \u05e9\u05dd",children:(0,z.jsx)(f,{size:16})}),(0,z.jsx)("button",{onClick:()=>je({isOpen:!0,type:"delete",caseId:e.id,caseName:e.name}),className:"p-2 text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded-lg transition-colors",title:"\u05de\u05d7\u05e7",children:"\ud83d\uddd1\ufe0f"})]}):"analyzing"===e.status?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("button",{onClick:()=>t("/cases/".concat(e.id)),className:"flex-1 px-4 py-2 bg-orange-600 text-white rounded-lg text-sm hover:bg-orange-700 transition-colors",children:"\u05e6\u05e4\u05d4 \u05d1\u05e0\u05d9\u05ea\u05d5\u05d7"}),(0,z.jsx)("button",{onClick:()=>je({isOpen:!0,type:"cancel",caseId:e.id,caseName:e.name}),className:"px-3 py-2 bg-red-600 text-white rounded-lg text-sm hover:bg-red-700 transition-colors",children:"\u05d4\u05e4\u05e1\u05e7"})]}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("button",{onClick:()=>Ce(e.id),className:"flex-1 px-4 py-2 bg-green-600/20 text-green-300 rounded-lg text-sm hover:bg-green-600/30 transition-colors flex items-center justify-center gap-2",title:"\u05e0\u05e1\u05d4 \u05e9\u05d5\u05d1",children:[(0,z.jsx)(j.A,{size:14}),"\u05e0\u05e1\u05d4 \u05e9\u05d5\u05d1"]}),(0,z.jsx)("button",{onClick:()=>Ne({isOpen:!0,caseId:e.id,currentName:e.name,newName:e.name}),className:"p-2 text-blue-400 hover:text-blue-300 hover:bg-blue-500/10 rounded-lg transition-colors",title:"\u05e9\u05e0\u05d4 \u05e9\u05dd",children:(0,z.jsx)(f,{size:16})}),(0,z.jsx)("button",{onClick:()=>je({isOpen:!0,type:"delete",caseId:e.id,caseName:e.name}),className:"p-2 text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded-lg transition-colors",title:"\u05de\u05d7\u05e7",children:"\ud83d\uddd1\ufe0f"})]})})]},e.id))}),(0,z.jsxs)("div",{className:"hidden md:block bg-white/10 backdrop-blur-xl rounded-2xl border border-white/20 overflow-hidden",children:[(0,z.jsx)("div",{className:"lg:hidden text-xs text-blue-300 text-center py-2 bg-white/5 border-b border-white/10",children:"\u2190 \u05d2\u05dc\u05d5\u05dc \u05dc\u05e6\u05e4\u05d9\u05d9\u05d4 \u05d1\u05db\u05dc \u05d4\u05e2\u05de\u05d5\u05d3\u05d5\u05ea \u2192"}),(0,z.jsx)("div",{className:"overflow-x-auto",children:(0,z.jsxs)("table",{className:"w-full min-w-[800px]",children:[(0,z.jsx)("thead",{className:"bg-white/5 border-b border-white/20",children:(0,z.jsx)("tr",{children:[{field:"name",label:"\u05e9\u05dd \u05d4\u05ea\u05d9\u05e7",width:"w-1/5"},{field:"progress",label:"\u05d4\u05ea\u05e7\u05d3\u05de\u05d5\u05ea",width:"w-32"},{field:"created_at",label:"\u05ea\u05d0\u05e8\u05d9\u05da",width:"w-28"},{field:"files_count",label:"\u05e7\u05d1\u05e6\u05d9\u05dd",width:"w-20"},{field:"claims_count",label:"\u05d8\u05e2\u05e0\u05d5\u05ea",width:"w-20"},{field:"contradictions_count",label:"\u05e1\u05ea\u05d9\u05e8\u05d5\u05ea",width:"w-24"},{field:"entities_count",label:"\u05d9\u05e9\u05d5\u05d9\u05d5\u05ea",width:"w-20"},{field:"actions",label:"\u05e4\u05e2\u05d5\u05dc\u05d5\u05ea",width:"w-24"}].map(e=>(0,z.jsx)("th",{onClick:()=>{return"actions"!==e.field&&"progress"!==e.field&&(s=e.field,void(te===s?re("asc"===ae?"desc":"asc"):(le(s),re("desc"))));var s},className:"px-4 py-3 text-right text-sm font-semibold text-blue-200 ".concat("actions"!==e.field&&"progress"!==e.field?"cursor-pointer hover:text-white":""," ").concat(e.width),children:(0,z.jsxs)("div",{className:"flex items-center gap-2",children:[e.label,te===e.field&&(0,z.jsx)("span",{className:"text-blue-400",children:"asc"===ae?"\u2191":"\u2193"})]})},e.field))})}),(0,z.jsx)("tbody",{children:Ie.map(e=>{var s;return(0,z.jsxs)("tr",{className:"border-b border-white/10 hover:bg-white/5 transition-colors",children:[(0,z.jsx)("td",{className:"px-4 py-4",children:(0,z.jsx)("div",{className:"flex items-center gap-3",children:(0,z.jsxs)("div",{children:[(0,z.jsx)("p",{className:"text-white font-semibold",children:e.name}),(0,z.jsxs)("div",{className:"flex gap-2 mt-1 flex-wrap",children:[e.document_source&&(0,z.jsx)("span",{className:"text-xs px-2 py-0.5 rounded ".concat("self"===e.document_source?"bg-blue-500/20 text-blue-300":"bg-red-500/20 text-red-300"),children:"self"===e.document_source?"\ud83d\udee1\ufe0f \u05e9\u05dc\u05d9":"\u2694\ufe0f \u05d9\u05e8\u05d9\u05d1"}),e.quality&&(0,z.jsxs)("span",{className:"text-xs px-2 py-0.5 rounded font-semibold ".concat("quality"===e.quality?"bg-green-500/20 text-green-300 border border-green-500":"balanced"===e.quality?"bg-yellow-500/20 text-yellow-300 border border-yellow-500":"bg-blue-500/20 text-blue-300 border border-blue-500"),children:["quality"===e.quality&&"\ud83d\udfe2 \u05de\u05e2\u05d5\u05dc\u05d4","balanced"===e.quality&&"\ud83d\udfe1 \u05de\u05d0\u05d5\u05d6\u05df","cost"===e.quality&&"\ud83d\udd35 \u05d1\u05e1\u05d9\u05e1\u05d9"]}),"completed"===e.status&&(0,z.jsx)(z.Fragment,{children:["professional","enterprise","admin"].includes(null===O||void 0===O||null===(s=O.subscription_tier)||void 0===s?void 0:s.toLowerCase())||"admin"===(null===O||void 0===O?void 0:O.role)?(0,z.jsxs)("span",{className:"text-xs px-2 py-0.5 rounded bg-purple-500/20 text-purple-300 border border-purple-500 font-semibold flex items-center gap-1",title:"\u05e0\u05d9\u05ea\u05d5\u05d7 \u05de\u05d5\u05d3\u05d9\u05e2\u05d9\u05e0\u05d9 \u05de\u05ea\u05e7\u05d3\u05dd \u05d6\u05de\u05d9\u05df",children:[(0,z.jsx)(i.A,{size:12}),"\u05d0\u05d9\u05e0\u05d8\u05dc\u05d9\u05d2\u05e0\u05e1 \u2713"]}):(0,z.jsxs)("button",{onClick:e=>{e.stopPropagation(),t("/pricing")},className:"text-xs px-2 py-0.5 rounded bg-gray-600/30 text-gray-400 border border-gray-600 font-semibold flex items-center gap-1 hover:bg-purple-600/30 hover:text-purple-300 hover:border-purple-500 transition-colors group",title:"\u05dc\u05d7\u05e5 \u05dc\u05e9\u05d3\u05e8\u05d5\u05d2 - \u05e0\u05d9\u05ea\u05d5\u05d7 \u05de\u05d5\u05d3\u05d9\u05e2\u05d9\u05e0\u05d9 \u05de\u05ea\u05e7\u05d3\u05dd \u05db\u05d5\u05dc\u05dc: \u05e0\u05e8\u05d8\u05d9\u05d1 \u05d4\u05d9\u05e8\u05d9\u05d1, \u05d7\u05d5\u05d6\u05e7\u05d5\u05ea \u05d5\u05d7\u05d5\u05dc\u05e9\u05d5\u05ea, \u05d5\u05d4\u05de\u05dc\u05e6\u05d5\u05ea \u05d0\u05e1\u05d8\u05e8\u05d8\u05d2\u05d9\u05d5\u05ea",children:[(0,z.jsx)("span",{className:"text-gray-500 group-hover:hidden",children:"\ud83d\udd12"}),(0,z.jsx)("span",{className:"hidden group-hover:inline",children:"\u2728"}),(0,z.jsx)(i.A,{size:12}),"\u05d0\u05d9\u05e0\u05d8\u05dc\u05d9\u05d2\u05e0\u05e1"]})})]})]})})}),(0,z.jsx)("td",{className:"px-4 py-4",children:"analyzing"===e.status?(0,z.jsxs)("div",{className:"space-y-1",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between text-xs mb-1",children:[(0,z.jsx)("span",{className:"text-orange-300 font-medium",children:"ocr"===e.current_stage?"\ud83d\udcc4 \u05e7\u05d5\u05e8\u05d0 \u05de\u05e1\u05de\u05db\u05d9\u05dd":"claims"===e.current_stage?"\ud83d\udccb \u05de\u05d7\u05dc\u05e5 \u05d8\u05e2\u05e0\u05d5\u05ea":"entities"===e.current_stage?"\ud83d\udc65 \u05de\u05d6\u05d4\u05d4 \u05d9\u05e9\u05d5\u05d9\u05d5\u05ea":"contradictions"===e.current_stage?"\u2696\ufe0f \u05de\u05d7\u05e4\u05e9 \u05e1\u05ea\u05d9\u05e8\u05d5\u05ea":"insights"===e.current_stage?"\ud83d\udca1 \u05de\u05d9\u05d9\u05e6\u05e8 \u05ea\u05d5\u05d1\u05e0\u05d5\u05ea":"\u05de\u05e2\u05d1\u05d3..."}),(0,z.jsxs)("span",{className:"text-blue-300",children:[e.overall_progress||0,"%"]})]}),e.current_file_name&&(0,z.jsxs)("div",{className:"text-xs text-slate-400 truncate max-w-[200px]",title:e.current_file_name,children:[e.current_file_name,e.current_page&&e.files_total&&(0,z.jsxs)("span",{className:"text-blue-400 mr-1",children:[" ","(\u05e2\u05de\u05d5\u05d3 ",e.current_page,")"]})]}),null!==e.files_completed&&e.files_total&&(0,z.jsxs)("div",{className:"text-xs text-slate-500",children:["\u05e7\u05d5\u05d1\u05e5 ",(e.files_completed||0)+1," \u05de\u05ea\u05d5\u05da ",e.files_total]}),(0,z.jsx)("div",{className:"w-full bg-white/10 rounded-full h-2 overflow-hidden",children:(0,z.jsx)("div",{className:"h-full bg-gradient-to-r from-orange-500 to-yellow-500 transition-all duration-300",style:{width:"".concat(e.overall_progress||0,"%")}})})]}):"completed"===e.status?(0,z.jsxs)("div",{className:"space-y-1",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between text-xs mb-1",children:[(0,z.jsx)("span",{className:"text-green-300 font-medium",children:"\u2713 \u05d4\u05d5\u05e9\u05dc\u05dd"}),(0,z.jsx)("span",{className:"text-green-300",children:"100%"})]}),(0,z.jsx)("div",{className:"w-full bg-white/10 rounded-full h-2 overflow-hidden",children:(0,z.jsx)("div",{className:"h-full bg-gradient-to-r from-green-500 to-emerald-500",style:{width:"100%"}})})]}):(0,z.jsx)("div",{className:"text-xs text-blue-300",children:"--"})}),(0,z.jsx)("td",{className:"px-4 py-4 text-blue-300 text-sm",children:new Date(e.created_at).toLocaleDateString("he-IL")}),(0,z.jsx)("td",{className:"px-4 py-4 text-center",children:(0,z.jsx)("span",{className:"inline-flex items-center justify-center w-8 h-8 rounded-full bg-blue-500/20 text-blue-300 font-semibold text-sm",children:e.files_count||0})}),(0,z.jsx)("td",{className:"px-4 py-4 text-center",children:(0,z.jsx)("span",{className:"inline-flex items-center justify-center w-8 h-8 rounded-full bg-green-500/20 text-green-300 font-semibold text-sm",children:e.claims_count||0})}),(0,z.jsx)("td",{className:"px-4 py-4",children:(0,z.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,z.jsx)("span",{className:"text-white font-bold",children:e.contradictions_count||0}),e.critical_count>0&&(0,z.jsxs)("span",{className:"text-red-400 text-xs",children:["\ud83d\udd34",e.critical_count]})]})}),(0,z.jsx)("td",{className:"px-4 py-4 text-center",children:(0,z.jsx)("span",{className:"inline-flex items-center justify-center w-8 h-8 rounded-full bg-purple-500/20 text-purple-300 font-semibold text-sm",children:e.entities_count||0})}),(0,z.jsx)("td",{className:"px-4 py-4",children:(0,z.jsx)("div",{className:"flex items-center gap-2 flex-wrap",children:"completed"===e.status?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("button",{onClick:()=>t("/cases/".concat(e.id)),className:"px-4 py-2 bg-gradient-to-r from-cyan-600 to-blue-600 text-white rounded-lg text-sm font-semibold hover:from-cyan-700 hover:to-blue-700 transition-all shadow-lg flex items-center gap-2",title:"\u05e4\u05ea\u05d7 \u05ea\u05d9\u05e7",children:[(0,z.jsx)(g.A,{size:16}),(0,z.jsx)("span",{children:"\u05e4\u05ea\u05d7"})]}),(0,z.jsx)("button",{onClick:()=>Ne({isOpen:!0,caseId:e.id,currentName:e.name,newName:e.name}),className:"px-2 py-1.5 text-blue-400 hover:text-blue-300 text-sm",title:"\u05e9\u05e0\u05d4 \u05e9\u05dd",children:(0,z.jsx)(f,{size:16})}),(0,z.jsx)("button",{onClick:()=>{je({isOpen:!0,type:"delete",caseId:e.id,caseName:e.name})},className:"px-2 py-1.5 text-red-400 hover:text-red-300 text-sm",title:"\u05de\u05d7\u05e7 \u05ea\u05d9\u05e7",children:"\ud83d\uddd1\ufe0f"})]}):"analyzing"===e.status?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("button",{onClick:()=>t("/cases/".concat(e.id)),className:"px-3 py-1 bg-orange-600 text-white rounded-lg text-sm hover:bg-orange-700 transition-colors",children:"\u05e6\u05e4\u05d4"}),(0,z.jsx)("button",{onClick:()=>{je({isOpen:!0,type:"cancel",caseId:e.id,caseName:e.name})},className:"px-3 py-1 bg-red-600 text-white rounded-lg text-sm hover:bg-red-700 transition-colors ml-2",children:"\u05d4\u05e4\u05e1\u05e7"})]}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("span",{className:"text-red-400 text-sm",children:"\u274c \u05e0\u05db\u05e9\u05dc"}),(0,z.jsx)("button",{onClick:()=>Ce(e.id),className:"px-2 py-1 text-green-400 hover:text-green-300 text-sm flex items-center gap-1",title:"\u05e0\u05e1\u05d4 \u05e9\u05d5\u05d1",children:(0,z.jsx)(j.A,{size:14})}),(0,z.jsx)("button",{onClick:()=>Ne({isOpen:!0,caseId:e.id,currentName:e.name,newName:e.name}),className:"px-2 py-1 text-blue-400 hover:text-blue-300 text-sm",title:"\u05e9\u05e0\u05d4 \u05e9\u05dd",children:(0,z.jsx)(f,{size:14})}),(0,z.jsx)("button",{onClick:()=>{je({isOpen:!0,type:"delete",caseId:e.id,caseName:e.name})},className:"px-2 py-1 text-red-400 hover:text-red-300 text-sm",title:"\u05de\u05d7\u05e7 \u05ea\u05d9\u05e7",children:"\ud83d\uddd1\ufe0f"})]})})})]},e.id)})})]})})]}),"full"===s&&Se>1&&(0,z.jsxs)("div",{className:"mt-4 flex items-center justify-between text-blue-200",children:[(0,z.jsxs)("p",{className:"text-sm",children:["\u05de\u05e6\u05d9\u05d2 ",Le+1,"-",Math.min(Ee,Ae.length)," \u05de\u05ea\u05d5\u05da ",Ae.length," \u05ea\u05d9\u05e7\u05d9\u05dd"]}),(0,z.jsxs)("div",{className:"flex gap-2",children:[(0,z.jsx)("button",{onClick:()=>pe(e=>Math.max(1,e-1)),disabled:1===he,className:"px-3 py-1 bg-white/10 rounded-lg hover:bg-white/20 disabled:opacity-50 disabled:cursor-not-allowed",children:"\u2190 \u05d4\u05e7\u05d5\u05d3\u05dd"}),[...Array(Se)].map((e,s)=>(0,z.jsx)("button",{onClick:()=>pe(s+1),className:"px-3 py-1 rounded-lg ".concat(he===s+1?"bg-blue-600 text-white":"bg-white/10 hover:bg-white/20"),children:s+1},s)),(0,z.jsx)("button",{onClick:()=>pe(e=>Math.min(Se,e+1)),disabled:he===Se,className:"px-3 py-1 bg-white/10 rounded-lg hover:bg-white/20 disabled:opacity-50 disabled:cursor-not-allowed",children:"\u05d4\u05d1\u05d0 \u2192"})]})]})]}),P&&(0,z.jsx)(S,{onClose:()=>B(!1),onSelectCase:e=>{B(!1),t("/cases/".concat(e.id))},onUploadToCase:e=>{B(!1),J(e),U(!0)},onNewCase:()=>{B(!1),G(!0)}}),$&&X&&(0,z.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,z.jsxs)("div",{className:"bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col border border-white/20",children:[(0,z.jsxs)("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 p-6 text-white flex items-center justify-between",children:[(0,z.jsxs)("div",{children:[(0,z.jsxs)("h2",{className:"text-2xl font-bold",children:["\u05d4\u05e2\u05dc\u05d0\u05ea \u05e7\u05d1\u05e6\u05d9\u05dd \u05dc\u05ea\u05d9\u05e7: ",X.name]}),(0,z.jsx)("p",{className:"text-purple-100 text-sm mt-1",children:"\u05d4\u05d5\u05e1\u05e3 \u05de\u05e1\u05de\u05db\u05d9\u05dd \u05d5\u05d4\u05e8\u05e5 \u05e0\u05d9\u05ea\u05d5\u05d7 \u05de\u05d7\u05d3\u05e9"})]}),(0,z.jsx)("button",{onClick:()=>{U(!1),J(null)},className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:(0,z.jsx)(v.A,{size:24})})]}),(0,z.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:(0,z.jsx)(R.default,{caseId:X.id,caseName:X.name,files:X.files||[],onFilesUpdate:e=>{we(),U(!1);const s=X.id;J(null),null!==e&&void 0!==e&&e.reanalyzing&&(N.oR.success("\u05d4\u05de\u05e1\u05de\u05db\u05d9\u05dd \u05d4\u05d5\u05e2\u05dc\u05d5 \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4! \u05e2\u05d5\u05d1\u05e8\u05d9\u05dd \u05dc\u05d3\u05e3 \u05d4\u05d4\u05ea\u05e7\u05d3\u05de\u05d5\u05ea..."),t("/cases/".concat(s)))},autoOpenUpload:!0})})]})}),W&&(0,z.jsx)(q,{onClose:()=>{G(!1)},onCaseCreated:e=>{G(!1),t("/cases/".concat(e))}}),(0,z.jsx)(H,{isOpen:ee,onClose:()=>{se(!1),localStorage.setItem("onboarding_completed","true")},onComplete:()=>{se(!1),localStorage.setItem("onboarding_completed","true")}}),(0,z.jsx)(Z,{isOpen:fe.isOpen,onClose:()=>je((0,l.A)((0,l.A)({},fe),{},{isOpen:!1})),onConfirm:()=>{fe.caseId&&("delete"===fe.type?(async e=>{N.oR.loading("\u05de\u05d5\u05d7\u05e7 \u05ea\u05d9\u05e7...",{id:"delete-".concat(e)});try{await(0,D.Al)("/api/cases/".concat(e),{showErrorToast:!1}),I(e),N.oR.success("\u05d4\u05ea\u05d9\u05e7 \u05e0\u05de\u05d7\u05e7 \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4",{id:"delete-".concat(e)}),M()}catch(L){F.v.error("Error deleting case:",L),N.oR.error("\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05de\u05d7\u05d9\u05e7\u05ea \u05d4\u05ea\u05d9\u05e7",{id:"delete-".concat(e)})}})(fe.caseId):"cancel"===fe.type&&(async e=>{N.oR.loading("\u05de\u05d5\u05d7\u05e7 \u05ea\u05d9\u05e7...",{id:"delete-".concat(e)});try{await(0,D.Al)("/api/cases/".concat(e),{showErrorToast:!1}),I(e),N.oR.success("\u05d4\u05e0\u05d9\u05ea\u05d5\u05d7 \u05d4\u05d5\u05e4\u05e1\u05e7 \u05d5\u05d4\u05ea\u05d9\u05e7 \u05e0\u05de\u05d7\u05e7",{id:"delete-".concat(e)}),M()}catch(L){F.v.error("Error canceling analysis:",L),N.oR.error("\u05e9\u05d2\u05d9\u05d0\u05d4: ".concat(L.message),{id:"delete-".concat(e)})}})(fe.caseId),je((0,l.A)((0,l.A)({},fe),{},{isOpen:!1})))},title:"delete"===fe.type?"\u05de\u05d7\u05d9\u05e7\u05ea \u05ea\u05d9\u05e7":"\u05d1\u05d9\u05d8\u05d5\u05dc \u05e0\u05d9\u05ea\u05d5\u05d7",message:"delete"===fe.type?'\u05d4\u05d0\u05dd \u05d0\u05ea\u05d4 \u05d1\u05d8\u05d5\u05d7 \u05e9\u05d1\u05e8\u05e6\u05d5\u05e0\u05da \u05dc\u05de\u05d7\u05d5\u05e7 \u05d0\u05ea \u05d4\u05ea\u05d9\u05e7 "'.concat(fe.caseName||"\u05d6\u05d4",'"? \u05e4\u05e2\u05d5\u05dc\u05d4 \u05d6\u05d5 \u05dc\u05d0 \u05e0\u05d9\u05ea\u05e0\u05ea \u05dc\u05d1\u05d9\u05d8\u05d5\u05dc.'):'\u05d4\u05d0\u05dd \u05d0\u05ea\u05d4 \u05d1\u05d8\u05d5\u05d7 \u05e9\u05d1\u05e8\u05e6\u05d5\u05e0\u05da \u05dc\u05d4\u05e4\u05e1\u05d9\u05e7 \u05d5\u05dc\u05de\u05d7\u05d5\u05e7 \u05d0\u05ea \u05d4\u05e0\u05d9\u05ea\u05d5\u05d7 \u05e9\u05dc \u05d4\u05ea\u05d9\u05e7 "'.concat(fe.caseName||"\u05d6\u05d4",'"? \u05e4\u05e2\u05d5\u05dc\u05d4 \u05d6\u05d5 \u05dc\u05d0 \u05e0\u05d9\u05ea\u05e0\u05ea \u05dc\u05d1\u05d9\u05d8\u05d5\u05dc.'),confirmText:"delete"===fe.type?"\u05de\u05d7\u05e7":"\u05d4\u05e4\u05e1\u05e7 \u05d5\u05de\u05d7\u05e7",cancelText:"\u05d1\u05d9\u05d8\u05d5\u05dc",type:"danger"}),ve.isOpen&&(0,z.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",dir:"rtl",children:(0,z.jsxs)("div",{className:"bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 rounded-2xl shadow-2xl w-full max-w-md border border-white/20 overflow-hidden",children:[(0,z.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-blue-800 p-6 text-white flex items-center justify-between",children:[(0,z.jsxs)("div",{className:"flex items-center gap-3",children:[(0,z.jsx)("div",{className:"w-12 h-12 bg-blue-500/20 rounded-xl flex items-center justify-center text-blue-400",children:(0,z.jsx)(f,{size:24})}),(0,z.jsx)("h2",{className:"text-xl font-bold",children:"\u05e9\u05d9\u05e0\u05d5\u05d9 \u05e9\u05dd \u05ea\u05d9\u05e7"})]}),(0,z.jsx)("button",{onClick:()=>Ne({isOpen:!1,caseId:null,currentName:"",newName:""}),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:(0,z.jsx)(v.A,{size:24})})]}),(0,z.jsxs)("div",{className:"p-6",children:[(0,z.jsx)("label",{className:"block text-white/80 mb-2 text-sm",children:"\u05e9\u05dd \u05d4\u05ea\u05d9\u05e7 \u05d4\u05d7\u05d3\u05e9:"}),(0,z.jsx)("input",{type:"text",value:ve.newName,onChange:e=>Ne((0,l.A)((0,l.A)({},ve),{},{newName:e.target.value})),placeholder:ve.currentName,className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/50",autoFocus:!0,onKeyDown:e=>{"Enter"===e.key&&ye(ve.caseId,ve.newName)}}),(0,z.jsxs)("div",{className:"flex gap-3 justify-end mt-6",children:[(0,z.jsx)("button",{onClick:()=>Ne({isOpen:!1,caseId:null,currentName:"",newName:""}),className:"px-6 py-2 bg-white/10 text-white rounded-lg font-semibold hover:bg-white/20 transition-colors",children:"\u05d1\u05d9\u05d8\u05d5\u05dc"}),(0,z.jsx)("button",{onClick:()=>ye(ve.caseId,ve.newName),className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold transition-all",children:"\u05e9\u05de\u05d5\u05e8"})]})]})]})})]})}},8646:(e,s,t)=>{t.d(s,{A:()=>l});const l=(0,t(7784).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},9569:(e,s,t)=>{t.d(s,{A:()=>i});t(5043);var l=t(7819),a=t(516),r=t(614),n=t(579);const i=e=>{let{error:s,onRetry:t,onDismiss:i,title:c="\u05e9\u05d2\u05d9\u05d0\u05d4",retryText:d="\u05e0\u05e1\u05d4 \u05e9\u05d5\u05d1",dismissText:o="\u05e1\u05d2\u05d5\u05e8",showRetry:x=!0,showDismiss:m=!0,className:u=""}=e;if(!s)return null;const h="string"===typeof s?s:s.message||"\u05e9\u05d2\u05d9\u05d0\u05d4 \u05dc\u05d0 \u05d9\u05d3\u05d5\u05e2\u05d4";return(0,n.jsx)("div",{className:"bg-red-500/20 border border-red-500/50 rounded-xl p-4 ".concat(u),dir:"rtl",children:(0,n.jsxs)("div",{className:"flex items-start gap-3",children:[(0,n.jsx)("div",{className:"flex-shrink-0 w-10 h-10 bg-red-500/20 rounded-lg flex items-center justify-center",children:(0,n.jsx)(l.A,{className:"text-red-400",size:20})}),(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,n.jsx)("h3",{className:"text-red-200 font-semibold text-lg",children:c}),m&&i&&(0,n.jsx)("button",{onClick:i,className:"p-1 hover:bg-red-500/20 rounded-lg transition-colors text-red-300 hover:text-red-200",title:o,children:(0,n.jsx)(r.A,{size:18})})]}),(0,n.jsx)("p",{className:"text-red-200 text-sm leading-relaxed",children:h}),x&&t&&(0,n.jsxs)("button",{onClick:t,className:"mt-3 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-semibold transition-all flex items-center gap-2 text-sm",children:[(0,n.jsx)(a.A,{size:16}),d]})]})]})})}}}]);
//# sourceMappingURL=6381.444a5081.chunk.js.map