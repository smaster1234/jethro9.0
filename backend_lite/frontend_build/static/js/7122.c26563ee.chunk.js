"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[7122],{248:(e,t,s)=>{s.d(t,{A:()=>L});s(5043);var a=s(5475),l=s(7033),i=s(2054),n=s(6245),r=s(6099),c=s(7719),d=s(5692),o=s(3528),x=s(6382),m=s(6405),u=s(5088),h=s(764),p=s(5087),v=s(1680),g=s(8012),b=s(9292),y=s(2489),j=s(3165),f=s(7118),N=s(579);const w={claims:b.A,contradictions:c.A,disputes:f.A,timeline:u.A,strategy:j.A,game_theory:x.A,risk_assessment:y.A,strategy_memo:v.A,precedents:g.A,legal_knowledge:x.A,rulings_search:g.A,similarity_search:b.A,judge_analytics:f.A,counsel_analytics:f.A,entities:f.A,red_flags:c.A,insights:x.A,summary:v.A,ai_summary:r.A,evidence_strength:y.A,adversarial:j.A,narrative:v.A,gap_analysis:c.A,forensics:b.A,rhetoric_forensics:x.A,contract_forensics:v.A,witness_credibility:f.A,actors:f.A,risk:y.A,draft_mode:v.A,default:r.A},A=e=>{let{capability:t,onClick:s}=e;const a=w[t.id]||w.default;return(0,N.jsxs)("button",{onClick:"not_ready"!==t.status?s:void 0,disabled:"not_ready"===t.status||"running"===t.status,className:"\n        relative flex items-center gap-1.5 px-2 py-1.5 rounded-md border\n        transition-all duration-150 text-right w-full\n        ".concat((()=>{switch(t.status){case"ready":return"bg-slate-800/80 text-white border-slate-600/50 hover:bg-slate-700 hover:border-blue-500/50 cursor-pointer";case"running":return"bg-blue-600/20 text-blue-400 border-blue-500/30 animate-pulse";case"partial":return"bg-slate-800/60 text-white/80 border-yellow-500/30 hover:bg-slate-700 cursor-pointer";case"not_ready":return"bg-slate-800/30 text-white/30 border-slate-700/30 cursor-not-allowed";default:return"bg-slate-800/50 text-white/60 border-slate-700"}})(),"\n      "),title:t.reason_he||t.name_he,children:[(0,N.jsx)("div",{className:"w-1.5 h-1.5 rounded-full flex-shrink-0 ".concat((()=>{switch(t.status){case"ready":return"bg-green-400";case"running":return"bg-blue-400 animate-pulse";case"partial":return"bg-yellow-400";case"not_ready":return"bg-slate-600";default:return"bg-slate-500"}})())}),(0,N.jsx)(a,{size:14,className:"flex-shrink-0"}),(0,N.jsx)("span",{className:"text-[10px] font-medium truncate flex-1",children:t.name_he})]})},C=e=>{let{source:t,onClick:s}=e;return(0,N.jsxs)("button",{onClick:s,className:"flex items-center gap-2 w-full p-2 rounded-lg bg-slate-800 hover:bg-slate-700 border border-slate-700 transition-colors text-right",children:[(0,N.jsx)(v.A,{size:14,className:(()=>{switch(t.ocr_status){case"complete":return"text-green-400";case"processing":return"text-yellow-400";case"error":return"text-red-400";default:return"text-slate-400"}})()}),(0,N.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,N.jsx)("p",{className:"text-xs text-white truncate",children:t.filename}),t.pages&&(0,N.jsxs)("p",{className:"text-[10px] text-white/50",children:[t.pages," \u05e2\u05de\u05d5\u05d3\u05d9\u05dd"]})]}),t.mentions_count&&t.mentions_count>0&&(0,N.jsx)("span",{className:"text-[10px] text-blue-300 bg-blue-500/20 px-1.5 py-0.5 rounded border border-blue-500/30",children:t.mentions_count})]})},k=e=>{let{artifact:t,onClick:s}=e;return(0,N.jsxs)("button",{onClick:s,className:"flex items-center gap-2 w-full p-2 rounded-lg bg-blue-500/10 hover:bg-blue-500/20 border border-blue-500/20 transition-colors text-right",children:[(0,N.jsx)(o.A,{size:14,className:"text-blue-400"}),(0,N.jsx)("span",{className:"text-xs text-white flex-1 truncate",children:t.title_he}),(0,N.jsx)(p.A,{size:12,className:"text-white/40"})]})},_=e=>{let{action:t}=e;return(0,N.jsxs)("button",{onClick:t.onClick,className:"\n        flex items-center gap-2 w-full p-2 rounded-lg border-r-2 border border-slate-700/50\n        hover:bg-slate-700/30 transition-colors text-right\n        ".concat((()=>{switch(t.priority){case"high":return"border-r-red-500 bg-red-500/10";case"medium":return"border-r-yellow-500 bg-yellow-500/10";default:return"border-r-blue-500 bg-blue-500/10"}})(),"\n      "),children:[(0,N.jsxs)("div",{className:"flex-1",children:[(0,N.jsx)("p",{className:"text-xs text-white font-medium",children:t.label_he}),(0,N.jsx)("p",{className:"text-[10px] text-white/50",children:t.description_he})]}),(0,N.jsx)(d.A,{size:14,className:"text-white/40"})]})},S=[{key:"core",title:"\u05e0\u05d9\u05ea\u05d5\u05d7 \u05dc\u05d9\u05d1\u05d4",ids:["claims","contradictions","disputes","timeline"]},{key:"strategy",title:"\u05d0\u05e1\u05d8\u05e8\u05d8\u05d2\u05d9\u05d4",ids:["strategy","game_theory","risk_assessment","strategy_memo"]},{key:"research",title:"\u05e4\u05e1\u05d9\u05e7\u05d4 \u05d5\u05d9\u05d3\u05e2",ids:["precedents","legal_knowledge","judge_analytics","counsel_analytics"]},{key:"workflow",title:"\u05e0\u05d9\u05ea\u05d5\u05d7 \u05de\u05ea\u05e7\u05d3\u05dd",ids:["entities","red_flags","insights","summary"]},{key:"advanced",title:"\u05e0\u05d9\u05ea\u05d5\u05d7 \u05e2\u05d5\u05de\u05e7",ids:["evidence_strength","adversarial","narrative","gap_analysis"]},{key:"forensics",title:"\u05e4\u05d5\u05e8\u05e0\u05d6\u05d9\u05e7\u05d4",ids:["forensics","rhetoric_forensics","contract_forensics","witness_credibility"]}],I=e=>{let{capabilities:t,onCapabilityClick:s}=e;const a=new Map(t.map(e=>[e.id,e])),l=t.filter(e=>"ready"===e.status).length;return(0,N.jsxs)("div",{className:"border-b border-white/10",children:[(0,N.jsx)("div",{className:"flex items-center justify-between w-full px-4 py-3",children:(0,N.jsxs)("div",{className:"flex items-center gap-2",children:[(0,N.jsx)("span",{className:"text-xs font-medium text-white/70",children:"\u05d9\u05db\u05d5\u05dc\u05d5\u05ea"}),(0,N.jsx)("span",{className:"text-[10px] bg-slate-700 text-white/50 px-1.5 py-0.5 rounded",children:l})]})}),(0,N.jsx)("div",{className:"px-4 pb-3 space-y-3",children:S.map(e=>{const t=e.ids.map(e=>a.get(e)).filter(e=>!!e);return 0===t.length?null:(0,N.jsxs)("div",{children:[(0,N.jsx)("p",{className:"text-[10px] text-white/40 font-medium mb-1.5",children:e.title}),(0,N.jsx)("div",{className:"grid grid-cols-2 gap-1.5",children:t.map(e=>(0,N.jsx)(A,{capability:e,onClick:()=>null===s||void 0===s?void 0:s(e.id)},e.id))})]},e.key)})})]})},E=e=>{let{stats:t,onOpenWorkbench:s}=e;return t&&0!==t.total?(0,N.jsxs)("div",{className:"border-b border-white/10",children:[(0,N.jsxs)("div",{className:"flex items-center justify-between w-full px-4 py-3",children:[(0,N.jsxs)("div",{className:"flex items-center gap-2",children:[(0,N.jsx)(c.A,{className:"w-4 h-4 text-amber-400"}),(0,N.jsx)("span",{className:"text-xs font-medium text-white/70",children:"\u05e1\u05ea\u05d9\u05e8\u05d5\u05ea"}),(0,N.jsx)("span",{className:"text-[10px] bg-amber-600/30 text-amber-300 px-1.5 py-0.5 rounded",children:t.total})]}),s&&(0,N.jsxs)("button",{onClick:s,className:"text-xs text-blue-400 hover:text-blue-300 flex items-center gap-1",children:[(0,N.jsx)("span",{children:"\u05e1\u05d3\u05e0\u05d4"}),(0,N.jsx)(h.A,{size:12})]})]}),(0,N.jsxs)("div",{className:"px-4 pb-3",children:[(0,N.jsxs)("div",{className:"grid grid-cols-3 gap-2 mb-2",children:[t.new>0&&(0,N.jsxs)("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-lg p-2 text-center",children:[(0,N.jsx)("div",{className:"text-lg font-semibold text-blue-400",children:t.new}),(0,N.jsx)("div",{className:"text-[9px] text-blue-300/70",children:"\u05d7\u05d3\u05e9\u05d5\u05ea"})]}),t.confirmed>0&&(0,N.jsxs)("div",{className:"bg-green-500/10 border border-green-500/20 rounded-lg p-2 text-center",children:[(0,N.jsx)("div",{className:"text-lg font-semibold text-green-400",children:t.confirmed}),(0,N.jsx)("div",{className:"text-[9px] text-green-300/70",children:"\u05de\u05d0\u05d5\u05e9\u05e8\u05d5\u05ea"})]}),t.needsEvidence>0&&(0,N.jsxs)("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-2 text-center",children:[(0,N.jsx)("div",{className:"text-lg font-semibold text-yellow-400",children:t.needsEvidence}),(0,N.jsx)("div",{className:"text-[9px] text-yellow-300/70",children:"\u05e6\u05e8\u05d9\u05da \u05e8\u05d0\u05d9\u05d5\u05ea"})]})]}),(0,N.jsxs)("div",{className:"flex items-center gap-2",children:[(0,N.jsxs)("div",{className:"flex-1 h-1.5 bg-slate-700 rounded-full overflow-hidden flex",children:[t.confirmed>0&&(0,N.jsx)("div",{className:"h-full bg-green-500",style:{width:"".concat(t.confirmed/t.total*100,"%")}}),t.usedInReport>0&&(0,N.jsx)("div",{className:"h-full bg-purple-500",style:{width:"".concat(t.usedInReport/t.total*100,"%")}}),t.notContradiction>0&&(0,N.jsx)("div",{className:"h-full bg-slate-500",style:{width:"".concat(t.notContradiction/t.total*100,"%")}})]}),(0,N.jsxs)("span",{className:"text-[10px] text-white/40",children:[Math.round((t.confirmed+t.usedInReport)/t.total*100),"%"]})]}),(0,N.jsxs)("div",{className:"flex flex-wrap gap-2 mt-2",children:[(0,N.jsxs)("div",{className:"flex items-center gap-1",children:[(0,N.jsx)(i.A,{size:10,className:"text-green-400"}),(0,N.jsx)("span",{className:"text-[9px] text-white/40",children:"\u05de\u05d0\u05d5\u05e9\u05e8"})]}),(0,N.jsxs)("div",{className:"flex items-center gap-1",children:[(0,N.jsx)(v.A,{size:10,className:"text-purple-400"}),(0,N.jsx)("span",{className:"text-[9px] text-white/40",children:"\u05d1\u05d3\u05d5\u05d7"})]}),(0,N.jsxs)("div",{className:"flex items-center gap-1",children:[(0,N.jsx)(n.A,{size:10,className:"text-slate-400"}),(0,N.jsx)("span",{className:"text-[9px] text-white/40",children:"\u05dc\u05d0 \u05e1\u05ea\u05d9\u05e8\u05d4"})]})]}),t.assigned>0&&(0,N.jsxs)("div",{className:"mt-2 flex items-center gap-1 text-[10px] text-orange-300",children:[(0,N.jsx)(f.A,{size:10}),(0,N.jsxs)("span",{children:[t.assigned," \u05de\u05e9\u05d9\u05de\u05d5\u05ea \u05e4\u05ea\u05d5\u05d7\u05d5\u05ea"]})]})]})]}):null},z=e=>{let{caseId:t}=e;return t?(0,N.jsxs)("div",{className:"border-b border-white/10",children:[(0,N.jsx)("div",{className:"flex items-center justify-between w-full px-4 py-3",children:(0,N.jsx)("div",{className:"flex items-center gap-2",children:(0,N.jsx)("span",{className:"text-xs font-medium text-white/70",children:"\u05db\u05dc\u05d9\u05dd"})})}),(0,N.jsxs)("div",{className:"px-4 pb-3 space-y-1.5",children:[(0,N.jsxs)(a.N_,{to:"/cases/".concat(t,"/analytics"),className:"flex items-center gap-2 w-full p-2 rounded-lg bg-purple-500/10 hover:bg-purple-500/20 border border-purple-500/20 transition-colors text-right",children:[(0,N.jsx)(l.A,{size:14,className:"text-purple-400"}),(0,N.jsx)("span",{className:"text-xs text-white flex-1",children:"\u05d0\u05e0\u05dc\u05d9\u05d8\u05d9\u05e7\u05e1 \u05d5\u05d5\u05d9\u05d6\u05d5\u05d0\u05dc\u05d9\u05d6\u05e6\u05d9\u05d4"}),(0,N.jsx)(d.A,{size:12,className:"text-white/40"})]}),(0,N.jsxs)(a.N_,{to:"/cases/".concat(t,"/report"),className:"flex items-center gap-2 w-full p-2 rounded-lg bg-emerald-500/10 hover:bg-emerald-500/20 border border-emerald-500/20 transition-colors text-right",children:[(0,N.jsx)(m.A,{size:14,className:"text-emerald-400"}),(0,N.jsx)("span",{className:"text-xs text-white flex-1",children:"\u05d1\u05e0\u05d9\u05d9\u05ea \u05d3\u05d5\u05d7"}),(0,N.jsx)(d.A,{size:12,className:"text-white/40"})]})]})]}):null},D=e=>{let{title:t,children:s,count:a}=e;return(0,N.jsxs)("div",{className:"border-b border-white/10 last:border-b-0",children:[(0,N.jsx)("div",{className:"flex items-center justify-between w-full px-4 py-3",children:(0,N.jsxs)("div",{className:"flex items-center gap-2",children:[(0,N.jsx)("span",{className:"text-xs font-medium text-white/70",children:t}),void 0!==a&&(0,N.jsx)("span",{className:"text-[10px] bg-slate-700 text-white/50 px-1.5 py-0.5 rounded",children:a})]})}),(0,N.jsx)("div",{className:"px-4 pb-3",children:s})]})},L=e=>{let{caseId:t,capabilities:s,sources:a,activeArtifacts:l,nextActions:i,contradictionStats:n,onCapabilityClick:r,onSourceClick:c,onArtifactClick:d,onOpenWorkbench:o}=e;return(0,N.jsxs)("div",{className:"w-72 h-full bg-slate-900 border-l border-slate-800 flex flex-col overflow-hidden",dir:"rtl",children:[(0,N.jsx)(I,{capabilities:s,onCapabilityClick:r}),(0,N.jsx)(E,{stats:n,onOpenWorkbench:o}),(0,N.jsx)(z,{caseId:t}),(0,N.jsx)(D,{title:"\u05de\u05e7\u05d5\u05e8\u05d5\u05ea",count:a.length,children:(0,N.jsx)("div",{className:"space-y-1.5 max-h-56 overflow-y-auto",children:a.length>0?a.map(e=>(0,N.jsx)(C,{source:e,onClick:()=>null===c||void 0===c?void 0:c(e.id)},e.id)):(0,N.jsx)("p",{className:"text-xs text-white/40 text-center py-2",children:"\u05d0\u05d9\u05df \u05de\u05e1\u05de\u05db\u05d9\u05dd"})})}),l.length>0&&(0,N.jsx)(D,{title:"\u05e4\u05e8\u05d9\u05d8\u05d9\u05dd \u05e4\u05e2\u05d9\u05dc\u05d9\u05dd",count:l.length,children:(0,N.jsx)("div",{className:"space-y-1.5 max-h-32 overflow-y-auto",children:l.map(e=>(0,N.jsx)(k,{artifact:e,onClick:()=>null===d||void 0===d?void 0:d(e.id)},e.id))})}),(0,N.jsx)(D,{title:"\u05de\u05d4 \u05dc\u05e2\u05e9\u05d5\u05ea \u05e2\u05db\u05e9\u05d9\u05d5?",children:(0,N.jsx)("div",{className:"space-y-1.5",children:i.length>0?i.slice(0,3).map(e=>(0,N.jsx)(_,{action:e},e.id)):(0,N.jsx)("p",{className:"text-xs text-white/40 text-center py-2",children:"\u05d4\u05de\u05ea\u05df \u05dc\u05d8\u05e2\u05d9\u05e0\u05ea \u05d4\u05e0\u05ea\u05d5\u05e0\u05d9\u05dd"})})}),(0,N.jsx)("div",{className:"flex-1"}),(0,N.jsx)("div",{className:"px-4 py-3 border-t border-slate-800",children:(0,N.jsx)("p",{className:"text-[10px] text-white/30 text-center",children:"Notebook"})})]})}},331:(e,t,s)=>{s.d(t,{A:()=>h});var a=s(5043),l=s(7819),i=s(2054),n=s(2024),r=s(8326),c=s(5088),d=s(1680),o=s(426),x=s(579);const m={v1:"\u05de\u05d1\u05d8 \u05de\u05d4\u05d9\u05e8",v2:"\u05e1\u05d1\u05d9\u05d1\u05ea \u05e2\u05d1\u05d5\u05d3\u05d4",v3:"\u05e0\u05d9\u05ea\u05d5\u05d7 \u05de\u05e2\u05de\u05d9\u05e7"},u=e=>{let{layer:t,status:s,isActive:a,onClick:r}=e;return(0,x.jsxs)("button",{onClick:r,disabled:"ready"!==s,className:"\n        flex items-center gap-1.5 px-3 py-1.5 rounded-lg border text-xs font-medium\n        transition-all duration-200\n        ".concat((()=>{if(a)return"bg-blue-600 text-white border-blue-500";switch(s){case"ready":return"bg-slate-800 text-white/80 border-slate-700 hover:bg-slate-700";case"loading":return"bg-slate-800/50 text-white/50 border-slate-700";case"error":return"bg-red-900/30 text-red-400 border-red-800";default:return"bg-slate-800/50 text-white/60 border-slate-700"}})(),"\n        ").concat("ready"===s?"cursor-pointer":"cursor-not-allowed opacity-70","\n      "),children:[(()=>{switch(s){case"loading":return(0,x.jsx)(n.A,{size:12,className:"animate-spin"});case"ready":return(0,x.jsx)(i.A,{size:12});case"error":return(0,x.jsx)(l.A,{size:12});default:return null}})(),(0,x.jsx)("span",{children:m[t]})]})},h=e=>{let{caseName:t,currentLayer:s,layerStatuses:l,lastUpdated:i,onLayerClick:n}=e;return(0,x.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 bg-slate-900 border-b border-slate-800",dir:"rtl",children:[(0,x.jsxs)("div",{className:"flex items-center gap-3",children:[(0,x.jsx)("div",{className:"p-2 bg-blue-600/20 rounded-lg",children:(0,x.jsx)(d.A,{className:"text-blue-400",size:20})}),(0,x.jsxs)("div",{children:[(0,x.jsx)("h1",{className:"text-lg font-semibold text-white",children:t}),(0,x.jsxs)("div",{className:"flex items-center gap-1.5 text-xs text-white/50",children:[(0,x.jsx)("span",{children:"Notebook"}),(0,x.jsx)(r.A,{size:12}),(0,x.jsx)("span",{className:"text-white/80",children:m[s]})]})]})]}),(0,x.jsx)("div",{className:"flex items-center gap-2",children:["v1","v2","v3"].map((e,t)=>{const i=l.find(t=>t.layer===e);return(0,x.jsxs)(a.Fragment,{children:[t>0&&(0,x.jsx)(r.A,{size:14,className:"text-white/30"}),(0,x.jsx)(u,{layer:e,status:(null===i||void 0===i?void 0:i.status)||"loading",isActive:s===e,onClick:()=>null===n||void 0===n?void 0:n(e)})]},e)})}),(0,x.jsxs)("div",{className:"flex items-center gap-4",children:[(0,x.jsx)(o.k,{}),(0,x.jsxs)("div",{className:"flex items-center gap-2 text-xs text-white/50",children:[(0,x.jsx)(c.A,{size:14}),(0,x.jsx)("span",{children:i?"\u05e2\u05d5\u05d3\u05db\u05df ".concat(i.toLocaleTimeString("he-IL")):"\u05d8\u05d5\u05e2\u05df..."})]})]})]})}},426:(e,t,s)=>{s.d(t,{k:()=>m});var a=s(5043),l=s(6210),i=s(2382),n=s(793),r=s(9797),c=s(8012),d=s(3372),o=s(579);const x={Scale:c.A,GraduationCap:r.A,Gavel:n.A},m=e=>{let{compact:t=!1,className:s=""}=e;const[n,r]=(0,a.useState)(!1),m=(0,a.useRef)(null),{viewMode:u,setViewMode:h}=(0,d.DE)(),p=(0,d._0)(),v=(0,d.Wh)();(0,a.useEffect)(()=>{const e=e=>{m.current&&!m.current.contains(e.target)&&r(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,a.useEffect)(()=>{const e=e=>{"Escape"===e.key&&r(!1)};if(n)return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[n]);const g=x[p.icon]||c.A;return(0,o.jsxs)("div",{ref:m,className:"relative ".concat(s),dir:"rtl",children:[(0,o.jsxs)("button",{onClick:()=>r(!n),className:"\n          flex items-center gap-2 px-3 py-2 rounded-lg\n          bg-slate-800/60 hover:bg-slate-700/80\n          border border-slate-700 hover:border-slate-600\n          text-white/90 text-sm font-medium\n          transition-all duration-200\n          ".concat(n?"ring-2 ring-blue-500/50":"","\n        "),"aria-haspopup":"listbox","aria-expanded":n,children:[(0,o.jsx)(g,{size:16,className:"text-blue-400"}),!t&&(0,o.jsx)("span",{children:p.label}),(0,o.jsx)(i.A,{size:14,className:"text-white/50 transition-transform duration-200 ".concat(n?"rotate-180":"")})]}),n&&(0,o.jsxs)("div",{className:" absolute top-full left-0 mt-2 w-72 z-50 bg-slate-800 border border-slate-700 rounded-xl shadow-2xl shadow-black/50 animate-in fade-in slide-in-from-top-2 duration-200 ",role:"listbox",children:[(0,o.jsxs)("div",{className:"p-2",children:[(0,o.jsx)("div",{className:"px-3 py-2 text-xs text-white/50 font-medium uppercase tracking-wide",children:"\u05de\u05e6\u05d1 \u05ea\u05e6\u05d5\u05d2\u05d4"}),v.map(e=>{const t=x[e.icon]||c.A,s=u===e.mode;return(0,o.jsxs)("button",{onClick:()=>{return t=e.mode,h(t),void r(!1);var t},className:"\n                    w-full flex items-start gap-3 p-3 rounded-lg\n                    transition-all duration-150\n                    ".concat(s?"bg-blue-600/20 border border-blue-500/30":"hover:bg-slate-700/50 border border-transparent","\n                  "),role:"option","aria-selected":s,children:[(0,o.jsx)("div",{className:"\n                    p-2 rounded-lg flex-shrink-0\n                    ".concat(s?"bg-blue-600/30":"bg-slate-700/50","\n                  "),children:(0,o.jsx)(t,{size:18,className:s?"text-blue-400":"text-white/60"})}),(0,o.jsxs)("div",{className:"flex-1 text-right",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)("span",{className:"font-medium ".concat(s?"text-white":"text-white/80"),children:e.label}),s&&(0,o.jsx)(l.A,{size:14,className:"text-blue-400"})]}),(0,o.jsx)("p",{className:"text-xs text-white/50 mt-0.5",children:e.description})]})]},e.mode)})]}),(0,o.jsx)("div",{className:"border-t border-slate-700/50 p-3",children:(0,o.jsxs)("div",{className:"text-xs text-white/40",children:["counsel"===u&&(0,o.jsx)("span",{children:"\u05db\u05dc\u05d9 triage, \u05d9\u05d9\u05e6\u05d5\u05d0, \u05d5\u05d4\u05db\u05e0\u05d4 \u05dc\u05d7\u05e7\u05d9\u05e8\u05d4 \u05de\u05d5\u05e4\u05e2\u05dc\u05d9\u05dd"}),"trainee"===u&&(0,o.jsx)("span",{children:"\u05e2\u05d6\u05e8\u05d4 \u05de\u05d5\u05d3\u05e8\u05db\u05ea, \u05d4\u05e1\u05d1\u05e8\u05d9\u05dd, \u05d5\u05d0\u05d9\u05e9\u05d5\u05e8 \u05de\u05e0\u05d7\u05d4 \u05de\u05d5\u05e4\u05e2\u05dc\u05d9\u05dd"}),"judge"===u&&(0,o.jsx)("span",{children:"\u05ea\u05e6\u05d5\u05d2\u05d4 \u05e0\u05d8\u05e8\u05dc\u05d9\u05ea, \u05e6\u05d9\u05e8 \u05d6\u05de\u05df, \u05d5\u05ea\u05e7\u05e6\u05d9\u05e8 \u05dc\u05dc\u05d0 bias \u05de\u05d5\u05e4\u05e2\u05dc\u05d9\u05dd"})]})})]})]})}},763:(e,t,s)=>{s.d(t,{N:()=>n});var a=s(9379),l=s(5043),i=s(9688);function n(e){let{caseId:t,caseName:s,analysisResult:n,documents:r}=e;const c=(0,l.useRef)(null),d=(0,l.useRef)(n),o=(0,l.useRef)(r),x=(0,l.useRef)(!1),[m,u]=(0,l.useState)("v1"),[h,p]=(0,l.useState)([{layer:"v1",status:"loading"},{layer:"v2",status:"loading"},{layer:"v3",status:"ready"}]),[v,g]=(0,l.useState)(),[b,y]=(0,l.useState)(),[j,f]=(0,l.useState)({analyses:[]}),[N,w]=(0,l.useState)([]),[A,C]=(0,l.useState)([]),[k,_]=(0,l.useState)({}),[S,I]=(0,l.useState)(!0),[E,z]=(0,l.useState)(null);(0,l.useEffect)(()=>{d.current=n,o.current=r},[n,r]);(0,l.useCallback)(e=>(e||"").replaceAll("{case_id}",t).replaceAll("{caseId}",t),[t]);const D=(0,l.useCallback)(e=>{var t;const s=(null===e||void 0===e?void 0:e.executive_summary)||(null===e||void 0===e?void 0:e.summary)||"",a=(null===e||void 0===e?void 0:e.key_points)||(null===e||void 0===e?void 0:e.insights)||[],l=null===e||void 0===e?void 0:e.entities,i=Array.isArray(l)?l:(null===l||void 0===l?void 0:l.people)||(null===l||void 0===l?void 0:l.actors)||(null===e||void 0===e?void 0:e.actors)||[];return{summary:{text:"string"===typeof s?s.slice(0,300):(null===s||void 0===s||null===(t=s.text)||void 0===t?void 0:t.slice(0,300))||"\u05dc\u05d0 \u05e0\u05de\u05e6\u05d0\u05d4 \u05ea\u05de\u05e6\u05d9\u05ea"},keyPoints:a.slice(0,6).map((e,t)=>({id:"kp-".concat(t),text:"string"===typeof e?e:e.text||e.description||"",importance:e.importance||(t<2?"high":t<4?"medium":"low")})),actors:i.slice(0,6).map((e,t)=>({id:"actor-".concat(t),name:e.name||e.text||e.entity||"\u05e9\u05d7\u05e7\u05df ".concat(t+1),role:e.role||e.type||e.entity_type||"\u05dc\u05d0 \u05d9\u05d3\u05d5\u05e2",party:R(e.party||e.side)}))}},[]),L=(0,l.useCallback)(e=>{var t;const s=null===e||void 0===e?void 0:e.entities,a=Array.isArray(s)?s:(null===s||void 0===s?void 0:s.people)||(null===s||void 0===s?void 0:s.actors)||(null===e||void 0===e?void 0:e.actors)||[],l=(null===e||void 0===e?void 0:e.claims)||(null===e||void 0===e||null===(t=e.taxonomy)||void 0===t?void 0:t.claims)||[],i=(null===e||void 0===e?void 0:e.timeline)||(null===e||void 0===e?void 0:e.events)||[],n=(null===e||void 0===e?void 0:e.contradictions)||[],r=(null===e||void 0===e?void 0:e.red_flags)||(null===e||void 0===e?void 0:e.warnings)||[];return{actors:a.map((e,t)=>({id:"actor-".concat(t),name:e.name||e.text||"\u05e9\u05d7\u05e7\u05df ".concat(t+1),role:e.role||e.type||"\u05dc\u05d0 \u05d9\u05d3\u05d5\u05e2",role_he:e.role_he||e.role||"\u05dc\u05d0 \u05d9\u05d3\u05d5\u05e2",party:R(e.party||e.side),interest_he:e.interest||e.description,evidence:F(e.evidence||e.location),mentions_count:e.mentions||e.count,credibility_score:e.credibility})),claims:l.filter(e=>e.evidence||e.location||e.page||e.pageNumber).map((e,t)=>({id:"claim-".concat(t),claim_type:T(e.type),claim_type_he:e.type_he||e.type||"\u05e2\u05d5\u05d1\u05d3\u05ea\u05d9\u05ea",short_statement:(e.text||e.description||"").slice(0,150),full_text:e.text||e.description,polarity:B(e.polarity_enum||e.polarity||e.supports),party:e.party||e.source_party||"",evidence:F(e.evidence||e.location||{page:e.page||e.pageNumber}),confidence:e.confidence,disputed:e.disputed||e.contested})),timeline:i.map((e,t)=>({id:"event-".concat(t),date:e.date||e.timestamp||"",date_formatted:O(e.date||e.timestamp),event:e.event||e.description||e.text||"",event_he:e.event_he||e.event||e.description||"",party:e.party||e.actor,evidence:F(e.evidence||e.location),importance:e.importance||"medium"})),contradictions:n.map((e,t)=>{var s,a,l,i;return{id:"contra-".concat(t),description:e.description||e.text||"",description_he:e.description_he||e.description||"",severity:e.severity||"medium",claim1:{id:"contra-".concat(t,"-c1"),claim_type:"factual",claim_type_he:"\u05e2\u05d5\u05d1\u05d3\u05ea\u05d9\u05ea",short_statement:(null===(s=e.claim1)||void 0===s?void 0:s.text)||e.statement1||"",polarity:"neutral",party:(null===(a=e.claim1)||void 0===a?void 0:a.party)||"",evidence:[]},claim2:{id:"contra-".concat(t,"-c2"),claim_type:"factual",claim_type_he:"\u05e2\u05d5\u05d1\u05d3\u05ea\u05d9\u05ea",short_statement:(null===(l=e.claim2)||void 0===l?void 0:l.text)||e.statement2||"",polarity:"neutral",party:(null===(i=e.claim2)||void 0===i?void 0:i.party)||"",evidence:[]},evidence:F(e.evidence||e.location)}}),redFlags:r.map((e,t)=>({id:"flag-".concat(t),type:e.type||"general",type_he:e.type_he||e.type||"\u05db\u05dc\u05dc\u05d9",description:e.description||e.text||"",description_he:e.description_he||e.description||"",severity:e.severity||"medium",evidence:F(e.evidence||e.location),recommendation_he:e.recommendation||e.action}))}},[]);function R(e){if(!e)return"other";const t=e.toLowerCase();return t.includes("\u05ea\u05d5\u05d1\u05e2")||t.includes("plaintiff")||t.includes("\u05de\u05d1\u05e7\u05e9")?"plaintiff":t.includes("\u05e0\u05ea\u05d1\u05e2")||t.includes("defendant")||t.includes("\u05de\u05e9\u05d9\u05d1")?"defendant":t.includes("\u05e2\u05d3")||t.includes("witness")?"witness":t.includes("\u05de\u05d5\u05de\u05d7\u05d4")||t.includes("expert")?"expert":t.includes("\u05e9\u05d5\u05e4\u05d8")||t.includes("judge")?"judge":"other"}function T(e){if(!e)return"factual";const t=e.toLowerCase();return t.includes("legal")||t.includes("\u05de\u05e9\u05e4\u05d8")?"legal":t.includes("procedur")||t.includes("\u05e4\u05e8\u05d5\u05e6\u05d3\u05d5\u05e8")?"procedural":t.includes("evidence")||t.includes("\u05e8\u05d0\u05d9")?"evidentiary":"factual"}function B(e){if(null===e||void 0===e)return"neutral";if("number"===typeof e)return e>0?"supports_plaintiff":e<0?"supports_defendant":"neutral";if("string"!==typeof e)return"neutral";const t=e.toLowerCase();return"affirm"===t||t.includes("plaintiff")||t.includes("\u05ea\u05d5\u05d1\u05e2")?"supports_plaintiff":"deny"===t||t.includes("defendant")||t.includes("\u05e0\u05ea\u05d1\u05e2")?"supports_defendant":"neutral"}function O(e){if(!e)return"\u05dc\u05d0 \u05d9\u05d3\u05d5\u05e2";try{return new Date(e).toLocaleDateString("he-IL")}catch(t){return e}}function F(e){return e?Array.isArray(e)?e.map(e=>({file_id:e.file_id||e.fileId,filename:e.filename||e.file_name||e.document,page:e.page||e.pageNumber,quote:e.quote||e.text,span_start:e.span_start,span_end:e.span_end})):[{file_id:e.file_id||e.fileId,filename:e.filename||e.file_name||e.document,page:e.page||e.pageNumber,quote:e.quote||e.text}]:[]}const M=(0,l.useCallback)(e=>e?e.map((e,t)=>({id:e.id||e.file_id||"doc-".concat(t),filename:e.filename||e.name||"\u05de\u05e1\u05de\u05da ".concat(t+1),file_type:V(e.filename||e.name),pages:e.pages||e.page_count,ocr_status:G(e.ocr_status||e.status),mentions_count:e.mentions||e.references})):[],[]);function V(e){if(!e)return"other";const t=e.toLowerCase();return t.endsWith(".pdf")?"pdf":t.endsWith(".doc")||t.endsWith(".docx")?"doc":t.match(/\.(jpg|jpeg|png|gif|bmp)$/)?"image":"other"}function G(e){if(!e)return"pending";const t=e.toLowerCase();return"complete"===t||"completed"===t||"done"===t?"complete":"processing"===t||"running"===t?"processing":"error"===t||"failed"===t?"error":"pending"}const P=(0,l.useCallback)(async()=>{try{const e=await(0,i.apiGet)("/api/cases/".concat(t,"/capabilities-manifest")),s={},a=(e.capabilities||[]).map(e=>{var t;return{id:e.id,name:e.name||e.id,name_he:e.label_he||e.label||e.name,icon:(null===e||void 0===e||null===(t=e.ui)||void 0===t?void 0:t.icon)||e.icon||"brain",status:e.is_ready?"ready":e.is_enabled?"partial":"not_ready",reason_he:e.reason,onClick:()=>{}}});(e.capabilities||[]).forEach(e=>{var t,a;null!==e&&void 0!==e&&e.id&&null!==e&&void 0!==e&&null!==(t=e.action)&&void 0!==t&&t.endpoint&&(s[e.id]={type:e.action.type,endpoint:e.action.endpoint,method:e.action.method,payload_template:null!==(a=e.action.payload_template)&&void 0!==a?a:null})}),C(a),_(s)}catch(e){console.error("Failed to load capabilities:",e),C([{id:"claims",name:"Claims",name_he:"\u05d8\u05e2\u05e0\u05d5\u05ea",icon:"search",status:"ready",onClick:()=>{}},{id:"contradictions",name:"Contradictions",name_he:"\u05e1\u05ea\u05d9\u05e8\u05d5\u05ea",icon:"alert",status:"ready",onClick:()=>{}},{id:"disputes",name:"Disputes",name_he:"\u05e4\u05dc\u05d5\u05d2\u05ea\u05d0\u05d5\u05ea",icon:"users",status:"ready",onClick:()=>{}},{id:"timeline",name:"Timeline",name_he:"\u05e6\u05d9\u05e8 \u05d6\u05de\u05df",icon:"clock",status:"ready",onClick:()=>{}},{id:"strategy",name:"Strategy",name_he:"\u05d0\u05e1\u05d8\u05e8\u05d8\u05d2\u05d9\u05d4",icon:"target",status:"ready",onClick:()=>{}},{id:"game_theory",name:"Game Theory",name_he:"\u05ea\u05d5\u05e8\u05ea \u05de\u05e9\u05d7\u05e7\u05d9\u05dd",icon:"brain",status:"ready",onClick:()=>{}},{id:"risk_assessment",name:"Risk Assessment",name_he:"\u05d4\u05e2\u05e8\u05db\u05ea \u05e1\u05d9\u05db\u05d5\u05df",icon:"shield",status:"ready",onClick:()=>{}},{id:"strategy_memo",name:"Strategy Memo",name_he:"\u05ea\u05d6\u05db\u05d9\u05e8 \u05d0\u05e1\u05d8\u05e8\u05d8\u05d2\u05d9",icon:"file",status:"ready",onClick:()=>{}},{id:"precedents",name:"Precedents",name_he:"\u05ea\u05e7\u05d3\u05d9\u05de\u05d9\u05dd",icon:"scale",status:"ready",onClick:()=>{}},{id:"legal_knowledge",name:"Legal Knowledge",name_he:"\u05d9\u05d3\u05e2 \u05de\u05e9\u05e4\u05d8\u05d9",icon:"brain",status:"ready",onClick:()=>{}},{id:"judge_analytics",name:"Judge Analytics",name_he:"\u05e0\u05d9\u05ea\u05d5\u05d7 \u05e9\u05d5\u05e4\u05d8",icon:"users",status:"partial",onClick:()=>{}},{id:"counsel_analytics",name:"Counsel Analytics",name_he:"\u05e0\u05d9\u05ea\u05d5\u05d7 \u05d9\u05e8\u05d9\u05d1",icon:"users",status:"partial",onClick:()=>{}},{id:"entities",name:"Entities",name_he:"\u05d9\u05e9\u05d5\u05d9\u05d5\u05ea",icon:"users",status:"ready",onClick:()=>{}},{id:"red_flags",name:"Red Flags",name_he:"\u05d3\u05d2\u05dc\u05d9\u05dd \u05d0\u05d3\u05d5\u05de\u05d9\u05dd",icon:"alert",status:"ready",onClick:()=>{}},{id:"insights",name:"Insights",name_he:"\u05ea\u05d5\u05d1\u05e0\u05d5\u05ea",icon:"brain",status:"ready",onClick:()=>{}},{id:"summary",name:"Summary",name_he:"\u05e1\u05d9\u05db\u05d5\u05dd",icon:"file",status:"ready",onClick:()=>{}},{id:"evidence_strength",name:"Evidence Strength",name_he:"\u05d7\u05d5\u05d6\u05e7 \u05e8\u05d0\u05d9\u05d5\u05ea",icon:"shield",status:"ready",onClick:()=>{}},{id:"adversarial",name:"Adversarial",name_he:"\u05e0\u05d9\u05ea\u05d5\u05d7 \u05d9\u05e8\u05d9\u05d1\u05d5\u05ea\u05d9",icon:"target",status:"ready",onClick:()=>{}},{id:"narrative",name:"Narrative",name_he:"\u05e0\u05e8\u05d8\u05d9\u05d1",icon:"file",status:"ready",onClick:()=>{}},{id:"gap_analysis",name:"Gap Analysis",name_he:"\u05e0\u05d9\u05ea\u05d5\u05d7 \u05e4\u05e2\u05e8\u05d9\u05dd",icon:"alert",status:"ready",onClick:()=>{}},{id:"forensics",name:"Forensics",name_he:"\u05e4\u05d5\u05e8\u05e0\u05d6\u05d9\u05e7\u05d4",icon:"search",status:"partial",onClick:()=>{}},{id:"rhetoric_forensics",name:"Rhetoric",name_he:"\u05e8\u05d8\u05d5\u05e8\u05d9\u05e7\u05d4",icon:"brain",status:"partial",onClick:()=>{}},{id:"contract_forensics",name:"Contracts",name_he:"\u05d7\u05d5\u05d6\u05d9\u05dd",icon:"file",status:"partial",onClick:()=>{}},{id:"witness_credibility",name:"Witness",name_he:"\u05e2\u05d3\u05d9\u05dd",icon:"users",status:"ready",onClick:()=>{}}])}},[t]),q=(0,l.useCallback)(async()=>(c.current||(c.current=(async()=>{I(!0),z(null);try{const f=d.current,N=o.current;let A=f?(0,a.A)({},f):null;if(!A&&t)try{A=await(0,i.apiGet)("/api/cases/".concat(t))}catch(b){A={}}if(t){try{const s=await(0,i.apiGet)("/api/cases/".concat(t,"/ai-summary"));if(console.log("[useNotebookData] AI Summary:",null!==s&&void 0!==s&&s.exists?"exists":"missing"),null!==s&&void 0!==s&&s.exists&&null!==s&&void 0!==s&&s.summary){A=A||{};const e=s.summary;A.executive_summary="string"===typeof e?e:(null===e||void 0===e?void 0:e.text)||(null===e||void 0===e?void 0:e.summary)||(null===e||void 0===e?void 0:e.executive_summary)||""}else if(null!==s&&void 0!==s&&s.summary){var e;A=A||{},A.executive_summary="string"===typeof s.summary?s.summary:(null===(e=s.summary)||void 0===e?void 0:e.text)||""}}catch(j){}try{var s,l;const e=await(0,i.apiGet)("/api/cases/".concat(t,"/analysis"));if(console.log("[useNotebookData] Analysis:",null===e||void 0===e?void 0:e.status,"claims=",(null===e||void 0===e||null===(s=e.claims)||void 0===s?void 0:s.length)||0,"entities=",(null===e||void 0===e||null===(l=e.entities)||void 0===l?void 0:l.length)||0),e&&"analyzing"!==e.status){const t=e=>Array.isArray(e)&&e.length>0;"completed"===(null===e||void 0===e?void 0:e.status)&&!(null!==e&&void 0!==e&&e.analysis_timestamp)&&!t(null===e||void 0===e?void 0:e.claims)&&!t(null===e||void 0===e?void 0:e.entities)&&!t(null===e||void 0===e?void 0:e.contradictions)&&!t(null===e||void 0===e?void 0:e.timeline)&&!(null!==e&&void 0!==e&&e.executive_summary)?console.log("[useNotebookData] Skipping empty completed analysis payload (no timestamp + no data)."):(A=A||{},t(e.claims)&&(A.claims=e.claims),t(e.contradictions)&&(A.contradictions=e.contradictions),t(e.entities)&&(A.entities=e.entities),t(e.timeline)&&(A.timeline=e.timeline),e.key_points&&(!Array.isArray(e.key_points)||e.key_points.length>0)?A.key_points=e.key_points:e.insights&&(!Array.isArray(e.insights)||e.insights.length>0)&&(A.key_points=e.insights),A.executive_summary=A.executive_summary||e.executive_summary)}}catch(j){}}if(A){var n,r,c,x,m,u,h,v;console.log("[useNotebookData] Converting to V1/V2, result keys:",Object.keys(A)),console.log("[useNotebookData] executive_summary:",(null===(n=A.executive_summary)||void 0===n||null===(r=n.slice)||void 0===r?void 0:r.call(n,0,100))||A.executive_summary),console.log("[useNotebookData] claims:",(null===(c=A.claims)||void 0===c?void 0:c.length)||0),console.log("[useNotebookData] entities:",(null===(x=A.entities)||void 0===x?void 0:x.length)||0);const e=D(A),t=L(A);console.log("[useNotebookData] V1 summary:",null===(m=e.summary)||void 0===m||null===(u=m.text)||void 0===u?void 0:u.slice(0,100)),console.log("[useNotebookData] V1 keyPoints:",(null===(h=e.keyPoints)||void 0===h?void 0:h.length)||0),console.log("[useNotebookData] V2 claims:",(null===(v=t.claims)||void 0===v?void 0:v.length)||0),g(e),y(t),p([{layer:"v1",status:"ready"},{layer:"v2",status:"ready"},{layer:"v3",status:"ready"}])}N?w(M(N)):null!==f&&void 0!==f&&f.files?w(M(f.files)):w([]),await P()}catch(j){console.error("Failed to load notebook data:",j),z(j.message||"\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05d8\u05e2\u05d9\u05e0\u05ea \u05d4\u05e0\u05ea\u05d5\u05e0\u05d9\u05dd"),p([{layer:"v1",status:"error",error:j.message},{layer:"v2",status:"error",error:j.message},{layer:"v3",status:"ready"}])}finally{I(!1)}})().finally(()=>{c.current=null})),c.current),[t,D,L,M,P]),W=(0,l.useCallback)(async e=>{const s=new Set(["hakashran","adversarial_debate","game_theory","crosstabs"]),a=new Set(["claims","contradictions","disputes","red_flags","timeline","insights"]),l=new Set(["entities","summary"]);try{if(s.has(e)){return await(0,i.$P)("/api/cases/".concat(t,"/analyze-on-demand"),{capability_id:e,options:{}})}if(a.has(e)){return await(0,i.$P)("/api/cases/".concat(t,"/analyze-on-demand"),{analysis_type:e,options:{}})}if(l.has(e)){const s=await(0,i.$P)("/api/cases/".concat(t,"/reanalyze"),{mode:"full",focus_topic:e});return setTimeout(()=>q(),2e3),s}return await(0,i.$P)("/api/cases/".concat(t,"/analyze-on-demand"),{analysis_type:e,options:{}})}catch(x){var n;const t=(null===x||void 0===x||null===(n=x.response)||void 0===n?void 0:n.status)||(null===x||void 0===x?void 0:x.status);if(428===t){var r,c;const t=(null===x||void 0===x||null===(r=x.response)||void 0===r||null===(c=r.data)||void 0===c?void 0:c.detail)||{};return console.warn("Capability ".concat(e," requires precondition: ").concat(t.code||"unknown")),{error:!0,code:t.code||"PRECONDITION_REQUIRED",message:t.message||"\u05d9\u05e9 \u05dc\u05d0\u05e9\u05e8 \u05d0\u05ea \u05e6\u05d3 \u05d4\u05d9\u05d9\u05e6\u05d5\u05d2 \u05dc\u05e4\u05e0\u05d9 \u05d4\u05e4\u05e2\u05dc\u05ea \u05e0\u05d9\u05ea\u05d5\u05d7 \u05d6\u05d4",status:428}}var d,o;if(400===t)return console.warn("Capability ".concat(e," failed with 400: ").concat(null===x||void 0===x?void 0:x.message)),{error:!0,code:"BAD_REQUEST",message:(null===x||void 0===x||null===(d=x.response)||void 0===d||null===(o=d.data)||void 0===o?void 0:o.detail)||"\u05d1\u05e7\u05e9\u05d4 \u05dc\u05d0 \u05ea\u05e7\u05d9\u05e0\u05d4",status:400};if(429===t)return console.warn("Capability ".concat(e," rate limited")),{error:!0,code:"RATE_LIMIT",message:"\u05d9\u05e9 \u05dc\u05d4\u05de\u05ea\u05d9\u05df \u05dc\u05e4\u05e0\u05d9 \u05d4\u05e4\u05e2\u05dc\u05ea \u05e0\u05d9\u05ea\u05d5\u05d7 \u05e0\u05d5\u05e1\u05e3",status:429};throw console.error("Failed to run capability ".concat(e,":"),x),x}},[t,q]);(0,l.useEffect)(()=>{t&&!x.current&&(x.current=!0,q())},[t,q]),(0,l.useEffect)(()=>{x.current=!1},[t]);const J=(0,l.useMemo)(()=>{const e=[];0===N.length&&e.push({id:"upload",label_he:"\u05d4\u05e2\u05dc\u05d4 \u05de\u05e1\u05de\u05db\u05d9\u05dd",description_he:"\u05d4\u05ea\u05d7\u05dc \u05d1\u05d4\u05e2\u05dc\u05d0\u05ea \u05de\u05e1\u05de\u05db\u05d9 \u05d4\u05ea\u05d9\u05e7",priority:"high",onClick:()=>{}}),"v1"===m&&b&&e.push({id:"explore-v2",label_he:"\u05d7\u05e7\u05d5\u05e8 \u05d0\u05ea \u05e1\u05d1\u05d9\u05d1\u05ea \u05d4\u05e2\u05d1\u05d5\u05d3\u05d4",description_he:"\u05e6\u05e4\u05d4 \u05d1\u05d8\u05e2\u05e0\u05d5\u05ea, \u05e9\u05d7\u05e7\u05e0\u05d9\u05dd \u05d5\u05e6\u05d9\u05e8 \u05d6\u05de\u05df",priority:"medium",onClick:()=>u("v2")});return A.filter(e=>"ready"===e.status).slice(0,2).forEach(t=>{e.push({id:"run-".concat(t.id),label_he:"\u05d4\u05e8\u05e5 ".concat(t.name_he),description_he:"\u05e0\u05d9\u05ea\u05d5\u05d7 \u05de\u05e2\u05de\u05d9\u05e7 \u05e2\u05dd AI",priority:"low",capability:t.id,onClick:()=>W(t.id)})}),e},[N,m,b,A,W]);return{currentLayer:m,setCurrentLayer:u,layerStatuses:h,v1Data:v,v2Data:b,v3Data:j,sources:N,capabilities:A,nextActions:J,isLoading:S,error:E,runCapability:W,refreshData:q}}},1440:(e,t,s)=>{s.d(t,{A:()=>x});var a=s(5043),l=s(2024),i=s(6695),n=s(8066),r=s(7091),c=s(579);const d=e=>{let{layer:t}=e;return(0,c.jsxs)("div",{className:"flex flex-col items-center justify-center py-16",children:[(0,c.jsx)(l.A,{size:40,className:"animate-spin text-blue-400 mb-4"}),(0,c.jsx)("p",{className:"text-white/60",children:{v1:"\u05d8\u05d5\u05e2\u05df \u05ea\u05de\u05e6\u05d9\u05ea...",v2:"\u05de\u05e2\u05d1\u05d3 \u05de\u05e1\u05de\u05db\u05d9\u05dd...",v3:"\u05de\u05d1\u05e6\u05e2 \u05e0\u05d9\u05ea\u05d5\u05d7..."}[t]})]})},o=e=>{let{error:t,onRetry:s}=e;return(0,c.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[(0,c.jsx)("div",{className:"p-4 bg-red-500/20 rounded-full mb-4",children:(0,c.jsx)("span",{className:"text-3xl",children:"\u26a0\ufe0f"})}),(0,c.jsx)("p",{className:"text-white/60 mb-4",children:t}),s&&(0,c.jsx)("button",{onClick:s,className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg text-sm transition-colors",children:"\u05e0\u05e1\u05d4 \u05e9\u05d5\u05d1"})]})},x=e=>{var t,s,l,x,m;let{currentLayer:u,layerStatuses:h,v1Data:p,v2Data:v,v3Data:g,nextActions:b,onLayerChange:y,onEvidenceClick:j,onClaimClick:f,onActorClick:N,onCapabilityClick:w}=e;const[A,C]=(0,a.useState)(!1),k=((null===v||void 0===v||null===(t=v.actors)||void 0===t?void 0:t.length)||0)+((null===v||void 0===v||null===(s=v.claims)||void 0===s?void 0:s.length)||0)+((null===v||void 0===v||null===(l=v.timeline)||void 0===l?void 0:l.length)||0)+((null===v||void 0===v||null===(x=v.contradictions)||void 0===x?void 0:x.length)||0)+((null===v||void 0===v||null===(m=v.redFlags)||void 0===m?void 0:m.length)||0);(0,a.useEffect)(()=>{if("v1"===u&&!A){const e=h.find(e=>"v2"===e.layer);if("ready"===(null===e||void 0===e?void 0:e.status)&&v&&k>0){const e=setTimeout(()=>{null===y||void 0===y||y("v2"),C(!0)},1500);return()=>clearTimeout(e)}}},[u,h,v,k,A,y]);const _=h.find(e=>e.layer===u);return(0,c.jsx)("div",{className:"flex-1 flex flex-col h-full overflow-hidden",dir:"rtl",children:(0,c.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:(()=>{var e;if("loading"===(null===_||void 0===_?void 0:_.status))return(0,c.jsx)(d,{layer:u});if("error"===(null===_||void 0===_?void 0:_.status))return(0,c.jsx)(o,{error:_.error||"\u05e9\u05d2\u05d9\u05d0\u05d4 \u05dc\u05d0 \u05d9\u05d3\u05d5\u05e2\u05d4"});switch(u){case"v1":return p?(0,c.jsxs)("div",{className:"space-y-4",children:["ready"===(null===(e=h.find(e=>"v2"===e.layer))||void 0===e?void 0:e.status)&&v&&0===k&&(0,c.jsxs)("div",{className:"rounded-xl border border-yellow-500/30 bg-yellow-500/10 p-4",children:[(0,c.jsx)("p",{className:"text-sm text-yellow-200 font-medium",children:"\u05e2\u05d5\u05d3 \u05dc\u05d0 \u05e0\u05d5\u05e6\u05e8\u05d5 \u05de\u05de\u05e6\u05d0\u05d9\u05dd \u05dc\u05e1\u05d1\u05d9\u05d1\u05ea \u05d4\u05e2\u05d1\u05d5\u05d3\u05d4."}),(0,c.jsx)("p",{className:"text-xs text-yellow-200/70 mt-1",children:"\u05e0\u05d9\u05ea\u05df \u05dc\u05d4\u05ea\u05d7\u05d9\u05dc \u05de\u05d4\u05e4\u05e2\u05d5\u05dc\u05d5\u05ea \u05d4\u05d1\u05d0\u05d5\u05ea \u05db\u05d3\u05d9 \u05dc\u05d9\u05d9\u05e6\u05e8 \u05ea\u05d5\u05e6\u05e8\u05d9\u05dd."}),b&&b.length>0&&(0,c.jsx)("div",{className:"mt-3 flex flex-wrap gap-2",children:b.slice(0,3).map(e=>(0,c.jsx)("button",{onClick:e.onClick,className:"px-3 py-1.5 rounded-lg bg-slate-900/60 border border-slate-700 text-xs text-white hover:bg-slate-800 transition-colors",children:e.label_he},e.id))})]}),(0,c.jsx)(i.A,{data:p,onActorClick:N,onExpandToV2:()=>null===y||void 0===y?void 0:y("v2")})]}):(0,c.jsx)(d,{layer:"v1"});case"v2":return v?(0,c.jsx)(n.A,{data:v,onEvidenceClick:j,onClaimClick:f,onActorClick:N}):(0,c.jsx)(d,{layer:"v2"});case"v3":return g?(0,c.jsx)(r.A,{data:g,onEvidenceClick:j,onCapabilityClick:w}):(0,c.jsx)(d,{layer:"v3"});default:return null}})()})})}},2316:(e,t,s)=>{s.d(t,{pr:()=>d});var a=s(3986),l=s(816),i=s(9379),n=s(4131),r=s(4893);const c={status:"all",severity:"all",type:"all",assignee:"all",sortBy:"severity",sortOrder:"desc"},d=(0,n.v)()((0,r.Zr)((e,t)=>({itemsByCaseId:{},filters:(0,i.A)({},c),reportItems:{},setStatus:(t,s,a)=>e(e=>{const l=e.itemsByCaseId[t]||{},n=l[s];return{itemsByCaseId:(0,i.A)((0,i.A)({},e.itemsByCaseId),{},{[t]:(0,i.A)((0,i.A)({},l),{},{[s]:{contradictionId:s,status:a,assignment:null===n||void 0===n?void 0:n.assignment,addedToReport:(null===n||void 0===n?void 0:n.addedToReport)||!1,updatedAt:(new Date).toISOString()}})})}}),setAssignment:(t,s,a)=>e(e=>{const l=e.itemsByCaseId[t]||{},n=l[s];return{itemsByCaseId:(0,i.A)((0,i.A)({},e.itemsByCaseId),{},{[t]:(0,i.A)((0,i.A)({},l),{},{[s]:{contradictionId:s,status:(null===n||void 0===n?void 0:n.status)||"new",assignment:a,addedToReport:(null===n||void 0===n?void 0:n.addedToReport)||!1,updatedAt:(new Date).toISOString()}})})}}),completeAssignment:(t,s)=>e(e=>{const a=e.itemsByCaseId[t]||{},l=a[s];return null!==l&&void 0!==l&&l.assignment?{itemsByCaseId:(0,i.A)((0,i.A)({},e.itemsByCaseId),{},{[t]:(0,i.A)((0,i.A)({},a),{},{[s]:(0,i.A)((0,i.A)({},l),{},{assignment:(0,i.A)((0,i.A)({},l.assignment),{},{completedAt:(new Date).toISOString()}),updatedAt:(new Date).toISOString()})})})}:e}),addToReport:(t,s)=>e(e=>{const a=e.itemsByCaseId[t]||{},l=a[s],n=e.reportItems[t]||[];return{itemsByCaseId:(0,i.A)((0,i.A)({},e.itemsByCaseId),{},{[t]:(0,i.A)((0,i.A)({},a),{},{[s]:{contradictionId:s,status:(null===l||void 0===l?void 0:l.status)||"new",assignment:null===l||void 0===l?void 0:l.assignment,addedToReport:!0,updatedAt:(new Date).toISOString()}})}),reportItems:(0,i.A)((0,i.A)({},e.reportItems),{},{[t]:n.includes(s)?n:[...n,s]})}}),removeFromReport:(t,s)=>e(e=>{const a=e.itemsByCaseId[t]||{},l=a[s],n=e.reportItems[t]||[];return{itemsByCaseId:(0,i.A)((0,i.A)({},e.itemsByCaseId),{},{[t]:(0,i.A)((0,i.A)({},a),{},{[s]:(0,i.A)((0,i.A)({},l),{},{contradictionId:s,status:(null===l||void 0===l?void 0:l.status)||"new",addedToReport:!1,updatedAt:(new Date).toISOString()})})}),reportItems:(0,i.A)((0,i.A)({},e.reportItems),{},{[t]:n.filter(e=>e!==s)})}}),clearReport:t=>e(e=>({reportItems:(0,i.A)((0,i.A)({},e.reportItems),{},{[t]:[]})})),setFilter:(t,s)=>e(e=>({filters:(0,i.A)((0,i.A)({},e.filters),{},{[t]:s})})),resetFilters:()=>e({filters:(0,i.A)({},c)}),getItem:(e,s)=>{var a;return null===(a=t().itemsByCaseId[e])||void 0===a?void 0:a[s]},getItemsForCase:e=>{const s=t().itemsByCaseId[e]||{};return Object.values(s)},getReportItems:e=>t().reportItems[e]||[],getStats:e=>{const s=Object.values(t().itemsByCaseId[e]||{});return{total:s.length,new:s.filter(e=>"new"===e.status).length,confirmed:s.filter(e=>"confirmed"===e.status).length,notContradiction:s.filter(e=>"not_contradiction"===e.status).length,needsEvidence:s.filter(e=>"needs_evidence"===e.status).length,usedInReport:s.filter(e=>"used_in_report"===e.status).length,assigned:s.filter(e=>e.assignment&&!e.assignment.completedAt).length}},reset:()=>e({itemsByCaseId:{},filters:(0,i.A)({},c),reportItems:{}}),resetCase:t=>e(e=>{const s=e.itemsByCaseId,{[t]:i}=s,n=(0,a.A)(s,[t].map(l.A)),r=e.reportItems,{[t]:c}=r;return{itemsByCaseId:n,reportItems:(0,a.A)(r,[t].map(l.A))}})}),{name:"jethro-workbench",partialize:e=>({itemsByCaseId:e.itemsByCaseId,reportItems:e.reportItems})}))},3372:(e,t,s)=>{s.d(t,{Wh:()=>d,pr:()=>o.pr,_0:()=>c,ct:()=>r,DE:()=>n});s(2240),s(4182),s(5569),s(3164),s(6721);var a=s(4131),l=s(4893);const i={counsel:{mode:"counsel",label:"\u05e2\u05d5\u05e8\u05da \u05d3\u05d9\u05df",description:"\u05d4\u05db\u05e0\u05d4 \u05dc\u05d7\u05e7\u05d9\u05e8\u05d4, triage \u05d5\u05d9\u05d9\u05e6\u05d5\u05d0",icon:"Scale",features:{showAssignments:!0,showGuidedHelp:!1,showNeutralView:!1,showTriageTools:!0,showMentorApproval:!1,showExportTools:!0}},trainee:{mode:"trainee",label:"\u05de\u05ea\u05de\u05d7\u05d4",description:"\u05d6\u05e8\u05d9\u05de\u05ea \u05e2\u05d1\u05d5\u05d3\u05d4 \u05de\u05d5\u05d3\u05e8\u05db\u05ea \u05e2\u05dd \u05d4\u05e1\u05d1\u05e8\u05d9\u05dd",icon:"GraduationCap",features:{showAssignments:!0,showGuidedHelp:!0,showNeutralView:!1,showTriageTools:!0,showMentorApproval:!0,showExportTools:!1}},judge:{mode:"judge",label:"\u05e9\u05d5\u05e4\u05d8",description:"\u05d4\u05e9\u05d5\u05d5\u05d0\u05d4 \u05e0\u05d8\u05e8\u05dc\u05d9\u05ea \u05d5\u05e6\u05d9\u05e8 \u05d6\u05de\u05df",icon:"Gavel",features:{showAssignments:!1,showGuidedHelp:!1,showNeutralView:!0,showTriageTools:!1,showMentorApproval:!1,showExportTools:!0}}},n=(0,a.v)()((0,l.Zr)((e,t)=>({viewMode:"counsel",setViewMode:t=>e({viewMode:t}),getConfig:()=>i[t().viewMode],hasFeature:e=>i[t().viewMode].features[e],reset:()=>e({viewMode:"counsel"})}),{name:"jethro-view-mode",partialize:e=>({viewMode:e.viewMode})})),r=e=>n(t=>i[t.viewMode].features[e]),c=()=>n(e=>i[e.viewMode]),d=()=>Object.values(i);var o=s(2316)},5562:(e,t,s)=>{s.d(t,{F:()=>L,A:()=>R});var a=s(9379),l=s(5043),i=s(6099),n=s(2024),r=s(5746),c=s(331),d=s(1440),o=s(248),x=s(9575),m=s(3216),u=s(7719),h=s(2054),p=s(6245),v=s(6955),g=s(1680),b=s(2382),y=s(764),j=s(614),f=s(1360),N=s(4459),w=s(8646),A=s(2580),C=s(3372),k=s(579);const _={new:{label:"\u05d7\u05d3\u05e9",icon:u.A,color:"text-yellow-400",bg:"bg-yellow-500/20"},confirmed:{label:"\u05de\u05d0\u05d5\u05de\u05ea",icon:h.A,color:"text-green-400",bg:"bg-green-500/20"},not_contradiction:{label:"\u05dc\u05d0 \u05e1\u05ea\u05d9\u05e8\u05d4",icon:p.A,color:"text-gray-400",bg:"bg-gray-500/20"},needs_evidence:{label:"\u05d3\u05d5\u05e8\u05e9 \u05d1\u05d3\u05d9\u05e7\u05d4",icon:v.A,color:"text-blue-400",bg:"bg-blue-500/20"},used_in_report:{label:'\u05d1\u05d3\u05d5"\u05d7',icon:g.A,color:"text-purple-400",bg:"bg-purple-500/20"}},S={critical:{label:"\u05e7\u05e8\u05d9\u05d8\u05d9",color:"text-red-400 bg-red-500/20",order:0},high:{label:"\u05d2\u05d1\u05d5\u05d4",color:"text-orange-400 bg-orange-500/20",order:1},medium:{label:"\u05d1\u05d9\u05e0\u05d5\u05e0\u05d9",color:"text-yellow-400 bg-yellow-500/20",order:2},low:{label:"\u05e0\u05de\u05d5\u05da",color:"text-gray-400 bg-gray-500/20",order:3}},I=e=>{let{contradiction:t,workbenchItem:s,onStatusChange:a,onAssign:i,onAddToReport:n,onRemoveFromReport:r,onJumpToSource:c,showAssignments:d=!0}=e;const[o,x]=(0,l.useState)(!1),m=(null===s||void 0===s?void 0:s.status)||"new",u=_[m],h=u.icon,p=S[t.severity]||S.medium;return(0,k.jsxs)("div",{className:"\n        rounded-xl border border-slate-700/50 bg-slate-800/50\n        hover:bg-slate-800/80 transition-colors\n      ",dir:"rtl",children:[(0,k.jsxs)("div",{className:"px-4 py-3 border-b border-slate-700/50 flex items-center justify-between",children:[(0,k.jsxs)("div",{className:"flex items-center gap-3",children:[(0,k.jsxs)("div",{className:"relative",children:[(0,k.jsxs)("button",{onClick:()=>x(!o),className:"\n                flex items-center gap-1.5 px-2 py-1 rounded-lg text-xs font-medium\n                ".concat(u.bg," ").concat(u.color,"\n                hover:brightness-110 transition-all\n              "),children:[(0,k.jsx)(h,{className:"w-3.5 h-3.5"}),(0,k.jsx)("span",{children:u.label}),(0,k.jsx)(b.A,{className:"w-3 h-3"})]}),o&&(0,k.jsx)("div",{className:"absolute top-full right-0 mt-1 z-20 w-40 bg-slate-800 border border-slate-700 rounded-lg shadow-xl",children:Object.entries(_).map(e=>{let[t,s]=e;const l=s.icon;return(0,k.jsxs)("button",{onClick:()=>{a(t),x(!1)},className:"\n                        w-full flex items-center gap-2 px-3 py-2 text-xs\n                        hover:bg-slate-700/50 transition-colors\n                        ".concat(m===t?"bg-slate-700/30":"","\n                      "),children:[(0,k.jsx)(l,{className:"w-3.5 h-3.5 ".concat(s.color)}),(0,k.jsx)("span",{className:"text-white/80",children:s.label})]},t)})})]}),(0,k.jsx)("span",{className:"\n              px-2 py-0.5 rounded text-[10px] font-medium\n              ".concat(p.color,"\n            "),children:p.label}),(0,k.jsx)("span",{className:"text-xs text-white/50",children:t.type})]}),(0,k.jsxs)("div",{className:"flex items-center gap-2",children:[c&&(0,k.jsx)("button",{onClick:c,className:"p-1.5 rounded hover:bg-slate-700/50 text-white/50 hover:text-white/80",title:"\u05e7\u05e4\u05d5\u05e5 \u05dc\u05de\u05e7\u05d5\u05e8",children:(0,k.jsx)(y.A,{className:"w-4 h-4"})}),null!==s&&void 0!==s&&s.addedToReport?(0,k.jsx)("button",{onClick:r,className:"p-1.5 rounded bg-purple-500/20 text-purple-400 hover:bg-purple-500/30",title:"\u05d4\u05e1\u05e8 \u05de\u05d4\u05d3\u05d5\u05f4\u05d7",children:(0,k.jsx)(j.A,{className:"w-4 h-4"})}):(0,k.jsx)("button",{onClick:n,className:"p-1.5 rounded hover:bg-purple-500/20 text-white/50 hover:text-purple-400",title:"\u05d4\u05d5\u05e1\u05e3 \u05dc\u05d3\u05d5\u05f4\u05d7",children:(0,k.jsx)(f.A,{className:"w-4 h-4"})})]})]}),(0,k.jsxs)("div",{className:"px-4 py-3 space-y-3",children:[(0,k.jsxs)("div",{className:"space-y-2",children:[(0,k.jsx)("div",{className:"text-xs text-white/50",children:"\u05d8\u05e2\u05e0\u05d4 \u05d0\u05f3"}),(0,k.jsx)("p",{className:"text-sm text-white/80 leading-relaxed",children:t.claim_a})]}),(0,k.jsxs)("div",{className:"space-y-2",children:[(0,k.jsx)("div",{className:"text-xs text-white/50",children:"\u05d8\u05e2\u05e0\u05d4 \u05d1\u05f3"}),(0,k.jsx)("p",{className:"text-sm text-white/80 leading-relaxed",children:t.claim_b})]}),t.explanation&&(0,k.jsxs)("div",{className:"pt-2 border-t border-slate-700/30",children:[(0,k.jsx)("div",{className:"text-xs text-white/50 mb-1",children:"\u05d4\u05e1\u05d1\u05e8"}),(0,k.jsx)("p",{className:"text-sm text-white/60 leading-relaxed",children:t.explanation})]}),d&&(0,k.jsx)("div",{className:"pt-2 border-t border-slate-700/30",children:null!==s&&void 0!==s&&s.assignment?(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{className:"flex items-center gap-2",children:[(0,k.jsx)(N.A,{className:"w-3.5 h-3.5 text-blue-400"}),(0,k.jsx)("span",{className:"text-xs text-white/70",children:s.assignment.assigneeName}),s.assignment.dueDate&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(w.A,{className:"w-3.5 h-3.5 text-white/40 mr-2"}),(0,k.jsx)("span",{className:"text-xs text-white/50",children:new Date(s.assignment.dueDate).toLocaleDateString("he-IL")})]})]}),s.assignment.completedAt?(0,k.jsx)("span",{className:"text-xs text-green-400",children:"\u05d4\u05d5\u05e9\u05dc\u05dd"}):(0,k.jsx)("button",{onClick:i,className:"text-xs text-blue-400 hover:text-blue-300",children:"\u05e2\u05e8\u05d5\u05da"})]}):(0,k.jsxs)("button",{onClick:i,className:"flex items-center gap-1.5 text-xs text-white/50 hover:text-white/80",children:[(0,k.jsx)(N.A,{className:"w-3.5 h-3.5"}),(0,k.jsx)("span",{children:"\u05d4\u05e7\u05e6\u05d4 \u05dc\u05de\u05ea\u05de\u05d7\u05d4"})]})})]})]})},E=e=>{let{caseId:t,contradictions:s,onJumpToSource:a}=e;const{caseId:i}=(0,m.g)(),n=t||i||"",r=(0,m.Zp)(),c=(0,C.ct)("showAssignments"),{itemsByCaseId:d,filters:o,setStatus:x,setAssignment:h,addToReport:p,removeFromReport:v,setFilter:g,resetFilters:b,getStats:y}=(0,C.pr)(),[j,f]=(0,l.useState)(!1),[N,w]=(0,l.useState)(null),[E,z]=(0,l.useState)(""),[D,L]=(0,l.useState)(""),R=n?y(n):null,T=(0,l.useMemo)(()=>{let e=[...s];return"all"!==o.status&&(e=e.filter(e=>{var t;const s=n?null===(t=d[n])||void 0===t?void 0:t[e.id]:void 0;return((null===s||void 0===s?void 0:s.status)||"new")===o.status})),"all"!==o.severity&&(e=e.filter(e=>e.severity===o.severity)),"all"!==o.type&&(e=e.filter(e=>e.type===o.type)),e.sort((e,t)=>{var s,a,l,i,r,c;const x=n?null===(s=d[n])||void 0===s?void 0:s[e.id]:void 0,m=n?null===(a=d[n])||void 0===a?void 0:a[t.id]:void 0;let u=0;switch(o.sortBy){case"severity":u=(null!==(l=null===(i=S[e.severity])||void 0===i?void 0:i.order)&&void 0!==l?l:99)-(null!==(r=null===(c=S[t.severity])||void 0===c?void 0:c.order)&&void 0!==r?r:99);break;case"status":u=((null===x||void 0===x?void 0:x.status)||"new").localeCompare((null===m||void 0===m?void 0:m.status)||"new");break;case"updatedAt":u=((null===x||void 0===x?void 0:x.updatedAt)||"").localeCompare((null===m||void 0===m?void 0:m.updatedAt)||"");break;case"type":u=e.type.localeCompare(t.type)}return"desc"===o.sortOrder?-u:u}),e},[s,o,n,d]),B=(0,l.useMemo)(()=>{const e=new Set(s.map(e=>e.type));return Array.from(e).sort()},[s]);return(0,k.jsxs)("div",{className:"h-full flex flex-col bg-slate-900",dir:"rtl",children:[(0,k.jsxs)("div",{className:"px-4 py-3 border-b border-slate-700/50",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("h2",{className:"text-lg font-semibold text-white",children:"\u05e1\u05d1\u05d9\u05d1\u05ea \u05e2\u05d1\u05d5\u05d3\u05d4"}),(0,k.jsxs)("p",{className:"text-xs text-white/50",children:[T.length," \u05de\u05ea\u05d5\u05da ",s.length," \u05e1\u05ea\u05d9\u05e8\u05d5\u05ea"]})]}),(0,k.jsxs)("button",{onClick:()=>f(!j),className:"\n              flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm\n              ".concat(j?"bg-blue-600 text-white":"bg-slate-800 text-white/70 hover:text-white","\n            "),children:[(0,k.jsx)(A.A,{className:"w-4 h-4"}),(0,k.jsx)("span",{children:"\u05e1\u05e0\u05df"})]})]}),R&&(0,k.jsxs)("div",{className:"flex items-center gap-3 mt-3 text-xs",children:[(0,k.jsxs)("span",{className:"text-yellow-400",children:[R.new," \u05d7\u05d3\u05e9\u05d9\u05dd"]}),(0,k.jsxs)("span",{className:"text-green-400",children:[R.confirmed," \u05de\u05d0\u05d5\u05de\u05ea\u05d9\u05dd"]}),(0,k.jsxs)("span",{className:"text-blue-400",children:[R.needsEvidence," \u05dc\u05d1\u05d3\u05d9\u05e7\u05d4"]}),(0,k.jsxs)("span",{className:"text-purple-400",children:[R.usedInReport," \u05d1\u05d3\u05d5\u05f4\u05d7"]})]})]}),j&&(0,k.jsxs)("div",{className:"px-4 py-3 bg-slate-800/50 border-b border-slate-700/50 space-y-3",children:[(0,k.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"text-xs text-white/50 mb-1 block",children:"\u05e1\u05d8\u05d8\u05d5\u05e1"}),(0,k.jsxs)("select",{value:o.status,onChange:e=>g("status",e.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-2 py-1.5 text-sm text-white",children:[(0,k.jsx)("option",{value:"all",children:"\u05d4\u05db\u05dc"}),Object.entries(_).map(e=>{let[t,s]=e;return(0,k.jsx)("option",{value:t,children:s.label},t)})]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"text-xs text-white/50 mb-1 block",children:"\u05d7\u05d5\u05de\u05e8\u05d4"}),(0,k.jsxs)("select",{value:o.severity,onChange:e=>g("severity",e.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-2 py-1.5 text-sm text-white",children:[(0,k.jsx)("option",{value:"all",children:"\u05d4\u05db\u05dc"}),Object.entries(S).map(e=>{let[t,s]=e;return(0,k.jsx)("option",{value:t,children:s.label},t)})]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"text-xs text-white/50 mb-1 block",children:"\u05e1\u05d5\u05d2"}),(0,k.jsxs)("select",{value:o.type,onChange:e=>g("type",e.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-2 py-1.5 text-sm text-white",children:[(0,k.jsx)("option",{value:"all",children:"\u05d4\u05db\u05dc"}),B.map(e=>(0,k.jsx)("option",{value:e,children:e},e))]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"text-xs text-white/50 mb-1 block",children:"\u05de\u05d9\u05d5\u05df"}),(0,k.jsxs)("select",{value:o.sortBy,onChange:e=>g("sortBy",e.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded px-2 py-1.5 text-sm text-white",children:[(0,k.jsx)("option",{value:"severity",children:"\u05dc\u05e4\u05d9 \u05d7\u05d5\u05de\u05e8\u05d4"}),(0,k.jsx)("option",{value:"status",children:"\u05dc\u05e4\u05d9 \u05e1\u05d8\u05d8\u05d5\u05e1"}),(0,k.jsx)("option",{value:"type",children:"\u05dc\u05e4\u05d9 \u05e1\u05d5\u05d2"}),(0,k.jsx)("option",{value:"updatedAt",children:"\u05dc\u05e4\u05d9 \u05e2\u05d3\u05db\u05d5\u05df"})]})]})]}),(0,k.jsx)("button",{onClick:b,className:"text-xs text-blue-400 hover:text-blue-300",children:"\u05d0\u05d9\u05e4\u05d5\u05e1 \u05e4\u05d9\u05dc\u05d8\u05e8\u05d9\u05dd"})]}),(0,k.jsx)("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:0===T.length?(0,k.jsxs)("div",{className:"text-center py-12",children:[(0,k.jsx)(u.A,{className:"w-12 h-12 text-white/20 mx-auto mb-4"}),(0,k.jsx)("p",{className:"text-white/50",children:"\u05dc\u05d0 \u05e0\u05de\u05e6\u05d0\u05d5 \u05e1\u05ea\u05d9\u05e8\u05d5\u05ea"}),(0,k.jsx)("p",{className:"text-xs text-white/30 mt-1",children:"\u05e0\u05e1\u05d4 \u05dc\u05e9\u05e0\u05d5\u05ea \u05d0\u05ea \u05d4\u05e4\u05d9\u05dc\u05d8\u05e8\u05d9\u05dd"})]}):T.map(e=>{var t;const s=n?null===(t=d[n])||void 0===t?void 0:t[e.id]:void 0;return(0,k.jsx)(I,{contradiction:e,workbenchItem:s,onStatusChange:t=>((e,t)=>{n&&x(n,e,t)})(e.id,t),onAssign:()=>w(e.id),onAddToReport:()=>n&&p(n,e.id),onRemoveFromReport:()=>n&&v(n,e.id),onJumpToSource:()=>(e=>{var t;if(null===(t=e.sources)||void 0===t||!t[0])return;const s=e.sources[0];a?a(s):n&&r("/cases/".concat(n,"/documents/").concat(s))})(e),showAssignments:c},e.id)})}),N&&(0,k.jsx)("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4",children:(0,k.jsxs)("div",{className:"bg-slate-800 rounded-xl border border-slate-700 p-6 w-full max-w-md",children:[(0,k.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"\u05d4\u05e7\u05e6\u05d0\u05ea \u05de\u05e9\u05d9\u05de\u05d4"}),(0,k.jsxs)("div",{className:"space-y-4",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"text-sm text-white/70 block mb-1",children:"\u05e9\u05dd \u05d4\u05e0\u05de\u05e2\u05df"}),(0,k.jsx)("input",{type:"text",value:E,onChange:e=>z(e.target.value),placeholder:"\u05dc\u05d3\u05d5\u05d2\u05de\u05d4: \u05d3\u05e0\u05d9 \u05db\u05d4\u05df",className:"w-full bg-slate-700 border border-slate-600 rounded-lg px-3 py-2 text-white"})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"text-sm text-white/70 block mb-1",children:"\u05ea\u05d0\u05e8\u05d9\u05da \u05d9\u05e2\u05d3 (\u05d0\u05d5\u05e4\u05e6\u05d9\u05d5\u05e0\u05dc\u05d9)"}),(0,k.jsx)("input",{type:"date",value:D,onChange:e=>L(e.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded-lg px-3 py-2 text-white"})]})]}),(0,k.jsxs)("div",{className:"flex items-center gap-3 mt-6",children:[(0,k.jsx)("button",{onClick:()=>{return e=N,void(n&&E.trim()&&(h(n,e,{assigneeName:E.trim(),dueDate:D||void 0}),w(null),z(""),L("")));var e},disabled:!E.trim(),className:"flex-1 bg-blue-600 hover:bg-blue-700 disabled:opacity-50 text-white py-2 rounded-lg",children:"\u05d4\u05e7\u05e6\u05d4"}),(0,k.jsx)("button",{onClick:()=>{w(null),z(""),L("")},className:"flex-1 bg-slate-700 hover:bg-slate-600 text-white py-2 rounded-lg",children:"\u05d1\u05d9\u05d8\u05d5\u05dc"})]})]})})]})},z=e=>{let{isOpen:t,onClose:s,caseId:a,contradictions:l,onJumpToSource:i}=e;return(0,k.jsxs)(k.Fragment,{children:[t&&(0,k.jsx)("div",{className:"fixed inset-0 bg-black/50 z-40",onClick:s}),(0,k.jsxs)("div",{className:"\n          fixed top-0 right-0 h-full w-[600px] max-w-[90vw]\n          bg-slate-900 border-l border-slate-700\n          z-50 transform transition-transform duration-300 ease-in-out\n          ".concat(t?"translate-x-0":"translate-x-full","\n        "),dir:"rtl",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b border-slate-700",children:[(0,k.jsxs)("div",{className:"flex items-center gap-2",children:[(0,k.jsx)(u.A,{className:"w-5 h-5 text-amber-400"}),(0,k.jsx)("h2",{className:"text-lg font-semibold text-white",children:"\u05e1\u05d3\u05e0\u05ea \u05e1\u05ea\u05d9\u05e8\u05d5\u05ea"})]}),(0,k.jsx)("button",{onClick:s,className:"p-2 text-white/60 hover:text-white hover:bg-slate-800 rounded-lg transition-colors",children:(0,k.jsx)(j.A,{size:20})})]}),(0,k.jsx)("div",{className:"h-[calc(100%-60px)] overflow-hidden",children:(0,k.jsx)(E,{caseId:a,contradictions:l,onJumpToSource:i})})]})]})};var D=s(2316);const L=e=>{let{caseId:t,caseName:s,initialData:m,contradictions:u=[],onFetchV1:h,onFetchV2:p,onRunCapability:v,onDocumentOpen:g,onSendMessage:b,onUpload:y}=e;const[j,f]=(0,l.useState)(""),[N,w]=(0,l.useState)(!1),A=(0,l.useRef)(null),[C,_]=(0,l.useState)("v1"),[S,I]=(0,l.useState)(!1),E=(0,D.pr)(e=>e.getStats(t)),[L,R]=(0,l.useState)([{layer:"v1",status:"loading"},{layer:"v2",status:"loading"},{layer:"v3",status:"ready"}]),[T,B]=(0,l.useState)(null===m||void 0===m?void 0:m.v1),[O,F]=(0,l.useState)(null===m||void 0===m?void 0:m.v2),[M,V]=(0,l.useState)({analyses:[]}),[G,P]=(0,l.useState)((null===m||void 0===m?void 0:m.sources)||[]),[q,W]=(0,l.useState)((null===m||void 0===m?void 0:m.capabilities)||[]),[J,H]=(0,l.useState)([]),[U,$]=(0,l.useState)([]),[Z,K]=(0,l.useState)(null),[Q,X]=(0,l.useState)(!1),[Y,ee]=(0,l.useState)(null),[te,se]=(0,l.useState)(),ae=(0,l.useCallback)((e,t,s)=>{R(l=>l.map(l=>l.layer===e?(0,a.A)((0,a.A)({},l),{},{status:t,error:s}):l))},[]);(0,l.useEffect)(()=>{!T&&h?(ae("v1","loading"),h().then(e=>{B(e),ae("v1","ready"),se(new Date)}).catch(e=>{ae("v1","error",e.message)})):T&&ae("v1","ready")},[T,h,ae]),(0,l.useEffect)(()=>{!O&&p?(ae("v2","loading"),p().then(e=>{F(e),ae("v2","ready"),se(new Date)}).catch(e=>{ae("v2","error",e.message)})):O&&ae("v2","ready")},[O,p,ae]),(0,l.useEffect)(()=>{var e,t;const s=[];if(0===G.length&&s.push({id:"upload",label_he:"\u05d4\u05e2\u05dc\u05d4 \u05de\u05e1\u05de\u05db\u05d9\u05dd",description_he:"\u05d4\u05ea\u05d7\u05dc \u05d1\u05d4\u05e2\u05dc\u05d0\u05ea \u05de\u05e1\u05de\u05db\u05d9 \u05d4\u05ea\u05d9\u05e7",priority:"high",onClick:()=>{null===y||void 0===y||y()}}),G.length>0&&(!O||0===((null===(e=O.claims)||void 0===e?void 0:e.length)||0))){const e=q.find(e=>"claims"===e.id);e&&"not_ready"!==e.status&&s.push({id:"run-claims",label_he:"\u05d4\u05e8\u05e5 \u05d8\u05e2\u05e0\u05d5\u05ea",description_he:"\u05d7\u05d9\u05dc\u05d5\u05e5 \u05d8\u05e2\u05e0\u05d5\u05ea \u05de\u05d4\u05de\u05e1\u05de\u05db\u05d9\u05dd (\u05e9\u05dc\u05d1 \u05d1\u05e1\u05d9\u05e1\u05d9)",priority:"high",capability:"claims",onClick:()=>ie("claims")})}if(!Boolean((null===T||void 0===T||null===(t=T.summary)||void 0===t?void 0:t.text)&&T.summary.text.trim().length>0)){const e=q.find(e=>"ai_summary"===e.id);e&&"not_ready"!==e.status&&s.push({id:"generate-ai-summary",label_he:"\u05e6\u05d5\u05e8 \u05e1\u05d9\u05db\u05d5\u05dd AI",description_he:"\u05e1\u05d9\u05db\u05d5\u05dd \u05de\u05e0\u05d4\u05dc\u05d9\u05dd \u05e9\u05e0\u05d5\u05e6\u05e8 \u05e2\u05f4\u05d9 AI",priority:"medium",capability:"ai_summary",onClick:()=>ie("ai_summary")})}"v1"===C&&O&&s.push({id:"explore",label_he:"\u05d7\u05e7\u05d5\u05e8 \u05d0\u05ea \u05e1\u05d1\u05d9\u05d1\u05ea \u05d4\u05e2\u05d1\u05d5\u05d3\u05d4",description_he:"\u05e6\u05e4\u05d4 \u05d1\u05d8\u05e2\u05e0\u05d5\u05ea, \u05e9\u05d7\u05e7\u05e0\u05d9\u05dd \u05d5\u05e6\u05d9\u05e8 \u05d6\u05de\u05df",priority:"medium",onClick:()=>_("v2")});q.filter(e=>"ready"===e.status).slice(0,2).forEach(e=>{s.push({id:"cap-".concat(e.id),label_he:"\u05d4\u05e8\u05e5 ".concat(e.name_he),description_he:"\u05e0\u05d9\u05ea\u05d5\u05d7 \u05de\u05e2\u05de\u05d9\u05e7 \u05e2\u05dd AI",priority:"low",capability:e.id,onClick:()=>ie(e.id)})}),$(s)},[G,C,T,O,q,y]);const le=(0,l.useCallback)(e=>{K(e),e.file_id&&ee(String(e.file_id)),X(!0)},[]),ie=(0,l.useCallback)(async e=>{if(v){W(t=>t.map(t=>t.id===e?(0,a.A)((0,a.A)({},t),{},{status:"running"}):t)),_("v3"),V(t=>{var s;return(0,a.A)((0,a.A)({},t),{},{activeCapability:e,analyses:[{id:"analysis-".concat(Date.now()),capability:e,capability_he:(null===(s=q.find(t=>t.id===e))||void 0===s?void 0:s.name_he)||e,status:"running"},...t.analyses.filter(t=>t.capability!==e)]})});try{const t=await v(e);V(s=>(0,a.A)((0,a.A)({},s),{},{analyses:s.analyses.map(s=>s.capability===e?(0,a.A)((0,a.A)({},s),{},{status:"ready",result:t,generated_at:(new Date).toISOString()}):s)})),W(t=>t.map(t=>t.id===e?(0,a.A)((0,a.A)({},t),{},{status:"ready"}):t))}catch(t){V(t=>(0,a.A)((0,a.A)({},t),{},{analyses:t.analyses.map(t=>t.capability===e?(0,a.A)((0,a.A)({},t),{},{status:"error"}):t)})),W(t=>t.map(t=>t.id===e?(0,a.A)((0,a.A)({},t),{},{status:"ready"}):t))}}},[v,q]),ne=(0,l.useCallback)(e=>{ee(e),X(!0),null===g||void 0===g||g(e)},[g]),re=(0,l.useCallback)(e=>{console.log("Artifact clicked:",e)},[]),ce=(0,l.useCallback)(async()=>{if(j.trim()&&!N&&b){w(!0);try{await b(j.trim()),f("")}finally{var e;w(!1),null===(e=A.current)||void 0===e||e.focus()}}},[j,N,b]),de=(0,l.useCallback)(e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),ce())},[ce]);return(0,k.jsxs)("div",{className:"h-full flex flex-col bg-slate-950",children:[(0,k.jsx)(c.A,{caseName:s,currentLayer:C,layerStatuses:L,lastUpdated:te,onLayerClick:_}),(0,k.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,k.jsx)(d.A,{currentLayer:C,layerStatuses:L,v1Data:T,v2Data:O,v3Data:M,nextActions:U,onLayerChange:_,onEvidenceClick:le,onClaimClick:e=>console.log("Claim clicked:",e),onActorClick:e=>console.log("Actor clicked:",e),onCapabilityClick:ie}),(0,k.jsx)(o.A,{caseId:t,capabilities:q,sources:G,activeArtifacts:J,nextActions:U,contradictionStats:u.length>0?E:void 0,onCapabilityClick:ie,onSourceClick:ne,onArtifactClick:re,onOpenWorkbench:()=>I(!0)})]}),(0,k.jsx)("div",{className:"border-t border-slate-800 bg-slate-900 p-4",dir:"rtl",children:(0,k.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,k.jsxs)("div",{className:"flex items-end gap-3",children:[(0,k.jsxs)("div",{className:"flex gap-2 pb-1",children:[y&&(0,k.jsx)("button",{onClick:y,className:"p-2 text-white/50 hover:text-white hover:bg-slate-800 rounded-lg transition-colors",title:"\u05d4\u05e2\u05dc\u05d4 \u05de\u05e1\u05de\u05db\u05d9\u05dd",children:(0,k.jsx)("span",{className:"text-lg",children:"\ud83d\udcc4"})}),(0,k.jsx)("button",{onClick:()=>_("v3"),className:"p-2 text-white/50 hover:text-white hover:bg-slate-800 rounded-lg transition-colors",title:"\u05e0\u05d9\u05ea\u05d5\u05d7 \u05de\u05e2\u05de\u05d9\u05e7",children:(0,k.jsx)(i.A,{size:18})})]}),(0,k.jsx)("div",{className:"flex-1 relative",children:(0,k.jsx)("textarea",{ref:A,value:j,onChange:e=>f(e.target.value),onKeyDown:de,placeholder:"\u05e9\u05d0\u05dc \u05d0\u05ea \u05d9\u05ea\u05e8\u05d5 \u05e2\u05dc \u05d4\u05ea\u05d9\u05e7...",rows:1,disabled:N||!b,className:"w-full px-4 py-3 bg-slate-800 border border-slate-700 rounded-xl text-white placeholder-white/40 resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:opacity-50",style:{minHeight:"48px",maxHeight:"120px"}})}),(0,k.jsx)("button",{onClick:ce,disabled:!j.trim()||N||!b,className:"p-3 bg-blue-600 hover:bg-blue-500 text-white rounded-xl transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:N?(0,k.jsx)(n.A,{size:20,className:"animate-spin"}):(0,k.jsx)(r.A,{size:20})})]}),(0,k.jsx)("p",{className:"text-xs text-white/30 mt-2 text-center",children:"Enter \u05dc\u05e9\u05dc\u05d9\u05d7\u05d4 \u2022 Shift+Enter \u05dc\u05e9\u05d5\u05e8\u05d4 \u05d7\u05d3\u05e9\u05d4 \u2022 \u05dc\u05d7\u05e5 \u05e2\u05dc \u05d9\u05db\u05d5\u05dc\u05d5\u05ea \u05d1-Rail \u05dc\u05e0\u05d9\u05ea\u05d5\u05d7 \u05de\u05e2\u05de\u05d9\u05e7"})]})}),(0,k.jsx)(x.A,{isOpen:Q,onClose:()=>X(!1),sources:G,activeSourceId:Y,onSelectSource:e=>{ee(e),X(!0)},onOpenDocument:g,evidence:Z}),(0,k.jsx)(z,{isOpen:S,onClose:()=>I(!1),caseId:t,contradictions:u,onJumpToSource:(e,t,s)=>{I(!1),null===g||void 0===g||g(e,t,s)}})]})},R=L},5569:(e,t,s)=>{s.d(t,{i:()=>c});var a=s(9379),l=s(4131),i=s(4893),n=s(9688),r=s(8018);const c=(0,l.v)()((0,i.Zr)((e,t)=>({selectedCase:null,selectedCaseId:null,cases:[],stats:null,casesLoading:!1,casesError:null,lastFetched:null,currentAnalysis:null,analysisLoading:!1,analysisError:null,intelligenceData:null,intelligenceLoading:!1,timelineData:null,graphData:null,setCases:t=>e({cases:t}),fetchCases:async function(){let s=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{casesLoading:a,lastFetched:l,cases:i}=t();if(a)return{cases:i,stats:t().stats};if(!s&&i.length>0&&l){if(Date.now()-l<3e4)return{cases:i,stats:t().stats}}e({casesLoading:!0,casesError:null});try{const t=await(0,n.apiGet)("/api/cases",{showErrorToast:!1}),s={cases:t.cases||[],stats:t.stats||{total:0,critical:0,high:0,medium:0}};return e({cases:s.cases,stats:s.stats,casesLoading:!1,lastFetched:Date.now(),casesError:null}),s}catch(c){const t=c instanceof Error?c.message:"Failed to load cases";return r.v.error("Failed to fetch cases:",c),e({casesLoading:!1,casesError:t}),{cases:[],stats:null}}},invalidateCache:()=>e({lastFetched:null}),addCase:t=>e(e=>({cases:[t,...e.cases]})),updateCase:(t,s)=>e(e=>({cases:e.cases.map(e=>e.id===t?(0,a.A)((0,a.A)({},e),s):e)})),removeCase:t=>e(e=>(0,a.A)({cases:e.cases.filter(e=>e.id!==t)},e.selectedCaseId===t&&{selectedCase:null,selectedCaseId:null,currentAnalysis:null})),setCasesLoading:t=>e({casesLoading:t}),setCasesError:t=>e({casesError:t}),selectCase:t=>e({selectedCase:t,selectedCaseId:(null===t||void 0===t?void 0:t.id)||null}),clearSelectedCase:()=>e({selectedCase:null,selectedCaseId:null,currentAnalysis:null,intelligenceData:null,timelineData:null,graphData:null}),updateSelectedCase:t=>e(e=>({selectedCase:e.selectedCase?(0,a.A)((0,a.A)({},e.selectedCase),t):null})),setAnalysis:t=>e({currentAnalysis:t,analysisError:null}),setAnalysisLoading:t=>e({analysisLoading:t}),setAnalysisError:t=>e({analysisError:t}),updateAnalysis:(t,s)=>e(e=>({currentAnalysis:e.currentAnalysis?(0,a.A)((0,a.A)({},e.currentAnalysis),{},{[t]:s}):null})),setIntelligence:t=>e({intelligenceData:t}),setIntelligenceLoading:t=>e({intelligenceLoading:t}),clearIntelligence:()=>e({intelligenceData:null}),setTimeline:t=>e({timelineData:t}),setGraph:t=>e({graphData:t}),getCaseById:e=>{const{cases:s}=t();return s.find(t=>t.id===e)},getCasesByStatus:e=>{const{cases:s}=t();return s.filter(t=>t.status===e)},countByStatus:()=>{const{cases:e}=t();return{completed:e.filter(e=>"completed"===e.status).length,analyzing:e.filter(e=>"analyzing"===e.status).length,failed:e.filter(e=>"failed"===e.status).length,total:e.length}},getAnalysisResults:()=>{const{currentAnalysis:e}=t();return e?{contradictions:e.contradictions||[],claims:e.claims||[],entities:e.entities||[],insights:e.insights||[],roadmap:e.roadmap||[],strategies:e.strategies||[]}:null},reset:()=>e({selectedCase:null,selectedCaseId:null,cases:[],casesLoading:!1,casesError:null,currentAnalysis:null,analysisLoading:!1,analysisError:null,intelligenceData:null,intelligenceLoading:!1,timelineData:null,graphData:null})}),{name:"cases-storage",partialize:e=>({selectedCaseId:e.selectedCaseId})}))},5978:(e,t,s)=>{s.d(t,{Vb:()=>r});s(5043);var a=s(764),l=s(1680),i=s(579);const n=e=>{var t,s;let{evidence:n,onClick:r,compact:c=!1}=e;if(!(n.filename||n.file_id||n.quote))return(0,i.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 text-xs text-gray-400 bg-gray-100 rounded",children:[(0,i.jsx)(l.A,{className:"w-3 h-3"}),"\u05dc\u05d0 \u05e0\u05de\u05e6\u05d0 \u05de\u05e7\u05d5\u05e8"]});const d=c?n.page?"\u05e2\u05de\u05f3 ".concat(n.page):(null===(t=n.filename)||void 0===t?void 0:t.slice(0,15))||"\u05de\u05e7\u05d5\u05e8":n.filename?"".concat(n.filename).concat(n.page?", \u05e2\u05de\u05f3 ".concat(n.page):""):(null===(s=n.quote)||void 0===s?void 0:s.slice(0,30))+"..."||0;return(0,i.jsxs)("button",{onClick:()=>null===r||void 0===r?void 0:r(n),className:"inline-flex items-center gap-1 px-2 py-0.5 text-xs font-medium text-blue-700 bg-blue-50 hover:bg-blue-100 rounded-full transition-colors cursor-pointer border border-blue-200",title:n.quote||void 0,dir:"rtl",children:[(0,i.jsx)(l.A,{className:"w-3 h-3 flex-shrink-0"}),(0,i.jsx)("span",{className:"truncate max-w-[150px]",children:d}),(0,i.jsx)(a.A,{className:"w-2.5 h-2.5 opacity-60"})]})},r=e=>{let{evidences:t,onEvidenceClick:s,maxShow:a=3,compact:l=!1}=e;if(!t||0===t.length)return(0,i.jsx)("span",{className:"text-xs text-gray-400",dir:"rtl",children:"\u05d0\u05d9\u05df \u05e8\u05d0\u05d9\u05d5\u05ea \u05de\u05e7\u05d5\u05e9\u05e8\u05d5\u05ea"});const r=t.slice(0,a),c=Math.max(0,t.length-a);return(0,i.jsxs)("div",{className:"flex flex-wrap gap-1.5 items-center",dir:"rtl",children:[r.map((e,t)=>(0,i.jsx)(n,{evidence:e,onClick:s,compact:l},e.file_id||t)),c>0&&(0,i.jsxs)("span",{className:"text-xs text-gray-500 px-1",title:"\u05d4\u05e8\u05d0\u05d9\u05d5\u05ea \u05d4\u05e0\u05d5\u05e1\u05e4\u05d5\u05ea \u05d0\u05d9\u05e0\u05df \u05de\u05d5\u05e6\u05d2\u05d5\u05ea \u05db\u05d3\u05d9 \u05dc\u05e9\u05de\u05d5\u05e8 \u05e2\u05dc \u05de\u05e1\u05da \u05e0\u05e7\u05d9",children:["+",c," \u05e0\u05d5\u05e1\u05e4\u05d9\u05dd"]})]})}},6695:(e,t,s)=>{s.d(t,{A:()=>v});s(5043);var a=s(3190),l=s(1680),i=s(1161),n=s(8012),r=s(254),c=s(4459),d=s(7118),o=s(579);const x=e=>{let{text:t}=e;return(0,o.jsxs)("div",{className:"bg-slate-800/50 rounded-2xl border border-slate-700 p-5",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,o.jsx)("div",{className:"p-2 bg-blue-600/20 rounded-lg",children:(0,o.jsx)(l.A,{size:18,className:"text-blue-400"})}),(0,o.jsx)("h3",{className:"text-sm font-semibold text-white",children:"\u05ea\u05de\u05e6\u05d9\u05ea"})]}),(0,o.jsx)("p",{className:"text-sm text-white/80 leading-relaxed",children:t})]})},m=e=>{let{points:t}=e;const s=e=>{switch(e){case"high":return"bg-red-500/20 border-red-500/30";case"medium":return"bg-yellow-500/20 border-yellow-500/30";default:return"bg-slate-700/50 border-slate-600/30"}};return(0,o.jsxs)("div",{className:"bg-slate-800/50 rounded-2xl border border-slate-700 p-5",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,o.jsx)("div",{className:"p-2 bg-yellow-600/20 rounded-lg",children:(0,o.jsx)(i.A,{size:18,className:"text-yellow-400"})}),(0,o.jsx)("h3",{className:"text-sm font-semibold text-white",children:"\u05e0\u05e7\u05d5\u05d3\u05d5\u05ea \u05de\u05e4\u05ea\u05d7"}),(0,o.jsxs)("span",{className:"text-xs text-white/50",children:["(",t.length,")"]})]}),(0,o.jsx)("div",{className:"space-y-2",children:t.slice(0,6).map(e=>(0,o.jsxs)("div",{className:"\n              flex items-start gap-2 p-2.5 rounded-lg border\n              ".concat(s(e.importance),"\n            "),children:[(0,o.jsx)("div",{className:"\n                w-1.5 h-1.5 rounded-full mt-1.5 flex-shrink-0\n                ".concat("high"===e.importance?"bg-red-400":"medium"===e.importance?"bg-yellow-400":"bg-slate-400","\n              ")}),(0,o.jsx)("span",{className:"text-sm text-white/80",children:e.text})]},e.id))})]})},u=e=>{let{actor:t,onClick:s}=e;return(0,o.jsxs)("button",{onClick:s,className:"\n        flex items-center gap-2 px-3 py-2 rounded-lg border\n        transition-all duration-200 hover:brightness-110\n        ".concat((()=>{switch(t.party){case"plaintiff":return"border-blue-500/30 bg-blue-500/10";case"defendant":return"border-red-500/30 bg-red-500/10";case"witness":return"border-green-500/30 bg-green-500/10";case"expert":return"border-purple-500/30 bg-purple-500/10";default:return"border-slate-600/30 bg-slate-700/30"}})(),"\n      "),children:[(()=>{switch(t.party){case"plaintiff":return(0,o.jsx)(c.A,{className:"text-blue-400",size:16});case"defendant":return(0,o.jsx)(c.A,{className:"text-red-400",size:16});case"witness":return(0,o.jsx)(r.A,{className:"text-green-400",size:16});case"expert":return(0,o.jsx)(a.A,{className:"text-purple-400",size:16});default:return(0,o.jsx)(c.A,{className:"text-slate-400",size:16})}})(),(0,o.jsxs)("div",{className:"text-right",children:[(0,o.jsx)("p",{className:"text-sm text-white font-medium",children:t.name}),(0,o.jsx)("p",{className:"text-[10px] text-white/50",children:t.role})]})]})},h=e=>{let{actors:t,onActorClick:s}=e;return(0,o.jsxs)("div",{className:"bg-slate-800/50 rounded-2xl border border-slate-700 p-5",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,o.jsx)("div",{className:"p-2 bg-purple-600/20 rounded-lg",children:(0,o.jsx)(d.A,{size:18,className:"text-purple-400"})}),(0,o.jsx)("h3",{className:"text-sm font-semibold text-white",children:"\u05e9\u05d7\u05e7\u05e0\u05d9\u05dd"}),(0,o.jsxs)("span",{className:"text-xs text-white/50",children:["(",t.length,")"]})]}),t.length>0?(0,o.jsx)("div",{className:"flex flex-wrap gap-2",children:t.map(e=>(0,o.jsx)(u,{actor:e,onClick:()=>null===s||void 0===s?void 0:s(e.id)},e.id))}):(0,o.jsxs)("div",{className:"rounded-lg border border-dashed border-slate-600 bg-slate-800/50 p-4",children:[(0,o.jsx)("p",{className:"text-sm text-white/70",children:"\u05e9\u05d7\u05e7\u05e0\u05d9\u05dd \u05d8\u05e8\u05dd \u05d6\u05d5\u05d4\u05d5"}),(0,o.jsx)("p",{className:"text-xs text-white/40 mt-1",children:"\u05dc\u05d0\u05d7\u05e8 \u05e2\u05d9\u05d1\u05d5\u05d3 \u05e0\u05d5\u05e1\u05e3 \u05e9\u05dc \u05d4\u05de\u05e1\u05de\u05db\u05d9\u05dd, \u05d9\u05d5\u05e4\u05d9\u05e2\u05d5 \u05db\u05d0\u05df \u05d4\u05e6\u05d3\u05d3\u05d9\u05dd, \u05e2\u05d3\u05d9\u05dd \u05d5\u05de\u05e2\u05d5\u05e8\u05d1\u05d9\u05dd."})]})]})},p=()=>(0,o.jsx)("div",{className:"space-y-4 animate-pulse",children:[1,2,3].map(e=>(0,o.jsxs)("div",{className:"bg-slate-800/50 rounded-xl border border-white/5 p-5",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,o.jsx)("div",{className:"w-10 h-10 bg-slate-700/50 rounded-lg"}),(0,o.jsx)("div",{className:"w-24 h-4 bg-slate-700/50 rounded"})]}),(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsx)("div",{className:"w-full h-4 bg-slate-700/50 rounded"}),(0,o.jsx)("div",{className:"w-3/4 h-4 bg-slate-700/50 rounded"})]})]},e))}),v=e=>{let{data:t,isLoading:s,onActorClick:a,onExpandToV2:l}=e;return s?(0,o.jsx)(p,{}):(0,o.jsxs)("div",{className:"space-y-4",dir:"rtl",children:[(0,o.jsx)(x,{text:t.summary.text}),(0,o.jsx)(m,{points:t.keyPoints}),(0,o.jsx)(h,{actors:t.actors,onActorClick:a}),l&&(0,o.jsxs)("button",{onClick:l,className:"w-full py-3 text-center text-sm text-blue-400 hover:text-blue-300 transition-colors",children:[(0,o.jsx)(n.A,{size:14,className:"inline ml-2"}),"\u05e4\u05e8\u05d8\u05d9\u05dd \u05e0\u05d5\u05e1\u05e4\u05d9\u05dd \u05d6\u05de\u05d9\u05e0\u05d9\u05dd \u05d1\u05e1\u05d1\u05d9\u05d1\u05ea \u05d4\u05e2\u05d1\u05d5\u05d3\u05d4"]})]})}},7091:(e,t,s)=>{s.d(t,{A:()=>w});s(5043);var a=s(2054),l=s(6245),i=s(2024),n=s(6099),r=s(7719),c=s(6382),d=s(8326),o=s(1680),x=s(8012),m=s(2489),u=s(3165),h=s(4919),p=s(7118),v=s(5978),g=s(579);const b={game_theory:u.A,debate:p.A,precedents:x.A,risk:m.A,strategy:c.A,insights:n.A,red_flags:r.A,trends:h.A,summary:o.A,default:c.A},y=e=>{let{status:t}=e;const s=(()=>{switch(t){case"ready":return{icon:a.A,label:"\u05de\u05d5\u05db\u05df",color:"bg-green-500/20 text-green-400 border-green-500/30"};case"running":return{icon:i.A,label:"\u05de\u05e8\u05d9\u05e5...",color:"bg-blue-500/20 text-blue-400 border-blue-500/30"};case"error":return{icon:l.A,label:"\u05e9\u05d2\u05d9\u05d0\u05d4",color:"bg-red-500/20 text-red-400 border-red-500/30"};default:return{icon:i.A,label:"\u05de\u05de\u05ea\u05d9\u05df",color:"bg-slate-500/20 text-slate-400 border-slate-500/30"}}})(),n=s.icon;return(0,g.jsxs)("span",{className:"\n        inline-flex items-center gap-1 px-2 py-1 rounded-full border text-xs\n        ".concat(s.color,"\n      "),children:[(0,g.jsx)(n,{size:12,className:"running"===t?"animate-spin":""}),s.label]})},j=e=>{let{artifact:t,onEvidenceClick:s}=e;return(0,g.jsxs)("div",{className:"p-4 bg-slate-800/30 rounded-lg border border-white/10",children:[(0,g.jsx)("h4",{className:"text-sm font-medium text-white mb-2",children:t.title_he}),"string"===typeof t.content?(0,g.jsx)("p",{className:"text-sm text-white/80",children:t.content}):Array.isArray(t.content)?(0,g.jsx)("div",{className:"space-y-2",children:t.content.map((e,t)=>(0,g.jsx)("div",{className:"p-2 bg-slate-800/50 rounded-lg text-sm text-white/80",children:"string"===typeof e?e:JSON.stringify(e)},t))}):(0,g.jsx)("pre",{className:"text-xs text-white/60 overflow-auto max-h-40",children:JSON.stringify(t.content,null,2)}),t.evidence&&t.evidence.length>0&&(0,g.jsx)("div",{className:"mt-3 pt-3 border-t border-white/10",children:(0,g.jsx)(v.Vb,{evidences:t.evidence,onEvidenceClick:s,maxShow:3,compact:!0})})]})},f=e=>{let{result:t,isActive:s,onEvidenceClick:a,onClick:n}=e;const r=b[t.capability]||b.default;return(0,g.jsxs)("div",{className:"\n        rounded-xl border transition-all duration-200\n        ".concat(s?"border-blue-500/50 bg-blue-500/10":"border-white/10 bg-slate-800/30 hover:bg-slate-800/50 cursor-pointer","\n      "),onClick:s?void 0:n,children:[(0,g.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-white/10",children:[(0,g.jsxs)("div",{className:"flex items-center gap-3",children:[(0,g.jsx)("div",{className:"\n              p-2 rounded-lg\n              ".concat(s?"bg-blue-500/30":"bg-slate-700/50","\n            "),children:(0,g.jsx)(r,{size:18,className:s?"text-blue-400":"text-white/60"})}),(0,g.jsxs)("div",{children:[(0,g.jsx)("h3",{className:"text-sm font-semibold text-white",children:t.capability_he}),t.generated_at&&(0,g.jsx)("p",{className:"text-[10px] text-white/40",children:new Date(t.generated_at).toLocaleString("he-IL")})]})]}),(0,g.jsxs)("div",{className:"flex items-center gap-2",children:[(0,g.jsx)(y,{status:t.status}),!s&&(0,g.jsx)(d.A,{size:16,className:"text-white/40"})]})]}),s&&"ready"===t.status&&t.artifacts&&(0,g.jsx)("div",{className:"p-4 space-y-3",children:t.artifacts.map(e=>(0,g.jsx)(j,{artifact:e,onEvidenceClick:a},e.id))}),s&&"running"===t.status&&(0,g.jsxs)("div",{className:"p-8 flex flex-col items-center justify-center text-center",children:[(0,g.jsx)(i.A,{size:32,className:"animate-spin text-blue-400 mb-3"}),(0,g.jsx)("p",{className:"text-sm text-white/60",children:"\u05de\u05d1\u05e6\u05e2 \u05e0\u05d9\u05ea\u05d5\u05d7..."}),(0,g.jsx)("p",{className:"text-xs text-white/40 mt-1",children:"\u05d6\u05d4 \u05e2\u05e9\u05d5\u05d9 \u05dc\u05e7\u05d7\u05ea \u05de\u05e1\u05e4\u05e8 \u05e9\u05e0\u05d9\u05d5\u05ea"})]}),s&&"error"===t.status&&(0,g.jsxs)("div",{className:"p-8 flex flex-col items-center justify-center text-center",children:[(0,g.jsx)(l.A,{size:32,className:"text-red-400 mb-3"}),(0,g.jsx)("p",{className:"text-sm text-white/60",children:"\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05e0\u05d9\u05ea\u05d5\u05d7"}),(0,g.jsx)("button",{className:"mt-3 px-4 py-2 bg-red-500/20 text-red-400 rounded-lg text-xs hover:bg-red-500/30 transition-colors",children:"\u05e0\u05e1\u05d4 \u05e9\u05d5\u05d1"})]})]})},N=()=>(0,g.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[(0,g.jsx)("div",{className:"p-4 bg-slate-800/50 rounded-full mb-4",children:(0,g.jsx)(c.A,{size:40,className:"text-slate-500"})}),(0,g.jsx)("h3",{className:"text-lg font-medium text-white mb-2",children:"\u05d0\u05d9\u05df \u05e0\u05d9\u05ea\u05d5\u05d7\u05d9\u05dd \u05e2\u05d3\u05d9\u05d9\u05df"}),(0,g.jsx)("p",{className:"text-sm text-white/50 max-w-sm",children:"\u05d1\u05d7\u05e8 \u05d9\u05db\u05d5\u05dc\u05ea \u05de\u05d4\u05e8\u05e9\u05d9\u05de\u05d4 \u05d1\u05e6\u05d3 \u05d9\u05de\u05d9\u05df \u05dc\u05d4\u05ea\u05d7\u05d9\u05dc \u05e0\u05d9\u05ea\u05d5\u05d7 \u05de\u05e2\u05de\u05d9\u05e7 \u05e9\u05dc \u05d4\u05ea\u05d9\u05e7"})]}),w=e=>{let{data:t,onEvidenceClick:s,onCapabilityClick:a}=e;return 0===t.analyses.length?(0,g.jsx)(N,{}):(0,g.jsxs)("div",{className:"space-y-4",dir:"rtl",children:[t.activeCapability&&(0,g.jsx)("div",{className:"mb-6",children:t.analyses.filter(e=>e.capability===t.activeCapability).map(e=>(0,g.jsx)(f,{result:e,isActive:!0,onEvidenceClick:s},e.id))}),(0,g.jsxs)("div",{className:"space-y-3",children:[(0,g.jsx)("h3",{className:"text-xs font-medium text-white/40",children:"\u05e0\u05d9\u05ea\u05d5\u05d7\u05d9\u05dd \u05e7\u05d5\u05d3\u05de\u05d9\u05dd"}),t.analyses.filter(e=>e.capability!==t.activeCapability).map(e=>(0,g.jsx)(f,{result:e,isActive:!1,onEvidenceClick:s,onClick:()=>null===a||void 0===a?void 0:a(e.capability)},e.id))]})]})}},8066:(e,t,s)=>{s.d(t,{A:()=>S});var a=s(5043),l=s(7719),i=s(3829),n=s(3190),r=s(5088),c=s(5087),d=s(1680),o=s(1482),x=s(6196),m=s(4669),u=s(8012),h=s(254),p=s(4459),v=s(7118),g=s(5978),b=s(579);const y=e=>{let{actor:t,onEvidenceClick:s,onClick:a}=e;return(0,b.jsxs)("div",{className:"\n        rounded-2xl border p-4 transition-all duration-200\n        hover:shadow-sm cursor-pointer\n        ".concat((()=>{switch(t.party){case"plaintiff":return"border-blue-500/40 bg-blue-500/10";case"defendant":return"border-red-500/40 bg-red-500/10";case"witness":return"border-green-500/40 bg-green-500/10";case"expert":return"border-purple-500/40 bg-purple-500/10";case"judge":return"border-amber-500/40 bg-amber-500/10";default:return"border-slate-600/40 bg-slate-700/30"}})(),"\n      "),onClick:a,children:[(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)("div",{className:"p-2 bg-gray-100 rounded-lg",children:(()=>{switch(t.party){case"plaintiff":return(0,b.jsx)(p.A,{className:"text-blue-400",size:18});case"defendant":return(0,b.jsx)(p.A,{className:"text-red-400",size:18});case"witness":return(0,b.jsx)(h.A,{className:"text-green-400",size:18});case"expert":return(0,b.jsx)(n.A,{className:"text-purple-400",size:18});case"judge":return(0,b.jsx)(u.A,{className:"text-amber-400",size:18});default:return(0,b.jsx)(p.A,{className:"text-slate-400",size:18})}})()}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("h4",{className:"text-sm font-semibold text-gray-900",children:t.name}),(0,b.jsx)("p",{className:"text-xs text-gray-600",children:t.role_he}),t.interest_he&&(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:t.interest_he})]}),void 0!==t.credibility_score&&(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsxs)("div",{className:"text-lg font-bold text-gray-900",children:[Math.round(100*t.credibility_score),"%"]}),(0,b.jsx)("div",{className:"text-[10px] text-gray-500",children:"\u05d0\u05de\u05d9\u05e0\u05d5\u05ea"})]})]}),t.evidence.length>0&&(0,b.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-100",children:(0,b.jsx)(g.Vb,{evidences:t.evidence,onEvidenceClick:s,maxShow:3,compact:!0})})]})},j=e=>{let{actors:t,onEvidenceClick:s,onActorClick:a}=e;const l=t.filter(e=>"plaintiff"===e.party),i=t.filter(e=>"defendant"===e.party),n=t.filter(e=>!["plaintiff","defendant"].includes(e.party));return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)(v.A,{className:"text-gray-700",size:18}),(0,b.jsx)("h3",{className:"text-sm font-semibold text-gray-900",children:"\u05e9\u05d7\u05e7\u05e0\u05d9\u05dd"}),(0,b.jsxs)("span",{className:"text-xs text-gray-500",children:["(",t.length,")"]})]}),(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[l.length>0&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"\u05ea\u05d5\u05d1\u05e2\u05d9\u05dd"}),l.map(e=>(0,b.jsx)(y,{actor:e,onEvidenceClick:s,onClick:()=>null===a||void 0===a?void 0:a(e.id)},e.id))]}),i.length>0&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"\u05e0\u05ea\u05d1\u05e2\u05d9\u05dd"}),i.map(e=>(0,b.jsx)(y,{actor:e,onEvidenceClick:s,onClick:()=>null===a||void 0===a?void 0:a(e.id)},e.id))]})]}),n.length>0&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"\u05d0\u05d7\u05e8\u05d9\u05dd"}),(0,b.jsx)("div",{className:"grid md:grid-cols-3 gap-2",children:n.map(e=>(0,b.jsx)(y,{actor:e,onEvidenceClick:s,onClick:()=>null===a||void 0===a?void 0:a(e.id)},e.id))})]})]})},f=e=>{let{claim:t,onEvidenceClick:s,onClick:a}=e;if(!t.evidence||0===t.evidence.length)return null;const l=(()=>{switch(t.claim_type){case"factual":return{label:"\u05e2\u05d5\u05d1\u05d3\u05ea\u05d9\u05ea",color:"bg-blue-500/20 text-blue-400"};case"legal":return{label:"\u05de\u05e9\u05e4\u05d8\u05d9\u05ea",color:"bg-purple-500/20 text-purple-400"};case"procedural":return{label:"\u05e4\u05e8\u05d5\u05e6\u05d3\u05d5\u05e8\u05dc\u05d9\u05ea",color:"bg-yellow-500/20 text-yellow-400"};case"evidentiary":return{label:"\u05e8\u05d0\u05d9\u05d9\u05ea\u05d9\u05ea",color:"bg-green-500/20 text-green-400"};default:return{label:t.claim_type_he,color:"bg-slate-500/20 text-slate-400"}}})();return(0,b.jsxs)("div",{className:"\n        rounded-2xl border border-gray-200 border-r-4 p-4\n        hover:bg-gray-50 transition-all cursor-pointer\n        ".concat((()=>{switch(t.polarity){case"supports_plaintiff":return"border-r-blue-500 bg-blue-500/5";case"supports_defendant":return"border-r-red-500 bg-red-500/5";default:return"border-r-slate-500 bg-slate-700/20"}})(),"\n      "),onClick:a,children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-2",children:[(0,b.jsx)("span",{className:"px-2 py-0.5 rounded text-[10px] font-medium ".concat(l.color),children:l.label}),void 0!==t.confidence&&(0,b.jsxs)("span",{className:"text-[10px] text-gray-500",children:[Math.round(100*t.confidence),"% \u05d1\u05d9\u05d8\u05d7\u05d5\u05df"]})]}),(0,b.jsx)("p",{className:"text-sm text-gray-900 mb-3",children:t.short_statement}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(g.Vb,{evidences:t.evidence,onEvidenceClick:s,maxShow:2,compact:!0}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)("button",{className:"p-1.5 hover:bg-gray-100 rounded transition-colors",title:"\u05d4\u05d3\u05d2\u05e9",onClick:e=>{e.stopPropagation()},children:(0,b.jsx)(c.A,{size:14,className:"text-gray-500"})}),(0,b.jsx)("button",{className:"p-1.5 hover:bg-gray-100 rounded transition-colors",title:"\u05e9\u05d0\u05dc",onClick:e=>{e.stopPropagation()},children:(0,b.jsx)(m.A,{size:14,className:"text-gray-500"})}),(0,b.jsx)("button",{className:"p-1.5 hover:bg-gray-100 rounded transition-colors",title:"\u05d4\u05e9\u05d5\u05d5\u05d4",onClick:e=>{e.stopPropagation()},children:(0,b.jsx)(x.A,{size:14,className:"text-gray-500"})})]})]})]})},N=e=>{let{claims:t,onEvidenceClick:s,onClaimClick:a}=e;const l=t.filter(e=>e.evidence&&e.evidence.length>0),i=l.slice(0,10),n=Math.max(0,l.length-i.length);return(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("div",{className:"flex items-center justify-between",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(d.A,{className:"text-gray-700",size:18}),(0,b.jsx)("h3",{className:"text-sm font-semibold text-gray-900",children:"\u05d8\u05e2\u05e0\u05d5\u05ea"}),(0,b.jsxs)("span",{className:"text-xs text-gray-500",children:["(",l.length,")"]})]})}),(0,b.jsx)("div",{className:"space-y-2",children:i.map(e=>(0,b.jsx)(f,{claim:e,onEvidenceClick:s,onClick:()=>null===a||void 0===a?void 0:a(e.id)},e.id))}),n>0&&(0,b.jsxs)("div",{className:"text-xs text-gray-500 text-center py-1",children:["\u05d5\u05e2\u05d5\u05d3 ",n," \u05d8\u05e2\u05e0\u05d5\u05ea (\u05dc\u05d0 \u05de\u05d5\u05e6\u05d2\u05d5\u05ea \u05db\u05d3\u05d9 \u05dc\u05e9\u05de\u05d5\u05e8 \u05e2\u05dc \u05de\u05e1\u05da \u05e0\u05e7\u05d9)"]})]})},w=e=>{let{events:t,onEvidenceClick:s}=e;const[l,n]=(0,a.useState)(!0),c=[...t].sort((e,t)=>{const s=new Date(e.date).getTime(),a=new Date(t.date).getTime();return l?s-a:a-s}),d=e=>{switch(e){case"critical":return"bg-red-500/20 text-red-400";case"high":return"bg-orange-500/20 text-orange-400";case"medium":return"bg-yellow-500/20 text-yellow-400";default:return"bg-slate-500/20 text-slate-400"}};return(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(r.A,{className:"text-gray-700",size:18}),(0,b.jsx)("h3",{className:"text-sm font-semibold text-gray-900",children:"\u05e6\u05d9\u05e8 \u05d6\u05de\u05df"}),(0,b.jsxs)("span",{className:"text-xs text-gray-500",children:["(",t.length," \u05d0\u05d9\u05e8\u05d5\u05e2\u05d9\u05dd)"]})]}),(0,b.jsxs)("button",{onClick:()=>n(!l),className:"flex items-center gap-1 text-xs text-gray-500 hover:text-gray-700",children:[(0,b.jsx)(i.A,{size:12}),l?"\u05d9\u05e9\u05df \u05dc\u05d7\u05d3\u05e9":"\u05d7\u05d3\u05e9 \u05dc\u05d9\u05e9\u05df"]})]}),(0,b.jsx)("div",{className:"rounded-2xl border border-gray-200 overflow-hidden bg-white",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"bg-gray-50",children:[(0,b.jsx)("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-600",children:"\u05ea\u05d0\u05e8\u05d9\u05da"}),(0,b.jsx)("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-600",children:"\u05d0\u05d9\u05e8\u05d5\u05e2"}),(0,b.jsx)("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-600",children:"\u05e6\u05d3"}),(0,b.jsx)("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-600",children:"\u05e8\u05d0\u05d9\u05d4"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-100",children:c.map(e=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)("span",{className:"\n                      px-2 py-1 rounded text-xs font-medium\n                      ".concat(d(e.importance),"\n                    "),children:e.date_formatted})}),(0,b.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.event_he}),(0,b.jsx)("td",{className:"px-4 py-3 text-xs text-gray-600",children:e.party||"-"}),(0,b.jsx)("td",{className:"px-4 py-3",children:e.evidence.length>0?(0,b.jsx)(g.Vb,{evidences:e.evidence,onEvidenceClick:s,maxShow:1,compact:!0}):(0,b.jsx)("span",{className:"text-xs text-gray-400",children:"-"})})]},e.id))})]})})]})},A=e=>{let{contradiction:t,onEvidenceClick:s}=e;return(0,b.jsxs)("div",{className:"\n        rounded-xl border-2 p-4\n        ".concat((()=>{switch(t.severity){case"critical":return"border-red-500 bg-red-500/10";case"high":return"border-orange-500 bg-orange-500/10";case"medium":return"border-yellow-500 bg-yellow-500/10";default:return"border-slate-500 bg-slate-700/20"}})(),"\n      "),children:[(0,b.jsxs)("div",{className:"flex items-start gap-2 mb-3",children:[(0,b.jsx)(l.A,{size:18,className:"critical"===t.severity?"text-red-400":"text-orange-400"}),(0,b.jsx)("p",{className:"text-sm text-white flex-1",children:t.description_he})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[(0,b.jsxs)("div",{className:"p-2 bg-slate-800/50 rounded-lg",children:[(0,b.jsx)("p",{className:"text-[10px] text-white/40 mb-1",children:"\u05d8\u05e2\u05e0\u05d4 1:"}),(0,b.jsx)("p",{className:"text-xs text-white/80",children:t.claim1.short_statement})]}),(0,b.jsxs)("div",{className:"p-2 bg-slate-800/50 rounded-lg",children:[(0,b.jsx)("p",{className:"text-[10px] text-white/40 mb-1",children:"\u05d8\u05e2\u05e0\u05d4 2:"}),(0,b.jsx)("p",{className:"text-xs text-white/80",children:t.claim2.short_statement})]})]}),t.evidence.length>0&&(0,b.jsx)(g.Vb,{evidences:t.evidence,onEvidenceClick:s,maxShow:3,compact:!0})]})},C=e=>{let{contradictions:t,onEvidenceClick:s}=e;return 0===t.length?null:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(l.A,{className:"text-orange-400",size:18}),(0,b.jsx)("h3",{className:"text-sm font-semibold text-white",children:"\u05e1\u05ea\u05d9\u05e8\u05d5\u05ea"}),(0,b.jsxs)("span",{className:"text-xs text-white/40",children:["(",t.length,")"]})]}),(0,b.jsx)("div",{className:"space-y-2",children:t.slice(0,5).map(e=>(0,b.jsx)(A,{contradiction:e,onEvidenceClick:s},e.id))})]})},k=e=>{let{flag:t,onEvidenceClick:s}=e;return(0,b.jsxs)("div",{className:"\n        rounded-lg border border-white/10 border-r-4 p-3\n        ".concat((()=>{switch(t.severity){case"critical":return"border-r-red-500 bg-red-500/10";case"high":return"border-r-orange-500 bg-orange-500/10";case"medium":return"border-r-yellow-500 bg-yellow-500/10";default:return"border-r-slate-500 bg-slate-700/20"}})(),"\n      "),children:[(0,b.jsxs)("div",{className:"flex items-start gap-2",children:[(0,b.jsx)(o.A,{size:14,className:"critical"===t.severity?"text-red-400":"text-amber-400"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-xs font-medium text-white/80",children:t.type_he}),(0,b.jsx)("p",{className:"text-xs text-white/60 mt-0.5",children:t.description_he}),t.recommendation_he&&(0,b.jsx)("p",{className:"text-[10px] text-blue-400 mt-1",children:t.recommendation_he})]})]}),t.evidence.length>0&&(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsx)(g.Vb,{evidences:t.evidence,onEvidenceClick:s,maxShow:2,compact:!0})})]})},_=e=>{let{flags:t,onEvidenceClick:s}=e;return 0===t.length?null:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(o.A,{className:"text-amber-400",size:18}),(0,b.jsx)("h3",{className:"text-sm font-semibold text-white",children:"\u05d3\u05d2\u05dc\u05d9\u05dd \u05d0\u05d3\u05d5\u05de\u05d9\u05dd"}),(0,b.jsxs)("span",{className:"text-xs text-white/40",children:["(",t.length,")"]})]}),(0,b.jsx)("div",{className:"space-y-2",children:t.slice(0,5).map(e=>(0,b.jsx)(k,{flag:e,onEvidenceClick:s},e.id))})]})},S=e=>{let{data:t,onEvidenceClick:s,onClaimClick:a,onActorClick:l}=e;return(0,b.jsxs)("div",{className:"space-y-8",dir:"rtl",children:[t.actors.length>0&&(0,b.jsx)(j,{actors:t.actors,onEvidenceClick:s,onActorClick:l}),t.claims.length>0&&(0,b.jsx)(N,{claims:t.claims,onEvidenceClick:s,onClaimClick:a}),t.timeline.length>0&&(0,b.jsx)(w,{events:t.timeline,onEvidenceClick:s}),(0,b.jsx)(C,{contradictions:t.contradictions,onEvidenceClick:s}),(0,b.jsx)(_,{flags:t.redFlags,onEvidenceClick:s})]})}},9569:(e,t,s)=>{s.d(t,{A:()=>r});s(5043);var a=s(7819),l=s(516),i=s(614),n=s(579);const r=e=>{let{error:t,onRetry:s,onDismiss:r,title:c="\u05e9\u05d2\u05d9\u05d0\u05d4",retryText:d="\u05e0\u05e1\u05d4 \u05e9\u05d5\u05d1",dismissText:o="\u05e1\u05d2\u05d5\u05e8",showRetry:x=!0,showDismiss:m=!0,className:u=""}=e;if(!t)return null;const h="string"===typeof t?t:t.message||"\u05e9\u05d2\u05d9\u05d0\u05d4 \u05dc\u05d0 \u05d9\u05d3\u05d5\u05e2\u05d4";return(0,n.jsx)("div",{className:"bg-red-500/20 border border-red-500/50 rounded-xl p-4 ".concat(u),dir:"rtl",children:(0,n.jsxs)("div",{className:"flex items-start gap-3",children:[(0,n.jsx)("div",{className:"flex-shrink-0 w-10 h-10 bg-red-500/20 rounded-lg flex items-center justify-center",children:(0,n.jsx)(a.A,{className:"text-red-400",size:20})}),(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,n.jsx)("h3",{className:"text-red-200 font-semibold text-lg",children:c}),m&&r&&(0,n.jsx)("button",{onClick:r,className:"p-1 hover:bg-red-500/20 rounded-lg transition-colors text-red-300 hover:text-red-200",title:o,children:(0,n.jsx)(i.A,{size:18})})]}),(0,n.jsx)("p",{className:"text-red-200 text-sm leading-relaxed",children:h}),x&&s&&(0,n.jsxs)("button",{onClick:s,className:"mt-3 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-semibold transition-all flex items-center gap-2 text-sm",children:[(0,n.jsx)(l.A,{size:16}),d]})]})]})})}},9575:(e,t,s)=>{s.d(t,{A:()=>d});var a=s(5043),l=s(764),i=s(1680),n=s(9292),r=s(614),c=s(579);const d=e=>{let{isOpen:t,onClose:s,sources:d,activeSourceId:o,onSelectSource:x,onOpenDocument:m,evidence:u}=e;const[h,p]=(0,a.useState)(""),[v,g]=(0,a.useState)(!1),[b,y]=(0,a.useState)(null),j=(0,a.useMemo)(()=>{const e=h.trim().toLowerCase();return e?d.filter(t=>t.filename.toLowerCase().includes(e)):d},[d,h]),f=(0,a.useMemo)(()=>o&&d.find(e=>e.id===o)||null,[d,o]);return(0,a.useEffect)(()=>{(async()=>{if(t)if(null!==u&&void 0!==u&&u.file_id&&u.page){g(!0);try{const e=await fetch("/api/files/".concat(u.file_id,"/page/").concat(u.page));if(e.ok){const t=await e.json();y(t.content||t.text||null)}else y(null)}catch(e){y(null)}finally{g(!1)}}else y(null)})()},[t,null===u||void 0===u?void 0:u.file_id,null===u||void 0===u?void 0:u.page]),(0,c.jsxs)("div",{className:"\n        fixed inset-y-0 right-0 z-50 w-[420px] bg-white border-l border-gray-200 shadow-xl\n        transform transition-transform duration-200\n        ".concat(t?"translate-x-0":"translate-x-full","\n      "),dir:"rtl","aria-hidden":!t,children:[(0,c.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200",children:[(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[(0,c.jsx)(i.A,{className:"w-4 h-4 text-gray-700"}),(0,c.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:"\u05de\u05e7\u05d5\u05e8\u05d5\u05ea"}),(0,c.jsxs)("span",{className:"text-xs text-gray-500",children:["(",d.length,")"]})]}),(0,c.jsx)("button",{onClick:s,className:"p-1.5 rounded-md hover:bg-gray-100 text-gray-600","aria-label":"\u05e1\u05d2\u05d5\u05e8 \u05de\u05e7\u05d5\u05e8\u05d5\u05ea",children:(0,c.jsx)(r.A,{className:"w-4 h-4"})})]}),(0,c.jsx)("div",{className:"px-4 py-3 border-b border-gray-100",children:(0,c.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 border border-gray-200 rounded-lg bg-gray-50",children:[(0,c.jsx)(n.A,{className:"w-4 h-4 text-gray-400"}),(0,c.jsx)("input",{value:h,onChange:e=>p(e.target.value),placeholder:"\u05d7\u05e4\u05e9 \u05de\u05e1\u05de\u05da\u2026",className:"flex-1 bg-transparent outline-none text-sm text-gray-900 placeholder:text-gray-400"})]})}),(0,c.jsxs)("div",{className:"flex h-[calc(100%-104px)]",children:[(0,c.jsx)("div",{className:"w-[190px] border-l border-gray-100 overflow-y-auto",children:0===j.length?(0,c.jsx)("div",{className:"p-4 text-xs text-gray-500 text-center",children:"\u05dc\u05d0 \u05e0\u05de\u05e6\u05d0\u05d5 \u05de\u05e1\u05de\u05db\u05d9\u05dd"}):(0,c.jsx)("div",{className:"p-2 space-y-1",children:j.map(e=>{const t=e.id===o;return(0,c.jsxs)("button",{onClick:()=>x(e.id),className:"\n                      w-full text-right px-3 py-2 rounded-lg border\n                      ".concat(t?"bg-gray-100 border-gray-300":"bg-white border-transparent hover:bg-gray-50","\n                    "),title:e.filename,children:[(0,c.jsx)("div",{className:"text-xs font-medium text-gray-900 truncate",children:e.filename}),(0,c.jsx)("div",{className:"text-[10px] text-gray-500 mt-0.5",children:e.pages?"".concat(e.pages," \u05e2\u05de\u05d5\u05d3\u05d9\u05dd"):"\u05de\u05e1\u05de\u05da"})]},e.id)})})}),(0,c.jsx)("div",{className:"flex-1 overflow-y-auto",children:f?(0,c.jsxs)("div",{className:"p-4",children:[(0,c.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{className:"text-sm font-semibold text-gray-900",children:f.filename}),(0,c.jsx)("div",{className:"text-xs text-gray-500 mt-0.5",children:null!==u&&void 0!==u&&u.page?"\u05e2\u05de\u05d5\u05d3 ".concat(u.page):" "})]}),m&&(0,c.jsxs)("button",{onClick:()=>m(f.id),className:"inline-flex items-center gap-1 text-xs text-blue-700 hover:text-blue-900",children:[(0,c.jsx)(l.A,{className:"w-3 h-3"}),"\u05e4\u05ea\u05d7 \u05de\u05e1\u05de\u05da"]})]}),(null===u||void 0===u?void 0:u.quote)&&(0,c.jsxs)("div",{className:"mt-4 rounded-lg border border-amber-200 bg-amber-50 p-3",children:[(0,c.jsx)("div",{className:"text-[10px] font-semibold text-amber-700 mb-1",children:"\u05e6\u05d9\u05d8\u05d5\u05d8"}),(0,c.jsx)("div",{className:"text-sm text-gray-900 leading-relaxed",children:u.quote})]}),(0,c.jsxs)("div",{className:"mt-4 rounded-lg border border-gray-200 bg-white",children:[(0,c.jsx)("div",{className:"px-3 py-2 border-b border-gray-100 text-[10px] font-semibold text-gray-600",children:"\u05ea\u05e6\u05d5\u05d2\u05ea \u05e2\u05de\u05d5\u05d3"}),(0,c.jsx)("div",{className:"p-3",children:v?(0,c.jsx)("div",{className:"text-xs text-gray-500",children:"\u05d8\u05d5\u05e2\u05df\u2026"}):b?(0,c.jsx)("div",{className:"text-sm text-gray-800 whitespace-pre-wrap leading-relaxed",children:b}):(0,c.jsx)("div",{className:"text-xs text-gray-500",children:"\u05d0\u05d9\u05df \u05ea\u05e6\u05d5\u05d2\u05d4 \u05de\u05e7\u05d3\u05d9\u05de\u05d4 \u05d6\u05de\u05d9\u05e0\u05d4. \u05dc\u05d7\u05e5 \u201c\u05e4\u05ea\u05d7 \u05de\u05e1\u05de\u05da\u201d \u05db\u05d3\u05d9 \u05dc\u05e6\u05e4\u05d5\u05ea \u05d1\u05de\u05e7\u05d5\u05e8."})})]})]}):(0,c.jsx)("div",{className:"p-6 text-sm text-gray-500",children:"\u05d1\u05d7\u05e8 \u05de\u05e1\u05de\u05da \u05db\u05d3\u05d9 \u05dc\u05e6\u05e4\u05d5\u05ea \u05d1\u05ea\u05e6\u05d5\u05d2\u05d4 \u05de\u05e7\u05d3\u05d9\u05de\u05d4."})})]})]})}}}]);
//# sourceMappingURL=7122.c26563ee.chunk.js.map