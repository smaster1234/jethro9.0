{"version":3,"file":"static/js/6060.8f94cd2e.chunk.js","mappings":"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","sources":["components/FileManager.jsx"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\nimport { FileText, Upload, Trash2, Download, Loader2, X, AlertCircle, Plus } from 'lucide-react';\nimport { toast } from 'sonner';\n// âœ… P0 FIX: Use centralized API utility (fetchWithAuth already handles API_BASE_URL)\nimport { fetchWithAuth, apiUpload, apiUploadChunked, apiPost } from '../utils/api';\nimport { logger } from '../utils/logger';\nimport { startUploadJob, failUploadJob } from './GlobalUploadProgress';\n\n// âœ… Threshold for using chunked upload (10MB)\nconst CHUNKED_UPLOAD_THRESHOLD = 10 * 1024 * 1024;\n\n// âœ… Document types for classification - CRITICAL for case understanding\n// Must match NewCaseWizard.jsx DOCUMENT_TYPES\nconst DOCUMENT_TYPES = [\n  { value: 'claim', label: 'ğŸ“œ ×›×ª×‘ ×ª×‘×™×¢×” / ×‘×§×©×”', isFoundational: true },\n  { value: 'defense', label: 'ğŸ›¡ï¸ ×›×ª×‘ ×”×’× ×” / ×ª×©×•×‘×”', isFoundational: true },\n  { value: 'reply', label: 'â†©ï¸ ×›×ª×‘ ×ª×©×•×‘×” ×œ×›×ª×‘ ×”×’× ×”', isFoundational: true },\n  { value: 'summaries', label: 'ğŸ“‘ ×¡×™×›×•××™×', isFoundational: true },\n  { value: 'protocol', label: 'ğŸ“‹ ×¤×¨×•×˜×•×§×•×œ ×“×™×•×Ÿ', isFoundational: false },\n  { value: 'affidavit', label: 'âœï¸ ×ª×¦×”×™×¨', isFoundational: false },\n  { value: 'witness_statement', label: 'ğŸ‘¤ ×¢×“×•×ª / ×ª×¢×ª×™×§ ×¢×“×•×ª', isFoundational: false },\n  { value: 'expert_opinion', label: 'ğŸ”¬ ×—×•×•×ª ×“×¢×ª ××•××—×”', isFoundational: false },\n  { value: 'evidence', label: 'ğŸ“ ×¨××™×” / × ×¡×¤×—', isFoundational: false },\n  { value: 'contract', label: 'ğŸ“„ ×—×•×–×” / ×”×¡×›×', isFoundational: false },\n  { value: 'correspondence', label: 'âœ‰ï¸ ×”×ª×›×ª×‘×•×ª / ××›×ª×‘×™×', isFoundational: false },\n  { value: 'court_decision', label: 'âš–ï¸ ×”×—×œ×˜×” / ×¤×¡×§ ×“×™×Ÿ', isFoundational: false },\n  { value: 'motion', label: 'ğŸ“ ×‘×§×©×” ×‘×™× ×™×™×', isFoundational: false },\n  { value: 'other', label: 'ğŸ“ ××—×¨', isFoundational: false }\n];\n\n// âœ… NEW: LocalStorage helpers for remembering recent inputs\nconst RECENT_INPUTS_KEY = 'yitro_recent_inputs';\nconst MAX_RECENT_INPUTS = 3;\n\nconst getRecentInputs = (field) => {\n  try {\n    const stored = localStorage.getItem(RECENT_INPUTS_KEY);\n    if (!stored) return [];\n    const data = JSON.parse(stored);\n    return (data[field] || []).slice(0, MAX_RECENT_INPUTS);\n  } catch {\n    return [];\n  }\n};\n\nconst saveRecentInput = (field, value) => {\n  if (!value || value.trim().length < 2) return;\n  try {\n    const stored = localStorage.getItem(RECENT_INPUTS_KEY);\n    const data = stored ? JSON.parse(stored) : {};\n    const existing = data[field] || [];\n    // Remove duplicates and add to front\n    const filtered = existing.filter(v => v.toLowerCase() !== value.trim().toLowerCase());\n    data[field] = [value.trim(), ...filtered].slice(0, MAX_RECENT_INPUTS);\n    localStorage.setItem(RECENT_INPUTS_KEY, JSON.stringify(data));\n  } catch (e) {\n    logger.warn('Failed to save recent input:', e);\n  }\n};\n\nconst FileManager = ({ caseId, caseName, files = [], onFilesUpdate, autoOpenUpload = false }) => {\n  const [showUpload, setShowUpload] = useState(autoOpenUpload);\n  const [showDeleteConfirm, setShowDeleteConfirm] = useState(null);\n  const [uploadFiles, setUploadFiles] = useState([]);\n  const [uploading, setUploading] = useState(false);\n  const [uploadProgress, setUploadProgress] = useState(null);  // âœ… NEW: Background upload progress\n  const [deleting, setDeleting] = useState(null);\n  // âœ… Default: no analysis after upload (analysis is user-triggered)\n  const [reanalyzeOption, setReanalyzeOption] = useState('skip');\n  const [caseContext, setCaseContext] = useState(null);  // âœ… Store case context for pre-filling\n  const [updatingFile, setUpdatingFile] = useState(null);  // âœ… Track which file is being updated\n  const [showLawyerNameDialog, setShowLawyerNameDialog] = useState(null);  // âœ… Dialog for entering lawyer name\n  const [lawyerNameInput, setLawyerNameInput] = useState('');  // âœ… Input for lawyer name\n  const [recentLawyerNames, setRecentLawyerNames] = useState(() => getRecentInputs('lawyer_name'));  // âœ… NEW: Recent lawyer names\n\n  // âœ… ×©××•×¨ ××ª onFilesUpdate ×‘-ref ×›×“×™ ×œ×× ×•×¢ re-renders\n  const onFilesUpdateRef = useRef(onFilesUpdate);\n\n  // âœ… NEW: AbortController for canceling uploads\n  const uploadAbortController = useRef(null);\n\n  useEffect(() => {\n    onFilesUpdateRef.current = onFilesUpdate;\n  }, [onFilesUpdate]);\n\n  // âœ… Fetch case context to pre-fill opponent lawyer name\n  useEffect(() => {\n    const fetchContext = async () => {\n      try {\n        const response = await fetchWithAuth(`/api/cases/${caseId}/context`);\n        if (response.ok) {\n          const data = await response.json();\n          if (data.has_context && data.context) {\n            setCaseContext(data.context);\n            logger.log('âœ… FileManager: Case context loaded for pre-fill');\n          }\n        }\n      } catch (err) {\n        logger.warn('FileManager: Could not fetch case context:', err);\n      }\n    };\n    if (caseId) fetchContext();\n  }, [caseId]);\n\n  // âœ… ××™×Ÿ polling ××•×˜×•××˜×™ - ×¨×§ ×¢×“×›×•×Ÿ ×™×“× ×™ ××—×¨×™ ×¤×¢×•×œ×•×ª\n\n  const handleFileSelect = (e) => {\n    const selectedFiles = Array.from(e.target.files || []);\n    const newFiles = selectedFiles.map((f) => ({\n      id: Date.now() + Math.random(),\n      name: f.name,\n      size: (f.size / 1024 / 1024).toFixed(2) + ' MB',\n      file: f,\n      source: 'self',  // âœ… Default source\n      documentType: '',  // âœ… NEW: Document type - required for proper analysis\n      opponent_lawyer_name: '',  // âœ… Required for opponent documents\n    }));\n    setUploadFiles((prev) => [...prev, ...newFiles]);\n  };\n\n  // âœ… NEW: Update document type for a file\n  const updateFileDocumentType = (id, docType) => {\n    setUploadFiles((prev) =>\n      prev.map((f) => (f.id === id ? { ...f, documentType: docType } : f))\n    );\n  };\n\n  const updateFileSource = (id, source) => {\n    setUploadFiles((prev) =>\n      prev.map((f) => {\n        if (f.id !== id) return f;\n        // âœ… Pre-fill opponent lawyer name from case context when switching to opponent source\n        let lawyerName = '';\n        if (source === 'opponent') {\n          lawyerName = f.opponent_lawyer_name || caseContext?.opposing_lawyer_name || '';\n        }\n        return { ...f, source, opponent_lawyer_name: lawyerName };\n      })\n    );\n  };\n\n  const updateOpponentLawyerName = (id, name) => {\n    setUploadFiles((prev) =>\n      prev.map((f) => (f.id === id ? { ...f, opponent_lawyer_name: name } : f))\n    );\n  };\n\n  const removeUploadFile = (id) => {\n    setUploadFiles((prev) => prev.filter((f) => f.id !== id));\n  };\n\n  // âœ… NEW: Update existing file source\n  const updateExistingFileSource = async (fileId, newSource, opponentLawyerName = null) => {\n    // âœ… FIX: When changing to 'opponent', show dialog to get lawyer name\n    if (newSource === 'opponent' && !opponentLawyerName) {\n      // Get current file to check if it already has a lawyer name\n      const currentFile = files.find(f => (f.id === fileId || f.filename === fileId));\n      const existingName = currentFile?.opponent_lawyer_name || caseContext?.opposing_lawyer_name || '';\n\n      setLawyerNameInput(existingName);\n      setShowLawyerNameDialog({ fileId, newSource });\n      return;  // Wait for dialog confirmation\n    }\n\n    try {\n      setUpdatingFile(fileId);\n\n      // âœ… FIX: Include opponent_lawyer_name in query params when provided\n      let url = `/api/cases/${encodeURIComponent(caseId)}/files/${encodeURIComponent(fileId)}?source=${newSource}`;\n      if (opponentLawyerName) {\n        url += `&opponent_lawyer_name=${encodeURIComponent(opponentLawyerName)}`;\n      }\n\n      const response = await fetchWithAuth(url, { method: 'PATCH' });\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        throw new Error(errorData.detail || 'Update failed');\n      }\n\n      toast.success(`âœ… ××§×•×¨ ×”××¡××š ×¢×•×“×›×Ÿ ×œ\"${\n        newSource === 'self' ? '×©×œ×™' :\n        newSource === 'opponent' ? '×”×¦×“ ×”×©× ×™' :\n        newSource === 'court' ? '×‘×™×ª ×”××©×¤×˜' : '×¦×“ ×©×œ×™×©×™'\n      }\"`);\n\n      // Refresh files list\n      if (onFilesUpdateRef.current) {\n        await onFilesUpdateRef.current();\n      }\n    } catch (err) {\n      logger.error('Update file source error:', err);\n      toast.error('×©×’×™××” ×‘×¢×“×›×•×Ÿ ××§×•×¨ ×”××¡××š: ' + err.message);\n    } finally {\n      setUpdatingFile(null);\n    }\n  };\n\n  // âœ… NEW: Confirm lawyer name and update source\n  const confirmLawyerNameAndUpdate = async () => {\n    if (!showLawyerNameDialog) return;\n\n    const { fileId, newSource } = showLawyerNameDialog;\n    const lawyerName = lawyerNameInput.trim();\n\n    if (!lawyerName || lawyerName.length < 2) {\n      toast.error('× × ×œ×”×–×™×Ÿ ×©× ×¢×•×¨×š ×“×™×Ÿ (×œ×¤×—×•×ª 2 ×ª×•×•×™×)');\n      return;\n    }\n\n    setShowLawyerNameDialog(null);\n    setLawyerNameInput('');\n\n    // Call update with the lawyer name\n    await updateExistingFileSource(fileId, newSource, lawyerName);\n  };\n\n  // âœ… Calculate estimated time based on file sizes\n  const calculateEstimatedTime = (filesToUpload, mode) => {\n    const totalSizeMB = filesToUpload.reduce((acc, f) => acc + (f.file?.size || 0) / (1024 * 1024), 0);\n    const fileCount = filesToUpload.length;\n\n    // Base upload time: ~5 seconds per MB + 30 seconds per file for OCR/analysis\n    const uploadTimeSeconds = Math.ceil(totalSizeMB * 5);\n    if (mode === 'skip') {\n      const minutes = Math.floor(uploadTimeSeconds / 60);\n      const seconds = uploadTimeSeconds % 60;\n      if (minutes > 0) return `${minutes}:${seconds.toString().padStart(2, '0')} ×“×§×•×ª`;\n      return `${seconds} ×©× ×™×•×ª`;\n    }\n    const analysisTimeSeconds = mode === 'new' ? fileCount * 45 : (files.length + fileCount) * 45;\n\n    const totalSeconds = uploadTimeSeconds + analysisTimeSeconds;\n    const minutes = Math.floor(totalSeconds / 60);\n    const seconds = totalSeconds % 60;\n\n    if (minutes > 0) {\n      return `${minutes}:${seconds.toString().padStart(2, '0')} ×“×§×•×ª`;\n    }\n    return `${seconds} ×©× ×™×•×ª`;\n  };\n\n  const uploadNewFiles = async () => {\n    if (uploadFiles.length === 0) {\n      toast.error('× × ×œ×‘×—×•×¨ ×§×‘×¦×™× ×œ×”×¢×œ××”');\n      return;\n    }\n\n    // âœ… ×‘×“×™×§×ª ×©×“×” ×—×•×‘×”: ×¡×•×’ ×”××¡××š\n    const filesWithoutType = uploadFiles.filter(f => !f.documentType);\n    if (filesWithoutType.length > 0) {\n      toast.error('×—×•×‘×” ×œ×‘×—×•×¨ ×¡×•×’ ××¡××š ×œ×›×œ ×”×§×‘×¦×™×!', {\n        description: `×œ× × ×‘×—×¨ ×¡×•×’ ××¡××š ×¢×‘×•×¨ ${filesWithoutType.length} ${filesWithoutType.length === 1 ? '×§×•×‘×¥' : '×§×‘×¦×™×'}`\n      });\n      return;\n    }\n\n    // âœ… ×‘×“×™×§×ª ×©×“×” ×—×•×‘×”: ××§×•×¨ ×”××¡××š (self/opponent/court/third_party)\n    const filesWithoutSource = uploadFiles.filter(f => !f.source);\n    if (filesWithoutSource.length > 0) {\n      toast.error('×—×•×‘×” ×œ×‘×—×•×¨ ××§×•×¨ ×œ×›×œ ×”××¡××›×™×!', {\n        description: `×œ× × ×‘×—×¨ ××§×•×¨ ×¢×‘×•×¨ ${filesWithoutSource.length} ${filesWithoutSource.length === 1 ? '×§×•×‘×¥' : '×§×‘×¦×™×'}`\n      });\n      return;\n    }\n\n    // âœ… ×‘×“×™×§×ª ×©×“×” ×—×•×‘×”: ×©× ×¢×•×¨×š ×“×™×Ÿ ×œ××¡××›×™ ×™×¨×™×‘ ×‘×œ×‘×“ (×œ× ×‘×™×ª ××©×¤×˜)\n    const opponentFilesToCheck = uploadFiles.filter(f => f.source === 'opponent');\n    const missingNames = opponentFilesToCheck.filter(f => !f.opponent_lawyer_name || f.opponent_lawyer_name.trim() === '');\n\n    if (missingNames.length > 0) {\n      toast.error('× × ×œ×”×–×™×Ÿ ×©× ×¢×•×¨×š ×“×™×Ÿ', {\n        description: `×—×¡×¨ ×©× ×¢×•×¨×š ×“×™×Ÿ ×¢×‘×•×¨ ${missingNames.length} ${missingNames.length === 1 ? '×§×•×‘×¥' : '×§×‘×¦×™×'} ×©×œ ×”×™×¨×™×‘`\n      });\n      return;\n    }\n\n    const filesCount = uploadFiles.length;\n    const estimatedTime = calculateEstimatedTime(uploadFiles, reanalyzeOption);\n    const filesToUploadCopy = [...uploadFiles];  // Copy for async use\n    // reanalyzeOption is kept for UI purposes, but upload no longer triggers analysis\n    const globalJobId = `case-${caseId}`;\n\n    // âœ… CLOSE MODAL IMMEDIATELY - Let user navigate freely\n    setShowUpload(false);\n    setUploadFiles([]);\n\n    // âœ… NEW: Create AbortController for this upload\n    uploadAbortController.current = new AbortController();\n\n    // âœ… Ensure the global progress panel is visible for this upload+analysis\n    try {\n      startUploadJob({\n        id: globalJobId,\n        type: 'case',\n        name: caseName || '×ª×™×§',\n        totalFiles: filesCount,\n        documents: filesToUploadCopy.map(f => ({\n          filename: f.name,\n          status: 'pending',\n          canRetry: true\n        }))\n      });\n    } catch (e) {\n      // Non-blocking\n    }\n\n    // âœ… Show floating progress indicator\n    setUploadProgress({\n      filesCount,\n      estimatedTime,\n      startTime: Date.now(),\n      status: 'uploading',\n      message: `××¢×œ×” ${filesCount} ×§×‘×¦×™×...`,\n      canCancel: true\n    });\n\n    try {\n      // âœ… Check if any file needs chunked upload (> 10MB)\n      const hasLargeFiles = filesToUploadCopy.some(f => f.file.size > CHUNKED_UPLOAD_THRESHOLD);\n      const totalSize = filesToUploadCopy.reduce((sum, f) => sum + f.file.size, 0);\n\n      logger.log(`ğŸ“¤ Uploading ${filesCount} files (total: ${(totalSize / 1024 / 1024).toFixed(1)}MB, chunked: ${hasLargeFiles})`);\n\n      let result;\n\n      if (hasLargeFiles || totalSize > 50 * 1024 * 1024) {\n        // âœ… CHUNKED UPLOAD: Upload files one by one for large files\n        logger.log(`ğŸ§© Using chunked upload for ${filesCount} files`);\n\n        const uploadedFiles = [];\n        let completedCount = 0;\n\n        for (const fileItem of filesToUploadCopy) {\n          // Check for cancellation\n          if (uploadAbortController.current?.signal?.aborted) {\n            throw new Error('×”×”×¢×œ××” ×‘×•×˜×œ×”');\n          }\n\n          setUploadProgress(prev => prev ? {\n            ...prev,\n            status: 'uploading',\n            message: `××¢×œ×” ${fileItem.name} (${completedCount + 1}/${filesCount})...`,\n            progress: (completedCount / filesCount) * 100,\n            canCancel: true\n          } : null);\n\n          try {\n            const fileResult = await apiUploadChunked(\n              caseId,\n              fileItem.file,\n              {\n                source: fileItem.source || 'self',\n                documentType: fileItem.documentType || 'other',\n                opponentLawyerName: fileItem.opponent_lawyer_name || '',\n                abortSignal: uploadAbortController.current?.signal,\n                onProgress: (percent, stage) => {\n                  const overallProgress = ((completedCount + percent / 100) / filesCount) * 100;\n                  setUploadProgress(prev => prev ? {\n                    ...prev,\n                    progress: overallProgress,\n                    message: stage === 'uploading'\n                      ? `××¢×œ×” ${fileItem.name} (${Math.round(percent)}%)...`\n                      : `××¢×‘×“ ${fileItem.name}...`\n                  } : null);\n                }\n              }\n            );\n            uploadedFiles.push(fileResult);\n            completedCount++;\n          } catch (fileErr) {\n            logger.error(`Failed to upload ${fileItem.name}:`, fileErr);\n            // Continue with other files\n            toast.error(`× ×›×©×œ ×œ×”×¢×œ×•×ª: ${fileItem.name}`);\n          }\n        }\n\n        result = {\n          uploaded_files: uploadedFiles,\n          status: uploadedFiles.length > 0 ? 'success' : 'failed'\n        };\n\n      } else {\n        // âœ… REGULAR UPLOAD: Small files, batch upload\n        const formData = new FormData();\n        formData.append('reanalyze_mode', 'skip');\n\n        const fileDocTypes = filesToUploadCopy.map((f) => f.documentType || 'other');\n        formData.append('document_types', JSON.stringify(fileDocTypes));\n\n        const fileSources = filesToUploadCopy.map((f) => f.source || 'self');\n        formData.append('file_sources', JSON.stringify(fileSources));\n\n        const opponentNames = filesToUploadCopy.map((f) => f.opponent_lawyer_name || '');\n        formData.append('opponent_lawyer_names', JSON.stringify(opponentNames));\n\n        filesToUploadCopy.forEach((f) => {\n          formData.append('files', f.file);\n        });\n\n        setUploadProgress(prev => prev ? {\n          ...prev,\n          status: 'processing',\n          message: `××¢×‘×“ ${filesCount === 1 ? '×§×•×‘×¥' : filesCount + ' ×§×‘×¦×™×'}...`,\n          canCancel: true\n        } : null);\n\n        result = await apiUpload(\n          `/api/cases/${encodeURIComponent(caseId)}/files`,\n          formData,\n          {\n            showErrorToast: false,\n            abortSignal: uploadAbortController.current.signal,\n            timeoutMs: 600000\n          }\n        );\n      }\n\n      // âœ… Better feedback - show how many files were uploaded\n      const uploadedCount = result?.uploaded_files?.length || 0;\n      if (uploadedCount !== filesCount) {\n        logger.warn(`âš ï¸ Upload mismatch: tried ${filesCount}, uploaded ${uploadedCount}`);\n        toast.warning(`×”×•×¢×œ×• ${uploadedCount} ×§×‘×¦×™× ××ª×•×š ${filesCount} ×©× ×‘×—×¨×•`);\n      } else {\n        logger.log(`âœ… Successfully uploaded ${uploadedCount} files`);\n      }\n\n      // âœ… FIX: Pass result to callback so parent can navigate if reanalyzing\n      if (onFilesUpdateRef.current) {\n        await onFilesUpdateRef.current(result);\n      }\n\n      // âœ… Trigger full analysis after upload\n      try {\n        setUploadProgress(prev => prev ? {\n          ...prev,\n          status: 'processing',\n          message: 'ğŸ”„ ××ª×—×™×œ × ×™×ª×•×— ××¡××›×™×...',\n          canCancel: false,\n          progress: 80\n        } : null);\n\n        await apiPost(`/api/cases/${encodeURIComponent(caseId)}/reanalyze`, {\n          mode: 'full',\n          quality: 'balanced'\n        });\n\n        logger.log('âœ… Analysis triggered successfully');\n\n        setUploadProgress(prev => prev ? {\n          ...prev,\n          status: 'ready',\n          message: 'âœ… ×”×§×‘×¦×™× ×”×•×¢×œ×• ×•×”× ×™×ª×•×— ×”×—×œ! ×”×ª×•×¦××•×ª ×™×•×¤×™×¢×• ×‘×§×¨×•×‘.',\n          canCancel: false,\n          progress: 100\n        } : null);\n      } catch (analysisErr) {\n        logger.warn('âš ï¸ Failed to trigger analysis:', analysisErr);\n        // Don't fail the upload, just notify\n        setUploadProgress(prev => prev ? {\n          ...prev,\n          status: 'ready',\n          message: 'âœ… ×”×§×‘×¦×™× ×”×•×¢×œ×• ×‘×”×¦×œ×—×”! ×”× ×™×ª×•×— ×™×ª×‘×¦×¢ ×‘×§×¨×•×‘.',\n          canCancel: false,\n          progress: 100\n        } : null);\n      }\n\n      setTimeout(() => setUploadProgress(null), 3000);\n      setUploading(false);\n      uploadAbortController.current = null;\n      return;\n\n    } catch (err) {\n      logger.error('Upload error:', err);\n      const errorMsg = err?.message || String(err);\n\n      // âœ… Check if user canceled\n      if (errorMsg.includes('×‘×•×˜×œ×”') || errorMsg.includes('abort')) {\n        toast.info('×”×”×¢×œ××” ×‘×•×˜×œ×”');\n      } else if (errorMsg.includes('timeout')) {\n        toast.error('âš ï¸ ×”×”×¢×œ××” × ×›×©×œ×” - timeout. × ×¡×” ×§×‘×¦×™× ×§×˜× ×™× ×™×•×ª×¨ ××• ×‘×“×•×§ ××ª ×”×—×™×‘×•×¨.');\n      } else if (errorMsg.includes('lawyer') || errorMsg.includes('×¢×•×¨×š')) {\n        toast.error('âš ï¸ ×©× ×¢×•×¨×š ×”×“×™×Ÿ × ×“×¨×© ×¢×‘×•×¨ ××¡××›×™ ×”×™×¨×™×‘');\n      } else if (errorMsg.includes('size') || errorMsg.includes('×’×•×“×œ')) {\n        toast.error('âš ï¸ ××—×“ ×”×§×‘×¦×™× ×’×“×•×œ ××“×™');\n      } else {\n        toast.error('×©×’×™××” ×‘×”×¢×œ××ª ×§×‘×¦×™×: ' + errorMsg);\n      }\n\n      // âœ… Also reflect failure in the global progress panel\n      try {\n        failUploadJob(globalJobId, errorMsg || '×”×¢×œ××” × ×›×©×œ×”', true);\n      } catch (e) {\n        // ignore\n      }\n\n      // Only clear on error\n      setUploading(false);\n      setUploadProgress(null);\n      uploadAbortController.current = null;\n    }\n  };\n\n  // âœ… NEW: Cancel upload function\n  const cancelUpload = () => {\n    if (uploadAbortController.current) {\n      uploadAbortController.current.abort();\n      logger.log('ğŸš« Upload canceled by user');\n    }\n  };\n  \n    const deleteFile = async (fileId, fileName) => {\n      try {\n        setDeleting(fileId);\n    \n        const response = await fetchWithAuth(\n          `/api/cases/${encodeURIComponent(caseId)}/files/${encodeURIComponent(fileId)}`,\n          { method: 'DELETE' }\n        );\n    \n        if (!response.ok) {\n          const errorData = await response.json().catch(() => ({}));\n          throw new Error(errorData.detail || 'Delete failed');\n        }\n    \n        toast.success(`×”×§×•×‘×¥ \"${fileName}\" × ××—×§ ×‘×”×¦×œ×—×”`);\n        setShowDeleteConfirm(null);\n\n        // âœ… ×¨×¢× ×Ÿ ××ª ×¨×©×™××ª ×”×§×‘×¦×™×\n        if (onFilesUpdateRef.current) {\n          await onFilesUpdateRef.current();\n        }\n      } catch (err) {\n        logger.error('Delete error:', err);\n        toast.error('×©×’×™××” ×‘××—×™×§×ª ×§×•×‘×¥', { description: err.message });\n      } finally {\n        setDeleting(null);\n      }\n    };\n  \n    const downloadFile = async (fileId, fileName) => {\n      if (!fileId) {\n        toast.error('×œ× × ×™×ª×Ÿ ×œ×”×•×¨×™×“ ×§×•×‘×¥ ×œ×œ× ××–×”×”');\n        return;\n      }\n  \n      try {\n        const response = await fetchWithAuth(\n          `/api/cases/${encodeURIComponent(caseId)}/files/${encodeURIComponent(fileId)}/download`\n        );\n  \n        if (!response.ok) throw new Error('Download failed');\n\n      const blob = await response.blob();\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = fileName || 'download';\n      document.body.appendChild(a);\n      a.click();\n      window.URL.revokeObjectURL(url);\n      document.body.removeChild(a);\n    } catch (err) {\n      logger.error('Download error:', err);\n      toast.error('×©×’×™××” ×‘×”×•×¨×“×ª ×§×•×‘×¥', { description: err.message });\n    }\n  };\n\n  // ×‘×“×™×§×ª ××¡××›×™ ×™×¡×•×“\n  const selfFiles = (files || []).filter(f => f.source === 'self' || !f.source);\n  const opponentFiles = (files || []).filter(f => f.source === 'opponent');\n  const hasSelfDocs = selfFiles.length > 0;\n  const hasOpponentDocs = opponentFiles.length > 0;\n  const hasFoundationalPair = hasSelfDocs && hasOpponentDocs;\n\n  return (\n    <>\n      {/* âœ… Floating Upload Progress Indicator - Non-blocking */}\n      {uploadProgress && (\n        <div className=\"fixed bottom-24 left-4 z-[9998] bg-slate-900/95 backdrop-blur-xl border border-blue-500/50 rounded-xl p-4 shadow-2xl max-w-sm\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"relative\">\n              <Loader2 className=\"animate-spin text-blue-400\" size={24} />\n              <Upload className=\"absolute inset-0 m-auto text-blue-400/30\" size={12} />\n            </div>\n            <div className=\"flex-1\">\n              <p className=\"text-white font-semibold text-sm\">{uploadProgress.message}</p>\n              <p className=\"text-blue-300 text-xs mt-1\">\n                â±ï¸ ×–××Ÿ ××©×•×¢×¨: {uploadProgress.estimatedTime}\n              </p>\n              <p className=\"text-blue-400/70 text-xs mt-0.5\">\n                × ×™×ª×Ÿ ×œ×”××©×™×š ×œ×¢×‘×•×“ ×‘×™× ×ª×™×™×!\n              </p>\n            </div>\n            {/* âœ… NEW: Cancel button */}\n            {uploadProgress.canCancel && (\n              <button\n                onClick={cancelUpload}\n                className=\"p-2 text-red-400 hover:text-red-300 hover:bg-red-500/20 rounded-lg transition-colors\"\n                title=\"×‘×˜×œ ×”×¢×œ××”\"\n              >\n                <X size={20} />\n              </button>\n            )}\n          </div>\n          <div className=\"mt-3 h-1.5 bg-white/10 rounded-full overflow-hidden\">\n            <div\n              className={`h-full bg-gradient-to-r from-blue-500 to-purple-500 rounded-full transition-all duration-500 ${\n                uploadProgress.progress === undefined ? 'animate-pulse' : ''\n              }`}\n              style={{ width: `${uploadProgress.progress ?? 60}%` }}\n            />\n          </div>\n          {uploadProgress.progress !== undefined && (\n            <p className=\"text-blue-300 text-xs mt-1 text-center\">{uploadProgress.progress}%</p>\n          )}\n        </div>\n      )}\n\n      <div className=\"bg-white/10 backdrop-blur-xl rounded-2xl p-6 border border-white/20\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <div className=\"flex items-center gap-3\">\n            <FileText className=\"text-blue-400\" size={24} />\n            <div>\n              <h3 className=\"text-xl font-bold text-white\">×§×‘×¦×™× ×‘×ª×™×§</h3>\n              <p className=\"text-blue-300 text-sm\">\n                {(files?.length || 0)} {(files?.length || 0) === 1 ? '×§×•×‘×¥' : '×§×‘×¦×™×'}\n                {uploadProgress && <span className=\"text-blue-400 mr-2\">â€¢ ××¢×œ×”...</span>}\n              </p>\n            </div>\n          </div>\n\n          <button\n            onClick={() => setShowUpload(true)}\n            className=\"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-semibold\"\n          >\n            <Plus size={20} />\n            {uploadProgress ? '×”×•×¡×£ ×¢×•×“ ×§×‘×¦×™×' : '×”×•×¡×£ ×§×‘×¦×™×'}\n          </button>\n        </div>\n\n      {/* ğŸ“‹ ×”×ª×¨××ª ××¡××›×™ ×™×¡×•×“ */}\n      {(files?.length || 0) > 0 && !hasFoundationalPair && (\n        <div className=\"mb-6 bg-amber-500/20 border border-amber-500/50 rounded-xl p-4\">\n          <div className=\"flex items-start gap-3\">\n            <AlertCircle className=\"text-amber-300 mt-0.5 flex-shrink-0\" size={24} />\n            <div className=\"flex-1\">\n              <p className=\"text-amber-200 font-semibold mb-2\">ğŸ’¡ ×œ××” ×—×©×•×‘ ×œ×”×¢×œ×•×ª ××¡××›×™× ××©× ×™ ×”×¦×“×“×™×?</p>\n              <p className=\"text-amber-100 text-sm mb-2\">\n                ×™×ª×¨×• ××‘×¦×¢ ×©×œ×•×©×” ×¡×•×’×™ × ×™×ª×•×—×™× ×¢×œ ×‘×¡×™×¡ ×”××¡××›×™×:\n              </p>\n              <ul className=\"text-amber-100 text-sm space-y-1 mb-3 mr-2\">\n                <li>â€¢ <strong>×¡×ª×™×¨×•×ª:</strong> ×¡×ª×™×¨×•×ª ×¤× ×™××™×•×ª ×‘×ª×•×š ××¡××›×™ ×¦×“ ××—×“ (×œ×—×§×™×¨×” × ×’×“×™×ª)</li>\n                <li>â€¢ <strong>×¤×œ×•×’×ª××•×ª:</strong> ××—×œ×•×§×•×ª ×‘×™×Ÿ ×©× ×™ ×”×¦×“×“×™× (×©××œ×•×ª ×©×‘×™×ª ×”××©×¤×˜ ×™×›×¨×™×¢)</li>\n                <li>â€¢ <strong>××•×¡×›××•×ª:</strong> ×¢×•×‘×“×•×ª ×©×©× ×™ ×”×¦×“×“×™× ××¡×›×™××™× ×¢×œ×™×”×Ÿ (××™×Ÿ ×¦×•×¨×š ×œ×”×•×›×™×—)</li>\n              </ul>\n              <p className=\"text-amber-200 text-sm font-semibold mb-3\">\n                âš ï¸ ×œ×–×™×”×•×™ ×¤×œ×•×’×ª××•×ª ×•××•×¡×›××•×ª - ×—×•×‘×” ×œ×”×¢×œ×•×ª ××¡××›×™× ×©×œ ×©× ×™ ×”×¦×“×“×™×!\n              </p>\n              <div className=\"flex flex-wrap gap-4 text-sm\">\n                <div className={`flex items-center gap-2 px-3 py-2 rounded-lg ${\n                  hasSelfDocs ? 'bg-emerald-500/20 text-emerald-300' : 'bg-white/10 text-white/60'\n                }`}>\n                  {hasSelfDocs ? 'âœ…' : 'ğŸ“„'} ××¡××›×™× ×©×œ× ×• {hasSelfDocs ? `(${selfFiles.length})` : '(×—×¡×¨)'}\n                </div>\n                <div className={`flex items-center gap-2 px-3 py-2 rounded-lg ${\n                  hasOpponentDocs ? 'bg-emerald-500/20 text-emerald-300' : 'bg-white/10 text-white/60'\n                }`}>\n                  {hasOpponentDocs ? 'âœ…' : 'ğŸ“„'} ××¡××›×™ ×”×™×¨×™×‘ {hasOpponentDocs ? `(${opponentFiles.length})` : '(×—×¡×¨)'}\n                </div>\n              </div>\n              {!hasSelfDocs && (\n                <p className=\"text-amber-100/70 text-xs mt-2\">\n                  â†’ ×”×¢×œ×” ×›×ª×‘ ×ª×‘×™×¢×”/×”×’× ×”/×ª×¦×”×™×¨ ×©×œ×š\n                </p>\n              )}\n              {!hasOpponentDocs && (\n                <p className=\"text-amber-100/70 text-xs mt-2\">\n                  â†’ ×”×¢×œ×” ×›×ª×‘ ×ª×‘×™×¢×”/×”×’× ×”/×ª×¦×”×™×¨ ×©×œ ×”×¦×“ ×”×©× ×™\n                </p>\n              )}\n            </div>\n          </div>\n        </div>\n      )}\n\n      {(files?.length || 0) === 0 ? (\n        <div className=\"text-center py-12 text-blue-300\">\n          <FileText className=\"mx-auto mb-4 opacity-50\" size={64} />\n          <p>××™×Ÿ ×§×‘×¦×™× ×‘×ª×™×§</p>\n        </div>\n      ) : (\n        <div className=\"space-y-3\">\n          {files.map((file) => {\n            const fileId = file?.id || file?.filename; // ×ª××™×›×” ×’× ×‘×©× ×›Ö¾××¤×ª×—\n\n            // âœ… ×ª×™×§×•×Ÿ: ×§×‘×¢ ×¡×˜×˜×•×¡ ××“×•×™×§\n            // 1. ×× ×™×© status ××¤×•×¨×© ××”×©×¨×ª - ×”×©×ª××© ×‘×• ×ª××™×“\n            // 2. ×× ×”×§×•×‘×¥ ×”×•×¢×œ×” (×™×© uploaded_at) - ×”×•× ready (×”× ×™×ª×•×— ×”×¡×ª×™×™×)\n            // 3. ×¨×§ ×× ×”×§×•×‘×¥ ×××© ×—×“×© (××™×Ÿ uploaded_at) - ××– processing\n            let status = file?.status;\n            if (!status) {\n              status = file?.uploaded_at ? 'ready' : 'processing';\n            }\n\n            const isProcessing = status === 'processing';\n            const isMissing = status === 'missing';\n            const isReady = status === 'ready';\n\n            const formatMB = (bytes) => {\n              const n = Number(bytes);\n              return Number.isFinite(n) ? (n / 1024 / 1024).toFixed(2) + ' MB' : 'â€”';\n            };\n\n            const uploadedAtStr = (() => {\n              if (!file?.uploaded_at) return 'â€”';\n              const d = new Date(file.uploaded_at);\n              return isNaN(d) ? 'â€”' : d.toLocaleDateString('he-IL');\n            })();\n\n            return (\n              <div\n                key={fileId}\n                className={`bg-white/5 rounded-xl p-4 border transition-all ${\n                  isMissing\n                    ? 'border-red-500/50'\n                    : isProcessing\n                    ? 'border-yellow-500/50 animate-pulse'\n                    : 'border-white/10 hover:border-blue-500/50'\n                }`}\n              >\n                <div className=\"flex items-start justify-between\">\n                  <div className=\"flex items-start gap-4 flex-1\">\n                    <div className=\"mt-1\">\n                      <FileText className=\"text-blue-400\" size={32} />\n                    </div>\n\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center gap-2 mb-2\">\n                        <h4 className=\"text-white font-semibold\">{file?.filename || 'â€”'}</h4>\n                        {status && (\n                          <span\n                            className={\n                              status === 'ready'\n                                ? 'text-xs bg-emerald-500/20 text-emerald-300 px-2 py-1 rounded-full'\n                                : status === 'processing'\n                                ? 'text-xs bg-yellow-500/20 text-yellow-300 px-2 py-1 rounded-full flex items-center gap-1'\n                                : 'text-xs bg-red-500/20 text-red-300 px-2 py-1 rounded-full'\n                            }\n                          >\n                            {status === 'ready' ? (\n                              '××•×›×Ÿ'\n                            ) : status === 'processing' ? (\n                              <>\n                                <Loader2 className=\"animate-spin\" size={12} />\n                                ×× ×ª×—...\n                              </>\n                            ) : (\n                              '×—×¡×¨ ×‘×“×™×¡×§'\n                            )}\n                          </span>\n                        )}\n                      </div>\n\n                      <div className=\"grid grid-cols-2 gap-4 text-sm\">\n                        <div>\n                          <span className=\"text-blue-300\">ğŸ“„ ×¢××•×“×™×:</span>\n                          <span className=\"text-white font-semibold mr-2\">\n                            {isProcessing ? '...' : isMissing ? '?' : file?.pages ?? 'â€”'}\n                          </span>\n                        </div>\n                        <div>\n                          <span className=\"text-blue-300\">ğŸ’¾ ×’×•×“×œ:</span>\n                          <span className=\"text-white font-semibold mr-2\">\n                            {formatMB(file?.size)}\n                          </span>\n                        </div>\n                        <div>\n                          <span className=\"text-blue-300\">ğŸ“ ×˜×¢× ×•×ª:</span>\n                          <span className=\"text-white font-semibold mr-2\">\n                            {isProcessing ? '...' : isMissing ? '?' : file?.claims_count || 0}\n                          </span>\n                        </div>\n                        <div>\n                          <span className=\"text-blue-300\">ğŸ‘¥ ×™×©×•×™×•×ª:</span>\n                          <span className=\"text-white font-semibold mr-2\">\n                            {isProcessing ? '...' : isMissing ? '?' : file?.entities_count || 0}\n                          </span>\n                        </div>\n                      </div>\n\n                      {/* âœ… NEW: File source selector */}\n                      <div className=\"flex items-center gap-2 mt-3\">\n                        <span className=\"text-blue-300 text-sm\">ğŸ“ ××§×•×¨:</span>\n                        <select\n                          value={file?.source || 'self'}\n                          onChange={(e) => updateExistingFileSource(fileId, e.target.value)}\n                          disabled={updatingFile === fileId}\n                          className=\"px-2 py-1 text-xs border border-white/20 rounded bg-slate-800 text-white focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50\"\n                        >\n                          <option value=\"self\">ğŸ›¡ï¸ ×©×œ×™</option>\n                          <option value=\"opponent\">âš”ï¸ ×”×¦×“ ×”×©× ×™</option>\n                          <option value=\"court\">âš–ï¸ ×‘×™×ª ×”××©×¤×˜</option>\n                          <option value=\"third_party\">ğŸ‘¥ ×¦×“ ×©×œ×™×©×™</option>\n                        </select>\n                        {updatingFile === fileId && (\n                          <Loader2 className=\"animate-spin text-blue-400\" size={14} />\n                        )}\n                      </div>\n\n                      <p className=\"text-blue-300 text-xs mt-2\">×”×•×¢×œ×” ×‘-{uploadedAtStr}</p>\n\n                      {/* âœ… NEW: Per-file analysis status display */}\n                      {(() => {\n                        const analysisStatus = file?.analysis_status;\n                        const analysisError = file?.analysis_error;\n\n                        // Processing state (case is analyzing or file status is analyzing)\n                        if (isProcessing || analysisStatus === 'analyzing') {\n                          return (\n                            <p className=\"text-yellow-300 text-xs mt-1 flex items-center gap-1\">\n                              <AlertCircle size={12} />\n                              ×”×§×•×‘×¥ ×‘×ª×”×œ×™×š × ×™×ª×•×— - ×–×” ×™×›×•×œ ×œ×§×—×ª ××¡×¤×¨ ×“×§×•×ª\n                            </p>\n                          );\n                        }\n\n                        // Error state\n                        if (analysisStatus === 'error') {\n                          return (\n                            <p className=\"text-red-400 text-xs mt-1 flex items-center gap-1\">\n                              <AlertCircle size={12} />\n                              âŒ ×©×’×™××” ×‘× ×™×ª×•×—: {analysisError || '×©×’×™××” ×œ× ×™×“×•×¢×”'}\n                            </p>\n                          );\n                        }\n\n                        // No text state\n                        if (analysisStatus === 'no_text') {\n                          return (\n                            <p className=\"text-orange-400 text-xs mt-1 flex items-center gap-1\">\n                              <AlertCircle size={12} />\n                              âš ï¸ ×œ× × ××¦× ×˜×§×¡×˜ ×œ× ×™×ª×•×— ×‘××¡××š ×–×” (×™×™×ª×›×Ÿ ×©××“×•×‘×¨ ×‘×¡×¨×™×§×”/×ª××•× ×” ×œ×œ× OCR)\n                            </p>\n                          );\n                        }\n\n                        // Pending state (not analyzed yet)\n                        if (analysisStatus === 'pending' || (!analysisStatus && file?.claims_count === 0 && file?.entities_count === 0)) {\n                          return (\n                            <p className=\"text-gray-400 text-xs mt-1 flex items-center gap-1\">\n                              <AlertCircle size={12} />\n                              â³ ×××ª×™×Ÿ ×œ× ×™×ª×•×— - ×”×¢×œ×” ×§×‘×¦×™× × ×•×¡×¤×™× ×•×”×¤×¢×œ × ×™×ª×•×—\n                            </p>\n                          );\n                        }\n\n                        // Completed successfully\n                        if (analysisStatus === 'completed') {\n                          return (\n                            <p className=\"text-green-400 text-xs mt-1\">\n                              âœ… × ×•×ª×— ×‘×”×¦×œ×—×”\n                              {file?.analyzed_at && ` (${new Date(file.analyzed_at).toLocaleDateString('he-IL')})`}\n                            </p>\n                          );\n                        }\n\n                        return null;\n                      })()}\n\n                      {isMissing && (\n                        <p className=\"text-red-300 text-xs mt-1\">\n                          ×”×§×•×‘×¥ ×œ× × ××¦× ×‘×“×™×¡×§. ×™×™×ª×›×Ÿ ×©× ××—×§ ×™×“× ×™×ª. × ×¡×” ×œ×”×¢×œ×•×ª ××—×“×©.\n                        </p>\n                      )}\n                    </div>\n                  </div>\n\n                  <div className=\"flex gap-2\">\n                    <button\n                      onClick={() => downloadFile(fileId, file?.filename)}\n                      disabled={!isReady || !fileId}\n                      className=\"p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n                      title={\n                        !isReady\n                          ? '×–××™×Ÿ ×œ×”×•×¨×“×” ×¨×§ ×›×©××•×›×Ÿ'\n                          : !fileId\n                          ? '××™×Ÿ ××–×”×”/×©× ×§×•×‘×¥ ×—×•×§×™'\n                          : '×”×•×¨×“'\n                      }\n                    >\n                      <Download size={16} />\n                    </button>\n\n                    <button\n                      onClick={() => setShowDeleteConfirm(file)}\n                      disabled={deleting === fileId}\n                      className=\"p-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50\"\n                      title=\"××—×§\"\n                    >\n                      {deleting === fileId ? (\n                        <Loader2 className=\"animate-spin\" size={16} />\n                      ) : (\n                        <Trash2 size={16} />\n                      )}\n                    </button>\n                  </div>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      )}\n\n      {/* ××•×“×œ ×”×¢×œ××ª ×§×‘×¦×™× */}\n      {showUpload && (\n        <div className=\"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-[9999] p-4\">\n          <div className=\"bg-slate-900 rounded-2xl p-8 max-w-2xl w-full border border-white/20 max-h-[90vh] overflow-y-auto shadow-2xl\">\n            <div className=\"flex items-center justify-between mb-6\">\n              <h3 className=\"text-2xl font-bold text-white\">×”×•×¡×£ ×§×‘×¦×™× ×œ×ª×™×§</h3>\n              <button\n                onClick={() => {\n                  setShowUpload(false);\n                  setUploadFiles([]);\n                }}\n                className=\"text-blue-300 hover:text-white transition-colors\"\n              >\n                <X size={24} />\n              </button>\n            </div>\n\n            {/* âœ… Show queue notice when upload is in progress */}\n            {uploadProgress && (\n              <div className=\"mb-6 bg-blue-500/20 border border-blue-500 rounded-lg p-4\">\n                <div className=\"flex items-start gap-3\">\n                  <Loader2 className=\"text-blue-300 mt-0.5 flex-shrink-0 animate-spin\" size={20} />\n                  <div>\n                    <p className=\"text-blue-200 font-semibold mb-1\">ğŸ“¤ ×”×¢×œ××” ×‘×ª×”×œ×™×š</p>\n                    <p className=\"text-blue-100 text-sm\">\n                      ×§×‘×¦×™× × ×•×¡×¤×™× ×™×ª×•×•×¡×¤×• ×œ×ª×•×¨ ×•×™×¢×œ×• ××•×˜×•××˜×™×ª ×œ××—×¨ ×¡×™×•× ×”×”×¢×œ××” ×”× ×•×›×—×™×ª.\n                    </p>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            <div className=\"mb-6 bg-yellow-500/20 border border-yellow-500 rounded-lg p-4\">\n              <div className=\"flex items-start gap-3\">\n                <AlertCircle className=\"text-yellow-300 mt-0.5 flex-shrink-0\" size={20} />\n                <div>\n                  <p className=\"text-yellow-200 font-semibold mb-1\">âš ï¸ ×©×™× ×œ×‘</p>\n                  <p className=\"text-yellow-100 text-sm\">\n                    ×›×‘×¨×™×¨×ª ××—×“×œ ×”×¢×œ××” ×œ× ××¨×™×¦×” × ×™×ª×•×—. × ×™×ª×•×—/â€RAG ×™×•×¤×¢×œ×• ×¨×§ ×œ×¤×™ ×“×¨×™×©×ª ×”××©×ª××©.\n                  </p>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"mb-6\">\n              <label className=\"block text-white font-semibold mb-3\">×¡×•×’ ×”× ×™×ª×•×—</label>\n              <div className=\"space-y-3\">\n                <label className=\"flex items-start gap-3 p-4 bg-white/5 rounded-lg border border-white/10 hover:border-blue-500 cursor-pointer transition-all\">\n                  <input\n                    type=\"radio\"\n                    name=\"reanalyze\"\n                    value=\"skip\"\n                    checked={reanalyzeOption === 'skip'}\n                    onChange={(e) => setReanalyzeOption(e.target.value)}\n                    className=\"mt-1 flex-shrink-0\"\n                  />\n                  <div className=\"flex-1\">\n                    <p className=\"text-white font-semibold mb-1\">â¸ï¸ ×œ× ×œ×‘×¦×¢ × ×™×ª×•×— ×›×¨×’×¢ (×¢×œ ×¤×™ ×“×¨×™×©×”)</p>\n                    <p className=\"text-blue-300 text-sm\">\n                      ×”×§×‘×¦×™× ×™×™×©××¨×• ×‘×ª×™×§. ×ª×•×›×œ ×œ×”×¤×¢×™×œ × ×™×ª×•×—/â€RAG ×××•×—×¨ ×™×•×ª×¨ ×›×©×¦×¨×™×š.\n                    </p>\n                    <p className=\"text-yellow-300 text-xs mt-1\">\n                      â±ï¸ ×–××Ÿ ××©×•×¢×¨: {uploadFiles.length > 0 ? calculateEstimatedTime(uploadFiles, 'skip') : 'â€”'}\n                    </p>\n                  </div>\n                </label>\n\n                <label className=\"flex items-start gap-3 p-4 bg-white/5 rounded-lg border border-white/10 hover:border-blue-500 cursor-pointer transition-all\">\n                  <input\n                    type=\"radio\"\n                    name=\"reanalyze\"\n                    value=\"full\"\n                    checked={reanalyzeOption === 'full'}\n                    onChange={(e) => setReanalyzeOption(e.target.value)}\n                    className=\"mt-1 flex-shrink-0\"\n                  />\n                  <div className=\"flex-1\">\n                    <p className=\"text-white font-semibold mb-1\">ğŸ”„ × ×™×ª×•×— ××œ× ××—×“×© (××•××œ×¥)</p>\n                    <p className=\"text-blue-300 text-sm\">\n                      × ×™×ª×— ××—×“×© ××ª ×›×œ ×”×§×‘×¦×™× (×™×©× ×™× + ×—×“×©×™×). ××•××œ×¥ ×œ××¦×™××ª ×¡×ª×™×¨×•×ª ×‘×™×Ÿ ×§×‘×¦×™×.\n                    </p>\n                    <p className=\"text-yellow-300 text-xs mt-1\">\n                      â±ï¸ ×–××Ÿ ××©×•×¢×¨: {uploadFiles.length > 0 ? calculateEstimatedTime(uploadFiles, 'full') : 'â€”'}\n                    </p>\n                  </div>\n                </label>\n\n                <label className=\"flex items-start gap-3 p-4 bg-white/5 rounded-lg border border-white/10 hover:border-blue-500 cursor-pointer transition-all\">\n                  <input\n                    type=\"radio\"\n                    name=\"reanalyze\"\n                    value=\"new\"\n                    checked={reanalyzeOption === 'new'}\n                    onChange={(e) => setReanalyzeOption(e.target.value)}\n                    className=\"mt-1 flex-shrink-0\"\n                  />\n                  <div className=\"flex-1\">\n                    <p className=\"text-white font-semibold mb-1\">âš¡ × ×ª×— ×¨×§ ×§×‘×¦×™× ×—×“×©×™× (××”×™×¨)</p>\n                    <p className=\"text-blue-300 text-sm\">\n                      × ×ª×— ×¨×§ ××ª ×”×§×‘×¦×™× ×”×—×“×©×™×, ×œ×œ× ×©×™× ×•×™ ×‘×§×‘×¦×™× ×”×§×™×™××™×.\n                    </p>\n                    <p className=\"text-yellow-300 text-xs mt-1\">\n                      â±ï¸ ×–××Ÿ ××©×•×¢×¨: {uploadFiles.length > 0 ? calculateEstimatedTime(uploadFiles, 'new') : 'â€”'}\n                    </p>\n                  </div>\n                </label>\n\n                <label className=\"flex items-start gap-3 p-4 bg-white/5 rounded-lg border border-white/10 hover:border-blue-500 cursor-pointer transition-all\">\n                  <input\n                    type=\"radio\"\n                    name=\"reanalyze\"\n                    value=\"diff\"\n                    checked={reanalyzeOption === 'diff'}\n                    onChange={(e) => setReanalyzeOption(e.target.value)}\n                    className=\"mt-1 flex-shrink-0\"\n                  />\n                  <div className=\"flex-1\">\n                    <p className=\"text-white font-semibold mb-1\">ğŸ” ××¦×‘ ×”×©×•×•××” (Diff)</p>\n                    <p className=\"text-blue-300 text-sm\">\n                      ×”×©×•×•×” ×‘×™×Ÿ ×”×§×‘×¦×™× ×”×™×©× ×™× ×œ×—×“×©×™× ×•×–×”×” ×©×™× ×•×™×™× ×•×¡×ª×™×¨×•×ª ×—×“×©×•×ª.\n                    </p>\n                    <p className=\"text-yellow-300 text-xs mt-1\">\n                      â±ï¸ ×–××Ÿ ××©×•×¢×¨: {uploadFiles.length > 0 ? calculateEstimatedTime(uploadFiles, 'diff') : 'â€”'}\n                    </p>\n                  </div>\n                </label>\n              </div>\n            </div>\n\n            <div className=\"mb-6\">\n              <label className=\"block text-white font-semibold mb-3\">×‘×—×¨ ×§×‘×¦×™×</label>\n              <div className=\"border-2 border-dashed border-white/20 rounded-lg p-8 text-center hover:border-blue-500 transition-colors\">\n                <Upload className=\"mx-auto text-blue-300 mb-4\" size={48} />\n                <input\n                  type=\"file\"\n                  multiple\n                  accept=\".pdf,.png,.jpg,.jpeg,.txt\"\n                  onChange={handleFileSelect}\n                  className=\"hidden\"\n                  id=\"file-upload-new\"\n                />\n                <label\n                  htmlFor=\"file-upload-new\"\n                  className=\"cursor-pointer text-blue-300 hover:text-white font-semibold\"\n                >\n                  ×œ×—×¥ ×œ×‘×—×™×¨×ª ×§×‘×¦×™×\n                </label>\n                <p className=\"text-blue-200 text-sm mt-2\">PDF, PNG, JPG, TXT</p>\n              </div>\n\n              {uploadFiles.length > 0 && (\n                <div className=\"mt-4 space-y-3\">\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <p className=\"text-white font-semibold\">\n                      ×§×‘×¦×™× × ×‘×—×¨×™× ({uploadFiles.length})\n                    </p>\n                    {/* Source summary */}\n                    <div className=\"flex gap-2 text-xs\">\n                      {uploadFiles.filter(f => f.source === 'self').length > 0 && (\n                        <span className=\"px-2 py-1 bg-blue-500/20 text-blue-300 rounded\">\n                          ğŸ›¡ï¸ ×©×œ×™: {uploadFiles.filter(f => f.source === 'self').length}\n                        </span>\n                      )}\n                      {uploadFiles.filter(f => f.source === 'opponent').length > 0 && (\n                        <span className=\"px-2 py-1 bg-red-500/20 text-red-300 rounded\">\n                          âš”ï¸ ×™×¨×™×‘: {uploadFiles.filter(f => f.source === 'opponent').length}\n                        </span>\n                      )}\n                      {uploadFiles.filter(f => f.source === 'court').length > 0 && (\n                        <span className=\"px-2 py-1 bg-purple-500/20 text-purple-300 rounded\">\n                          âš–ï¸ ×‘×™\"×: {uploadFiles.filter(f => f.source === 'court').length}\n                        </span>\n                      )}\n                      {uploadFiles.filter(f => f.source === 'third_party').length > 0 && (\n                        <span className=\"px-2 py-1 bg-green-500/20 text-green-300 rounded\">\n                          ğŸ‘¥ ×¦×“ ×’': {uploadFiles.filter(f => f.source === 'third_party').length}\n                        </span>\n                      )}\n                      {uploadFiles.filter(f => !f.source).length > 0 && (\n                        <span className=\"px-2 py-1 bg-red-500/30 text-red-400 rounded animate-pulse\">\n                          âš ï¸ ×œ×œ× ××§×•×¨: {uploadFiles.filter(f => !f.source).length}\n                        </span>\n                      )}\n                    </div>\n                  </div>\n                  {uploadFiles.map((file) => (\n                    <div\n                      key={file.id}\n                      className=\"bg-white/10 p-4 rounded-lg border border-white/20 space-y-3\"\n                    >\n                      <div className=\"flex items-center justify-between\">\n                        <div className=\"flex items-center gap-3 flex-1 min-w-0\">\n                          <FileText className=\"text-blue-300 flex-shrink-0\" size={20} />\n                          <div className=\"flex-1 min-w-0\">\n                            <p className=\"text-white text-sm font-semibold truncate\">{file.name}</p>\n                            <p className=\"text-blue-300 text-xs\">{file.size}</p>\n                          </div>\n                        </div>\n                        <button\n                          onClick={() => removeUploadFile(file.id)}\n                          className=\"text-red-400 hover:text-red-300 transition-colors flex-shrink-0 ml-2\"\n                        >\n                          <X size={20} />\n                        </button>\n                      </div>\n\n                      {/* Document Type Selection - REQUIRED - Critical for proper analysis */}\n                      <div className=\"space-y-3\">\n                        <div className=\"flex items-center gap-3\">\n                          <label className=\"text-sm font-semibold text-white flex-shrink-0\">\n                            ×¡×•×’ ×”××¡××š: <span className=\"text-red-400\">*</span>\n                          </label>\n                          <select\n                            value={file.documentType || ''}\n                            onChange={(e) => updateFileDocumentType(file.id, e.target.value)}\n                            className={`flex-1 px-3 py-2 border rounded-lg text-sm bg-slate-800 text-white focus:outline-none focus:ring-2 focus:ring-blue-500 ${\n                              !file.documentType ? 'border-red-500 bg-red-900/20' : 'border-white/20'\n                            }`}\n                            required\n                          >\n                            <option value=\"\" disabled>âš ï¸ ×‘×—×¨ ×¡×•×’ ××¡××š (×—×•×‘×”)</option>\n                            <optgroup label=\"ğŸ“‹ ××¡××›×™ ×™×¡×•×“\">\n                              {DOCUMENT_TYPES.filter(d => d.isFoundational).map(dt => (\n                                <option key={dt.value} value={dt.value}>{dt.label}</option>\n                              ))}\n                            </optgroup>\n                            <optgroup label=\"ğŸ“ ××¡××›×™× × ×•×¡×¤×™×\">\n                              {DOCUMENT_TYPES.filter(d => !d.isFoundational).map(dt => (\n                                <option key={dt.value} value={dt.value}>{dt.label}</option>\n                              ))}\n                            </optgroup>\n                          </select>\n                        </div>\n                        {!file.documentType && (\n                          <p className=\"text-red-400 text-xs\">âš ï¸ ×—×•×‘×” ×œ×‘×—×•×¨ ×¡×•×’ ××¡××š - ×§×¨×™×˜×™ ×œ×”×‘× ×ª ×”×ª×™×§!</p>\n                        )}\n\n                        {/* Document Source Selection - REQUIRED */}\n                        <div className=\"flex items-center gap-3\">\n                          <label className=\"text-sm font-semibold text-white flex-shrink-0\">\n                            ××§×•×¨ ×”××¡××š: <span className=\"text-red-400\">*</span>\n                          </label>\n                          <select\n                            value={file.source || ''}\n                            onChange={(e) => updateFileSource(file.id, e.target.value)}\n                            className={`flex-1 px-3 py-2 border rounded-lg text-sm bg-slate-800 text-white focus:outline-none focus:ring-2 focus:ring-blue-500 ${\n                              !file.source ? 'border-red-500 bg-red-900/20' : 'border-white/20'\n                            }`}\n                            required\n                          >\n                            <option value=\"\" disabled>âš ï¸ ×‘×—×¨ ××§×•×¨ (×—×•×‘×”)</option>\n                            <option value=\"self\">ğŸ›¡ï¸ ×©×œ×™ (×”×œ×§×•×— ×©×œ×™)</option>\n                            <option value=\"opponent\">âš”ï¸ ×”×¦×“ ×”×©× ×™ (×”×™×¨×™×‘)</option>\n                            <option value=\"court\">âš–ï¸ ×‘×™×ª ×”××©×¤×˜</option>\n                            <option value=\"third_party\">ğŸ‘¥ ×¦×“ ×©×œ×™×©×™ (×¢×“/××•××—×”)</option>\n                          </select>\n                        </div>\n                        {!file.source && (\n                          <p className=\"text-red-400 text-xs\">âš ï¸ ×—×•×‘×” ×œ×‘×—×•×¨ ××ª ××§×•×¨ ×”××¡××š ×œ×¤× ×™ ×”×¢×œ××”</p>\n                        )}\n\n                        {/* Opponent Lawyer Name - Required for opponent only (not court) */}\n                        {file.source === 'opponent' && (\n                          <div className=\"flex items-center gap-3\">\n                            <label className=\"text-sm font-semibold text-white flex-shrink-0\">\n                              ×©× ×¢×•×¨×š ×”×“×™×Ÿ: <span className=\"text-red-400\">*</span>\n                            </label>\n                            <input\n                              type=\"text\"\n                              list=\"recent-lawyer-names\"\n                              value={file.opponent_lawyer_name || ''}\n                              onChange={(e) => updateOpponentLawyerName(file.id, e.target.value)}\n                              onBlur={(e) => {\n                                // âœ… Save to recent inputs when leaving field\n                                if (e.target.value?.trim().length >= 2) {\n                                  saveRecentInput('lawyer_name', e.target.value);\n                                  setRecentLawyerNames(getRecentInputs('lawyer_name'));\n                                }\n                              }}\n                              placeholder=\"×”×–×Ÿ ××ª ×©× ×¢×•×¨×š ×”×“×™×Ÿ ×”×™×¨×™×‘\"\n                              className=\"flex-1 px-3 py-2 border border-white/20 rounded-lg text-sm bg-slate-800 text-white focus:outline-none focus:ring-2 focus:ring-blue-500 placeholder:text-gray-500\"\n                              required\n                            />\n                            {/* âœ… Datalist for recent lawyer names */}\n                            <datalist id=\"recent-lawyer-names\">\n                              {recentLawyerNames.map((name, idx) => (\n                                <option key={idx} value={name} />\n                              ))}\n                            </datalist>\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n\n            <div className=\"flex gap-4\">\n              <button\n                onClick={() => {\n                  setShowUpload(false);\n                  setUploadFiles([]);\n                }}\n                className=\"flex-1 px-6 py-3 bg-white/10 text-white rounded-lg hover:bg-white/20 transition-colors font-semibold\"\n              >\n                ×‘×™×˜×•×œ\n              </button>\n              <button\n                onClick={uploadNewFiles}\n                disabled={uploading || uploadFiles.length === 0 || uploadFiles.some(f => !f.source)}\n                className=\"flex-1 px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-lg font-semibold hover:from-green-600 hover:to-emerald-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                {uploading ? (\n                  <span className=\"flex items-center justify-center gap-2\">\n                    <Loader2 className=\"animate-spin\" size={20} />\n                    ××¢×œ×”...\n                  </span>\n                ) : uploadFiles.some(f => !f.source) ? (\n                  'âš ï¸ ×‘×—×¨ ××§×•×¨ ×œ×›×œ ×”×§×‘×¦×™×'\n                ) : (\n                  'ğŸ“¤ ×”×¢×œ×” ×•× ×™×ª×—'\n                )}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* ××•×“×œ ××™×©×•×¨ ××—×™×§×” */}\n      {showDeleteConfirm && (\n        <div className=\"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-[9999] p-4\">\n          <div className=\"bg-slate-900 rounded-2xl p-8 max-w-md w-full border border-red-500/50 shadow-2xl\">\n            <div className=\"text-center mb-6\">\n              <div className=\"inline-flex items-center justify-center w-16 h-16 bg-red-500/20 rounded-full mb-4\">\n                <AlertCircle className=\"text-red-400\" size={32} />\n              </div>\n              <h3 className=\"text-2xl font-bold text-white mb-2\">âš ï¸ ××—×™×§×ª ×§×•×‘×¥</h3>\n              <p className=\"text-blue-200\">\n                ×”×× ×œ××—×•×§ ××ª ×”×§×•×‘×¥{' '}\n                <span className=\"font-bold text-white\">\"{showDeleteConfirm.filename}\"</span>?\n              </p>\n            </div>\n\n            <div className=\"bg-red-500/10 border border-red-500 rounded-lg p-4 mb-6\">\n              <p className=\"text-red-200 text-sm mb-3 font-semibold\">×¤×¢×•×œ×” ×–×• ×ª×’×¨×•× ×œ:</p>\n              <ul className=\"text-red-100 text-sm space-y-1\">\n                <li>â€¢ ××—×™×§×ª {showDeleteConfirm.claims_count || 0} ×˜×¢× ×•×ª ×”×§×©×•×¨×•×ª ×œ×§×•×‘×¥</li>\n                <li>â€¢ ××—×™×§×ª ×¡×ª×™×¨×•×ª ×©×§×©×•×¨×•×ª ×œ×˜×¢× ×•×ª ××œ×•</li>\n                <li>â€¢ ×©×™× ×•×™ ×‘×’×¨×£ ×”×™×©×•×™×•×ª</li>\n                <li>\n                  â€¢ <span className=\"font-bold\">×”××—×™×§×” ×”×™× ×œ×¦××™×ª×•×ª ×•×œ× × ×™×ª×Ÿ ×œ×©×—×–×¨!</span>\n                </li>\n              </ul>\n            </div>\n\n            <div className=\"flex gap-4\">\n              <button\n                onClick={() => setShowDeleteConfirm(null)}\n                className=\"flex-1 px-6 py-3 bg-white/10 text-white rounded-lg hover:bg-white/20 transition-colors font-semibold\"\n              >\n                ×‘×™×˜×•×œ\n              </button>\n              <button\n                onClick={() =>\n                  deleteFile(showDeleteConfirm.id || showDeleteConfirm.filename, showDeleteConfirm.filename)\n                }\n                disabled={!!deleting}\n                className=\"flex-1 px-6 py-3 bg-red-600 text-white rounded-lg font-semibold hover:bg-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                {deleting ? (\n                  <span className=\"flex items-center justify-center gap-2\">\n                    <Loader2 className=\"animate-spin\" size={20} />\n                    ××•×—×§...\n                  </span>\n                ) : (\n                  'ğŸ—‘ï¸ ××—×§ ×œ×¦××™×ª×•×ª'\n                )}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* âœ… NEW: Dialog for entering opponent lawyer name when changing source */}\n      {showLawyerNameDialog && (\n        <div className=\"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-[9999] p-4\">\n          <div className=\"bg-slate-900 rounded-2xl p-8 max-w-md w-full border border-blue-500/50 shadow-2xl\">\n            <div className=\"text-center mb-6\">\n              <div className=\"inline-flex items-center justify-center w-16 h-16 bg-blue-500/20 rounded-full mb-4\">\n                <FileText className=\"text-blue-400\" size={32} />\n              </div>\n              <h3 className=\"text-2xl font-bold text-white mb-2\">âš”ï¸ ××¡××š ×©×œ ×”×¦×“ ×”×©× ×™</h3>\n              <p className=\"text-blue-200\">\n                × × ×œ×”×–×™×Ÿ ××ª ×©× ×¢×•×¨×š ×”×“×™×Ÿ ×©×œ ×”×¦×“ ×”×©× ×™\n              </p>\n            </div>\n\n            <div className=\"mb-6\">\n              <label className=\"block text-white font-semibold mb-2\">\n                ×©× ×¢×•×¨×š ×”×“×™×Ÿ: <span className=\"text-red-400\">*</span>\n              </label>\n              <input\n                type=\"text\"\n                value={lawyerNameInput}\n                onChange={(e) => setLawyerNameInput(e.target.value)}\n                placeholder=\"×œ×“×•×’××”: ×¢×•×´×“ ×™×©×¨××œ ×™×©×¨××œ×™\"\n                className=\"w-full px-4 py-3 border border-white/20 rounded-lg text-sm bg-slate-800 text-white focus:outline-none focus:ring-2 focus:ring-blue-500 placeholder:text-gray-500\"\n                autoFocus\n                onKeyDown={(e) => {\n                  if (e.key === 'Enter') {\n                    confirmLawyerNameAndUpdate();\n                  } else if (e.key === 'Escape') {\n                    setShowLawyerNameDialog(null);\n                    setLawyerNameInput('');\n                  }\n                }}\n              />\n              <p className=\"text-blue-300/70 text-xs mt-2\">\n                â„¹ï¸ ×©× ×–×” ×™×•×¤×™×¢ ×œ×™×“ ×›×œ ×”×˜×¢× ×•×ª ×•×”××¡××›×™× ××¦×“ ×”×™×¨×™×‘\n              </p>\n            </div>\n\n            <div className=\"flex gap-4\">\n              <button\n                onClick={() => {\n                  setShowLawyerNameDialog(null);\n                  setLawyerNameInput('');\n                }}\n                className=\"flex-1 px-6 py-3 bg-white/10 text-white rounded-lg hover:bg-white/20 transition-colors font-semibold\"\n              >\n                ×‘×™×˜×•×œ\n              </button>\n              <button\n                onClick={confirmLawyerNameAndUpdate}\n                disabled={!lawyerNameInput.trim() || lawyerNameInput.trim().length < 2}\n                className=\"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                âœ… ××™×©×•×¨\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n      </div>\n    </>\n  );\n};\n\nexport default FileManager;\n"],"names":["DOCUMENT_TYPES","value","label","isFoundational","RECENT_INPUTS_KEY","getRecentInputs","field","stored","localStorage","getItem","JSON","parse","slice","_unused","_ref","_uploadProgress$progr","caseId","caseName","files","onFilesUpdate","autoOpenUpload","showUpload","setShowUpload","useState","showDeleteConfirm","setShowDeleteConfirm","uploadFiles","setUploadFiles","uploading","setUploading","uploadProgress","setUploadProgress","deleting","setDeleting","reanalyzeOption","setReanalyzeOption","caseContext","setCaseContext","updatingFile","setUpdatingFile","showLawyerNameDialog","setShowLawyerNameDialog","lawyerNameInput","setLawyerNameInput","recentLawyerNames","setRecentLawyerNames","onFilesUpdateRef","useRef","uploadAbortController","useEffect","current","async","response","fetchWithAuth","concat","ok","data","json","has_context","context","logger","log","err","warn","fetchContext","updateExistingFileSource","fileId","newSource","opponentLawyerName","arguments","length","undefined","currentFile","find","f","id","filename","existingName","opponent_lawyer_name","opposing_lawyer_name","url","encodeURIComponent","method","errorData","catch","Error","detail","toast","success","error","message","confirmLawyerNameAndUpdate","lawyerName","trim","calculateEstimatedTime","filesToUpload","mode","totalSizeMB","reduce","acc","_f$file","file","size","fileCount","uploadTimeSeconds","Math","ceil","minutes","floor","seconds","toString","padStart","totalSeconds","selfFiles","filter","source","opponentFiles","hasSelfDocs","hasOpponentDocs","hasFoundationalPair","_jsxs","_Fragment","children","className","_jsx","Loader2","Upload","estimatedTime","canCancel","onClick","cancelUpload","abort","title","X","progress","style","width","FileText","Plus","AlertCircle","map","_file$pages","status","uploaded_at","isProcessing","isMissing","isReady","uploadedAtStr","d","Date","isNaN","toLocaleDateString","pages","bytes","n","Number","isFinite","toFixed","formatMB","claims_count","entities_count","onChange","e","target","disabled","analysisStatus","analysis_status","analysisError","analysis_error","analyzed_at","fileName","blob","window","URL","createObjectURL","a","document","createElement","href","download","body","appendChild","click","revokeObjectURL","removeChild","description","downloadFile","Download","Trash2","type","name","checked","multiple","accept","newFiles","Array","from","now","random","documentType","prev","htmlFor","removeUploadFile","updateFileDocumentType","docType","_objectSpread","required","dt","updateFileSource","list","updateOpponentLawyerName","onBlur","_e$target$value","saveRecentInput","filtered","v","toLowerCase","setItem","stringify","placeholder","idx","filesWithoutType","filesWithoutSource","missingNames","filesCount","filesToUploadCopy","globalJobId","AbortController","startUploadJob","totalFiles","documents","canRetry","startTime","_result","_result$uploaded_file","hasLargeFiles","some","totalSize","sum","result","uploadedFiles","completedCount","fileItem","_uploadAbortControlle","_uploadAbortControlle2","signal","aborted","_uploadAbortControlle3","fileResult","apiUploadChunked","abortSignal","onProgress","percent","stage","overallProgress","round","push","fileErr","uploaded_files","formData","FormData","append","fileDocTypes","fileSources","opponentNames","forEach","apiUpload","showErrorToast","timeoutMs","uploadedCount","warning","apiPost","quality","analysisErr","setTimeout","errorMsg","String","includes","info","failUploadJob","deleteFile","autoFocus","onKeyDown","key"],"ignoreList":[],"sourceRoot":""}