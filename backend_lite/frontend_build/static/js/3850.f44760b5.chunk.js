"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[3850],{3850:(e,t,s)=>{s.r(t),s.d(t,{default:()=>j});var l=s(5043),i=s(7033),a=s(3033),r=s(7819),o=s(5347),n=s(3062),d=s(516),c=s(9292),x=s(3782),h=s(4919),u=s(7118),m=s(6328),p=s(9688),v=s(8018),b=s(579);const g=e=>{let{title:t,value:s,subtitle:l,icon:i,color:a,iconColor:r}=e;return(0,b.jsxs)("div",{className:"".concat(a," border border-slate-700 p-6 rounded-lg"),children:[(0,b.jsx)("div",{className:"".concat(r," mb-3"),children:i}),(0,b.jsx)("div",{className:"text-3xl font-bold text-white mb-1",children:s}),(0,b.jsx)("div",{className:"text-sm text-slate-400",children:t}),l&&(0,b.jsx)("div",{className:"text-xs text-slate-500 mt-1",children:l})]})},j=()=>{var e,t,s,j,w,N,f,_,y,k,C,S,A,F,T,E,R,L,M,P,O,z,G,I,$,K,U,B;const[D,V]=(0,l.useState)(null),[q,H]=(0,l.useState)([]),[J,Q]=(0,l.useState)(0),[W,X]=(0,l.useState)(null),[Y,Z]=(0,l.useState)(""),[ee,te]=(0,l.useState)(!0),[se,le]=(0,l.useState)("summary"),[ie,ae]=(0,l.useState)(""),[re,oe]=(0,l.useState)(""),[ne,de]=(0,l.useState)(""),[ce,xe]=(0,l.useState)(""),[he,ue]=(0,l.useState)(""),[me,pe]=(0,l.useState)(1),[ve]=(0,l.useState)(50),be=async()=>{try{te(!0);const e=new URLSearchParams;ie&&e.append("date_from",ie),re&&e.append("date_to",re),ne&&e.append("tier_filter",ne);const t="/api/admin/cost-analytics/profitability/summary".concat(e.toString()?"?"+e.toString():""),s=(e=>{var t,s,l,i,a,r,o,n,d,c,x,h,u,m,p,v,b,g,j,w,N,f;const _=(null===e||void 0===e?void 0:e.overview)||(null===e||void 0===e?void 0:e.overall)||{},y=null!==(t=null!==(s=null===e||void 0===e||null===(l=e.overview)||void 0===l?void 0:l.total_users)&&void 0!==s?s:null===e||void 0===e?void 0:e.total_users)&&void 0!==t?t:0,k=null!==(i=null!==(a=null===e||void 0===e||null===(r=e.overview)||void 0===r?void 0:r.unprofitable_users)&&void 0!==a?a:null===e||void 0===e?void 0:e.unprofitable_users_count)&&void 0!==i?i:0,C=null!==(o=null===e||void 0===e||null===(n=e.overview)||void 0===n?void 0:n.profitable_users)&&void 0!==o?o:Math.max(y-k,0);return{overview:{total_users:y,profitable_users:C,unprofitable_users:k,total_revenue_cents:null!==(d=null===_||void 0===_?void 0:_.total_revenue_cents)&&void 0!==d?d:0,total_cost_cents:null!==(c=null===_||void 0===_?void 0:_.total_cost_cents)&&void 0!==c?c:0,total_profit_cents:null!==(x=null===_||void 0===_?void 0:_.total_profit_cents)&&void 0!==x?x:0,avg_profit_margin_percent:null!==(h=null!==(u=null===_||void 0===_?void 0:_.avg_profit_margin_percent)&&void 0!==u?u:null===_||void 0===_?void 0:_.profit_margin_percent)&&void 0!==h?h:0},by_tier:Object.entries(null!==(m=null===e||void 0===e?void 0:e.by_tier)&&void 0!==m?m:{}).reduce((e,t)=>{var s,l,i,a;let[r,o]=t;if(!o)return e;const n=o,d=null!==(s=n.total_revenue_cents)&&void 0!==s?s:0,c=null!==(l=n.profit_cents)&&void 0!==l?l:0;return e[r]={users:null!==(i=null===n||void 0===n?void 0:n.count)&&void 0!==i?i:0,revenue_cents:d,cost_cents:null!==(a=null===n||void 0===n?void 0:n.total_cost_cents)&&void 0!==a?a:0,profit_cents:c,avg_margin:d>0?c/d*100:0},e},{}),trends:{profitable_percent:null!==(p=null===e||void 0===e||null===(v=e.trends)||void 0===v?void 0:v.profitable_percent)&&void 0!==p?p:y?C/y*100:0,high_value_users:null!==(b=null!==(g=null===e||void 0===e||null===(j=e.trends)||void 0===j?void 0:j.high_value_users)&&void 0!==g?g:null===e||void 0===e||null===(w=e.top_profitable_users)||void 0===w?void 0:w.length)&&void 0!==b?b:0,at_risk_users:null!==(N=null===e||void 0===e||null===(f=e.trends)||void 0===f?void 0:f.at_risk_users)&&void 0!==N?N:k}}})(await(0,p.apiGet)(t,{showErrorToast:!1}));V(s),te(!1)}catch(e){v.v.error("Failed to load profitability summary:",e),m.oR.error("\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05d8\u05e2\u05d9\u05e0\u05ea \u05e0\u05ea\u05d5\u05e0\u05d9 \u05e8\u05d5\u05d5\u05d7\u05d9\u05d5\u05ea"),te(!1)}},ge=async()=>{try{const e=new URLSearchParams;if(e.append("limit",ve.toString()),e.append("offset",((me-1)*ve).toString()),ne&&e.append("tier",ne),ce){const t=Math.round(100*parseFloat(ce));e.append("min_profit_cents",t.toString())}if(he){const t=Math.round(100*parseFloat(he));e.append("max_cost_cents",t.toString())}const t="/api/admin/cost-analytics/profitability/rankings?".concat(e.toString()),s=await(0,p.apiGet)(t,{showErrorToast:!1});H(s.rankings||[]),Q(s.total||0)}catch(e){v.v.error("Failed to load rankings:",e),m.oR.error("\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05d8\u05e2\u05d9\u05e0\u05ea \u05d3\u05d9\u05e8\u05d5\u05d2\u05d9\u05dd")}},je=async e=>{try{const t=await(0,p.apiGet)("/api/admin/cost-analytics/users/".concat(e,"/profitability"),{showErrorToast:!1});X(t),le("user")}catch(t){v.v.error("Failed to load user data:",t),m.oR.error("\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05d8\u05e2\u05d9\u05e0\u05ea \u05e0\u05ea\u05d5\u05e0\u05d9 \u05de\u05e9\u05ea\u05de\u05e9")}};(0,l.useEffect)(()=>{be()},[ie,re,ne]),(0,l.useEffect)(()=>{"rankings"===se&&ge()},[me,ne,ce,he,se]);const we=()=>{if(!Y.trim())return void m.oR.error("\u05e0\u05d0 \u05dc\u05d4\u05d6\u05d9\u05df \u05de\u05d6\u05d4\u05d4 \u05de\u05e9\u05ea\u05de\u05e9 \u05d0\u05d5 \u05d0\u05d9\u05de\u05d9\u05d9\u05dc");const e=q.find(e=>e.email.toLowerCase().includes(Y.toLowerCase())||e.user_id===Y);je(e?e.user_id:Y)},Ne=e=>"$"+(e/100).toFixed(2);return ee?(0,b.jsx)("div",{className:"p-8 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(d.A,{className:"w-12 h-12 text-blue-500 animate-spin mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-white text-lg",children:"\u05d8\u05d5\u05e2\u05df \u05e0\u05ea\u05d5\u05e0\u05d9 \u05e2\u05dc\u05d5\u05d9\u05d5\u05ea..."})]})}):D?(0,b.jsx)("div",{className:"p-6",dir:"rtl",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,b.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"\ud83d\udcb0 \u05e0\u05d9\u05ea\u05d5\u05d7 \u05e2\u05dc\u05d5\u05d9\u05d5\u05ea \u05d5\u05e8\u05d5\u05d5\u05d7\u05d9\u05d5\u05ea"}),(0,b.jsx)("p",{className:"text-slate-400",children:"\u05de\u05e2\u05e7\u05d1 \u05d0\u05d7\u05e8 \u05d4\u05db\u05e0\u05e1\u05d5\u05ea, \u05e2\u05dc\u05d5\u05d9\u05d5\u05ea \u05d5\u05e8\u05d5\u05d5\u05d7\u05d9\u05d5\u05ea \u05dc\u05de\u05e9\u05ea\u05de\u05e9"})]}),(0,b.jsxs)("button",{onClick:()=>{be(),"rankings"===se&&ge()},className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors flex items-center gap-2",children:[(0,b.jsx)(d.A,{size:18}),"\u05e8\u05e2\u05e0\u05df"]})]}),(0,b.jsxs)("div",{className:"mb-6 bg-white/5 rounded-lg p-4 border border-white/10",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-white mb-3",children:"\ud83d\udd0d \u05e4\u05d9\u05dc\u05d8\u05e8\u05d9\u05dd"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-slate-400 mb-1",children:"\u05de\u05ea\u05d0\u05e8\u05d9\u05da"}),(0,b.jsx)("input",{type:"date",value:ie,onChange:e=>ae(e.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-slate-400 mb-1",children:"\u05e2\u05d3 \u05ea\u05d0\u05e8\u05d9\u05da"}),(0,b.jsx)("input",{type:"date",value:re,onChange:e=>oe(e.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-slate-400 mb-1",children:"Tier"}),(0,b.jsxs)("select",{value:ne,onChange:e=>de(e.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white",children:[(0,b.jsx)("option",{value:"",children:"\u05d4\u05db\u05dc"}),(0,b.jsx)("option",{value:"free",children:"Free"}),(0,b.jsx)("option",{value:"basic",children:"Basic"}),(0,b.jsx)("option",{value:"professional",children:"Professional"}),(0,b.jsx)("option",{value:"enterprise",children:"Enterprise"})]})]}),"rankings"===se&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-slate-400 mb-1",children:"\u05e8\u05d5\u05d5\u05d7 \u05de\u05d9\u05e0\u05d9\u05de\u05dc\u05d9 ($)"}),(0,b.jsx)("input",{type:"number",value:ce,onChange:e=>xe(e.target.value),placeholder:"0.00",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-slate-400 mb-1",children:"\u05e2\u05dc\u05d5\u05ea \u05de\u05e7\u05e1\u05d9\u05de\u05dc\u05d9\u05ea ($)"}),(0,b.jsx)("input",{type:"number",value:he,onChange:e=>ue(e.target.value),placeholder:"0.00",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white"})]})]})]})]}),(0,b.jsxs)("div",{className:"mb-6 flex gap-2",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(c.A,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400",size:20}),(0,b.jsx)("input",{type:"text",placeholder:"\u05d7\u05e4\u05e9 \u05de\u05e9\u05ea\u05de\u05e9 \u05dc\u05e4\u05d9 \u05de\u05d6\u05d4\u05d4 \u05d0\u05d5 \u05d0\u05d9\u05de\u05d9\u05d9\u05dc...",value:Y,onChange:e=>Z(e.target.value),onKeyPress:e=>"Enter"===e.key&&we(),className:"w-full pr-12 pl-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),(0,b.jsx)("button",{onClick:we,className:"px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors",children:"\u05d7\u05e4\u05e9"})]}),(0,b.jsxs)("div",{className:"flex gap-2 mb-6 border-b border-white/20 pb-2",children:[(0,b.jsx)("button",{onClick:()=>le("summary"),className:"px-6 py-3 rounded-t-lg font-medium transition ".concat("summary"===se?"bg-purple-600 text-white":"bg-white/5 text-purple-300 hover:bg-white/10"),children:"\ud83d\udcca \u05e1\u05d9\u05db\u05d5\u05dd \u05db\u05dc\u05dc\u05d9"}),(0,b.jsx)("button",{onClick:()=>le("rankings"),className:"px-6 py-3 rounded-t-lg font-medium transition ".concat("rankings"===se?"bg-purple-600 text-white":"bg-white/5 text-purple-300 hover:bg-white/10"),children:"\ud83c\udfc6 \u05d3\u05d9\u05e8\u05d5\u05d2\u05d9\u05dd"}),W&&(0,b.jsxs)("button",{onClick:()=>le("user"),className:"px-6 py-3 rounded-t-lg font-medium transition ".concat("user"===se?"bg-purple-600 text-white":"bg-white/5 text-purple-300 hover:bg-white/10"),children:["\ud83d\udc64 ",W.email]})]}),"summary"===se&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,b.jsx)(g,{title:"\u05e1\u05d4\u05f4\u05db \u05de\u05e9\u05ea\u05de\u05e9\u05d9\u05dd",value:D.overview.total_users,icon:(0,b.jsx)(u.A,{className:"w-8 h-8"}),color:"bg-blue-500/10",iconColor:"text-blue-500"}),(0,b.jsx)(g,{title:"\u05d4\u05db\u05e0\u05e1\u05d5\u05ea \u05db\u05d5\u05dc\u05dc\u05d5\u05ea",value:Ne(D.overview.total_revenue_cents),icon:(0,b.jsx)(n.A,{className:"w-8 h-8"}),color:"bg-green-500/10",iconColor:"text-green-500"}),(0,b.jsx)(g,{title:"\u05e2\u05dc\u05d5\u05d9\u05d5\u05ea \u05db\u05d5\u05dc\u05dc\u05d5\u05ea",value:Ne(D.overview.total_cost_cents),icon:(0,b.jsx)(i.A,{className:"w-8 h-8"}),color:"bg-orange-500/10",iconColor:"text-orange-500"}),(0,b.jsx)(g,{title:"\u05e8\u05d5\u05d5\u05d7 \u05db\u05d5\u05dc\u05dc",value:Ne(D.overview.total_profit_cents),icon:D.overview.total_profit_cents>=0?(0,b.jsx)(h.A,{className:"w-8 h-8"}):(0,b.jsx)(x.A,{className:"w-8 h-8"}),color:D.overview.total_profit_cents>=0?"bg-green-500/10":"bg-red-500/10",iconColor:D.overview.total_profit_cents>=0?"text-green-500":"text-red-500"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsx)(g,{title:"\u05de\u05e9\u05ea\u05de\u05e9\u05d9\u05dd \u05e8\u05d5\u05d5\u05d7\u05d9\u05d9\u05dd",value:D.overview.profitable_users,subtitle:D.overview.total_users>0?"".concat((D.overview.profitable_users/D.overview.total_users*100).toFixed(1),"%"):"0%",icon:(0,b.jsx)(o.A,{className:"w-8 h-8"}),color:"bg-green-500/10",iconColor:"text-green-500"}),(0,b.jsx)(g,{title:"\u05de\u05e9\u05ea\u05de\u05e9\u05d9\u05dd \u05d1\u05d4\u05e4\u05e1\u05d3",value:D.overview.unprofitable_users,subtitle:"".concat((D.overview.unprofitable_users/D.overview.total_users*100).toFixed(1),"%"),icon:(0,b.jsx)(r.A,{className:"w-8 h-8"}),color:"bg-red-500/10",iconColor:"text-red-500"}),(0,b.jsx)(g,{title:"\u05e9\u05d5\u05dc\u05d9 \u05e8\u05d5\u05d5\u05d7 \u05de\u05de\u05d5\u05e6\u05e2\u05d9\u05dd",value:"".concat(D.overview.avg_profit_margin_percent.toFixed(1),"%"),icon:(0,b.jsx)(a.A,{className:"w-8 h-8"}),color:"bg-purple-500/10",iconColor:"text-purple-500"})]}),(0,b.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-lg border border-white/20 p-6",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-white mb-4",children:"\ud83d\udcc8 \u05e0\u05d9\u05ea\u05d5\u05d7 \u05dc\u05e4\u05d9 Tier"}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"border-b border-white/20",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-white",children:"Tier"}),(0,b.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-white",children:"\u05de\u05e9\u05ea\u05de\u05e9\u05d9\u05dd"}),(0,b.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-white",children:"\u05d4\u05db\u05e0\u05e1\u05d5\u05ea"}),(0,b.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-white",children:"\u05e2\u05dc\u05d5\u05d9\u05d5\u05ea"}),(0,b.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-white",children:"\u05e8\u05d5\u05d5\u05d7"}),(0,b.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-white",children:"\u05e9\u05d5\u05dc\u05d9 \u05e8\u05d5\u05d5\u05d7"})]})}),(0,b.jsx)("tbody",{children:Object.entries(D.by_tier||{}).map(e=>{var t,s,l,i,a,r;let[o,n]=e;const d=n;return d?(0,b.jsxs)("tr",{className:"border-b border-white/10",children:[(0,b.jsx)("td",{className:"px-4 py-3 text-white font-semibold capitalize",children:o}),(0,b.jsx)("td",{className:"px-4 py-3 text-white",children:null!==(t=d.users)&&void 0!==t?t:0}),(0,b.jsx)("td",{className:"px-4 py-3 text-green-400",children:Ne(null!==(s=d.revenue_cents)&&void 0!==s?s:0)}),(0,b.jsx)("td",{className:"px-4 py-3 text-orange-400",children:Ne(null!==(l=d.cost_cents)&&void 0!==l?l:0)}),(0,b.jsx)("td",{className:"px-4 py-3 font-bold ".concat((null!==(i=d.profit_cents)&&void 0!==i?i:0)>=0?"text-green-400":"text-red-400"),children:Ne(null!==(a=d.profit_cents)&&void 0!==a?a:0)}),(0,b.jsxs)("td",{className:"px-4 py-3 text-white",children:[(null!==(r=d.avg_margin)&&void 0!==r?r:0).toFixed(1),"%"]})]},o):null})})]})})]})]}),"rankings"===se&&(0,b.jsx)("div",{className:"space-y-6",children:(0,b.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-lg border border-white/20 p-6",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-white mb-4",children:"\ud83c\udfc6 \u05d3\u05d9\u05e8\u05d5\u05d2 \u05de\u05e9\u05ea\u05de\u05e9\u05d9\u05dd \u05dc\u05e4\u05d9 \u05e8\u05d5\u05d5\u05d7\u05d9\u05d5\u05ea"}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"border-b border-white/20",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-white",children:"#"}),(0,b.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-white",children:"\u05d0\u05d9\u05de\u05d9\u05d9\u05dc"}),(0,b.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-white",children:"Tier"}),(0,b.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-white",children:"\u05ea\u05d9\u05e7\u05d9\u05dd"}),(0,b.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-white",children:"\u05e2\u05dc\u05d5\u05ea"}),(0,b.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-white",children:"\u05e8\u05d5\u05d5\u05d7"}),(0,b.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-white",children:"\u05e9\u05d5\u05dc\u05d9 \u05e8\u05d5\u05d5\u05d7"}),(0,b.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-white",children:"\u05e4\u05e2\u05d5\u05dc\u05d5\u05ea"})]})}),(0,b.jsx)("tbody",{children:0===q.length?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:8,className:"px-4 py-8 text-center text-slate-400",children:"\u05d0\u05d9\u05df \u05e0\u05ea\u05d5\u05e0\u05d9\u05dd \u05dc\u05d4\u05e6\u05d2\u05d4"})}):q.map((e,t)=>{var s,l,i,a,r,o;return(0,b.jsxs)("tr",{className:"border-b border-white/10 hover:bg-white/5",children:[(0,b.jsx)("td",{className:"px-4 py-3 text-white font-bold",children:t+1<=3?(0,b.jsx)("span",{className:"text-yellow-400",children:["\ud83e\udd47","\ud83e\udd48","\ud83e\udd49"][t]}):t+1}),(0,b.jsx)("td",{className:"px-4 py-3 text-white",children:e.email||"N/A"}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat("enterprise"===e.tier?"bg-purple-500/20 text-purple-300":"professional"===e.tier?"bg-blue-500/20 text-blue-300":"basic"===e.tier?"bg-green-500/20 text-green-300":"bg-gray-500/20 text-gray-300"),children:e.tier||"N/A"})}),(0,b.jsx)("td",{className:"px-4 py-3 text-white",children:null!==(s=null===(l=e.usage_stats)||void 0===l?void 0:l.cases_processed)&&void 0!==s?s:0}),(0,b.jsx)("td",{className:"px-4 py-3 text-orange-400",children:Ne(null!==(i=e.total_cost_cents)&&void 0!==i?i:0)}),(0,b.jsx)("td",{className:"px-4 py-3 font-bold ".concat((null!==(a=e.profit_cents)&&void 0!==a?a:0)>=0?"text-green-400":"text-red-400"),children:Ne(null!==(r=e.profit_cents)&&void 0!==r?r:0)}),(0,b.jsxs)("td",{className:"px-4 py-3 text-white",children:[(null!==(o=e.profit_margin_percent)&&void 0!==o?o:0).toFixed(1),"%"]}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)("button",{onClick:()=>je(e.user_id),className:"px-3 py-1 bg-purple-600 hover:bg-purple-700 rounded text-sm text-white transition-colors",children:"\u05e4\u05e8\u05d8\u05d9\u05dd"})})]},e.user_id)})})]})}),J>ve&&(0,b.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"text-slate-400 text-sm",children:["\u05de\u05e6\u05d9\u05d2 ",(me-1)*ve+1," - ",Math.min(me*ve,J)," \u05de\u05ea\u05d5\u05da ",J]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{onClick:()=>pe(e=>Math.max(1,e-1)),disabled:1===me,className:"px-4 py-2 bg-white/10 hover:bg-white/20 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-lg transition-colors",children:"\u05d4\u05e7\u05d5\u05d3\u05dd"}),(0,b.jsx)("button",{onClick:()=>pe(e=>e+1),disabled:me*ve>=J,className:"px-4 py-2 bg-white/10 hover:bg-white/20 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-lg transition-colors",children:"\u05d4\u05d1\u05d0"})]})]})]})}),"user"===se&&W&&(0,b.jsx)("div",{className:"space-y-6",children:(0,b.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-lg border border-white/20 p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-2xl font-bold text-white",children:W.email}),(0,b.jsxs)("p",{className:"text-slate-400",children:["Tier: ",W.tier," \u2022 ",W.subscription_months," \u05d7\u05d5\u05d3\u05e9\u05d9\u05dd"]})]}),(0,b.jsx)("button",{onClick:()=>le("rankings"),className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors",children:"\u05d7\u05d6\u05d5\u05e8 \u05dc\u05d3\u05d9\u05e8\u05d5\u05d2\u05d9\u05dd"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,b.jsx)(g,{title:"\u05d4\u05db\u05e0\u05e1\u05d5\u05ea \u05db\u05d5\u05dc\u05dc\u05d5\u05ea",value:Ne(W.total_revenue_cents),icon:(0,b.jsx)(n.A,{className:"w-6 h-6"}),color:"bg-green-500/10",iconColor:"text-green-500"}),(0,b.jsx)(g,{title:"\u05e2\u05dc\u05d5\u05d9\u05d5\u05ea \u05db\u05d5\u05dc\u05dc\u05d5\u05ea",value:Ne(W.total_cost_cents),icon:(0,b.jsx)(i.A,{className:"w-6 h-6"}),color:"bg-orange-500/10",iconColor:"text-orange-500"}),(0,b.jsx)(g,{title:"\u05e8\u05d5\u05d5\u05d7 \u05e0\u05e7\u05d9",value:Ne(W.profit_cents),subtitle:"".concat(W.profit_margin_percent.toFixed(1),"% \u05e9\u05d5\u05dc\u05d9 \u05e8\u05d5\u05d5\u05d7"),icon:W.profit_cents>=0?(0,b.jsx)(h.A,{className:"w-6 h-6"}):(0,b.jsx)(x.A,{className:"w-6 h-6"}),color:W.profit_cents>=0?"bg-green-500/10":"bg-red-500/10",iconColor:W.profit_cents>=0?"text-green-500":"text-red-500"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-4",children:[(0,b.jsx)("h4",{className:"text-lg font-bold text-white mb-3",children:"\u05e4\u05d9\u05e8\u05d5\u05d8 \u05e2\u05dc\u05d5\u05d9\u05d5\u05ea"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-slate-400",children:'OCR (\u05e1\u05d4"\u05db)'}),(0,b.jsx)("span",{className:"text-white font-semibold",children:Ne((null!==(e=null===(t=W.cost_breakdown)||void 0===t?void 0:t.ocr)&&void 0!==e?e:0)+(null!==(s=null===(j=W.cost_breakdown)||void 0===j?void 0:j.ocr_document_ai)&&void 0!==s?s:0)+(null!==(w=null===(N=W.cost_breakdown)||void 0===N?void 0:N.ocr_vision)&&void 0!==w?w:0))})]}),(null!==(f=null===(_=W.cost_breakdown)||void 0===_?void 0:_.ocr_document_ai)&&void 0!==f?f:0)>0&&(0,b.jsxs)("div",{className:"flex justify-between items-center mr-4 text-sm",children:[(0,b.jsx)("span",{className:"text-slate-500",children:"\u251c Document AI"}),(0,b.jsx)("span",{className:"text-cyan-400 font-medium",children:Ne(null!==(y=null===(k=W.cost_breakdown)||void 0===k?void 0:k.ocr_document_ai)&&void 0!==y?y:0)})]}),(null!==(C=null===(S=W.cost_breakdown)||void 0===S?void 0:S.ocr_vision)&&void 0!==C?C:0)>0&&(0,b.jsxs)("div",{className:"flex justify-between items-center mr-4 text-sm",children:[(0,b.jsx)("span",{className:"text-slate-500",children:"\u2514 Vision API"}),(0,b.jsx)("span",{className:"text-yellow-400 font-medium",children:Ne(null!==(A=null===(F=W.cost_breakdown)||void 0===F?void 0:F.ocr_vision)&&void 0!==A?A:0)})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-slate-400",children:"\u05e0\u05d9\u05ea\u05d5\u05d7"}),(0,b.jsx)("span",{className:"text-white font-semibold",children:Ne(null!==(T=null===(E=W.cost_breakdown)||void 0===E?void 0:E.analysis)&&void 0!==T?T:0)})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-slate-400",children:"\u05e6'\u05d0\u05d8"}),(0,b.jsx)("span",{className:"text-white font-semibold",children:Ne(null!==(R=null===(L=W.cost_breakdown)||void 0===L?void 0:L.chat)&&void 0!==R?R:0)})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-slate-400",children:"Intelligence"}),(0,b.jsx)("span",{className:"text-white font-semibold",children:Ne(null!==(M=null===(P=W.cost_breakdown)||void 0===P?void 0:P.intelligence)&&void 0!==M?M:0)})]}),Object.entries(W.cost_breakdown||{}).filter(e=>{let[t]=e;return!["ocr","ocr_document_ai","ocr_vision","analysis","chat","intelligence"].includes(t)}).filter(e=>{let[,t]=e;return t>0}).map(e=>{let[t,s]=e;return(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-slate-400",children:t}),(0,b.jsx)("span",{className:"text-white font-semibold",children:Ne(s)})]},t)})]})]}),(0,b.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-4",children:[(0,b.jsx)("h4",{className:"text-lg font-bold text-white mb-3",children:"\u05e1\u05d8\u05d8\u05d9\u05e1\u05d8\u05d9\u05e7\u05d5\u05ea \u05e9\u05d9\u05de\u05d5\u05e9"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-slate-400",children:"\u05ea\u05d9\u05e7\u05d9\u05dd \u05de\u05e2\u05d5\u05d1\u05d3\u05d9\u05dd"}),(0,b.jsx)("span",{className:"text-white font-semibold",children:null!==(O=null===(z=W.usage_stats)||void 0===z?void 0:z.cases_processed)&&void 0!==O?O:0})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-slate-400",children:"\u05e2\u05de\u05d5\u05d3\u05d9\u05dd"}),(0,b.jsx)("span",{className:"text-white font-semibold",children:(null!==(G=null===(I=W.usage_stats)||void 0===I?void 0:I.pages_processed)&&void 0!==G?G:0).toLocaleString()})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-slate-400",children:"\u05d8\u05d5\u05e7\u05e0\u05d9\u05dd"}),(0,b.jsxs)("span",{className:"text-white font-semibold",children:[((null!==($=null===(K=W.usage_stats)||void 0===K?void 0:K.total_tokens)&&void 0!==$?$:0)/1e3).toFixed(1),"K"]})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-slate-400",children:"\u05d4\u05d5\u05d3\u05e2\u05d5\u05ea \u05e6'\u05d0\u05d8"}),(0,b.jsx)("span",{className:"text-white font-semibold",children:null!==(U=null===(B=W.usage_stats)||void 0===B?void 0:B.chat_messages)&&void 0!==U?U:0})]})]})]})]})]})})]})}):(0,b.jsx)("div",{className:"p-8",children:(0,b.jsxs)("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-6 text-center",children:[(0,b.jsx)(r.A,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-white text-lg",children:"\u05d0\u05d9\u05df \u05e0\u05ea\u05d5\u05e0\u05d9\u05dd \u05dc\u05d4\u05e6\u05d2\u05d4"})]})})}}}]);
//# sourceMappingURL=3850.f44760b5.chunk.js.map