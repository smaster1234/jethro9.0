/*! For license information please see 6113.752cf79d.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[6113],{6113:(e,s,t)=>{t.r(s),t.d(s,{JudgeEnrichmentBanner:()=>p,default:()=>g});var r=t(5043),l=t(7033),a=t(2054),d=t(2024),n=t(9989),c=t(7719),i=t(8646),o=t(8012),x=t(4919),m=t(614),u=t(6328),h=t(9688),b=t(579);const p=e=>{let{caseId:s,onJudgeUpdated:t}=e;const[m,p]=(0,r.useState)(!0),[g,f]=(0,r.useState)(null),[N,v]=(0,r.useState)(null),[w,y]=(0,r.useState)(!1),[C,_]=(0,r.useState)(!1),k=(0,r.useCallback)(async()=>{p(!0),v(null);try{const e=await(0,h.apiGet)("/api/cases/".concat(s,"/enrichment"),{showErrorToast:!1});f(e)}catch(e){console.error("Enrichment fetch error:",e),v(e.message||"\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05d8\u05e2\u05d9\u05e0\u05ea \u05e0\u05ea\u05d5\u05e0\u05d9 \u05d4\u05e2\u05e9\u05e8\u05d4")}finally{p(!1)}},[s]);(0,r.useEffect)(()=>{k()},[k]);const A=(0,r.useCallback)(async(e,r)=>{try{await(0,h.$Y)("/api/cases/".concat(s,"/enrichment/judge"),{judge_name:e,court:r||null}),u.oR.success("\u05e9\u05dd \u05d4\u05e9\u05d5\u05e4\u05d8 \u05e2\u05d5\u05d3\u05db\u05df"),y(!1),null===t||void 0===t||t(e),k()}catch(l){console.error("Update judge error:",l),u.oR.error(l.message||"\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05e2\u05d3\u05db\u05d5\u05df \u05e9\u05d5\u05e4\u05d8")}},[s,k,t]);if(m)return(0,b.jsxs)("div",{className:"mb-4 p-3 bg-slate-800/50 border border-slate-700 rounded-lg flex items-center gap-3",dir:"rtl",children:[(0,b.jsx)(d.A,{className:"h-5 w-5 text-blue-400 animate-spin"}),(0,b.jsx)("span",{className:"text-slate-300",children:"\u05d1\u05d5\u05d3\u05e7 \u05e0\u05ea\u05d5\u05e0\u05d9 \u05e9\u05d5\u05e4\u05d8..."})]});if(N)return(0,b.jsxs)("div",{className:"mb-4 p-3 bg-red-500/10 border border-red-500/30 rounded-lg flex items-center justify-between",dir:"rtl",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(c.A,{className:"h-5 w-5 text-red-400"}),(0,b.jsx)("span",{className:"text-red-300",children:N})]}),(0,b.jsx)("button",{onClick:k,className:"text-sm px-3 py-1 text-red-300 border border-red-500/50 rounded hover:bg-red-500/20",children:"\u05e0\u05e1\u05d4 \u05e9\u05d5\u05d1"})]});if(!g)return null;if("missing_judge"===g.status)return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"mb-4 p-4 bg-amber-500/10 border border-amber-500/30 rounded-xl flex items-center justify-between",dir:"rtl",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 bg-amber-500/20 rounded-lg",children:(0,b.jsx)(o.A,{className:"h-6 w-6 text-amber-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"text-amber-200 font-semibold",children:g.message||"\u05dc\u05d0 \u05d6\u05d5\u05d4\u05d4 \u05e9\u05d5\u05e4\u05d8"}),(0,b.jsx)("p",{className:"text-amber-300/70 text-sm",children:g.cta_he||"\u05d6\u05d4\u05d4 \u05de\u05d4\u05de\u05e1\u05de\u05da \u05d0\u05d5 \u05d4\u05d6\u05df \u05d9\u05d3\u05e0\u05d9\u05ea"})]})]}),(0,b.jsxs)("button",{onClick:()=>y(!0),className:"px-4 py-2 bg-amber-500 text-white rounded-lg font-semibold hover:bg-amber-600 transition-colors flex items-center gap-2",children:[(0,b.jsx)(n.A,{className:"h-4 w-4"}),"\u05d4\u05d6\u05df \u05e9\u05d5\u05e4\u05d8"]})]}),w&&(0,b.jsx)(j,{currentJudge:null,currentCourt:null,onSave:A,onClose:()=>y(!1)})]});if("insufficient_data"===g.status)return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"mb-4 p-4 bg-blue-500/10 border border-blue-500/30 rounded-xl flex items-center justify-between",dir:"rtl",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 bg-blue-500/20 rounded-lg",children:(0,b.jsx)(o.A,{className:"h-6 w-6 text-blue-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h4",{className:"text-blue-200 font-semibold",children:["\u05e9\u05d5\u05e4\u05d8/\u05ea: ",g.judge_name,g.court&&(0,b.jsxs)("span",{className:"text-blue-300/70 font-normal",children:[" \u2022 ",g.court]})]}),(0,b.jsx)("p",{className:"text-blue-300/70 text-sm",children:g.message||"\u05e0\u05de\u05e6\u05d0\u05d5 \u05e8\u05e7 ".concat(g.sample_size," \u05e4\u05e1\u05e7\u05d9 \u05d3\u05d9\u05df \u05d1\u05e7\u05d5\u05e8\u05e4\u05d5\u05e1")})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("span",{className:"px-3 py-1 bg-blue-500/20 text-blue-300 text-sm rounded-full border border-blue-500/30",children:[g.sample_size," \u05e4\u05e1\u05e7\u05d9 \u05d3\u05d9\u05df"]}),(0,b.jsx)("button",{onClick:()=>y(!0),className:"text-blue-400 hover:text-blue-300 p-2",title:"\u05e2\u05d3\u05db\u05df \u05e9\u05d5\u05e4\u05d8",children:(0,b.jsx)(n.A,{className:"h-4 w-4"})})]})]}),w&&(0,b.jsx)(j,{currentJudge:g.judge_name||null,currentCourt:g.court||null,onSave:A,onClose:()=>y(!1)})]});if("ready"===g.status&&g.judge_profile){const e=g.judge_profile,s=e.outcome_distribution||{},t=(s.accepted||0)+(s.rejected||0)+(s.partial||0)+(s.settled||0);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"mb-4 bg-gradient-to-br from-emerald-500/10 to-blue-500/10 border border-emerald-500/30 rounded-xl overflow-hidden",dir:"rtl",children:[(0,b.jsxs)("button",{onClick:()=>_(!C),className:"w-full p-4 flex items-center justify-between hover:bg-white/5 transition-colors",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 bg-emerald-500/20 rounded-lg",children:(0,b.jsx)(o.A,{className:"h-6 w-6 text-emerald-400"})}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("h4",{className:"text-emerald-200 font-semibold flex items-center gap-2",children:[(0,b.jsx)(a.A,{className:"h-4 w-4"}),"\u05e9\u05d5\u05e4\u05d8/\u05ea: ",g.judge_name,g.court&&(0,b.jsxs)("span",{className:"text-emerald-300/70 font-normal",children:[" \u2022 ",g.court]})]}),(0,b.jsx)("p",{className:"text-emerald-300/70 text-sm",children:g.message||"\u05e0\u05d9\u05ea\u05d5\u05d7 \u05de\u05d1\u05d5\u05e1\u05e1 \u05e2\u05dc ".concat(g.sample_size," \u05e4\u05e1\u05e7\u05d9 \u05d3\u05d9\u05df")})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("span",{className:"px-3 py-1 bg-emerald-500/20 text-emerald-300 text-sm rounded-full border border-emerald-500/30",children:[g.sample_size," \u05e4\u05e1\u05e7\u05d9 \u05d3\u05d9\u05df"]}),(0,b.jsx)("span",{className:"text-emerald-400 transition-transform ".concat(C?"rotate-180":""),children:"\u25bc"})]})]}),C&&(0,b.jsxs)("div",{className:"p-4 pt-0 border-t border-emerald-500/20",children:[t>0&&(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsxs)("h5",{className:"text-white/80 text-sm font-semibold mb-2 flex items-center gap-2",children:[(0,b.jsx)(l.A,{className:"h-4 w-4"}),"\u05d4\u05ea\u05e4\u05dc\u05d2\u05d5\u05ea \u05ea\u05d5\u05e6\u05d0\u05d5\u05ea"]}),(0,b.jsxs)("div",{className:"grid grid-cols-4 gap-2",children:[void 0!==s.accepted&&s.accepted>0&&(0,b.jsxs)("div",{className:"bg-green-500/20 border border-green-500/30 rounded-lg p-3 text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-green-300",children:s.accepted}),(0,b.jsx)("div",{className:"text-xs text-green-400",children:"\u05d4\u05ea\u05e7\u05d1\u05dc\u05d5"}),(0,b.jsxs)("div",{className:"text-xs text-green-300/50",children:[Math.round(s.accepted/t*100),"%"]})]}),void 0!==s.rejected&&s.rejected>0&&(0,b.jsxs)("div",{className:"bg-red-500/20 border border-red-500/30 rounded-lg p-3 text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-red-300",children:s.rejected}),(0,b.jsx)("div",{className:"text-xs text-red-400",children:"\u05e0\u05d3\u05d7\u05d5"}),(0,b.jsxs)("div",{className:"text-xs text-red-300/50",children:[Math.round(s.rejected/t*100),"%"]})]}),void 0!==s.partial&&s.partial>0&&(0,b.jsxs)("div",{className:"bg-amber-500/20 border border-amber-500/30 rounded-lg p-3 text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-amber-300",children:s.partial}),(0,b.jsx)("div",{className:"text-xs text-amber-400",children:"\u05d7\u05dc\u05e7\u05d9"}),(0,b.jsxs)("div",{className:"text-xs text-amber-300/50",children:[Math.round(s.partial/t*100),"%"]})]}),void 0!==s.settled&&s.settled>0&&(0,b.jsxs)("div",{className:"bg-purple-500/20 border border-purple-500/30 rounded-lg p-3 text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-purple-300",children:s.settled}),(0,b.jsx)("div",{className:"text-xs text-purple-400",children:"\u05e4\u05e9\u05e8\u05d4"}),(0,b.jsxs)("div",{className:"text-xs text-purple-300/50",children:[Math.round(s.settled/t*100),"%"]})]})]})]}),e.top_topics&&e.top_topics.length>0&&(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsxs)("h5",{className:"text-white/80 text-sm font-semibold mb-2 flex items-center gap-2",children:[(0,b.jsx)(x.A,{className:"h-4 w-4"}),"\u05e0\u05d5\u05e9\u05d0\u05d9\u05dd \u05de\u05d5\u05d1\u05d9\u05dc\u05d9\u05dd"]}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:e.top_topics.slice(0,5).map((e,s)=>(0,b.jsxs)("span",{className:"px-3 py-1 bg-white/10 text-white/80 text-sm rounded-full border border-white/10",children:[e.topic," (",e.count,")"]},s))})]}),e.date_range&&(e.date_range.from||e.date_range.to)&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-white/60 text-sm",children:[(0,b.jsx)(i.A,{className:"h-4 w-4"}),(0,b.jsxs)("span",{children:["\u05d8\u05d5\u05d5\u05d7 \u05ea\u05d0\u05e8\u05d9\u05db\u05d9\u05dd: ",e.date_range.from||"?"," \u05e2\u05d3 ",e.date_range.to||"\u05d4\u05d9\u05d5\u05dd"]})]}),g.disclaimer&&(0,b.jsx)("div",{className:"mt-3 p-2 bg-white/5 rounded-lg text-xs text-white/50 border border-white/10",children:g.disclaimer}),(0,b.jsx)("div",{className:"mt-3 flex justify-end",children:(0,b.jsxs)("button",{onClick:e=>{e.stopPropagation(),y(!0)},className:"text-sm text-emerald-400 hover:text-emerald-300 flex items-center gap-1",children:[(0,b.jsx)(n.A,{className:"h-3 w-3"}),"\u05e2\u05d3\u05db\u05df \u05e9\u05d5\u05e4\u05d8"]})})]})]}),w&&(0,b.jsx)(j,{currentJudge:g.judge_name||null,currentCourt:g.court||null,onSave:A,onClose:()=>y(!1)})]})}return null},j=e=>{let{currentJudge:s,currentCourt:t,onSave:l,onClose:a}=e;const[n,c]=(0,r.useState)(s||""),[i,x]=(0,r.useState)(t||""),[h,p]=(0,r.useState)(!1);return(0,b.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:a,children:(0,b.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl border border-white/20 shadow-2xl p-6 w-96 max-w-full",onClick:e=>e.stopPropagation(),dir:"rtl",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[(0,b.jsx)(o.A,{className:"h-5 w-5 text-emerald-400"}),"\u05d4\u05d6\u05e0\u05ea \u05e9\u05d5\u05e4\u05d8"]}),(0,b.jsx)("button",{onClick:a,className:"text-white/50 hover:text-white",children:(0,b.jsx)(m.A,{className:"h-5 w-5"})})]}),(0,b.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),n.trim()?(p(!0),await l(n.trim(),i.trim()||void 0),p(!1)):u.oR.error("\u05e0\u05d0 \u05dc\u05d4\u05d6\u05d9\u05df \u05e9\u05dd \u05e9\u05d5\u05e4\u05d8")},className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-white/80 text-sm font-medium mb-1",children:"\u05e9\u05dd \u05d4\u05e9\u05d5\u05e4\u05d8/\u05ea"}),(0,b.jsx)("input",{type:"text",value:n,onChange:e=>c(e.target.value),placeholder:"\u05dc\u05d3\u05d5\u05d2\u05de\u05d4: \u05d3\u05d5\u05d3 \u05db\u05d4\u05df",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-emerald-500",autoFocus:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-white/80 text-sm font-medium mb-1",children:"\u05d1\u05d9\u05ea \u05de\u05e9\u05e4\u05d8 (\u05d0\u05d5\u05e4\u05e6\u05d9\u05d5\u05e0\u05dc\u05d9)"}),(0,b.jsxs)("select",{value:i,onChange:e=>x(e.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-emerald-500",children:[(0,b.jsx)("option",{value:"",className:"bg-slate-800",children:"\u05d1\u05d7\u05e8 \u05d1\u05d9\u05ea \u05de\u05e9\u05e4\u05d8..."}),["\u05d1\u05d9\u05ea \u05d4\u05de\u05e9\u05e4\u05d8 \u05d4\u05e2\u05dc\u05d9\u05d5\u05df","\u05de\u05d7\u05d5\u05d6\u05d9 \u05ea\u05dc \u05d0\u05d1\u05d9\u05d1","\u05de\u05d7\u05d5\u05d6\u05d9 \u05d9\u05e8\u05d5\u05e9\u05dc\u05d9\u05dd","\u05de\u05d7\u05d5\u05d6\u05d9 \u05d7\u05d9\u05e4\u05d4","\u05de\u05d7\u05d5\u05d6\u05d9 \u05d1\u05d0\u05e8 \u05e9\u05d1\u05e2","\u05de\u05d7\u05d5\u05d6\u05d9 \u05de\u05e8\u05db\u05d6","\u05de\u05d7\u05d5\u05d6\u05d9 \u05e0\u05e6\u05e8\u05ea","\u05e9\u05dc\u05d5\u05dd \u05ea\u05dc \u05d0\u05d1\u05d9\u05d1","\u05e9\u05dc\u05d5\u05dd \u05d9\u05e8\u05d5\u05e9\u05dc\u05d9\u05dd","\u05e9\u05dc\u05d5\u05dd \u05d7\u05d9\u05e4\u05d4","\u05e9\u05dc\u05d5\u05dd \u05d1\u05d0\u05e8 \u05e9\u05d1\u05e2","\u05d1\u05d9\u05ea \u05d4\u05d3\u05d9\u05df \u05dc\u05e2\u05d1\u05d5\u05d3\u05d4","\u05d1\u05d9\u05ea \u05d3\u05d9\u05df \u05e8\u05d1\u05e0\u05d9","\u05d0\u05d7\u05e8"].map(e=>(0,b.jsx)("option",{value:e,className:"bg-slate-800",children:e},e))]})]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,b.jsx)("button",{type:"button",onClick:a,className:"flex-1 px-4 py-3 bg-white/10 text-white rounded-xl hover:bg-white/20 transition-colors font-medium",children:"\u05d1\u05d9\u05d8\u05d5\u05dc"}),(0,b.jsx)("button",{type:"submit",disabled:h||!n.trim(),className:"flex-1 px-4 py-3 bg-emerald-600 text-white rounded-xl hover:bg-emerald-700 transition-colors font-bold disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:h?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(d.A,{className:"h-4 w-4 animate-spin"}),"\u05e9\u05d5\u05de\u05e8..."]}):"\u05e9\u05de\u05d5\u05e8"})]})]})]})})},g=p},9989:(e,s,t)=>{t.d(s,{A:()=>r});const r=(0,t(7784).A)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]])}}]);
//# sourceMappingURL=6113.752cf79d.chunk.js.map