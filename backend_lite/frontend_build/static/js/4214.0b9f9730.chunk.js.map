{"version":3,"file":"static/js/4214.0b9f9730.chunk.js","mappings":"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","sources":["../node_modules/lucide-react/src/icons/circle-check-big.ts","pages/EmailVerification.tsx","../node_modules/lucide-react/src/icons/mail.ts","../node_modules/lucide-react/src/icons/circle-x.ts"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M21.801 10A10 10 0 1 1 17 3.335', key: 'yps3ct' }],\n  ['path', { d: 'm9 11 3 3L22 4', key: '1pflzl' }],\n];\n\n/**\n * @component @name CircleCheckBig\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjEuODAxIDEwQTEwIDEwIDAgMSAxIDE3IDMuMzM1IiAvPgogIDxwYXRoIGQ9Im05IDExIDMgM0wyMiA0IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/circle-check-big\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst CircleCheckBig = createLucideIcon('circle-check-big', __iconNode);\n\nexport default CircleCheckBig;\n","/**\n * Email Verification Page\n *\n * ✅ CODE-003: Migrated to TypeScript\n */\n\nimport { useEffect, useState, type FC, type ChangeEvent } from 'react';\nimport { useNavigate, useSearchParams } from 'react-router-dom';\nimport { CheckCircle, XCircle, Loader2, Mail } from 'lucide-react';\nimport { toast } from 'sonner';\nimport { apiPost } from '../utils/api';\nimport { logger } from '../utils/logger';\n\n// ===========================\n// Types\n// ===========================\n\ntype VerificationStatus = 'verifying' | 'success' | 'error';\n\ninterface VerifyResponse {\n  message?: string;\n}\n\n// ===========================\n// Component\n// ===========================\n\nconst EmailVerification: FC = () => {\n  const navigate = useNavigate();\n  const [searchParams] = useSearchParams();\n  const [status, setStatus] = useState<VerificationStatus>('verifying');\n  const [message, setMessage] = useState('');\n  const [countdown, setCountdown] = useState(5);\n  const [resendEmail, setResendEmail] = useState('');\n  const [showResendInput, setShowResendInput] = useState(false);\n\n  useEffect(() => {\n    const token = searchParams.get('token');\n\n    if (!token) {\n      setStatus('error');\n      setMessage('קישור אימות לא תקין - טוקן חסר');\n      return;\n    }\n\n    verifyEmail(token);\n  }, [searchParams]);\n\n  useEffect(() => {\n    if (status === 'success') {\n      const timer = setInterval(() => {\n        setCountdown((prev) => {\n          if (prev <= 1) {\n            clearInterval(timer);\n            navigate('/login');\n            return 0;\n          }\n          return prev - 1;\n        });\n      }, 1000);\n\n      return () => clearInterval(timer);\n    }\n  }, [status, navigate]);\n\n  const verifyEmail = async (token: string): Promise<void> => {\n    try {\n      const data = await apiPost('/api/auth/verify-email', { token }, { showErrorToast: false }) as VerifyResponse;\n      setStatus('success');\n      setMessage(data.message || 'כתובת המייל אומתה בהצלחה!');\n      toast.success('המייל אומת בהצלחה!');\n    } catch (error) {\n      logger.error('Verification error:', error);\n      setStatus('error');\n      const errorMessage = error instanceof Error ? error.message : 'שגיאה באימות המייל';\n      setMessage(errorMessage);\n      toast.error(errorMessage);\n    }\n  };\n\n  const handleResendEmail = async (): Promise<void> => {\n    const emailFromParams = searchParams.get('email');\n\n    // If no email in params, show input field\n    if (!emailFromParams && !resendEmail) {\n      setShowResendInput(true);\n      return;\n    }\n\n    const email = emailFromParams || resendEmail;\n    if (!email) {\n      toast.error('נא להזין כתובת מייל');\n      return;\n    }\n\n    try {\n      await apiPost('/api/auth/resend-verification', { email }, { showErrorToast: false });\n      toast.success('אימייל אימות נשלח מחדש! בדוק את תיבת הדואר שלך.');\n      setShowResendInput(false);\n      setResendEmail('');\n    } catch (error) {\n      logger.error('Failed to resend verification email:', error);\n      const errorMessage = error instanceof Error ? error.message : 'שגיאה בשליחת אימייל אימות מחדש';\n      toast.error(errorMessage);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center p-4\">\n      <div className=\"bg-white/10 backdrop-blur-md rounded-2xl p-12 border border-white/20 max-w-md w-full text-center\">\n        {status === 'verifying' && (\n          <>\n            <div className=\"mb-6 flex justify-center\">\n              <div className=\"bg-blue-500 rounded-full p-4\">\n                <Loader2 className=\"w-16 h-16 text-white animate-spin\" />\n              </div>\n            </div>\n            <h1 className=\"text-3xl font-bold text-white mb-4\">\n              מאמת את המייל שלך...\n            </h1>\n            <p className=\"text-purple-200\">\n              אנא המתן בזמן שאנחנו מאמתים את כתובת המייל שלך\n            </p>\n          </>\n        )}\n\n        {status === 'success' && (\n          <>\n            <div className=\"mb-6 flex justify-center\">\n              <div className=\"bg-green-500 rounded-full p-4\">\n                <CheckCircle className=\"w-16 h-16 text-white\" />\n              </div>\n            </div>\n            <h1 className=\"text-3xl font-bold text-white mb-4\">\n              ✅ המייל אומת בהצלחה!\n            </h1>\n            <p className=\"text-purple-200 mb-6\">{message}</p>\n            <div className=\"bg-white/5 rounded-lg p-4 mb-6\">\n              <p className=\"text-white text-sm\">\n                מועבר לדף התחברות בעוד {countdown} שניות...\n              </p>\n            </div>\n            <button\n              onClick={() => navigate('/login')}\n              className=\"w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-3 rounded-lg font-semibold hover:from-purple-700 hover:to-pink-700 transition-all\"\n            >\n              התחבר עכשיו\n            </button>\n          </>\n        )}\n\n        {status === 'error' && (\n          <>\n            <div className=\"mb-6 flex justify-center\">\n              <div className=\"bg-red-500 rounded-full p-4\">\n                <XCircle className=\"w-16 h-16 text-white\" />\n              </div>\n            </div>\n            <h1 className=\"text-3xl font-bold text-white mb-4\">\n              שגיאה באימות\n            </h1>\n            <p className=\"text-purple-200 mb-6\">{message}</p>\n\n            <div className=\"space-y-3\">\n              {showResendInput && (\n                <div className=\"space-y-2\">\n                  <input\n                    type=\"email\"\n                    value={resendEmail}\n                    onChange={(e: ChangeEvent<HTMLInputElement>) => setResendEmail(e.target.value)}\n                    placeholder=\"הזן את כתובת המייל שלך\"\n                    className=\"w-full px-4 py-3 rounded-lg bg-white/10 border border-white/20 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-purple-500\"\n                    dir=\"ltr\"\n                  />\n                </div>\n              )}\n              <button\n                onClick={handleResendEmail}\n                className=\"w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-3 rounded-lg font-semibold hover:from-purple-700 hover:to-pink-700 transition-all flex items-center justify-center gap-2\"\n              >\n                <Mail className=\"w-5 h-5\" />\n                {showResendInput ? 'שלח קישור' : 'שלח קישור אימות חדש'}\n              </button>\n\n              <button\n                onClick={() => navigate('/login')}\n                className=\"w-full bg-white/10 text-white px-6 py-3 rounded-lg font-semibold hover:bg-white/20 transition-all border border-white/20\"\n              >\n                חזור להתחברות\n              </button>\n            </div>\n          </>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default EmailVerification;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'm22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7', key: '132q7q' }],\n  ['rect', { x: '2', y: '4', width: '20', height: '16', rx: '2', key: 'izxlao' }],\n];\n\n/**\n * @component @name Mail\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMjIgNy04Ljk5MSA1LjcyN2EyIDIgMCAwIDEtMi4wMDkgMEwyIDciIC8+CiAgPHJlY3QgeD0iMiIgeT0iNCIgd2lkdGg9IjIwIiBoZWlnaHQ9IjE2IiByeD0iMiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/mail\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Mail = createLucideIcon('mail', __iconNode);\n\nexport default Mail;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n  ['path', { d: 'm15 9-6 6', key: '1uzhvr' }],\n  ['path', { d: 'm9 9 6 6', key: 'z0biqf' }],\n];\n\n/**\n * @component @name CircleX\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KICA8cGF0aCBkPSJtMTUgOS02IDYiIC8+CiAgPHBhdGggZD0ibTkgOSA2IDYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/circle-x\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst CircleX = createLucideIcon('circle-x', __iconNode);\n\nexport default CircleX;\n"],"names":["CircleCheckBig","createLucideIcon","d","key","EmailVerification","navigate","useNavigate","searchParams","useSearchParams","status","setStatus","useState","message","setMessage","countdown","setCountdown","resendEmail","setResendEmail","showResendInput","setShowResendInput","useEffect","token","get","verifyEmail","timer","setInterval","prev","clearInterval","async","data","apiPost","showErrorToast","toast","success","error","logger","errorMessage","Error","_jsx","className","children","_jsxs","_Fragment","Loader2","CheckCircle","onClick","XCircle","type","value","onChange","e","target","placeholder","dir","emailFromParams","email","Mail","x","y","width","height","rx","CircleX","cx","cy","r"],"ignoreList":[],"sourceRoot":""}