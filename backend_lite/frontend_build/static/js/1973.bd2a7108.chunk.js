/*! For license information please see 1973.bd2a7108.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[1973],{1973:(e,t,n)=>{n.r(t),n.d(t,{RepresentationBanner:()=>h,default:()=>y});var r=n(5043),o=n(6210),s=n(9989),a=n(2024),l=n(7719),c=n(7118),i=n(6328),d=n(9688),u=n(7867);async function p(e,t){return(0,d.$P)(u.VO.representationConfirm(e),t)}var m=n(579);const b={plaintiff:"\u05ea\u05d5\u05d1\u05e2",defendant:"\u05e0\u05ea\u05d1\u05e2",petitioner:"\u05de\u05d1\u05e7\u05e9",respondent:"\u05de\u05e9\u05d9\u05d1",appellant:"\u05de\u05e2\u05e8\u05e2\u05e8",respondent_appeal:"\u05de\u05e9\u05d9\u05d1 \u05d1\u05e2\u05e8\u05e2\u05d5\u05e8",respondent_admin:"\u05de\u05e9\u05d9\u05d1 (\u05de\u05e0\u05d4\u05dc\u05d9)",other:"\u05d0\u05d7\u05e8",unknown:"\u05dc\u05d0 \u05d9\u05d3\u05d5\u05e2"},x={label:"\u05d2\u05d1\u05d5\u05d4\u05d4",color:"text-green-600"},f={label:"\u05d1\u05d9\u05e0\u05d5\u05e0\u05d9\u05ea",color:"text-yellow-600"},g={label:"\u05e0\u05de\u05d5\u05db\u05d4",color:"text-red-600"},h=e=>{let{caseId:t,onConfirmed:n}=e;const[h,y]=(0,r.useState)("idle"),[C,v]=(0,r.useState)(null),[w,k]=(0,r.useState)(null),[N,I]=(0,r.useState)(0),[S,R]=(0,r.useState)(null),[U,A]=(0,r.useState)(!1),[P,O]=(0,r.useState)(null),B=(0,r.useRef)(0),V=(0,r.useRef)(null),_=(0,r.useCallback)(()=>{V.current&&(clearInterval(V.current),V.current=null)},[]),D=(0,r.useCallback)(async()=>{if(C){if(B.current+=1,B.current>=15)return _(),y("timeout"),void O("\u05d6\u05de\u05df \u05d4\u05d6\u05d9\u05d4\u05d5\u05d9 \u05e4\u05d2 - \u05e0\u05e1\u05d4 \u05e9\u05d5\u05d1");try{const e=await async function(e,t){return(0,d.apiGet)(u.VO.representationStatus(e,t))}(t,C);"completed"===e.status?(_(),y("done"),e.representation&&(k(e.representation.side_confirmed),I(e.representation.confidence))):"failed"===e.status&&(_(),y("failed"),O(e.error||"\u05d4\u05d6\u05d9\u05d4\u05d5\u05d9 \u05e0\u05db\u05e9\u05dc"))}catch(e){console.error("Poll status error:",e)}}},[t,C,_]);(0,r.useEffect)(()=>(C&&"running"===h&&(B.current=0,V.current=setInterval(D,2e3)),()=>_()),[C,h,D,_]);const T=(0,r.useCallback)(async()=>{y("running"),O(null),k(null);try{const e=await async function(e){return(0,d.$P)(u.VO.representationAutoTrigger(e),{})}(t);v(e.job_id),"completed"===e.status&&y("done")}catch(e){console.error("Trigger detection error:",e),y("failed"),O(e.message||"\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05d6\u05d9\u05d4\u05d5\u05d9")}},[t]);(0,r.useEffect)(()=>{T()},[t]);const z=(0,r.useCallback)(async()=>{if(w)try{await p(t,{side:w}),R(w),i.oR.success("\u05e6\u05d3 \u05d4\u05d9\u05d9\u05e6\u05d5\u05d2 \u05d0\u05d5\u05e9\u05e8"),null===n||void 0===n||n(w)}catch(e){console.error("Confirm error:",e),i.oR.error(e.message||"\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05d0\u05d9\u05e9\u05d5\u05e8")}},[t,w,n]),E=(0,r.useCallback)(async e=>{try{await p(t,{side:e}),R(e),k(e),A(!1),i.oR.success("\u05e6\u05d3 \u05d4\u05d9\u05d9\u05e6\u05d5\u05d2 \u05e2\u05d5\u05d3\u05db\u05df"),null===n||void 0===n||n(e)}catch(r){console.error("Override error:",r),i.oR.error(r.message||"\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05e2\u05d3\u05db\u05d5\u05df")}},[t,n]);if(S)return(0,m.jsxs)("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-lg flex items-center justify-between",dir:"rtl",children:[(0,m.jsxs)("div",{className:"flex items-center gap-3",children:[(0,m.jsx)(o.A,{className:"h-5 w-5 text-green-600"}),(0,m.jsxs)("span",{className:"text-green-800",children:["\u05de\u05d9\u05d9\u05e6\u05d2 \u05d0\u05ea ",(0,m.jsx)("strong",{children:b[S]||S})]})]}),(0,m.jsxs)("button",{onClick:()=>A(!0),className:"text-sm text-green-600 hover:text-green-800 flex items-center gap-1",children:[(0,m.jsx)(s.A,{className:"h-4 w-4"}),"\u05e9\u05e0\u05d4"]}),U&&(0,m.jsx)(j,{currentSide:S,onSelect:E,onClose:()=>A(!1)})]});if("running"===h)return(0,m.jsxs)("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg flex items-center gap-3",dir:"rtl",children:[(0,m.jsx)(a.A,{className:"h-5 w-5 text-blue-600 animate-spin"}),(0,m.jsx)("span",{className:"text-blue-800",children:"\u05de\u05d6\u05d4\u05d4 \u05e6\u05d3 \u05d9\u05d9\u05e6\u05d5\u05d2..."})]});if("failed"===h||"timeout"===h)return(0,m.jsxs)("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg flex items-center justify-between",dir:"rtl",children:[(0,m.jsxs)("div",{className:"flex items-center gap-3",children:[(0,m.jsx)(l.A,{className:"h-5 w-5 text-yellow-600"}),(0,m.jsx)("span",{className:"text-yellow-800",children:P||"\u05dc\u05d0 \u05e0\u05d9\u05ea\u05df \u05dc\u05d6\u05d4\u05d5\u05ea \u05e6\u05d3 \u05d9\u05d9\u05e6\u05d5\u05d2"})]}),(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[(0,m.jsx)("button",{onClick:T,className:"text-sm px-3 py-1 text-yellow-700 border border-yellow-400 rounded hover:bg-yellow-100",children:"\u05e0\u05e1\u05d4 \u05e9\u05d5\u05d1"}),(0,m.jsx)("button",{onClick:()=>A(!0),className:"text-sm px-3 py-1 bg-yellow-600 text-white rounded hover:bg-yellow-700",children:"\u05d4\u05d2\u05d3\u05e8 \u05d9\u05d3\u05e0\u05d9\u05ea"})]}),U&&(0,m.jsx)(j,{currentSide:null,onSelect:E,onClose:()=>A(!1)})]});if("done"===h&&w){const e=($=N)>=.85?x:$>=.65?f:g;return(0,m.jsxs)("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg flex items-center justify-between",dir:"rtl",children:[(0,m.jsxs)("div",{className:"flex items-center gap-3",children:[(0,m.jsx)(c.A,{className:"h-5 w-5 text-blue-600"}),(0,m.jsxs)("span",{className:"text-blue-800",children:["\u05d6\u05d9\u05d4\u05d5\u05d9: \u05de\u05d9\u05d9\u05e6\u05d2 \u05d0\u05ea ",(0,m.jsx)("strong",{children:b[w]||w}),(0,m.jsxs)("span",{className:"mr-2 text-sm ".concat(e.color),children:["(\u05d5\u05d3\u05d0\u05d5\u05ea ",e.label,")"]})]})]}),(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[(0,m.jsxs)("button",{onClick:z,className:"text-sm px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center gap-1",children:[(0,m.jsx)(o.A,{className:"h-4 w-4"}),"\u05d0\u05e9\u05e8"]}),(0,m.jsxs)("button",{onClick:()=>A(!0),className:"text-sm px-3 py-1 text-blue-600 border border-blue-400 rounded hover:bg-blue-100 flex items-center gap-1",children:[(0,m.jsx)(s.A,{className:"h-4 w-4"}),"\u05ea\u05e7\u05df"]})]}),U&&(0,m.jsx)(j,{currentSide:w,onSelect:E,onClose:()=>A(!1)})]})}var $;return null},j=e=>{let{currentSide:t,onSelect:n,onClose:r}=e;return(0,m.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:r,children:(0,m.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-6 w-96 max-w-full",onClick:e=>e.stopPropagation(),dir:"rtl",children:[(0,m.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\u05d1\u05d7\u05e8 \u05e6\u05d3 \u05d9\u05d9\u05e6\u05d5\u05d2"}),(0,m.jsx)("div",{className:"space-y-2",children:["plaintiff","defendant","petitioner","respondent","appellant","other"].map(e=>(0,m.jsx)("button",{onClick:()=>n(e),className:"w-full p-3 text-right rounded-lg border transition-colors ".concat(t===e?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-blue-300 hover:bg-gray-50"),children:b[e]},e))}),(0,m.jsx)("button",{onClick:r,className:"mt-4 w-full py-2 text-gray-600 hover:text-gray-800",children:"\u05d1\u05d9\u05d8\u05d5\u05dc"})]})})},y=h},7867:(e,t,n)=>{n.d(t,{VO:()=>r,Xx:()=>o});const r={precedentDashboard:e=>"/api/legal-notebook/precedent/dashboard/".concat(encodeURIComponent(e)),precedentQuery:"/api/legal-notebook/precedent/query",contradictionPredicates:"/api/legal-notebook/contradiction/predicates",contradictionPrecedentContext:"/api/legal-notebook/contradiction/precedent-context",representationAutoTrigger:e=>"/api/legal-notebook/representation/".concat(encodeURIComponent(e),"/auto-trigger"),representationStatus:(e,t)=>"/api/legal-notebook/representation/".concat(encodeURIComponent(e),"/status/").concat(encodeURIComponent(t)),representationConfirm:e=>"/api/legal-notebook/representation/".concat(encodeURIComponent(e),"/confirm"),claims:"/api/legal-notebook/claims",claimById:e=>"/api/legal-notebook/claims/".concat(encodeURIComponent(e)),claimSearch:"/api/legal-notebook/claims/search",contradictions:"/api/legal-notebook/contradictions",contradictionById:e=>"/api/legal-notebook/contradictions/".concat(encodeURIComponent(e))},o={search:"/api/corpus-finder/search",filters:"/api/corpus-finder/filters",document:e=>"/api/corpus-finder/document/".concat(encodeURIComponent(e)),stats:"/api/corpus-finder/stats",evalSets:"/api/corpus-finder/eval-sets",evalSetById:e=>"/api/corpus-finder/eval-sets/".concat(encodeURIComponent(e)),evalSetItems:e=>"/api/corpus-finder/eval-sets/".concat(encodeURIComponent(e),"/items"),evalSetItem:(e,t)=>"/api/corpus-finder/eval-sets/".concat(encodeURIComponent(e),"/items/").concat(encodeURIComponent(t)),ingestPdf:"/api/corpus-finder/ingest/pdf",importFromDir:"/api/corpus-finder/import-from-dir",jobStatus:e=>"/api/corpus-finder/jobs/".concat(encodeURIComponent(e)),jobItems:e=>"/api/corpus-finder/jobs/".concat(encodeURIComponent(e),"/items"),reprocessDoc:e=>"/api/corpus-finder/docs/".concat(encodeURIComponent(e),"/reprocess")}},9989:(e,t,n)=>{n.d(t,{A:()=>r});const r=(0,n(7784).A)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]])}}]);
//# sourceMappingURL=1973.bd2a7108.chunk.js.map