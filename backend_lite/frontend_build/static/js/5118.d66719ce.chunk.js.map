{"version":3,"file":"static/js/5118.d66719ce.chunk.js","mappings":"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","sources":["types/legalNotebook.ts","components/legal-notebook/LegalNotebookPanel.tsx"],"sourcesContent":["/**\n * Legal Notebook Types\n * ====================\n * Type definitions for Legal Notebook + Claim & Contradiction Intelligence\n */\n\n// ===========================\n// Enums\n// ===========================\n\nexport type ClaimType =\n  | 'liability'      // טענת חבות\n  | 'damages'        // טענת נזק\n  | 'procedural'     // טענה פרוצדורלית\n  | 'defense'        // טענת הגנה\n  | 'relief'         // סעד מבוקש\n  | 'factual'        // טענה עובדתית\n  | 'legal'          // טענה משפטית\n  | 'mixed';         // מעורבת\n\nexport type ProceduralPosture =\n  | 'appeal'         // ערעור\n  | 'motion'         // בקשה\n  | 'trial'          // דיון הוכחות\n  | 'interim'        // ביניים\n  | 'execution';     // ביצוע\n\nexport type ClaimStance = 'main' | 'sub' | 'counter';\n\nexport type ClaimOutcome = 'accepted' | 'rejected' | 'partial' | 'unclear';\n\nexport type LegalContradictionType =\n  | 'temporal'       // סתירה זמנית\n  | 'factual'        // סתירה עובדתית\n  | 'version'        // גרסאות שונות\n  | 'witness'        // סתירה בעדויות\n  | 'expert'         // סתירה בין מומחים\n  | 'document';      // סתירה בין מסמכים\n\nexport type LegalContradictionSeverity = 'LOW' | 'MED' | 'HIGH' | 'CRITICAL';\n\nexport type ContradictionStatus = 'open' | 'explained' | 'resolved' | 'disputed';\n\nexport type SupportLevel = 'LOW' | 'MED' | 'HIGH';\n\nexport type SourceType = 'case' | 'corpus';\n\n// ===========================\n// Legal Basis Types\n// ===========================\n\nexport interface LawReference {\n  law: string;\n  section?: string;\n  text?: string;\n}\n\nexport interface LegalTest {\n  name: string;\n  elements: string[];\n}\n\nexport interface LegalBasis {\n  law_refs: LawReference[];\n  legal_test?: LegalTest;\n}\n\nexport interface FactPredicate {\n  subject: string;\n  action: string;\n  object?: string;\n  date?: string;\n}\n\nexport interface FactPattern {\n  predicates: FactPredicate[];\n  context?: string;\n}\n\nexport interface EvidenceRef {\n  doc_id: string;\n  page?: number;\n  paragraph?: number;\n  quote: string;\n}\n\n// ===========================\n// Claim Types\n// ===========================\n\nexport interface ClaimStrengthInternal {\n  gaps: string[];\n  strengths: string[];\n  required_evidence: string[];\n}\n\nexport interface ClaimOutcomeDetails {\n  reasoning?: string;\n  quote?: string;\n  factors: string[];\n}\n\nexport interface LegalClaim {\n  id: string;\n  claim_text: string;\n  claim_type: ClaimType;\n  claim_subtype?: string;\n  procedural_posture?: ProceduralPosture;\n  legal_basis?: LegalBasis;\n  fact_pattern?: FactPattern;\n  burden_of_proof?: string;\n  stance: ClaimStance;\n  party_from?: string;\n  party_against?: string;\n  time_scope?: string;\n  evidence_refs: EvidenceRef[];\n  domain_id?: string;\n  subdomain_id?: string;\n  source_type: SourceType;\n  case_id?: string;\n  doc_id?: string;\n  ruling_id?: string;\n  canonical_form?: string;\n  strength_internal?: ClaimStrengthInternal;\n  outcome?: ClaimOutcome;\n  outcome_details?: ClaimOutcomeDetails;\n  contradiction_refs: string[];\n  confidence: number;\n  extracted_by: string;\n  version: number;\n  created_at?: string;\n  updated_at?: string;\n}\n\n// ===========================\n// Contradiction Types\n// ===========================\n\nexport interface ContradictionStatement {\n  doc_id: string;\n  page?: number;\n  paragraph?: number;\n  quote: string;\n  speaker?: string;\n  date_stated?: string;\n  claim_id?: string;\n}\n\nexport interface ClaimImpact {\n  claim_id: string;\n  direction: 'supports' | 'harms';\n  impact_score: LegalContradictionSeverity;\n  explanation?: string;\n}\n\nexport interface CrossExaminationQuestion {\n  q: string;\n  goal: string;\n}\n\nexport interface TrapBranch {\n  if: string;\n  then: string;\n}\n\nexport interface CrossExaminationPlaybook {\n  objective: string;\n  question_set: CrossExaminationQuestion[];\n  sequence: string[];\n  trap_branches: TrapBranch[];\n  evidence_to_use: string[];\n}\n\nexport interface DiscoveryItem {\n  type: 'document' | 'interrogatory';\n  description: string;\n  priority: LegalContradictionSeverity;\n}\n\nexport interface DiscoveryTriggers {\n  requested_items: DiscoveryItem[];\n  rationale?: string;\n  deadline_suggestion?: string;\n}\n\nexport interface DraftingParagraph {\n  section: 'facts' | 'law' | 'argument';\n  text: string;\n  citations: string[];\n}\n\nexport interface MotionSuggestion {\n  type: string;\n  reason: string;\n}\n\nexport interface DraftingAssistance {\n  brief_paragraphs: DraftingParagraph[];\n  motion_suggestions: MotionSuggestion[];\n}\n\nexport interface NegotiationLeverage {\n  leverage_notes: string[];\n  suggested_use?: string;\n  strength_rating?: LegalContradictionSeverity;\n}\n\nexport interface ContradictionSignals {\n  credibility_delta?: 'increase' | 'decrease' | 'neutral';\n  strategy_flags: string[];\n  risk_indicators: string[];\n  opportunity_indicators: string[];\n}\n\nexport interface LegalContradiction {\n  id: string;\n  case_id: string;\n  contradiction_type: LegalContradictionType;\n  severity: LegalContradictionSeverity;\n  statement_a: ContradictionStatement;\n  statement_b: ContradictionStatement;\n  description: string;\n  impact_on_claims: ClaimImpact[];\n  status: ContradictionStatus;\n  resolution_notes?: string;\n  cross_examination?: CrossExaminationPlaybook;\n  discovery?: DiscoveryTriggers;\n  drafting?: DraftingAssistance;\n  negotiation?: NegotiationLeverage;\n  signals?: ContradictionSignals;\n  confidence: number;\n  verified: boolean;\n  created_at?: string;\n  updated_at?: string;\n}\n\n// ===========================\n// Support Index Types\n// ===========================\n\nexport interface SupportIndexFilters {\n  court_type?: string;\n  court_district?: string;\n  domain_id?: string;\n  subdomain_id?: string;\n  procedure_type?: string;\n  years_from?: number;\n  years_to?: number;\n}\n\nexport interface RepresentativeCase {\n  ruling_id: string;\n  case_number: string;\n  outcome: ClaimOutcome;\n  quote: string;\n  court: string;\n  date: string;\n}\n\nexport interface ClaimSupportIndex {\n  id: string;\n  claim_id: string;\n  filters: SupportIndexFilters;\n  support_level: SupportLevel;\n  n_total: number;\n  n_accepted: number;\n  n_rejected: number;\n  n_partial: number;\n  n_unclear: number;\n  acceptance_rate?: number;\n  variance?: number;\n  representative_cases: RepresentativeCase[];\n  confidence_note?: string;\n  is_sufficient: boolean;\n  calculated_at?: string;\n}\n\n// ===========================\n// Search Types\n// ===========================\n\nexport interface ClaimSearchFilters {\n  court_type?: string;\n  court_district?: string;\n  procedure_type?: string;\n  domain_id?: string;\n  subdomain_id?: string;\n  years_from?: number;\n  years_to?: number;\n  claim_type?: ClaimType;\n  procedural_posture?: ProceduralPosture;\n}\n\nexport interface ClaimMatchScore {\n  claim_type_match: boolean;\n  procedural_posture_match: boolean;\n  fact_predicates_overlap: number;\n  semantic_similarity: number;\n  lexical_signals: number;\n  total_score: number;\n}\n\nexport interface ClaimSearchResult {\n  claim: LegalClaim;\n  match_score: ClaimMatchScore;\n  ruling_summary?: string;\n  court_info?: string;\n}\n\nexport interface ClaimSearchRequest {\n  claim_text: string;\n  claim_type: ClaimType;\n  procedural_posture: ProceduralPosture;\n  filters?: ClaimSearchFilters;\n  limit?: number;\n}\n\nexport interface ClaimSearchResponse {\n  query: ClaimSearchRequest;\n  results: ClaimSearchResult[];\n  total_found: number;\n  filters_applied: ClaimSearchFilters;\n  support_index?: ClaimSupportIndex;\n}\n\n// ===========================\n// Taxonomy Types\n// ===========================\n\nexport interface LegalSubdomain {\n  id: string;\n  domain_id: string;\n  name_he: string;\n  name_en?: string;\n  description?: string;\n  keywords: string[];\n  display_order: number;\n  is_active: boolean;\n  created_at?: string;\n}\n\nexport interface LegalDomain {\n  id: string;\n  name_he: string;\n  name_en?: string;\n  description?: string;\n  parent_id?: string;\n  display_order: number;\n  is_active: boolean;\n  created_at?: string;\n  subdomains: LegalSubdomain[];\n}\n\n// ===========================\n// Corpus Types\n// ===========================\n\nexport interface CorpusDocument {\n  id: string;\n  ruling_id: string;\n  court_type?: string;\n  court_district?: string;\n  court_name?: string;\n  decision_date?: string;\n  case_number_normalized?: string;\n  procedure_type?: string;\n  judges_names: string[];\n  domain_id?: string;\n  subdomain_id?: string;\n  taxonomy_source: string;\n  taxonomy_confidence?: number;\n  claims_extracted: boolean;\n  claims_count: number;\n  quality_score?: number;\n  validation_status: string;\n  created_at?: string;\n}\n\nexport interface CorpusStats {\n  total_documents: number;\n  with_claims: number;\n  total_claims: number;\n  by_court_type: Record<string, number>;\n  by_domain: Record<string, number>;\n}\n\n// ===========================\n// Playbook Response\n// ===========================\n\nexport interface PlaybookResponse {\n  contradiction_id: string;\n  cross_examination?: CrossExaminationPlaybook;\n  discovery?: DiscoveryTriggers;\n  drafting?: DraftingAssistance;\n  negotiation?: NegotiationLeverage;\n  signals?: ContradictionSignals;\n  generated_at: string;\n}\n\n// ===========================\n// UI Labels (Hebrew)\n// ===========================\n\nexport const CLAIM_TYPE_LABELS: Record<ClaimType, string> = {\n  liability: 'חבות',\n  damages: 'נזק',\n  procedural: 'פרוצדורלי',\n  defense: 'הגנה',\n  relief: 'סעד',\n  factual: 'עובדתי',\n  legal: 'משפטי',\n  mixed: 'מעורב'\n};\n\nexport const PROCEDURAL_POSTURE_LABELS: Record<ProceduralPosture, string> = {\n  appeal: 'ערעור',\n  motion: 'בקשה',\n  trial: 'דיון הוכחות',\n  interim: 'ביניים',\n  execution: 'ביצוע'\n};\n\nexport const CONTRADICTION_TYPE_LABELS: Record<LegalContradictionType, string> = {\n  temporal: 'זמנית',\n  factual: 'עובדתית',\n  version: 'גרסאות',\n  witness: 'עדויות',\n  expert: 'מומחים',\n  document: 'מסמכים'\n};\n\nexport const SEVERITY_LABELS: Record<LegalContradictionSeverity, string> = {\n  LOW: 'נמוכה',\n  MED: 'בינונית',\n  HIGH: 'גבוהה',\n  CRITICAL: 'קריטית'\n};\n\nexport const SUPPORT_LEVEL_LABELS: Record<SupportLevel, string> = {\n  LOW: 'נמוך',\n  MED: 'בינוני',\n  HIGH: 'גבוה'\n};\n\nexport const SUPPORT_LEVEL_COLORS: Record<SupportLevel, string> = {\n  LOW: 'text-red-500',\n  MED: 'text-yellow-500',\n  HIGH: 'text-green-500'\n};\n\nexport const OUTCOME_LABELS: Record<ClaimOutcome, string> = {\n  accepted: 'התקבלה',\n  rejected: 'נדחתה',\n  partial: 'חלקית',\n  unclear: 'לא ברור'\n};\n","/**\n * LegalNotebookPanel (Notebook-LLM UI)\n * ===================================\n * This route is the \"Notebook\" experience in the product.\n *\n * Contract:\n * - No internal accordions/collapsible sections for outputs.\n * - Progressive disclosure is ONLY via layers (V1/V2/V3) inside `NotebookPage`.\n *\n * NOTE:\n * We adapt legacy endpoints (claims/contradictions/ai-summary) into Notebook V1/V2 data.\n */\n\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { Loader2, AlertTriangle } from 'lucide-react';\nimport { apiGet } from '../../utils/api';\nimport NotebookPage from '../notebook/NotebookPage';\nimport type { Capability, Source, V1Actor, V1Data, V1KeyPoint, V2Data } from '../notebook/types';\nimport type { LegalClaim, LegalContradiction } from '../../types/legalNotebook';\nimport { CLAIM_TYPE_LABELS } from '../../types/legalNotebook';\n\ninterface LegalNotebookPanelProps {\n  caseId: string;\n  caseName?: string;\n}\n\nconst LegalNotebookPanel: React.FC<LegalNotebookPanelProps> = ({ caseId, caseName }) => {\n  const [bootLoading, setBootLoading] = useState(true);\n  const [bootError, setBootError] = useState<string | null>(null);\n  const [sources, setSources] = useState<Source[]>([]);\n  const [capabilities, setCapabilities] = useState<Capability[]>([]);\n\n  useEffect(() => {\n    const boot = async () => {\n      setBootLoading(true);\n      setBootError(null);\n      try {\n        // Best-effort: load case metadata for sources list.\n        const caseRes: any = await apiGet(`/api/cases/${caseId}`, { showErrorToast: false }).catch(() => null);\n        const files: any[] = caseRes?.files || [];\n\n        const mapFileType = (filename: string): Source['file_type'] => {\n          const lower = (filename || '').toLowerCase();\n          if (lower.endsWith('.pdf')) return 'pdf';\n          if (lower.endsWith('.doc') || lower.endsWith('.docx')) return 'doc';\n          if (lower.endsWith('.png') || lower.endsWith('.jpg') || lower.endsWith('.jpeg') || lower.endsWith('.webp')) return 'image';\n          return 'other';\n        };\n\n        const mapOcrStatus = (raw: any): Source['ocr_status'] => {\n          const v = String(raw || '').toLowerCase();\n          if (v.includes('complete') || v.includes('done') || v.includes('success')) return 'complete';\n          if (v.includes('process') || v.includes('running')) return 'processing';\n          if (v.includes('error') || v.includes('fail')) return 'error';\n          return 'pending';\n        };\n\n        setSources(\n          files.map((f) => {\n            const filename = f?.filename || f?.original_filename || f?.name || 'מסמך';\n            return {\n              id: String(f?.id || f?.file_id || f?.doc_id || filename),\n              filename,\n              file_type: mapFileType(filename),\n              pages: typeof f?.pages === 'number' ? f.pages : (typeof f?.num_pages === 'number' ? f.num_pages : undefined),\n              ocr_status: mapOcrStatus(f?.ocr_status || f?.status),\n              mentions_count: typeof f?.mentions_count === 'number' ? f.mentions_count : undefined,\n            };\n          })\n        );\n\n        // Minimal capability list (until manifest endpoint is wired).\n        // Kept non-collapsible in the rail; V3 is only user-triggered.\n        setCapabilities([\n          {\n            id: 'claims',\n            name: 'Claims',\n            name_he: 'טענות',\n            icon: 'search',\n            status: 'ready',\n            onClick: () => {},\n          },\n          {\n            id: 'contradictions',\n            name: 'Contradictions',\n            name_he: 'סתירות',\n            icon: 'alert',\n            status: 'ready',\n            onClick: () => {},\n          },\n          {\n            id: 'strategy',\n            name: 'Strategy',\n            name_he: 'אסטרטגיה',\n            icon: 'target',\n            status: 'partial',\n            reason_he: 'זמין לאחר יצירת תוצרים בסיסיים',\n            onClick: () => {},\n          },\n        ]);\n      } catch (e: any) {\n        setBootError(e?.message || 'שגיאה בטעינת נתוני המחברת');\n      } finally {\n        setBootLoading(false);\n      }\n    };\n\n    boot();\n  }, [caseId]);\n\n  const effectiveCaseName = useMemo(() => caseName || 'מחברת התיק', [caseName]);\n\n  const initialData = useMemo(\n    () => ({\n      sources,\n      capabilities,\n    }),\n    [sources, capabilities]\n  );\n\n  const buildV1FromClaims = (claims: LegalClaim[], contradictions: LegalContradiction[]): V1Data => {\n    const oneLiner = `${effectiveCaseName}: נמצאו ${claims.length} טענות ו־${contradictions.length} סתירות.`;\n    const second = claims.length > 0\n      ? 'מבט מהיר מציג את התמונה הכוללת לפני צלילה לסביבת העבודה.'\n      : 'העלה מסמכים או הרץ יכולות כדי לייצר ממצאים.';\n\n    const keyPoints: V1KeyPoint[] = claims.slice(0, 6).map((c, idx) => ({\n      id: c.id || `kp-${idx}`,\n      text: String(c.claim_text || '').replace(/\\s+/g, ' ').trim().slice(0, 180),\n      importance: (idx < 2 ? 'high' : idx < 4 ? 'medium' : 'low') as V1KeyPoint['importance'],\n    })).filter((kp) => kp.text.length > 0).slice(0, 6);\n\n    const actorNames = new Set<string>();\n    for (const c of claims) {\n      if (c.party_from) actorNames.add(String(c.party_from));\n      if (c.party_against) actorNames.add(String(c.party_against));\n    }\n    const actors: V1Actor[] = Array.from(actorNames).slice(0, 12).map((name, idx) => ({\n      id: `actor-${idx}-${name}`,\n      name,\n      role: 'צד',\n      party: 'other',\n    }));\n\n    return {\n      summary: { text: `${oneLiner} ${second}` },\n      keyPoints: keyPoints.length > 0 ? keyPoints : [\n        { id: 'kp-empty-1', text: 'טרם זוהו נקודות מפתח.', importance: 'low' },\n      ],\n      actors,\n    };\n  };\n\n  const fetchLegacyClaims = async (): Promise<LegalClaim[]> => {\n    const res: any = await apiGet(`/api/cases/${caseId}/claims`, { showErrorToast: false }).catch(() => ({ claims: [] }));\n    return Array.isArray(res?.claims) ? res.claims : [];\n  };\n\n  const fetchLegacyContradictions = async (): Promise<LegalContradiction[]> => {\n    const res: any = await apiGet(`/api/legal-notebook/cases/${caseId}/contradictions`, { showErrorToast: false }).catch(() => ({ contradictions: [] }));\n    return Array.isArray(res?.contradictions) ? res.contradictions : [];\n  };\n\n  const toEvidence = (ref: any) => ({\n    file_id: ref?.doc_id,\n    page: typeof ref?.page === 'number' ? ref.page : undefined,\n    quote: ref?.quote,\n  });\n\n  const buildV2FromLegacy = (claims: LegalClaim[], contradictions: LegalContradiction[]): V2Data => {\n    const actorsMap = new Map<string, any>();\n    for (const c of claims) {\n      for (const n of [c.party_from, c.party_against]) {\n        if (!n) continue;\n        const key = String(n);\n        if (!actorsMap.has(key)) {\n          actorsMap.set(key, {\n            id: `actor-${key}`,\n            name: key,\n            role: 'party',\n            role_he: 'צד',\n            party: 'other',\n            interest_he: undefined,\n            evidence: [],\n          });\n        }\n      }\n    }\n\n    const v2Claims: V2Data['claims'] = claims.map((c) => {\n      const heLabel = (CLAIM_TYPE_LABELS as any)[c.claim_type] || 'טענה';\n      const claimType: V2Data['claims'][number]['claim_type'] =\n        c.claim_type === 'legal'\n          ? 'legal'\n          : c.claim_type === 'procedural'\n            ? 'procedural'\n            : 'factual';\n\n      const evidence = Array.isArray(c.evidence_refs)\n        ? c.evidence_refs.map(toEvidence).filter((e: any) => e.file_id || e.quote)\n        : [];\n\n      return {\n        id: c.id,\n        claim_type: claimType,\n        claim_type_he: heLabel,\n        short_statement: String(c.claim_text || '').replace(/\\s+/g, ' ').trim().slice(0, 220),\n        full_text: c.claim_text,\n        polarity: 'neutral',\n        party: c.party_from || '',\n        evidence,\n        confidence: typeof c.confidence === 'number' ? c.confidence : undefined,\n        disputed: false,\n      };\n    });\n\n    const sevMap: Record<string, V2Data['contradictions'][number]['severity']> = {\n      CRITICAL: 'critical',\n      HIGH: 'high',\n      MED: 'medium',\n      LOW: 'low',\n    };\n\n    const v2Contradictions: V2Data['contradictions'] = contradictions.map((c) => {\n      const evA = toEvidence(c.statement_a);\n      const evB = toEvidence(c.statement_b);\n      const pseudoClaimFrom = (\n        id: string,\n        quote: string,\n        ev: any\n      ): V2Data['claims'][number] => ({\n        id,\n        claim_type: 'factual',\n        claim_type_he: 'עובדתית',\n        short_statement: String(quote || '').replace(/\\s+/g, ' ').trim().slice(0, 220) || 'טענה (ללא ציטוט)',\n        polarity: 'neutral',\n        party: '',\n        evidence: (ev?.file_id || ev?.quote) ? [ { ...ev } ] : [],\n      });\n\n      return {\n        id: c.id,\n        description: c.description,\n        description_he: c.description,\n        severity: sevMap[c.severity] || 'medium',\n        claim1: pseudoClaimFrom(c.statement_a?.claim_id || `${c.id}-a`, c.statement_a?.quote, evA),\n        claim2: pseudoClaimFrom(c.statement_b?.claim_id || `${c.id}-b`, c.statement_b?.quote, evB),\n        evidence: [evA, evB].filter((e: any) => e.file_id || e.quote),\n      };\n    });\n\n    return {\n      actors: Array.from(actorsMap.values()),\n      claims: v2Claims,\n      timeline: [],\n      contradictions: v2Contradictions,\n      redFlags: [],\n    };\n  };\n\n  if (bootLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <Loader2 className=\"w-8 h-8 animate-spin text-blue-500\" />\n        <span className=\"mr-3 text-gray-300\">טוען מחברת...</span>\n      </div>\n    );\n  }\n\n  if (bootError) {\n    return (\n      <div className=\"bg-red-900/20 border border-red-500/30 rounded-xl p-6 text-center\">\n        <AlertTriangle className=\"w-12 h-12 text-red-500 mx-auto mb-3\" />\n        <p className=\"text-red-400\">{bootError}</p>\n      </div>\n    );\n  }\n\n  return (\n    <NotebookPage\n      caseId={caseId}\n      caseName={effectiveCaseName}\n      initialData={initialData}\n      onFetchV1={async () => {\n        const [claims, contradictions] = await Promise.all([\n          fetchLegacyClaims(),\n          fetchLegacyContradictions(),\n        ]);\n\n        // Prefer backend AI summary if it exists; fall back to deterministic summary.\n        const aiSummaryRes: any = await apiGet(`/api/cases/${caseId}/ai-summary`, { showErrorToast: false }).catch(() => null);\n        const aiText =\n          typeof aiSummaryRes?.summary === 'string'\n            ? aiSummaryRes.summary\n            : typeof aiSummaryRes?.summary?.text === 'string'\n              ? aiSummaryRes.summary.text\n              : typeof aiSummaryRes?.summary?.one_liner === 'string'\n                ? aiSummaryRes.summary.one_liner\n                : null;\n\n        const v1 = buildV1FromClaims(claims, contradictions);\n        if (aiText) {\n          return {\n            ...v1,\n            summary: { text: String(aiText).replace(/\\s+/g, ' ').trim().slice(0, 420) },\n          };\n        }\n        return v1;\n      }}\n      onFetchV2={async () => {\n        const [claims, contradictions] = await Promise.all([\n          fetchLegacyClaims(),\n          fetchLegacyContradictions(),\n        ]);\n        return buildV2FromLegacy(claims, contradictions);\n      }}\n      onRunCapability={async () => {\n        // Capabilities are currently placeholders until manifest is wired.\n        return { ok: true };\n      }}\n      onDocumentOpen={() => {\n        // Sources drawer/preview is handled elsewhere in the app today.\n      }}\n    />\n  );\n};\n\nexport default LegalNotebookPanel;\n"],"names":["CLAIM_TYPE_LABELS","liability","damages","procedural","defense","relief","factual","legal","mixed","_ref","caseId","caseName","bootLoading","setBootLoading","useState","bootError","setBootError","sources","setSources","capabilities","setCapabilities","useEffect","async","caseRes","apiGet","concat","showErrorToast","catch","files","mapFileType","filename","lower","toLowerCase","endsWith","mapOcrStatus","raw","v","String","includes","map","f","original_filename","name","id","file_id","doc_id","file_type","pages","num_pages","undefined","ocr_status","status","mentions_count","name_he","icon","onClick","reason_he","e","message","boot","effectiveCaseName","useMemo","initialData","fetchLegacyClaims","res","claims","Array","isArray","fetchLegacyContradictions","contradictions","toEvidence","ref","page","quote","_jsxs","className","children","_jsx","Loader2","AlertTriangle","NotebookPage","onFetchV1","_aiSummaryRes$summary","_aiSummaryRes$summary2","Promise","all","aiSummaryRes","aiText","summary","text","one_liner","v1","buildV1FromClaims","oneLiner","length","second","keyPoints","slice","c","idx","claim_text","replace","trim","importance","filter","kp","actorNames","Set","party_from","add","party_against","actors","from","role","party","_objectSpread","onFetchV2","buildV2FromLegacy","actorsMap","Map","n","key","has","set","role_he","interest_he","evidence","v2Claims","heLabel","claim_type","claimType","evidence_refs","claim_type_he","short_statement","full_text","polarity","confidence","disputed","sevMap","CRITICAL","HIGH","MED","LOW","v2Contradictions","_c$statement_a","_c$statement_a2","_c$statement_b","_c$statement_b2","evA","statement_a","evB","statement_b","pseudoClaimFrom","ev","description","description_he","severity","claim1","claim_id","claim2","values","timeline","redFlags","onRunCapability","ok","onDocumentOpen"],"ignoreList":[],"sourceRoot":""}