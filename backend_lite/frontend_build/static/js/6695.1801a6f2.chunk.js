"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[6695],{9076:(e,s,t)=>{t.r(s),t.d(s,{default:()=>Ve});var l=t(5043),a=t(3216),i=t(2489),r=t(516),c=t(5711),n=t(2382),d=t(4537),x=t(3062),o=t(73),m=t(5088),h=t(9855),p=t(7719),u=t(9292),b=t(2629),j=t(7475),g=t(6210),N=t(7118),v=t(1680),w=t(6328),f=t(9688),y=t(2240),_=t(8018);const k=e=>{if(!e)return"-";try{const s=new Date(e);return isNaN(s.getTime())?"-":s.toLocaleString("he-IL",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch(s){return"-"}},A=e=>{if(null===e||void 0===e||isNaN(e))return"0:00";const s=Math.floor(e/60),t=Math.floor(e%60);return"".concat(s,":").concat(t.toString().padStart(2,"0"))};var S=t(614),C=t(8693),z=t(579);const F=e=>{let{isOpen:s,onClose:t,title:a,children:i,size:r="md"}=e;if((0,l.useEffect)(()=>{const e=e=>{"Escape"===e.key&&s&&t()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[s,t]),!s)return null;return(0,z.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:(0,z.jsxs)("div",{className:"bg-slate-900 rounded-xl border border-white/20 shadow-2xl w-full ".concat({sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"}[r]," max-h-[90vh] overflow-hidden"),children:[(0,z.jsxs)("div",{className:"flex items-center justify-between p-4 md:p-6 border-b border-white/20",children:[(0,z.jsx)("h2",{id:"modal-title",className:"text-xl md:text-2xl font-bold text-white",children:a}),(0,z.jsx)("button",{onClick:t,className:"p-2 hover:bg-white/10 rounded-lg transition-colors","aria-label":"\u05e1\u05d2\u05d5\u05e8 \u05d7\u05dc\u05d5\u05df",children:(0,z.jsx)(S.A,{className:"w-6 h-6 text-white","aria-hidden":"true"})})]}),(0,z.jsx)("div",{className:"p-4 md:p-6 overflow-y-auto max-h-[calc(90vh-120px)] md:max-h-[calc(90vh-140px)]",children:i})]})})},E=[{value:"free",label:"Free",description:"\u05ea\u05db\u05e0\u05d9\u05ea \u05d1\u05e1\u05d9\u05e1\u05d9\u05ea \u05d1\u05d7\u05d9\u05e0\u05dd"},{value:"basic",label:"Basic",description:"\u05ea\u05db\u05e0\u05d9\u05ea \u05d1\u05e1\u05d9\u05e1\u05d9\u05ea \u05d1\u05ea\u05e9\u05dc\u05d5\u05dd"},{value:"professional",label:"Professional",description:"\u05ea\u05db\u05e0\u05d9\u05ea \u05de\u05e7\u05e6\u05d5\u05e2\u05d9\u05ea"},{value:"enterprise",label:"Enterprise",description:"\u05ea\u05db\u05e0\u05d9\u05ea \u05d0\u05e8\u05d2\u05d5\u05e0\u05d9\u05ea"},{value:"admin",label:"Admin",description:"\u05d4\u05e8\u05e9\u05d0\u05d5\u05ea \u05de\u05e0\u05d4\u05dc \u05de\u05dc\u05d0\u05d5\u05ea"}],L=e=>{let{isOpen:s,onClose:t,onSuccess:a,userId:i,userEmail:r,currentTier:c}=e;const[n,d]=(0,l.useState)(c),[x,o]=(0,l.useState)(!1);return(0,z.jsx)(F,{isOpen:s,onClose:t,title:"\u05e2\u05d3\u05db\u05d5\u05df \u05de\u05e0\u05d5\u05d9 \u05de\u05e9\u05ea\u05de\u05e9",size:"md",children:(0,z.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),n===c)return w.oR.info("\u05dc\u05d0 \u05d1\u05d5\u05e6\u05e2 \u05e9\u05d9\u05e0\u05d5\u05d9 - Tier \u05d6\u05d4\u05d4"),void t();o(!0);try{await(0,f.mu)("/api/admin/users/".concat(i,"/subscription"),{tier:n},{showErrorToast:!1}),w.oR.success("Tier \u05e2\u05d5\u05d3\u05db\u05df \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4 \u05dc-".concat(n)),a(),t()}catch(s){_.v.error("Failed to update subscription:",s),w.oR.error("\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05e2\u05d3\u05db\u05d5\u05df \u05de\u05e0\u05d5\u05d9")}finally{o(!1)}},className:"space-y-6",children:[(0,z.jsxs)("div",{className:"bg-white/5 rounded-lg p-4",children:[(0,z.jsx)("div",{className:"text-sm text-slate-400",children:"\u05de\u05e9\u05ea\u05de\u05e9"}),(0,z.jsx)("div",{className:"text-white font-medium",children:r}),(0,z.jsxs)("div",{className:"text-sm text-slate-400 mt-1",children:["Tier \u05e0\u05d5\u05db\u05d7\u05d9: ",(0,z.jsx)("span",{className:"text-white font-semibold",children:c})]})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{className:"block text-white font-medium mb-3",children:"\u05d1\u05d7\u05e8 Tier \u05d7\u05d3\u05e9:"}),(0,z.jsx)("div",{className:"space-y-2",children:E.map(e=>(0,z.jsxs)("label",{className:"flex items-start gap-3 p-4 rounded-lg border-2 cursor-pointer transition-all ".concat(n===e.value?"border-purple-500 bg-purple-500/10":"border-white/10 bg-white/5 hover:bg-white/10"),children:[(0,z.jsx)("input",{type:"radio",name:"tier",value:e.value,checked:n===e.value,onChange:e=>d(e.target.value),className:"mt-1"}),(0,z.jsxs)("div",{className:"flex-1",children:[(0,z.jsxs)("div",{className:"flex items-center gap-2",children:["admin"===e.value&&(0,z.jsx)(b.A,{className:"w-4 h-4 text-yellow-400"}),(0,z.jsx)("span",{className:"text-white font-medium",children:e.label})]}),(0,z.jsx)("div",{className:"text-sm text-slate-400 mt-1",children:e.description})]})]},e.value))})]}),(0,z.jsxs)("div",{className:"flex gap-3 justify-end pt-4 border-t border-white/10",children:[(0,z.jsxs)("button",{type:"button",onClick:t,className:"px-6 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors flex items-center gap-2",children:[(0,z.jsx)(S.A,{className:"w-4 h-4"}),"\u05d1\u05d9\u05d8\u05d5\u05dc"]}),(0,z.jsxs)("button",{type:"submit",disabled:x||n===c,className:"px-6 py-2 bg-purple-600 hover:bg-purple-700 disabled:bg-slate-700 disabled:cursor-not-allowed text-white rounded-lg transition-colors flex items-center gap-2",children:[(0,z.jsx)(C.A,{className:"w-4 h-4"}),x?"\u05e9\u05d5\u05de\u05e8...":"\u05e9\u05de\u05d5\u05e8"]})]})]})})},R=e=>{let{isOpen:s,onClose:t,onSuccess:a,userId:i,userEmail:r}=e;const[c,n]=(0,l.useState)(""),[d,x]=(0,l.useState)(!1),o=()=>{n(""),t()};return(0,z.jsx)(F,{isOpen:s,onClose:o,title:"\u05d7\u05e1\u05d9\u05de\u05ea \u05de\u05e9\u05ea\u05de\u05e9",size:"md",children:(0,z.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),c.trim()){x(!0);try{await(0,f.$P)("/api/admin/users/".concat(i,"/ban"),{reason:c.trim()},{showErrorToast:!1}),w.oR.success("\u05d4\u05de\u05e9\u05ea\u05de\u05e9 ".concat(r," \u05e0\u05d7\u05e1\u05dd \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4")),a(),t(),n("")}catch(s){_.v.error("Failed to ban user:",s),w.oR.error("\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05d7\u05e1\u05d9\u05de\u05ea \u05de\u05e9\u05ea\u05de\u05e9")}finally{x(!1)}}else w.oR.error("\u05e0\u05d0 \u05dc\u05d4\u05d6\u05d9\u05df \u05e1\u05d9\u05d1\u05ea \u05d7\u05e1\u05d9\u05de\u05d4")},className:"space-y-6",children:[(0,z.jsx)("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-4",children:(0,z.jsxs)("div",{className:"flex items-start gap-3",children:[(0,z.jsx)(p.A,{className:"w-6 h-6 text-red-400 flex-shrink-0 mt-0.5"}),(0,z.jsxs)("div",{children:[(0,z.jsx)("h3",{className:"text-red-400 font-bold",children:"\u05d0\u05d6\u05d4\u05e8\u05d4"}),(0,z.jsx)("p",{className:"text-red-200 text-sm mt-1",children:"\u05e4\u05e2\u05d5\u05dc\u05d4 \u05d6\u05d5 \u05ea\u05d7\u05e1\u05d5\u05dd \u05d0\u05ea \u05d4\u05de\u05e9\u05ea\u05de\u05e9 \u05de\u05d4\u05de\u05e2\u05e8\u05db\u05ea \u05d1\u05d0\u05d5\u05e4\u05df \u05de\u05d9\u05d9\u05d3\u05d9. \u05d4\u05de\u05e9\u05ea\u05de\u05e9 \u05dc\u05d0 \u05d9\u05d5\u05db\u05dc \u05dc\u05d4\u05ea\u05d7\u05d1\u05e8 \u05d0\u05d5 \u05dc\u05d4\u05e9\u05ea\u05de\u05e9 \u05d1\u05e9\u05d9\u05e8\u05d5\u05ea."})]})]})}),(0,z.jsxs)("div",{className:"bg-white/5 rounded-lg p-4",children:[(0,z.jsx)("div",{className:"text-sm text-slate-400",children:"\u05de\u05e9\u05ea\u05de\u05e9 \u05dc\u05d7\u05e1\u05d9\u05de\u05d4"}),(0,z.jsx)("div",{className:"text-white font-medium text-lg",children:r}),(0,z.jsx)("div",{className:"text-xs text-slate-500 mt-1 font-mono",children:i})]}),(0,z.jsxs)("div",{children:[(0,z.jsxs)("label",{className:"block text-white font-medium mb-2",children:["\u05e1\u05d9\u05d1\u05ea \u05d7\u05e1\u05d9\u05de\u05d4 ",(0,z.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,z.jsx)("textarea",{value:c,onChange:e=>n(e.target.value),placeholder:"\u05dc\u05d3\u05d5\u05d2\u05de\u05d4: \u05e9\u05d9\u05de\u05d5\u05e9 \u05dc\u05e8\u05e2\u05d4 \u05d1\u05de\u05e2\u05e8\u05db\u05ea, \u05d4\u05e4\u05e8\u05ea \u05ea\u05e0\u05d0\u05d9 \u05e9\u05d9\u05de\u05d5\u05e9...",rows:4,required:!0,className:"w-full px-4 py-3 bg-white/5 border border-white/20 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-red-500 resize-none"}),(0,z.jsxs)("div",{className:"text-sm text-slate-400 mt-1",children:[c.length,"/500 \u05ea\u05d5\u05d5\u05d9\u05dd"]})]}),(0,z.jsxs)("div",{className:"flex gap-3 justify-end pt-4 border-t border-white/10",children:[(0,z.jsxs)("button",{type:"button",onClick:o,className:"px-6 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors flex items-center gap-2",children:[(0,z.jsx)(S.A,{className:"w-4 h-4"}),"\u05d1\u05d9\u05d8\u05d5\u05dc"]}),(0,z.jsxs)("button",{type:"submit",disabled:d||!c.trim(),className:"px-6 py-2 bg-red-600 hover:bg-red-700 disabled:bg-slate-700 disabled:cursor-not-allowed text-white rounded-lg transition-colors flex items-center gap-2",children:[(0,z.jsx)(j.A,{className:"w-4 h-4"}),d?"\u05d7\u05d5\u05e1\u05dd...":"\u05d7\u05e1\u05d5\u05dd \u05de\u05e9\u05ea\u05de\u05e9"]})]})]})})};var T=t(2054),I=t(6245),O=t(2024),D=t(7819);const P=()=>{const[e,s]=(0,l.useState)([]),[t,a]=(0,l.useState)(null),[i,c]=(0,l.useState)(!0),[n,x]=(0,l.useState)(!1),[o,h]=(0,l.useState)("all"),[p,b]=(0,l.useState)(""),[j,g]=(0,l.useState)(null);(0,l.useEffect)(()=>{N();let e=null;const s=()=>{e||(e=setInterval(N,3e4))},t=()=>{e&&(clearInterval(e),e=null)},l=()=>{"visible"===document.visibilityState?(N(),s()):t()};return"visible"===document.visibilityState&&s(),document.addEventListener("visibilitychange",l),()=>{t(),document.removeEventListener("visibilitychange",l)}},[o]);const N=async()=>{try{x(!0);const[e,t]=await Promise.all([(0,f.apiGet)("/api/tasks/status".concat("all"!==o?"?status=".concat(o):""),{showErrorToast:!1}),(0,f.apiGet)("/api/tasks/summary",{showErrorToast:!1})]);s(e.tasks||[]),a(t)}catch(e){_.v.error("Failed to load tasks:",e),w.oR.error("\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05d8\u05e2\u05d9\u05e0\u05ea \u05de\u05e9\u05d9\u05de\u05d5\u05ea")}finally{c(!1),x(!1)}},v=e=>{switch(e){case"completed":return(0,z.jsx)(T.A,{className:"text-green-400",size:20});case"failed":return(0,z.jsx)(I.A,{className:"text-red-400",size:20});case"running":return(0,z.jsx)(O.A,{className:"text-blue-400 animate-spin",size:20});case"pending":return(0,z.jsx)(m.A,{className:"text-yellow-400",size:20});default:return(0,z.jsx)(D.A,{className:"text-gray-400",size:20})}},y=e=>{switch(e){case"completed":return"bg-green-500/20 text-green-400 border-green-500/30";case"failed":return"bg-red-500/20 text-red-400 border-red-500/30";case"running":return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"pending":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}},A=e.filter(e=>{if(p){const s=p.toLowerCase();return e.task_id.toLowerCase().includes(s)||e.task_type.toLowerCase().includes(s)||e.case_id&&e.case_id.toLowerCase().includes(s)}return!0});return i&&!t?(0,z.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,z.jsx)(O.A,{className:"animate-spin text-blue-400",size:32})}):(0,z.jsxs)("div",{className:"space-y-6",children:[(0,z.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl p-6 border border-white/10",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,z.jsxs)("div",{className:"flex items-center gap-3",children:[(0,z.jsx)(d.A,{className:"text-blue-400",size:32}),(0,z.jsxs)("div",{children:[(0,z.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Background Tasks"}),(0,z.jsx)("p",{className:"text-blue-300 text-sm",children:"\u05e0\u05d9\u05d4\u05d5\u05dc \u05de\u05e9\u05d9\u05de\u05d5\u05ea \u05e8\u05e7\u05e2 (Celery)"})]})]}),(0,z.jsxs)("button",{onClick:N,disabled:n,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-slate-600 text-white rounded-lg flex items-center gap-2",children:[(0,z.jsx)(r.A,{className:n?"animate-spin":"",size:16}),"\u05e8\u05e2\u05e0\u05df"]})]}),t&&(0,z.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mt-4",children:[(0,z.jsxs)("div",{className:"bg-slate-700/50 rounded-lg p-4 border border-slate-600",children:[(0,z.jsx)("div",{className:"text-slate-400 text-sm mb-1",children:'\u05e1\u05d4"\u05db'}),(0,z.jsx)("div",{className:"text-2xl font-bold text-white",children:t.total_tasks})]}),(0,z.jsxs)("div",{className:"bg-yellow-500/20 rounded-lg p-4 border border-yellow-500/30",children:[(0,z.jsx)("div",{className:"text-yellow-400 text-sm mb-1",children:"\u05de\u05de\u05ea\u05d9\u05e0\u05d5\u05ea"}),(0,z.jsx)("div",{className:"text-2xl font-bold text-yellow-400",children:t.by_status.pending})]}),(0,z.jsxs)("div",{className:"bg-blue-500/20 rounded-lg p-4 border border-blue-500/30",children:[(0,z.jsx)("div",{className:"text-blue-400 text-sm mb-1",children:"\u05e8\u05e6\u05d5\u05ea"}),(0,z.jsx)("div",{className:"text-2xl font-bold text-blue-400",children:t.by_status.running})]}),(0,z.jsxs)("div",{className:"bg-green-500/20 rounded-lg p-4 border border-green-500/30",children:[(0,z.jsx)("div",{className:"text-green-400 text-sm mb-1",children:"\u05d4\u05d5\u05e9\u05dc\u05de\u05d5"}),(0,z.jsx)("div",{className:"text-2xl font-bold text-green-400",children:t.by_status.completed})]}),(0,z.jsxs)("div",{className:"bg-red-500/20 rounded-lg p-4 border border-red-500/30",children:[(0,z.jsx)("div",{className:"text-red-400 text-sm mb-1",children:"\u05e0\u05db\u05e9\u05dc\u05d5"}),(0,z.jsx)("div",{className:"text-2xl font-bold text-red-400",children:t.by_status.failed})]})]})]}),(0,z.jsx)("div",{className:"bg-slate-800 rounded-xl p-4 border border-white/10",children:(0,z.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,z.jsxs)("div",{className:"flex-1 relative",children:[(0,z.jsx)(u.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:18}),(0,z.jsx)("input",{type:"text",value:p,onChange:e=>b(e.target.value),placeholder:"\u05d7\u05e4\u05e9 \u05dc\u05e4\u05d9 ID, \u05e1\u05d5\u05d2, \u05d0\u05d5 case ID...",className:"w-full pl-10 pr-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,z.jsx)("div",{className:"flex gap-2",children:["all","pending","running","completed","failed"].map(e=>(0,z.jsx)("button",{onClick:()=>h(e),className:"px-4 py-2 rounded-lg font-medium transition-colors ".concat(o===e?"bg-blue-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"),children:"all"===e?"\u05d4\u05db\u05dc":e},e))})]})}),(0,z.jsx)("div",{className:"bg-slate-800 rounded-xl border border-white/10 overflow-hidden",children:(0,z.jsx)("div",{className:"overflow-x-auto",children:(0,z.jsxs)("table",{className:"w-full",children:[(0,z.jsx)("thead",{className:"bg-slate-700/50",children:(0,z.jsxs)("tr",{children:[(0,z.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-slate-300",children:"\u05e1\u05d8\u05d8\u05d5\u05e1"}),(0,z.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-slate-300",children:"\u05e1\u05d5\u05d2"}),(0,z.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-slate-300",children:"Task ID"}),(0,z.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-slate-300",children:"Case ID"}),(0,z.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-slate-300",children:"\u05e0\u05d5\u05e6\u05e8"}),(0,z.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-slate-300",children:"\u05d4\u05ea\u05d7\u05d9\u05dc"}),(0,z.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-slate-300",children:"\u05d4\u05e1\u05ea\u05d9\u05d9\u05dd"}),(0,z.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-slate-300",children:"\u05e4\u05e2\u05d5\u05dc\u05d5\u05ea"})]})}),(0,z.jsx)("tbody",{className:"divide-y divide-slate-700",children:0===A.length?(0,z.jsx)("tr",{children:(0,z.jsx)("td",{colSpan:8,className:"px-4 py-8 text-center text-slate-400",children:"\u05dc\u05d0 \u05e0\u05de\u05e6\u05d0\u05d5 \u05de\u05e9\u05d9\u05de\u05d5\u05ea"})}):A.map(e=>(0,z.jsxs)("tr",{className:"hover:bg-slate-700/50",children:[(0,z.jsx)("td",{className:"px-4 py-3",children:(0,z.jsxs)("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-lg border ".concat(y(e.status)),children:[v(e.status),(0,z.jsx)("span",{className:"text-sm font-medium",children:e.status})]})}),(0,z.jsx)("td",{className:"px-4 py-3 text-slate-200 text-sm",children:e.task_type}),(0,z.jsxs)("td",{className:"px-4 py-3 text-slate-300 text-sm font-mono",children:[e.task_id.substring(0,8),"..."]}),(0,z.jsx)("td",{className:"px-4 py-3 text-slate-300 text-sm font-mono",children:e.case_id?e.case_id.substring(0,8)+"...":"N/A"}),(0,z.jsx)("td",{className:"px-4 py-3 text-slate-400 text-sm",children:k(e.created_at)}),(0,z.jsx)("td",{className:"px-4 py-3 text-slate-400 text-sm",children:k(e.started_at)}),(0,z.jsx)("td",{className:"px-4 py-3 text-slate-400 text-sm",children:k(e.completed_at)}),(0,z.jsx)("td",{className:"px-4 py-3",children:(0,z.jsx)("button",{onClick:()=>g(e),className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm",children:"\u05e4\u05e8\u05d8\u05d9\u05dd"})})]},e.task_id))})]})})}),j&&(0,z.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,z.jsxs)("div",{className:"bg-slate-800 rounded-2xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto border border-white/10",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,z.jsx)("h3",{className:"text-xl font-bold text-white",children:"\u05e4\u05e8\u05d8\u05d9 \u05de\u05e9\u05d9\u05de\u05d4"}),(0,z.jsx)("button",{onClick:()=>g(null),className:"text-slate-400 hover:text-white",children:(0,z.jsx)(S.A,{size:24})})]}),(0,z.jsxs)("div",{className:"space-y-4",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("div",{className:"text-slate-400 text-sm mb-1",children:"Task ID"}),(0,z.jsx)("div",{className:"text-white font-mono text-sm",children:j.task_id})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("div",{className:"text-slate-400 text-sm mb-1",children:"\u05e1\u05d5\u05d2"}),(0,z.jsx)("div",{className:"text-white",children:j.task_type})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("div",{className:"text-slate-400 text-sm mb-1",children:"\u05e1\u05d8\u05d8\u05d5\u05e1"}),(0,z.jsxs)("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-lg border ".concat(y(j.status)),children:[v(j.status),(0,z.jsx)("span",{children:j.status})]})]}),void 0!==j.progress&&(0,z.jsxs)("div",{children:[(0,z.jsx)("div",{className:"text-slate-400 text-sm mb-1",children:"\u05d4\u05ea\u05e7\u05d3\u05de\u05d5\u05ea"}),(0,z.jsx)("div",{className:"w-full bg-slate-700 rounded-full h-2",children:(0,z.jsx)("div",{className:"bg-blue-500 h-2 rounded-full transition-all",style:{width:"".concat(j.progress,"%")}})}),(0,z.jsxs)("div",{className:"text-slate-300 text-sm mt-1",children:[j.progress,"%"]})]}),j.error&&(0,z.jsxs)("div",{children:[(0,z.jsx)("div",{className:"text-slate-400 text-sm mb-1",children:"\u05e9\u05d2\u05d9\u05d0\u05d4"}),(0,z.jsx)("div",{className:"bg-red-500/20 border border-red-500/30 rounded-lg p-3 text-red-300 text-sm",children:j.error})]}),j.traceback&&(0,z.jsxs)("div",{children:[(0,z.jsx)("div",{className:"text-slate-400 text-sm mb-1",children:"Traceback"}),(0,z.jsx)("pre",{className:"bg-slate-900 border border-slate-700 rounded-lg p-3 text-xs text-slate-300 overflow-x-auto",children:j.traceback})]}),j.result&&(0,z.jsxs)("div",{children:[(0,z.jsx)("div",{className:"text-slate-400 text-sm mb-1",children:"\u05ea\u05d5\u05e6\u05d0\u05d4"}),(0,z.jsx)("pre",{className:"bg-slate-900 border border-slate-700 rounded-lg p-3 text-xs text-slate-300 overflow-x-auto",children:JSON.stringify(j.result,null,2)})]})]})]})})]})};var G=t(3005),M=t(4919);const $=()=>{var e,s,t,a;const[i,c]=(0,l.useState)(null),[n,d]=(0,l.useState)(!0),[x,m]=(0,l.useState)(!1),[p,u]=(0,l.useState)([]),[b,j]=(0,l.useState)(!1);(0,l.useEffect)(()=>{g();const e=setInterval(()=>{document.hidden||g()},3e4);return()=>clearInterval(e)},[]);const g=async()=>{try{const e=await(0,f.apiGet)("/api/cache/stats",{showErrorToast:!1});c(e.stats),e.keys&&u(e.keys)}catch(e){_.v.error("Failed to load cache stats:",e),w.oR.error("\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05d8\u05e2\u05d9\u05e0\u05ea \u05e1\u05d8\u05d8\u05d9\u05e1\u05d8\u05d9\u05e7\u05d5\u05ea cache")}finally{d(!1)}};return n&&!i?(0,z.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,z.jsx)(O.A,{className:"animate-spin text-blue-400",size:32})}):(0,z.jsxs)("div",{className:"space-y-6",children:[(0,z.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl p-6 border border-white/10",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,z.jsxs)("div",{className:"flex items-center gap-3",children:[(0,z.jsx)(G.A,{className:"text-blue-400",size:32}),(0,z.jsxs)("div",{children:[(0,z.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Cache Management"}),(0,z.jsx)("p",{className:"text-blue-300 text-sm",children:"\u05e0\u05d9\u05d4\u05d5\u05dc cache \u05e9\u05dc \u05d4\u05d0\u05e4\u05dc\u05d9\u05e7\u05e6\u05d9\u05d4"})]})]}),(0,z.jsxs)("button",{onClick:g,disabled:n,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-slate-600 text-white rounded-lg flex items-center gap-2",children:[(0,z.jsx)(r.A,{className:n?"animate-spin":"",size:16}),"\u05e8\u05e2\u05e0\u05df"]})]}),i&&(0,z.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4",children:[(0,z.jsxs)("div",{className:"bg-slate-700/50 rounded-lg p-4 border border-slate-600",children:[(0,z.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,z.jsx)(G.A,{className:"text-blue-400",size:20}),(0,z.jsx)("div",{className:"text-slate-400 text-sm",children:'\u05e1\u05d4"\u05db \u05de\u05e4\u05ea\u05d7\u05d5\u05ea'})]}),(0,z.jsx)("div",{className:"text-2xl font-bold text-white",children:(null!==(e=i.total_keys)&&void 0!==e?e:0).toLocaleString()})]}),(0,z.jsxs)("div",{className:"bg-slate-700/50 rounded-lg p-4 border border-slate-600",children:[(0,z.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,z.jsx)(M.A,{className:"text-green-400",size:20}),(0,z.jsx)("div",{className:"text-slate-400 text-sm",children:"Hit Rate"})]}),(0,z.jsxs)("div",{className:"text-2xl font-bold text-green-400",children:[(100*(null!==(s=i.hit_rate)&&void 0!==s?s:0)).toFixed(1),"%"]})]}),(0,z.jsxs)("div",{className:"bg-slate-700/50 rounded-lg p-4 border border-slate-600",children:[(0,z.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,z.jsx)(D.A,{className:"text-red-400",size:20}),(0,z.jsx)("div",{className:"text-slate-400 text-sm",children:"Miss Rate"})]}),(0,z.jsxs)("div",{className:"text-2xl font-bold text-red-400",children:[(100*(null!==(t=i.miss_rate)&&void 0!==t?t:0)).toFixed(1),"%"]})]}),(0,z.jsxs)("div",{className:"bg-slate-700/50 rounded-lg p-4 border border-slate-600",children:[(0,z.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,z.jsx)(o.A,{className:"text-yellow-400",size:20}),(0,z.jsx)("div",{className:"text-slate-400 text-sm",children:"\u05d6\u05d9\u05db\u05e8\u05d5\u05df"})]}),(0,z.jsx)("div",{className:"text-2xl font-bold text-yellow-400",children:(e=>{if(0===e)return"0 B";const s=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,s)*100)/100+" "+["B","KB","MB","GB"][s]})(null!==(a=i.memory_usage)&&void 0!==a?a:0)})]})]})]}),i&&i.by_type&&Object.keys(i.by_type).length>0&&(0,z.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-white/10",children:[(0,z.jsx)("h3",{className:"text-xl font-bold text-white mb-4",children:"Cache \u05dc\u05e4\u05d9 \u05e1\u05d5\u05d2"}),(0,z.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(i.by_type).map(e=>{var s;let[t,l]=e;return(0,z.jsxs)("div",{className:"bg-slate-700/50 rounded-lg p-4 border border-slate-600",children:[(0,z.jsx)("div",{className:"text-slate-400 text-sm mb-1",children:t}),(0,z.jsx)("div",{className:"text-2xl font-bold text-white",children:(null!==(s=l)&&void 0!==s?s:0).toLocaleString()})]},t)})})]}),(0,z.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-white/10",children:[(0,z.jsx)("h3",{className:"text-xl font-bold text-white mb-4",children:"\u05e4\u05e2\u05d5\u05dc\u05d5\u05ea"}),(0,z.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,z.jsx)("button",{onClick:()=>(async()=>{try{m(!0),await(0,f.Al)("/api/cache/clear",{showErrorToast:!1}),w.oR.success("Cache \u05e0\u05d5\u05e7\u05d4 \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4"),await g()}catch(e){_.v.error("Failed to clear cache:",e),w.oR.error("\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05e0\u05d9\u05e7\u05d5\u05d9 cache")}finally{m(!1)}})(),disabled:x,className:"px-6 py-3 bg-red-600 hover:bg-red-700 disabled:bg-slate-600 text-white rounded-lg flex items-center gap-2",children:x?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(O.A,{className:"animate-spin",size:20}),"\u05de\u05e0\u05e7\u05d4..."]}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h.A,{size:20}),"\u05e0\u05e7\u05d4 \u05db\u05dc \u05d4-Cache"]})}),(0,z.jsxs)("button",{onClick:()=>j(!b),className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg flex items-center gap-2",children:[(0,z.jsx)(G.A,{size:20}),b?"\u05d4\u05e1\u05ea\u05e8 \u05de\u05e4\u05ea\u05d7\u05d5\u05ea":"\u05d4\u05e6\u05d2 \u05de\u05e4\u05ea\u05d7\u05d5\u05ea"]})]})]}),b&&p.length>0&&(0,z.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-white/10",children:[(0,z.jsxs)("h3",{className:"text-xl font-bold text-white mb-4",children:["\u05de\u05e4\u05ea\u05d7\u05d5\u05ea Cache (",p.length,")"]}),(0,z.jsx)("div",{className:"max-h-96 overflow-y-auto",children:(0,z.jsx)("div",{className:"space-y-2",children:p.map((e,s)=>(0,z.jsx)("div",{className:"bg-slate-700/50 rounded-lg p-3 border border-slate-600 font-mono text-sm text-slate-300",children:e},s))})})]}),b&&0===p.length&&(0,z.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-white/10 text-center",children:[(0,z.jsx)(D.A,{className:"text-slate-400 mx-auto mb-3",size:48}),(0,z.jsx)("p",{className:"text-slate-300",children:"\u05d0\u05d9\u05df \u05de\u05e4\u05ea\u05d7\u05d5\u05ea cache"})]})]})};var q=t(6682),U=t(8280),B=t(59);const J=()=>{const[e,s]=(0,l.useState)(null),[t,a]=(0,l.useState)(!0),[i,c]=(0,l.useState)(!1);(0,l.useEffect)(()=>{if(n(),i){let e=null;return e=setInterval(()=>{document.hidden||n()},6e4),()=>{e&&clearInterval(e)}}},[i]);const n=async()=>{try{const e=await(0,f.apiGet)("/api/metrics/health",{showErrorToast:!1});s(e)}catch(e){_.v.error("Failed to load health metrics:",e),w.oR.error("\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05d8\u05e2\u05d9\u05e0\u05ea metrics")}finally{a(!1)}};return t&&!e?(0,z.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,z.jsx)(O.A,{className:"animate-spin text-blue-400",size:32})}):(0,z.jsxs)("div",{className:"space-y-6",children:[(0,z.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl p-6 border border-white/10",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,z.jsxs)("div",{className:"flex items-center gap-3",children:[(0,z.jsx)(d.A,{className:"text-blue-400",size:32}),(0,z.jsxs)("div",{children:[(0,z.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Performance Metrics"}),(0,z.jsx)("p",{className:"text-blue-300 text-sm",children:"\u05e0\u05d9\u05d8\u05d5\u05e8 \u05d1\u05d9\u05e6\u05d5\u05e2\u05d9 \u05d4\u05de\u05e2\u05e8\u05db\u05ea"})]})]}),(0,z.jsxs)("div",{className:"flex items-center gap-2",children:[(0,z.jsxs)("label",{className:"flex items-center gap-2 text-slate-300",children:[(0,z.jsx)("input",{type:"checkbox",checked:i,onChange:e=>c(e.target.checked),className:"rounded"}),"\u05e8\u05e2\u05e0\u05d5\u05df \u05d0\u05d5\u05d8\u05d5\u05de\u05d8\u05d9"]}),(0,z.jsxs)("button",{onClick:n,disabled:t,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-slate-600 text-white rounded-lg flex items-center gap-2",children:[(0,z.jsx)(r.A,{className:t?"animate-spin":"",size:16}),"\u05e8\u05e2\u05e0\u05df"]})]})]}),e&&(0,z.jsx)("div",{className:"rounded-lg p-4 border ".concat("healthy"===e.status?"bg-green-500/20 border-green-500/30":"bg-red-500/20 border-red-500/30"),children:(0,z.jsxs)("div",{className:"flex items-center gap-3",children:["healthy"===e.status?(0,z.jsx)(T.A,{className:"text-green-400",size:24}):(0,z.jsx)(I.A,{className:"text-red-400",size:24}),(0,z.jsxs)("div",{children:[(0,z.jsxs)("div",{className:"text-lg font-bold text-white",children:["Status: ","healthy"===e.status?"Healthy":"Unhealthy"]}),(0,z.jsxs)("div",{className:"text-sm text-slate-300",children:["Last updated: ",new Date(e.timestamp).toLocaleString("he-IL")]})]})]})})]}),e&&(0,z.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,z.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-white/10",children:[(0,z.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,z.jsx)(q.A,{className:"text-blue-400",size:24}),(0,z.jsx)("div",{className:"text-slate-400 text-sm",children:"\u05d6\u05d9\u05db\u05e8\u05d5\u05df"})]}),(0,z.jsxs)("div",{className:"text-3xl font-bold text-white mb-2",children:[e.system.memory_mb.toLocaleString()," MB"]}),(0,z.jsx)("div",{className:"w-full bg-slate-700 rounded-full h-2",children:(0,z.jsx)("div",{className:"h-2 rounded-full ".concat(e.system.memory_percent>80?"bg-red-500":e.system.memory_percent>60?"bg-yellow-500":"bg-green-500"),style:{width:"".concat(Math.min(e.system.memory_percent,100),"%")}})}),(0,z.jsxs)("div",{className:"text-sm text-slate-400 mt-2",children:[e.system.memory_percent.toFixed(1),"% \u05d1\u05e9\u05d9\u05de\u05d5\u05e9"]})]}),(0,z.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-white/10",children:[(0,z.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,z.jsx)(U.A,{className:"text-green-400",size:24}),(0,z.jsx)("div",{className:"text-slate-400 text-sm",children:"CPU"})]}),(0,z.jsxs)("div",{className:"text-3xl font-bold text-white mb-2",children:[e.system.cpu_percent.toFixed(1),"%"]}),(0,z.jsx)("div",{className:"w-full bg-slate-700 rounded-full h-2",children:(0,z.jsx)("div",{className:"h-2 rounded-full ".concat(e.system.cpu_percent>80?"bg-red-500":e.system.cpu_percent>60?"bg-yellow-500":"bg-green-500"),style:{width:"".concat(Math.min(e.system.cpu_percent,100),"%")}})}),(0,z.jsx)("div",{className:"text-sm text-slate-400 mt-2",children:"\u05e9\u05d9\u05de\u05d5\u05e9 \u05d1\u05de\u05e2\u05d1\u05d3"})]}),(0,z.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-white/10",children:[(0,z.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,z.jsx)(B.A,{className:"text-purple-400",size:24}),(0,z.jsx)("div",{className:"text-slate-400 text-sm",children:"Threads"})]}),(0,z.jsx)("div",{className:"text-3xl font-bold text-white",children:e.system.num_threads}),(0,z.jsx)("div",{className:"text-sm text-slate-400 mt-2",children:"\u05ea\u05d4\u05dc\u05d9\u05db\u05d9\u05dd \u05e4\u05e2\u05d9\u05dc\u05d9\u05dd"})]}),(0,z.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-white/10",children:[(0,z.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,z.jsx)(m.A,{className:"text-yellow-400",size:24}),(0,z.jsx)("div",{className:"text-slate-400 text-sm",children:"Uptime"})]}),(0,z.jsx)("div",{className:"text-2xl font-bold text-white",children:(e=>{const s=Math.floor(e/86400),t=Math.floor(e%86400/3600),l=Math.floor(e%3600/60);return"".concat(s,"d ").concat(t,"h ").concat(l,"m")})(e.system.uptime_seconds)}),(0,z.jsx)("div",{className:"text-sm text-slate-400 mt-2",children:"\u05d6\u05de\u05df \u05e4\u05e2\u05d9\u05dc\u05d5\u05ea"})]})]}),e&&(0,z.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-white/10",children:[(0,z.jsxs)("h3",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[(0,z.jsx)(G.A,{className:"text-blue-400",size:24}),"Database Status"]}),(0,z.jsx)("div",{className:"rounded-lg p-4 border ".concat("healthy"===e.database.status?"bg-green-500/20 border-green-500/30":"bg-red-500/20 border-red-500/30"),children:(0,z.jsx)("div",{className:"flex items-center justify-between",children:(0,z.jsxs)("div",{className:"flex items-center gap-3",children:["healthy"===e.database.status?(0,z.jsx)(T.A,{className:"text-green-400",size:24}):(0,z.jsx)(I.A,{className:"text-red-400",size:24}),(0,z.jsxs)("div",{children:[(0,z.jsx)("div",{className:"text-lg font-bold text-white",children:"healthy"===e.database.status?"Connected":"Disconnected"}),void 0!==e.database.latency_ms&&(0,z.jsxs)("div",{className:"text-sm text-slate-300",children:["Latency: ",e.database.latency_ms,"ms"]}),e.database.error&&(0,z.jsxs)("div",{className:"text-sm text-red-300 mt-1",children:["Error: ",e.database.error]})]})]})})})]}),(0,z.jsx)("div",{className:"bg-blue-900/20 border border-blue-500/30 rounded-lg p-4",children:(0,z.jsxs)("p",{className:"text-blue-300 text-sm",children:[(0,z.jsx)(d.A,{className:"inline mr-2",size:16}),"Prometheus metrics available at: ",(0,z.jsx)("code",{className:"bg-slate-800 px-2 py-1 rounded",children:"/api/metrics"})]})})]})};var K=t(8646),X=t(5731);const Y=()=>{const[e,s]=(0,l.useState)([]),[t,a]=(0,l.useState)(null),[i,c]=(0,l.useState)(!0),[n,d]=(0,l.useState)(null),[x,o]=(0,l.useState)(""),[m,h]=(0,l.useState)(100);(0,l.useEffect)(()=>{b();const e=setInterval(b,3e4);return()=>clearInterval(e)},[m]);const b=async()=>{try{const[e,t]=await Promise.all([(0,f.apiGet)("/api/errors/list?limit=".concat(m),{showErrorToast:!1}),(0,f.apiGet)("/api/errors/stats",{showErrorToast:!1})]);s(Array.isArray(e)?e:[]),a(t)}catch(e){_.v.error("Failed to load errors:",e),w.oR.error("\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05d8\u05e2\u05d9\u05e0\u05ea \u05e9\u05d2\u05d9\u05d0\u05d5\u05ea")}finally{c(!1)}},j=e.filter(e=>{if(x){const s=x.toLowerCase();return e.message.toLowerCase().includes(s)||e.url&&e.url.toLowerCase().includes(s)||e.userAgent&&e.userAgent.toLowerCase().includes(s)}return!0});return i&&!t?(0,z.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,z.jsx)(O.A,{className:"animate-spin text-blue-400",size:32})}):(0,z.jsxs)("div",{className:"space-y-6",children:[(0,z.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl p-6 border border-white/10",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,z.jsxs)("div",{className:"flex items-center gap-3",children:[(0,z.jsx)(p.A,{className:"text-red-400",size:32}),(0,z.jsxs)("div",{children:[(0,z.jsx)("h2",{className:"text-2xl font-bold text-white",children:"\u05dc\u05d5\u05d2 \u05e9\u05d2\u05d9\u05d0\u05d5\u05ea"}),(0,z.jsx)("p",{className:"text-red-300 text-sm",children:"\u05e6\u05e4\u05d9\u05d9\u05d4 \u05d1\u05e9\u05d2\u05d9\u05d0\u05d5\u05ea \u05de\u05e2\u05e8\u05db\u05ea"})]})]}),(0,z.jsxs)("button",{onClick:b,disabled:i,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-slate-600 text-white rounded-lg flex items-center gap-2",children:[(0,z.jsx)(r.A,{className:i?"animate-spin":"",size:16}),"\u05e8\u05e2\u05e0\u05df"]})]}),t&&(0,z.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4",children:[(0,z.jsxs)("div",{className:"bg-slate-700/50 rounded-lg p-4 border border-slate-600",children:[(0,z.jsx)("div",{className:"text-slate-400 text-sm mb-1",children:'\u05e1\u05d4"\u05db \u05e9\u05d2\u05d9\u05d0\u05d5\u05ea'}),(0,z.jsx)("div",{className:"text-2xl font-bold text-white",children:t.total_errors})]}),(0,z.jsxs)("div",{className:"bg-red-500/20 rounded-lg p-4 border border-red-500/30",children:[(0,z.jsx)("div",{className:"text-red-400 text-sm mb-1",children:"\u05d0\u05d7\u05e8\u05d5\u05e0\u05d5\u05ea 24 \u05e9\u05e2\u05d5\u05ea"}),(0,z.jsx)("div",{className:"text-2xl font-bold text-red-400",children:t.errors_last_24h})]}),(0,z.jsxs)("div",{className:"bg-orange-500/20 rounded-lg p-4 border border-orange-500/30",children:[(0,z.jsx)("div",{className:"text-orange-400 text-sm mb-1",children:"\u05d0\u05d7\u05e8\u05d5\u05e0\u05d5\u05ea \u05e9\u05e2\u05d4"}),(0,z.jsx)("div",{className:"text-2xl font-bold text-orange-400",children:t.errors_last_hour})]}),(0,z.jsxs)("div",{className:"bg-slate-700/50 rounded-lg p-4 border border-slate-600",children:[(0,z.jsx)("div",{className:"text-slate-400 text-sm mb-1",children:"\u05de\u05e7\u05e1\u05d9\u05de\u05d5\u05dd \u05e9\u05de\u05d5\u05e8"}),(0,z.jsx)("div",{className:"text-2xl font-bold text-white",children:t.max_stored})]})]})]}),(0,z.jsx)("div",{className:"bg-slate-800 rounded-xl p-4 border border-white/10",children:(0,z.jsxs)("div",{className:"flex gap-4",children:[(0,z.jsxs)("div",{className:"flex-1 relative",children:[(0,z.jsx)(u.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:18}),(0,z.jsx)("input",{type:"text",value:x,onChange:e=>o(e.target.value),placeholder:"\u05d7\u05e4\u05e9 \u05d1\u05e9\u05d2\u05d9\u05d0\u05d5\u05ea...",className:"w-full pl-10 pr-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,z.jsxs)("select",{value:m,onChange:e=>h(Number(e.target.value)),className:"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",children:[(0,z.jsx)("option",{value:50,children:"50"}),(0,z.jsx)("option",{value:100,children:"100"}),(0,z.jsx)("option",{value:200,children:"200"}),(0,z.jsx)("option",{value:500,children:"500"})]})]})}),(0,z.jsx)("div",{className:"bg-slate-800 rounded-xl border border-white/10 overflow-hidden",children:(0,z.jsx)("div",{className:"overflow-x-auto",children:(0,z.jsxs)("table",{className:"w-full",children:[(0,z.jsx)("thead",{className:"bg-slate-700/50",children:(0,z.jsxs)("tr",{children:[(0,z.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-slate-300",children:"\u05ea\u05d0\u05e8\u05d9\u05da"}),(0,z.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-slate-300",children:"\u05d4\u05d5\u05d3\u05e2\u05d4"}),(0,z.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-slate-300",children:"URL"}),(0,z.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-slate-300",children:"\u05e4\u05e2\u05d5\u05dc\u05d5\u05ea"})]})}),(0,z.jsx)("tbody",{className:"divide-y divide-slate-700",children:0===j.length?(0,z.jsx)("tr",{children:(0,z.jsx)("td",{colSpan:4,className:"px-4 py-8 text-center text-slate-400",children:"\u05dc\u05d0 \u05e0\u05de\u05e6\u05d0\u05d5 \u05e9\u05d2\u05d9\u05d0\u05d5\u05ea"})}):j.map(e=>(0,z.jsxs)("tr",{className:"hover:bg-slate-700/50",children:[(0,z.jsx)("td",{className:"px-4 py-3 text-slate-400 text-sm",children:k(e.logged_at||e.timestamp)}),(0,z.jsx)("td",{className:"px-4 py-3",children:(0,z.jsx)("div",{className:"text-slate-200 text-sm max-w-md truncate",title:e.message,children:e.message})}),(0,z.jsx)("td",{className:"px-4 py-3 text-slate-400 text-sm max-w-xs truncate",title:e.url,children:e.url||"N/A"}),(0,z.jsx)("td",{className:"px-4 py-3",children:(0,z.jsx)("button",{onClick:()=>d(e),className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm",children:"\u05e4\u05e8\u05d8\u05d9\u05dd"})})]},e.id))})]})})}),n&&(0,z.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,z.jsxs)("div",{className:"bg-slate-800 rounded-2xl p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto border border-white/10",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,z.jsx)("h3",{className:"text-xl font-bold text-white",children:"\u05e4\u05e8\u05d8\u05d9 \u05e9\u05d2\u05d9\u05d0\u05d4"}),(0,z.jsx)("button",{onClick:()=>d(null),className:"text-slate-400 hover:text-white",children:(0,z.jsx)(S.A,{size:24})})]}),(0,z.jsxs)("div",{className:"space-y-4",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("div",{className:"text-slate-400 text-sm mb-1",children:"\u05d4\u05d5\u05d3\u05e2\u05d4"}),(0,z.jsx)("div",{className:"text-white bg-slate-900 rounded-lg p-3",children:n.message})]}),(0,z.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,z.jsxs)("div",{children:[(0,z.jsxs)("div",{className:"text-slate-400 text-sm mb-1 flex items-center gap-2",children:[(0,z.jsx)(K.A,{size:16}),"\u05ea\u05d0\u05e8\u05d9\u05da"]}),(0,z.jsx)("div",{className:"text-white",children:k(n.logged_at||n.timestamp)})]}),n.url&&(0,z.jsxs)("div",{children:[(0,z.jsxs)("div",{className:"text-slate-400 text-sm mb-1 flex items-center gap-2",children:[(0,z.jsx)(X.A,{size:16}),"URL"]}),(0,z.jsx)("div",{className:"text-white text-sm break-all",children:n.url})]})]}),n.userAgent&&(0,z.jsxs)("div",{children:[(0,z.jsx)("div",{className:"text-slate-400 text-sm mb-1",children:"User Agent"}),(0,z.jsx)("div",{className:"text-white text-sm bg-slate-900 rounded-lg p-3 break-all",children:n.userAgent})]}),n.stack&&(0,z.jsxs)("div",{children:[(0,z.jsx)("div",{className:"text-slate-400 text-sm mb-1",children:"Stack Trace"}),(0,z.jsx)("pre",{className:"bg-slate-900 border border-slate-700 rounded-lg p-3 text-xs text-slate-300 overflow-x-auto",children:n.stack})]}),n.componentStack&&(0,z.jsxs)("div",{children:[(0,z.jsx)("div",{className:"text-slate-400 text-sm mb-1",children:"Component Stack"}),(0,z.jsx)("pre",{className:"bg-slate-900 border border-slate-700 rounded-lg p-3 text-xs text-slate-300 overflow-x-auto",children:n.componentStack})]})]})]})})]})};var H=t(9379),Q=t(4195),W=t(9461),V=t(6955),Z=t(2626),ee=t(797),se=t(781),te=t(9892),le=t(9340),ae=t(3771),ie=t(2580),re=t(4459),ce=t(7033),ne=t(6099),de=t(8211);const xe=[{value:"basic_law",label:"\u05d7\u05d5\u05e7 \u05d9\u05e1\u05d5\u05d3",icon:Q.A},{value:"law",label:"\u05d7\u05d5\u05e7",icon:Q.A},{value:"regulations",label:"\u05ea\u05e7\u05e0\u05d5\u05ea",icon:Q.A},{value:"article",label:"\u05de\u05d0\u05de\u05e8 \u05d0\u05e7\u05d3\u05de\u05d9",icon:v.A},{value:"judicial_strategy",label:"\u05e7\u05d1\u05dc\u05ea \u05d4\u05d7\u05dc\u05d8\u05d5\u05ea \u05d5\u05d0\u05e1\u05d8\u05e8\u05d8\u05d2\u05d9\u05d4 \u05e9\u05d9\u05e4\u05d5\u05d8\u05d9\u05ea",icon:Q.A},{value:"book",label:"\u05e1\u05e4\u05e8 \u05de\u05e9\u05e4\u05d8\u05d9",icon:W.A},{value:"guideline",label:"\u05d4\u05e0\u05d7\u05d9\u05d4 \u05de\u05e7\u05e6\u05d5\u05e2\u05d9\u05ea",icon:Q.A}],oe=()=>{var e,s;const[t,a]=(0,l.useState)([]),[c,n]=(0,l.useState)(null),[d,x]=(0,l.useState)(null),[o,m]=(0,l.useState)(!0),[b,j]=(0,l.useState)(!1),[g,N]=(0,l.useState)(!1),[y,k]=(0,l.useState)(!1),[A,S]=(0,l.useState)(null),[C,F]=(0,l.useState)(""),[E,L]=(0,l.useState)(""),[R,D]=(0,l.useState)("book"),[P,M]=(0,l.useState)(""),[$,q]=(0,l.useState)(""),[U,B]=(0,l.useState)(""),[J,X]=(0,l.useState)(null),[Y,oe]=(0,l.useState)(""),[me,he]=(0,l.useState)(""),[pe,ue]=(0,l.useState)(new Set),[be,je]=(0,l.useState)([]),[ge,Ne]=(0,l.useState)(null),[ve,we]=(0,l.useState)("book"),[fe,ye]=(0,l.useState)(""),[_e,ke]=(0,l.useState)(!1),[Ae,Se]=(0,l.useState)([]),[Ce,ze]=(0,l.useState)(!1),Fe=(0,l.useRef)(null),Ee=(0,l.useRef)(null),Le=(0,l.useRef)(null),Re=(0,l.useCallback)(async()=>{try{m(!0);const[e,s,t,l]=await Promise.all([(0,f.apiGet)("/api/knowledge/documents",{showErrorToast:!1}),(0,f.apiGet)("/api/knowledge/stats",{showErrorToast:!1}),(0,f.apiGet)("/api/knowledge/learning-metrics",{showErrorToast:!1}),(0,f.apiGet)("/api/knowledge/categories",{showErrorToast:!1})]);a(e||[]),n(s),x(t),je((null===l||void 0===l?void 0:l.categories)||[])}catch(e){_.v.error("Failed to load knowledge data:",e),w.oR.error("\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05d8\u05e2\u05d9\u05e0\u05ea \u05e0\u05ea\u05d5\u05e0\u05d9 \u05d9\u05d3\u05e2")}finally{m(!1)}},[]);(0,l.useEffect)(()=>{Re()},[Re]);const Te=(0,l.useCallback)(async e=>{try{return await(0,f.apiGet)("/api/knowledge/upload-status/".concat(e))}catch(s){return null}},[]),Ie=(0,l.useCallback)((e,s)=>{Se(t=>{const l=t.findIndex(s=>s.job_id===e.job_id);if(l>=0){const i=[...t],r=t[l].globalJobId||s;if(i[l]=(0,H.A)((0,H.A)({},e),{},{globalJobId:r}),r){const s=e.total_files>0?e.processed_files/e.total_files*100:e.progress_percent;if("completed"===e.status)(0,de.wg)(r);else if("completed_with_errors"===e.status)de.dl.getState().updateJob(r,{status:"partial",progress:100,processedFiles:e.processed_files,totalFiles:e.total_files,error:"".concat(e.failed_files," \u05de\u05e1\u05de\u05db\u05d9\u05dd \u05e0\u05db\u05e9\u05dc\u05d5")});else if("failed"===e.status){var a;const s=(null===(a=e.errors)||void 0===a?void 0:a[e.errors.length-1])||"Unknown error";(0,de.vq)(r,s,!0,e.processed_files)}else(0,de.Eo)(r,s,e.current_file||void 0),de.dl.getState().updateJob(r,{processedFiles:e.processed_files,totalFiles:e.total_files,currentFile:e.current_file||void 0})}return i}return[...t,(0,H.A)((0,H.A)({},e),{},{globalJobId:s})]})},[]),Oe=(0,l.useCallback)(()=>{Le.current||(Le.current=setInterval(async()=>{const e=Ae.filter(e=>"pending"===e.status||"processing"===e.status);if(0!==e.length)for(const s of e){const e=await Te(s.job_id);e&&(Ie(e,s.globalJobId),"completed"===e.status?(w.oR.success("\u05d4\u05e2\u05dc\u05d0\u05d4 \u05d0\u05e6\u05d5\u05d5\u05ea\u05d9\u05ea \u05d4\u05d5\u05e9\u05dc\u05de\u05d4: ".concat(e.successful_files,"/").concat(e.total_files," \u05e7\u05d1\u05e6\u05d9\u05dd")),Re()):"completed_with_errors"===e.status?(w.oR.warning("\u05d4\u05e2\u05dc\u05d0\u05d4 \u05d4\u05d5\u05e9\u05dc\u05de\u05d4 \u05e2\u05dd \u05d1\u05e2\u05d9\u05d5\u05ea: ".concat(e.successful_files,"/").concat(e.total_files," \u05d4\u05e6\u05dc\u05d9\u05d7\u05d5, ").concat(e.failed_files," \u05e0\u05db\u05e9\u05dc\u05d5")),Re()):"failed"===e.status&&w.oR.error("\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05d4\u05e2\u05dc\u05d0\u05d4 \u05d0\u05e6\u05d5\u05d5\u05ea\u05d9\u05ea"))}else Le.current&&(clearInterval(Le.current),Le.current=null)},2e3))},[Ae,Te,Ie,Re]);(0,l.useEffect)(()=>(Ae.some(e=>"pending"===e.status||"processing"===e.status)&&Oe(),()=>{Le.current&&(clearInterval(Le.current),Le.current=null)}),[Ae,Oe]);const De=e=>{switch(e){case"verified":return(0,z.jsx)(T.A,{className:"text-green-400",size:16});case"partial":return(0,z.jsx)(p.A,{className:"text-yellow-400",size:16});case"conflicting":return(0,z.jsx)(I.A,{className:"text-red-400",size:16});default:return(0,z.jsx)(V.A,{className:"text-gray-400",size:16})}},Pe=e=>{var s;return(null===(s=xe.find(s=>s.value===e))||void 0===s?void 0:s.label)||e},Ge=t.filter(e=>(!Y||e.source_type===Y)&&(!me||e.category===me));return o&&!c?(0,z.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,z.jsx)(O.A,{className:"animate-spin text-blue-400",size:32})}):(0,z.jsxs)("div",{className:"space-y-6",dir:"rtl",children:[(0,z.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl p-6 border border-white/10",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,z.jsxs)("div",{className:"flex items-center gap-3",children:[(0,z.jsx)(Z.A,{className:"text-purple-400",size:32}),(0,z.jsxs)("div",{children:[(0,z.jsx)("h2",{className:"text-2xl font-bold text-white",children:"\u05e0\u05d9\u05d4\u05d5\u05dc \u05d9\u05d3\u05e2 \u05de\u05e9\u05e4\u05d8\u05d9"}),(0,z.jsx)("p",{className:"text-purple-300 text-sm",children:"\u05de\u05d0\u05d2\u05e8 \u05e1\u05e4\u05e8\u05d9\u05dd \u05d5\u05de\u05d0\u05de\u05e8\u05d9\u05dd \u05e2\u05dd \u05d0\u05d9\u05de\u05d5\u05ea \u05db\u05e4\u05d5\u05dc"})]})]}),(0,z.jsxs)("div",{className:"flex items-center gap-2",children:[(0,z.jsxs)("button",{onClick:async()=>{if(window.confirm("\u05d4\u05d0\u05dd \u05dc\u05d4\u05e8\u05d9\u05e5 \u05d0\u05d9\u05e0\u05d3\u05d5\u05e7\u05e1 \u05de\u05d7\u05d3\u05e9 \u05e9\u05dc \u05de\u05d0\u05d2\u05e8 \u05d4\u05d9\u05d3\u05e2 \u05d4\u05de\u05d5\u05d1\u05e0\u05d4? (\u05e7\u05d1\u05e6\u05d9 \u05d3\u05d9\u05e0\u05d9 \u05e8\u05d0\u05d9\u05d5\u05ea, \u05d8\u05e7\u05d8\u05d9\u05e7\u05d5\u05ea \u05d5\u05db\u05d5')"))try{k(!0),await(0,f.$P)("/api/knowledge/reindex",{}),w.oR.success("\u05d0\u05d9\u05e0\u05d3\u05d5\u05e7\u05e1 \u05de\u05d0\u05d2\u05e8 \u05d4\u05d9\u05d3\u05e2 \u05d4\u05ea\u05d7\u05d9\u05dc \u05d1\u05e8\u05e7\u05e2! \u05d4\u05de\u05e1\u05de\u05db\u05d9\u05dd \u05d9\u05d5\u05e4\u05d9\u05e2\u05d5 \u05d1\u05e7\u05e8\u05d5\u05d1."),setTimeout(()=>Re(),5e3)}catch(e){_.v.error("Reindex failed:",e),w.oR.error("\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05d0\u05d9\u05e0\u05d3\u05d5\u05e7\u05e1 \u05de\u05d0\u05d2\u05e8 \u05d4\u05d9\u05d3\u05e2")}finally{k(!1)}},disabled:y,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 text-white rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",title:"\u05d0\u05e0\u05d3\u05e7\u05e1 \u05d9\u05d3\u05e2 \u05de\u05d5\u05d1\u05e0\u05d4 (\u05d3\u05d9\u05e0\u05d9 \u05e8\u05d0\u05d9\u05d5\u05ea, \u05d8\u05e7\u05d8\u05d9\u05e7\u05d5\u05ea \u05d5\u05db\u05d5')",children:[y?(0,z.jsx)(O.A,{className:"animate-spin",size:18}):(0,z.jsx)(G.A,{size:18}),(0,z.jsx)("span",{className:"hidden sm:inline",children:y?"\u05de\u05d0\u05e0\u05d3\u05e7\u05e1...":"\u05d0\u05e0\u05d3\u05e7\u05e1 \u05d9\u05d3\u05e2 \u05de\u05d5\u05d1\u05e0\u05d4"})]}),(0,z.jsx)("button",{onClick:Re,className:"p-2 bg-white/5 hover:bg-white/10 rounded-lg transition-colors",children:(0,z.jsx)(r.A,{className:"text-white ".concat(o?"animate-spin":""),size:20})})]})]}),(0,z.jsxs)("div",{className:"bg-amber-500/10 border border-amber-500/30 rounded-xl p-4 flex items-start gap-3",children:[(0,z.jsx)(p.A,{className:"text-amber-400 mt-0.5",size:18}),(0,z.jsxs)("div",{className:"text-sm text-amber-200/90",children:[(0,z.jsx)("div",{className:"font-semibold text-amber-200",children:"\u05e4\u05e1\u05e7\u05d9 \u05d3\u05d9\u05df / \u05db\u05ea\u05d1\u05d9 \u05d8\u05e2\u05e0\u05d5\u05ea \u05de\u05e8\u05d5\u05d1\u05d9\u05dd"}),(0,z.jsxs)("div",{className:"mt-1",children:["\u05d4\u05e2\u05dc\u05d0\u05d4 \u05d5\u05e0\u05d9\u05d4\u05d5\u05dc \u05e9\u05dc \u05e4\u05e1\u05e7\u05d9 \u05d3\u05d9\u05df (\u05db\u05d5\u05dc\u05dc \u05d4\u05e2\u05dc\u05d0\u05d4 \u05de\u05e8\u05d5\u05d1\u05d4 \u05e2\u05d3 10,000 + \u05e1\u05d8\u05d8\u05d5\u05e1 \u05d0\u05d9\u05e0\u05d3\u05d5\u05e7\u05e1/\u05e0\u05d9\u05ea\u05d5\u05d7) \u05e0\u05e2\u05e9\u05d9\u05dd \u05d1\u05de\u05e1\u05da"," ",(0,z.jsx)("a",{href:"/admin/court",className:"underline text-amber-100 hover:text-white",children:"\u2696\ufe0f \u05e4\u05e1\u05e7\u05d9 \u05d3\u05d9\u05df"}),"."]})]})]}),c&&(0,z.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6",children:[(0,z.jsxs)("div",{className:"bg-white/5 rounded-xl p-4",children:[(0,z.jsxs)("div",{className:"flex items-center gap-2 text-blue-400 mb-2",children:[(0,z.jsx)(W.A,{size:20}),(0,z.jsx)("span",{className:"text-sm",children:"\u05de\u05e1\u05de\u05db\u05d9\u05dd"})]}),(0,z.jsx)("div",{className:"text-2xl font-bold text-white",children:c.documents})]}),(0,z.jsxs)("div",{className:"bg-white/5 rounded-xl p-4",children:[(0,z.jsxs)("div",{className:"flex items-center gap-2 text-green-400 mb-2",children:[(0,z.jsx)(G.A,{size:20}),(0,z.jsx)("span",{className:"text-sm",children:"\u05e7\u05d8\u05e2\u05d9\u05dd"})]}),(0,z.jsx)("div",{className:"text-2xl font-bold text-white",children:c.chunks})]}),(0,z.jsxs)("div",{className:"bg-white/5 rounded-xl p-4",children:[(0,z.jsxs)("div",{className:"flex items-center gap-2 text-purple-400 mb-2",children:[(0,z.jsx)(u.A,{size:20}),(0,z.jsx)("span",{className:"text-sm",children:"\u05e9\u05d0\u05d9\u05dc\u05ea\u05d5\u05ea"})]}),(0,z.jsx)("div",{className:"text-2xl font-bold text-white",children:(null===(e=c.quality_metrics)||void 0===e?void 0:e.total_queries)||0})]}),(0,z.jsxs)("div",{className:"bg-white/5 rounded-xl p-4",children:[(0,z.jsxs)("div",{className:"flex items-center gap-2 text-yellow-400 mb-2",children:[(0,z.jsx)(i.A,{size:20}),(0,z.jsx)("span",{className:"text-sm",children:"\u05d0\u05d7\u05d5\u05d6 \u05d4\u05e6\u05dc\u05d7\u05d4"})]}),(0,z.jsxs)("div",{className:"text-2xl font-bold text-white",children:[(100*((null===(s=c.quality_metrics)||void 0===s?void 0:s.success_rate)||0)).toFixed(1),"%"]})]})]}),(0,z.jsxs)("div",{className:"flex items-center gap-4 mt-4 text-sm",children:[(0,z.jsxs)("span",{className:"flex items-center gap-1 ".concat(null!==c&&void 0!==c&&c.chroma_available?"text-green-400":"text-red-400"),children:[null!==c&&void 0!==c&&c.chroma_available?(0,z.jsx)(T.A,{size:14}):(0,z.jsx)(I.A,{size:14}),"ChromaDB"]}),(0,z.jsxs)("span",{className:"flex items-center gap-1 ".concat(null!==c&&void 0!==c&&c.embeddings_available?"text-green-400":"text-red-400"),children:[null!==c&&void 0!==c&&c.embeddings_available?(0,z.jsx)(T.A,{size:14}):(0,z.jsx)(I.A,{size:14}),"Embeddings"]}),(null===c||void 0===c?void 0:c.embedding_model)&&(0,z.jsxs)("span",{className:"text-white/50",children:["Model: ",c.embedding_model]})]})]}),(0,z.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,z.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl p-6 border border-white/10",children:[(0,z.jsxs)("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[(0,z.jsx)(ee.A,{className:"text-green-400",size:20}),"\u05d4\u05e2\u05dc\u05d0\u05ea \u05de\u05e1\u05de\u05da \u05d7\u05d3\u05e9"]}),(0,z.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),A&&C.trim())try{j(!0);const e=new FormData;e.append("file",A),e.append("title",C.trim()),E&&e.append("author",E.trim()),e.append("source_type",R),P&&e.append("category",P),$&&e.append("publication_date",$);const s=await(0,f.yX)("/api/knowledge/upload",e);w.oR.success("\u05d4\u05de\u05e1\u05de\u05da \u05e0\u05d5\u05e1\u05e3 \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4! ".concat(s.chunks_created," \u05e7\u05d8\u05e2\u05d9\u05dd \u05e0\u05d5\u05e6\u05e8\u05d5")),S(null),F(""),L(""),D("book"),M(""),q(""),Fe.current&&(Fe.current.value=""),Re()}catch(s){_.v.error("Upload failed:",s),w.oR.error("\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05d4\u05e2\u05dc\u05d0\u05ea \u05d4\u05de\u05e1\u05de\u05da: ".concat(s instanceof Error?s.message:"Unknown error"))}finally{j(!1)}else w.oR.error("\u05e0\u05d0 \u05dc\u05d4\u05d6\u05d9\u05df \u05e7\u05d5\u05d1\u05e5 \u05d5\u05db\u05d5\u05ea\u05e8\u05ea")},className:"space-y-4",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{className:"block text-white/70 text-sm mb-2",children:"\u05e7\u05d5\u05d1\u05e5 (PDF, DOCX, TXT)"}),(0,z.jsx)("input",{ref:Fe,type:"file",accept:".pdf,.docx,.txt",onChange:e=>{var s;return S((null===(s=e.target.files)||void 0===s?void 0:s[0])||null)},className:"w-full bg-white/5 border border-white/20 rounded-lg px-4 py-2 text-white file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:bg-purple-500 file:text-white file:cursor-pointer"})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{className:"block text-white/70 text-sm mb-2",children:"\u05db\u05d5\u05ea\u05e8\u05ea *"}),(0,z.jsx)("input",{type:"text",value:C,onChange:e=>F(e.target.value),placeholder:"\u05e9\u05dd \u05d4\u05e1\u05e4\u05e8/\u05de\u05d0\u05de\u05e8",className:"w-full bg-white/5 border border-white/20 rounded-lg px-4 py-2 text-white placeholder:text-white/30",required:!0})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{className:"block text-white/70 text-sm mb-2",children:"\u05de\u05d7\u05d1\u05e8"}),(0,z.jsx)("input",{type:"text",value:E,onChange:e=>L(e.target.value),placeholder:"\u05e9\u05dd \u05d4\u05de\u05d7\u05d1\u05e8",className:"w-full bg-white/5 border border-white/20 rounded-lg px-4 py-2 text-white placeholder:text-white/30"})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{className:"block text-white/70 text-sm mb-2",children:"\u05e1\u05d5\u05d2 \u05de\u05e7\u05d5\u05e8"}),(0,z.jsx)("select",{value:R,onChange:e=>D(e.target.value),className:"w-full bg-white/5 border border-white/20 rounded-lg px-4 py-2 text-white",children:xe.map(e=>(0,z.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{className:"block text-white/70 text-sm mb-2",children:"\u05e7\u05d8\u05d2\u05d5\u05e8\u05d9\u05d4 / \u05ea\u05d9\u05e7\u05d9\u05d4"}),(0,z.jsxs)("select",{value:P,onChange:e=>M(e.target.value),className:"w-full bg-white/5 border border-white/20 rounded-lg px-4 py-2 text-white",children:[(0,z.jsx)("option",{value:"",children:"\u05d1\u05d7\u05e8 \u05e7\u05d8\u05d2\u05d5\u05e8\u05d9\u05d4..."}),be.map(e=>(0,z.jsx)("option",{value:e,children:e},e))]})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{className:"block text-white/70 text-sm mb-2",children:"\u05ea\u05d0\u05e8\u05d9\u05da \u05e4\u05e8\u05e1\u05d5\u05dd"}),(0,z.jsx)("input",{type:"text",value:$,onChange:e=>q(e.target.value),placeholder:"\u05dc\u05d3\u05d5\u05d2\u05de\u05d4: 2023",className:"w-full bg-white/5 border border-white/20 rounded-lg px-4 py-2 text-white placeholder:text-white/30"})]}),(0,z.jsx)("button",{type:"submit",disabled:b||!A||!C.trim(),className:"w-full bg-gradient-to-r from-purple-500 to-blue-500 text-white py-3 rounded-lg font-medium hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:b?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(O.A,{className:"animate-spin",size:20}),"\u05de\u05e2\u05dc\u05d4..."]}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(se.A,{size:20}),"\u05d4\u05d5\u05e1\u05e3 \u05de\u05e1\u05de\u05da"]})})]}),(0,z.jsxs)("div",{className:"mt-6 pt-6 border-t border-white/10",children:[(0,z.jsxs)("button",{onClick:()=>ze(!Ce),className:"w-full flex items-center justify-between text-white/70 hover:text-white transition-colors",children:[(0,z.jsxs)("span",{className:"flex items-center gap-2",children:[(0,z.jsx)(te.A,{size:18,className:"text-amber-400"}),"\u05d4\u05e2\u05dc\u05d0\u05d4 \u05d0\u05e6\u05d5\u05d5\u05ea\u05d9\u05ea (\u05e2\u05d3 50 \u05e7\u05d1\u05e6\u05d9\u05dd)"]}),(0,z.jsx)("span",{className:"transform transition-transform ".concat(Ce?"rotate-180":""),children:"\u25bc"})]}),Ce&&(0,z.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!ge||0===ge.length)return void w.oR.error("\u05e0\u05d0 \u05dc\u05d1\u05d7\u05d5\u05e8 \u05e7\u05d1\u05e6\u05d9\u05dd \u05dc\u05d4\u05e2\u05dc\u05d0\u05d4");if(ge.length>50)return void w.oR.error("\u05e0\u05d9\u05ea\u05df \u05dc\u05d4\u05e2\u05dc\u05d5\u05ea \u05e2\u05d3 50 \u05e7\u05d1\u05e6\u05d9\u05dd \u05d1\u05d1\u05ea \u05d0\u05d7\u05ea");const s="knowledge_".concat(Date.now());try{ke(!0),(0,de.Pr)({id:s,type:"knowledge",name:"\u05d4\u05e2\u05dc\u05d0\u05ea ".concat(ge.length," \u05de\u05e1\u05de\u05db\u05d9\u05dd \u05dc\u05de\u05d0\u05d2\u05e8 \u05d4\u05d9\u05d3\u05e2"),totalFiles:ge.length,processedFiles:0});const e=()=>{const e=new FormData;for(let s=0;s<ge.length;s++)e.append("files",ge[s]);return e.append("source_type",ve),fe&&e.append("category",fe),e};let l=null,a=null;const i=3;for(let s=1;s<=i;s++)try{l=await(0,f.yX)("/api/knowledge/upload-batch",e(),{showErrorToast:!1,timeoutMs:3e5});break}catch(t){a=t instanceof Error?t:new Error(String(t));if(!((a.message.includes("ECONNRESET")||a.message.includes("network")||a.message.includes("timeout")||a.message.includes("Failed to fetch"))&&s<i))throw a;{const e=1e3*Math.pow(2,s);w.oR.warning("\u05d1\u05e2\u05d9\u05d9\u05ea \u05d7\u05d9\u05d1\u05d5\u05e8, \u05de\u05e0\u05e1\u05d4 \u05e9\u05d5\u05d1... (\u05e0\u05d9\u05e1\u05d9\u05d5\u05df ".concat(s+1,"/").concat(i,")")),await new Promise(s=>setTimeout(s,e))}}if(!l)throw a||new Error("\u05d4\u05e2\u05dc\u05d0\u05d4 \u05e0\u05db\u05e9\u05dc\u05d4 \u05dc\u05d0\u05d7\u05e8 \u05de\u05e1\u05e4\u05e8 \u05e0\u05d9\u05e1\u05d9\u05d5\u05e0\u05d5\u05ea");w.oR.success("".concat(l.files_queued," \u05e7\u05d1\u05e6\u05d9\u05dd \u05e0\u05d5\u05e1\u05e4\u05d5 \u05dc\u05ea\u05d5\u05e8 \u05d4\u05e2\u05d9\u05d1\u05d5\u05d3"));const r={job_id:l.job_id,status:"pending",total_files:l.files_queued,processed_files:0,successful_files:0,failed_files:0,current_file:null,progress_percent:0,results:[],errors:[],globalJobId:s};Se(e=>[...e,r]),Ne(null),Ee.current&&(Ee.current.value="")}catch(l){_.v.error("Batch upload failed:",l),w.oR.error("\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05d4\u05e2\u05dc\u05d0\u05d4 \u05d0\u05e6\u05d5\u05d5\u05ea\u05d9\u05ea: ".concat(l instanceof Error?l.message:"Unknown error")),(0,de.vq)(s,l instanceof Error?l.message:"Unknown error",!0,0)}finally{ke(!1)}},className:"mt-4 space-y-4",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{className:"block text-white/70 text-sm mb-2",children:"\u05d1\u05d7\u05e8 \u05e7\u05d1\u05e6\u05d9\u05dd (PDF, DOCX, TXT)"}),(0,z.jsx)("input",{ref:Ee,type:"file",accept:".pdf,.docx,.txt",multiple:!0,onChange:e=>Ne(e.target.files),className:"w-full bg-white/5 border border-white/20 rounded-lg px-4 py-2 text-white file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:bg-amber-500 file:text-white file:cursor-pointer"}),ge&&ge.length>0&&(0,z.jsxs)("p",{className:"text-amber-400 text-sm mt-2",children:[ge.length," \u05e7\u05d1\u05e6\u05d9\u05dd \u05e0\u05d1\u05d7\u05e8\u05d5"]})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{className:"block text-white/70 text-sm mb-2",children:"\u05e1\u05d5\u05d2 \u05de\u05e7\u05d5\u05e8 (\u05dc\u05db\u05dc \u05d4\u05e7\u05d1\u05e6\u05d9\u05dd)"}),(0,z.jsx)("select",{value:ve,onChange:e=>we(e.target.value),className:"w-full bg-white/5 border border-white/20 rounded-lg px-4 py-2 text-white",children:xe.map(e=>(0,z.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{className:"block text-white/70 text-sm mb-2",children:"\u05e7\u05d8\u05d2\u05d5\u05e8\u05d9\u05d4 / \u05ea\u05d9\u05e7\u05d9\u05d4 (\u05dc\u05db\u05dc \u05d4\u05e7\u05d1\u05e6\u05d9\u05dd)"}),(0,z.jsxs)("select",{value:fe,onChange:e=>ye(e.target.value),className:"w-full bg-white/5 border border-white/20 rounded-lg px-4 py-2 text-white",children:[(0,z.jsx)("option",{value:"",children:"\u05d1\u05d7\u05e8 \u05e7\u05d8\u05d2\u05d5\u05e8\u05d9\u05d4..."}),be.map(e=>(0,z.jsx)("option",{value:e,children:e},e))]})]}),(0,z.jsx)("button",{type:"submit",disabled:_e||!ge||0===ge.length,className:"w-full bg-gradient-to-r from-amber-500 to-orange-500 text-white py-3 rounded-lg font-medium hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:_e?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(O.A,{className:"animate-spin",size:20}),"\u05de\u05e2\u05dc\u05d4 \u05e7\u05d1\u05e6\u05d9\u05dd..."]}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(te.A,{size:20}),"\u05d4\u05e2\u05dc\u05d4 ",(null===ge||void 0===ge?void 0:ge.length)||0," \u05e7\u05d1\u05e6\u05d9\u05dd"]})})]})]})]}),(0,z.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl p-6 border border-white/10",children:[(0,z.jsxs)("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[(0,z.jsx)(u.A,{className:"text-blue-400",size:20}),"\u05d7\u05d9\u05e4\u05d5\u05e9 \u05d1\u05de\u05d0\u05d2\u05e8 \u05d4\u05d9\u05d3\u05e2"]}),(0,z.jsx)("form",{onSubmit:async e=>{if(e.preventDefault(),U.trim())try{N(!0);const e=await(0,f.$P)("/api/knowledge/query",{question:U.trim(),top_k:5,verify:!0});X(e)}catch(s){_.v.error("Query failed:",s),w.oR.error("\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05d7\u05d9\u05e4\u05d5\u05e9")}finally{N(!1)}},className:"mb-4",children:(0,z.jsxs)("div",{className:"flex gap-2",children:[(0,z.jsx)("input",{type:"text",value:U,onChange:e=>B(e.target.value),placeholder:"\u05e9\u05d0\u05dc \u05e9\u05d0\u05dc\u05d4 \u05de\u05e9\u05e4\u05d8\u05d9\u05ea...",className:"flex-1 bg-white/5 border border-white/20 rounded-lg px-4 py-2 text-white placeholder:text-white/30"}),(0,z.jsx)("button",{type:"submit",disabled:g||!U.trim(),className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:g?(0,z.jsx)(O.A,{className:"animate-spin",size:20}):(0,z.jsx)(u.A,{size:20})})]})}),J&&(0,z.jsxs)("div",{className:"space-y-4",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,z.jsxs)("span",{className:"text-white/70",children:["\u05e0\u05de\u05e6\u05d0\u05d5 ",J.total_found," \u05ea\u05d5\u05e6\u05d0\u05d5\u05ea (",J.processing_time_ms.toFixed(0),"ms)"]}),(0,z.jsxs)("span",{className:"text-purple-400",children:["\u05d1\u05d9\u05d8\u05d7\u05d5\u05df: ",(100*J.overall_confidence).toFixed(0),"%"]})]}),(0,z.jsxs)("div",{className:"flex items-center gap-3 text-xs",children:[(0,z.jsxs)("span",{className:"flex items-center gap-1 text-green-400",children:[(0,z.jsx)(T.A,{size:12}),J.verification_summary.verified," \u05de\u05d0\u05d5\u05de\u05ea"]}),(0,z.jsxs)("span",{className:"flex items-center gap-1 text-yellow-400",children:[(0,z.jsx)(p.A,{size:12}),J.verification_summary.partial," \u05d7\u05dc\u05e7\u05d9"]}),(0,z.jsxs)("span",{className:"flex items-center gap-1 text-gray-400",children:[(0,z.jsx)(V.A,{size:12}),J.verification_summary.unverified," \u05dc\u05d0 \u05de\u05d0\u05d5\u05de\u05ea"]})]}),(0,z.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:J.results.map((e,s)=>(0,z.jsxs)("div",{className:"bg-white/5 rounded-lg p-4",children:[(0,z.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,z.jsxs)("div",{className:"flex items-center gap-2",children:[De(e.verification_status),(0,z.jsxs)("span",{className:"text-sm text-white/70",children:[(100*e.confidence).toFixed(0),"% \u05d1\u05d9\u05d8\u05d7\u05d5\u05df"]})]}),e.chapter&&(0,z.jsx)("span",{className:"text-xs text-purple-400",children:e.chapter})]}),(0,z.jsx)("p",{className:"text-white text-sm leading-relaxed",children:e.content}),e.citations.length>0&&(0,z.jsx)("div",{className:"mt-2 flex flex-wrap gap-1",children:e.citations.slice(0,3).map((e,s)=>(0,z.jsx)("span",{className:"text-xs bg-blue-500/20 text-blue-400 px-2 py-0.5 rounded",children:e},s))})]},s))}),J.warnings.length>0&&(0,z.jsx)("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-3",children:J.warnings.map((e,s)=>(0,z.jsxs)("p",{className:"text-yellow-400 text-sm flex items-center gap-2",children:[(0,z.jsx)(p.A,{size:14}),e]},s))})]})]})]}),Ae.length>0&&(0,z.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl p-6 border border-white/10",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,z.jsxs)("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[(0,z.jsx)(te.A,{className:"text-amber-400",size:20}),"\u05d4\u05e2\u05dc\u05d0\u05d5\u05ea \u05e4\u05e2\u05d9\u05dc\u05d5\u05ea (",Ae.filter(e=>"completed"!==e.status&&"failed"!==e.status).length,")"]}),Ae.some(e=>"completed"===e.status||"failed"===e.status)&&(0,z.jsxs)("button",{onClick:()=>{Se(e=>e.filter(e=>"pending"===e.status||"processing"===e.status))},className:"text-sm text-white/50 hover:text-white transition-colors flex items-center gap-1",children:[(0,z.jsx)(h.A,{size:14}),"\u05e0\u05e7\u05d4 \u05d4\u05d5\u05e9\u05dc\u05de\u05d5"]})]}),(0,z.jsx)("div",{className:"space-y-4",children:Ae.map(e=>(0,z.jsxs)("div",{className:"bg-white/5 rounded-xl p-4",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,z.jsxs)("div",{className:"flex items-center gap-2",children:["processing"===e.status&&(0,z.jsx)(O.A,{className:"animate-spin text-amber-400",size:18}),"pending"===e.status&&(0,z.jsx)(le.A,{className:"text-gray-400",size:18}),"completed"===e.status&&(0,z.jsx)(ae.A,{className:"text-green-400",size:18}),"failed"===e.status&&(0,z.jsx)(I.A,{className:"text-red-400",size:18}),(0,z.jsx)("span",{className:"text-white font-medium",children:"processing"===e.status?"\u05de\u05e2\u05d1\u05d3":"pending"===e.status?"\u05de\u05de\u05ea\u05d9\u05df":"completed"===e.status?"\u05d4\u05d5\u05e9\u05dc\u05dd":"\u05e0\u05db\u05e9\u05dc"})]}),(0,z.jsxs)("span",{className:"text-white/50 text-sm",children:[e.processed_files,"/",e.total_files," \u05e7\u05d1\u05e6\u05d9\u05dd"]})]}),(0,z.jsx)("div",{className:"w-full h-3 bg-white/10 rounded-full overflow-hidden mb-2",children:(0,z.jsx)("div",{className:"h-full transition-all duration-300 ".concat("completed"===e.status?"bg-gradient-to-r from-green-500 to-emerald-400":"failed"===e.status?"bg-gradient-to-r from-red-500 to-orange-400":"bg-gradient-to-r from-amber-500 to-orange-400"),style:{width:"".concat(e.progress_percent,"%")}})}),e.current_file&&"processing"===e.status&&(0,z.jsxs)("p",{className:"text-amber-400 text-sm mb-2",children:["\u05de\u05e2\u05d1\u05d3: ",e.current_file]}),(0,z.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,z.jsxs)("span",{className:"text-green-400 flex items-center gap-1",children:[(0,z.jsx)(T.A,{size:14}),e.successful_files," \u05d4\u05e6\u05dc\u05d9\u05d7\u05d5"]}),e.failed_files>0&&(0,z.jsxs)("span",{className:"text-red-400 flex items-center gap-1",children:[(0,z.jsx)(I.A,{size:14}),e.failed_files," \u05e0\u05db\u05e9\u05dc\u05d5"]}),(0,z.jsxs)("span",{className:"text-white/50",children:[e.progress_percent.toFixed(0),"%"]})]}),e.errors.length>0&&(0,z.jsxs)("div",{className:"mt-3 bg-red-500/10 border border-red-500/30 rounded-lg p-3",children:[(0,z.jsx)("p",{className:"text-red-400 text-sm font-medium mb-1",children:"\u05e9\u05d2\u05d9\u05d0\u05d5\u05ea:"}),e.errors.slice(0,3).map((e,s)=>(0,z.jsx)("p",{className:"text-red-300 text-xs",children:e},s)),e.errors.length>3&&(0,z.jsxs)("p",{className:"text-red-300 text-xs mt-1",children:["\u05d5\u05e2\u05d5\u05d3 ",e.errors.length-3," \u05e9\u05d2\u05d9\u05d0\u05d5\u05ea..."]})]}),"completed"===e.status&&e.results.length>0&&(0,z.jsx)("div",{className:"mt-3 text-sm",children:(0,z.jsxs)("details",{className:"cursor-pointer",children:[(0,z.jsxs)("summary",{className:"text-white/70 hover:text-white",children:["\u05d4\u05e6\u05d2 \u05e4\u05e8\u05d8\u05d9 \u05ea\u05d5\u05e6\u05d0\u05d5\u05ea (",e.results.length," \u05e7\u05d1\u05e6\u05d9\u05dd)"]}),(0,z.jsx)("div",{className:"mt-2 max-h-40 overflow-y-auto space-y-1",children:e.results.map((e,s)=>(0,z.jsxs)("div",{className:"flex items-center gap-2 text-xs ".concat(e.success?"text-green-400":"text-red-400"),children:[e.success?(0,z.jsx)(T.A,{size:12}):(0,z.jsx)(I.A,{size:12}),(0,z.jsx)("span",{className:"text-white/70",children:e.filename}),e.success&&e.chunks_created&&(0,z.jsxs)("span",{className:"text-white/50",children:["(",e.chunks_created," \u05e7\u05d8\u05e2\u05d9\u05dd)"]}),!e.success&&e.error&&(0,z.jsxs)("span",{className:"text-red-300",children:["- ",e.error]})]},s))})]})})]},e.job_id))})]}),(0,z.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl p-6 border border-white/10",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,z.jsxs)("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[(0,z.jsx)(v.A,{className:"text-orange-400",size:20}),"\u05de\u05e1\u05de\u05db\u05d9\u05dd \u05d1\u05de\u05d0\u05d2\u05e8 (",Ge.length,")"]}),(0,z.jsxs)("div",{className:"flex items-center gap-3",children:[(0,z.jsx)(ie.A,{size:16,className:"text-white/50"}),(0,z.jsxs)("select",{value:Y,onChange:e=>oe(e.target.value),className:"bg-white/5 border border-white/20 rounded-lg px-3 py-1 text-white text-sm",children:[(0,z.jsx)("option",{value:"",children:"\u05db\u05dc \u05d4\u05e1\u05d5\u05d2\u05d9\u05dd"}),xe.map(e=>(0,z.jsx)("option",{value:e.value,children:e.label},e.value))]}),(0,z.jsxs)("select",{value:me,onChange:e=>he(e.target.value),className:"bg-white/5 border border-white/20 rounded-lg px-3 py-1 text-white text-sm",children:[(0,z.jsx)("option",{value:"",children:"\u05db\u05dc \u05d4\u05e7\u05d8\u05d2\u05d5\u05e8\u05d9\u05d5\u05ea"}),be.map(e=>(0,z.jsx)("option",{value:e,children:e},e))]})]})]}),t.length>0&&(0,z.jsxs)("div",{className:"flex items-center justify-between mb-4 p-3 bg-white/5 rounded-lg border border-white/10",children:[(0,z.jsx)("div",{className:"flex items-center gap-3",children:(0,z.jsxs)("label",{className:"flex items-center gap-2 text-white/70 text-sm cursor-pointer",children:[(0,z.jsx)("input",{type:"checkbox",checked:pe.size===Ge.length&&Ge.length>0,onChange:()=>{pe.size===Ge.length?ue(new Set):ue(new Set(Ge.map(e=>e.id)))},className:"w-4 h-4 rounded border-white/30 bg-white/10 text-purple-500"}),pe.size>0?"\u05e0\u05d1\u05d7\u05e8\u05d5 ".concat(pe.size):"\u05d1\u05d7\u05e8 \u05d4\u05db\u05dc"]})}),(0,z.jsxs)("div",{className:"flex items-center gap-2",children:[pe.size>0&&(0,z.jsxs)("button",{onClick:async()=>{if(0!==pe.size){if(window.confirm("\u05d4\u05d0\u05dd \u05dc\u05de\u05d7\u05d5\u05e7 ".concat(pe.size," \u05de\u05e1\u05de\u05db\u05d9\u05dd \u05e9\u05e0\u05d1\u05d7\u05e8\u05d5?")))try{const e=await(0,f.$P)("/api/knowledge/documents/bulk-delete",{doc_ids:Array.from(pe)});w.oR.success("\u05e0\u05de\u05d7\u05e7\u05d5 ".concat((null===e||void 0===e?void 0:e.deleted_count)||0," \u05de\u05e1\u05de\u05db\u05d9\u05dd")),ue(new Set),Re()}catch(e){_.v.error("Bulk delete failed:",e),w.oR.error("\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05de\u05d7\u05d9\u05e7\u05ea \u05d4\u05de\u05e1\u05de\u05db\u05d9\u05dd")}}else w.oR.info("\u05dc\u05d0 \u05e0\u05d1\u05d7\u05e8\u05d5 \u05de\u05e1\u05de\u05db\u05d9\u05dd \u05dc\u05de\u05d7\u05d9\u05e7\u05d4")},className:"px-3 py-1.5 bg-red-500/20 hover:bg-red-500/30 text-red-400 rounded-lg text-sm flex items-center gap-2 transition-colors",children:[(0,z.jsx)(h.A,{size:14}),"\u05de\u05d7\u05e7 ",pe.size," \u05e0\u05d1\u05d7\u05e8\u05d9\u05dd"]}),(0,z.jsxs)("button",{onClick:async()=>{if(window.confirm("\u26a0\ufe0f \u05d4\u05d0\u05dd \u05d0\u05ea\u05d4 \u05d1\u05d8\u05d5\u05d7 \u05e9\u05d1\u05e8\u05e6\u05d5\u05e0\u05da \u05dc\u05de\u05d7\u05d5\u05e7 \u05d0\u05ea \u05db\u05dc \u05d4\u05de\u05e1\u05de\u05db\u05d9\u05dd?\n\n\u05e4\u05e2\u05d5\u05dc\u05d4 \u05d6\u05d5 \u05dc\u05d0 \u05e0\u05d9\u05ea\u05e0\u05ea \u05dc\u05d1\u05d9\u05d8\u05d5\u05dc!")&&window.confirm("\u26a0\ufe0f \u05d0\u05d9\u05e9\u05d5\u05e8 \u05e0\u05d5\u05e1\u05e3: \u05de\u05d7\u05d9\u05e7\u05ea \u05db\u05dc \u05d4\u05de\u05e1\u05de\u05db\u05d9\u05dd \u05d1\u05de\u05d0\u05d2\u05e8 \u05d4\u05d9\u05d3\u05e2?"))try{const e=await(0,f.Al)("/api/knowledge/documents");w.oR.success("\u05e0\u05de\u05d7\u05e7\u05d5 ".concat((null===e||void 0===e?void 0:e.deleted_count)||0," \u05de\u05e1\u05de\u05db\u05d9\u05dd")),ue(new Set),Re()}catch(e){_.v.error("Delete all failed:",e),w.oR.error("\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05de\u05d7\u05d9\u05e7\u05ea \u05db\u05dc \u05d4\u05de\u05e1\u05de\u05db\u05d9\u05dd")}},className:"px-3 py-1.5 bg-red-500/10 hover:bg-red-500/20 text-red-400/70 hover:text-red-400 rounded-lg text-sm flex items-center gap-2 transition-colors",title:"\u05de\u05d7\u05e7 \u05d0\u05ea \u05db\u05dc \u05d4\u05de\u05e1\u05de\u05db\u05d9\u05dd",children:[(0,z.jsx)(h.A,{size:14}),"\u05de\u05d7\u05e7 \u05d4\u05db\u05dc (",t.length,")"]})]})]}),0===Ge.length?(0,z.jsxs)("div",{className:"text-center py-12 text-white/50",children:[(0,z.jsx)(Z.A,{size:48,className:"mx-auto mb-4 opacity-30"}),(0,z.jsx)("p",{children:"\u05d0\u05d9\u05df \u05de\u05e1\u05de\u05db\u05d9\u05dd \u05d1\u05de\u05d0\u05d2\u05e8"}),(0,z.jsx)("p",{className:"text-sm",children:"\u05d4\u05e2\u05dc\u05d4 \u05e1\u05e4\u05e8\u05d9\u05dd \u05d5\u05de\u05d0\u05de\u05e8\u05d9\u05dd \u05de\u05e9\u05e4\u05d8\u05d9\u05d9\u05dd \u05db\u05d3\u05d9 \u05dc\u05d4\u05ea\u05d7\u05d9\u05dc"})]}):(0,z.jsx)("div",{className:"space-y-2",children:Ge.map(e=>(0,z.jsxs)("div",{className:"bg-white/5 rounded-lg p-4 flex items-center justify-between hover:bg-white/10 transition-colors ".concat(pe.has(e.id)?"ring-2 ring-purple-500/50":""),children:[(0,z.jsxs)("div",{className:"flex items-center gap-4",children:[(0,z.jsx)("input",{type:"checkbox",checked:pe.has(e.id),onChange:()=>{return s=e.id,void ue(e=>{const t=new Set(e);return t.has(s)?t.delete(s):t.add(s),t});var s},className:"w-4 h-4 rounded border-white/30 bg-white/10 text-purple-500"}),(0,z.jsx)("div",{className:"p-2 bg-purple-500/20 rounded-lg",children:(0,z.jsx)(W.A,{className:"text-purple-400",size:20})}),(0,z.jsxs)("div",{children:[(0,z.jsx)("h4",{className:"text-white font-medium",children:e.title}),(0,z.jsxs)("div",{className:"flex items-center gap-3 text-sm text-white/50 flex-wrap",children:[e.author&&(0,z.jsxs)("span",{className:"flex items-center gap-1",children:[(0,z.jsx)(re.A,{size:12}),e.author]}),(0,z.jsxs)("span",{className:"flex items-center gap-1",children:[(0,z.jsx)(Q.A,{size:12}),Pe(e.source_type)]}),e.category&&(0,z.jsxs)("span",{className:"flex items-center gap-1 text-cyan-400/70",children:["\ud83d\udcc1 ",e.category]}),(0,z.jsxs)("span",{className:"flex items-center gap-1",children:[(0,z.jsx)(G.A,{size:12}),e.chunks_count," \u05e7\u05d8\u05e2\u05d9\u05dd"]}),e.publication_date&&(0,z.jsxs)("span",{className:"flex items-center gap-1",children:[(0,z.jsx)(K.A,{size:12}),e.publication_date]})]})]})]}),(0,z.jsx)("button",{onClick:()=>(async(e,s)=>{if(window.confirm('\u05d4\u05d0\u05dd \u05dc\u05de\u05d7\u05d5\u05e7 \u05d0\u05ea "'.concat(s,'"?')))try{await(0,f.Al)("/api/knowledge/documents/".concat(e)),w.oR.success("\u05d4\u05de\u05e1\u05de\u05da \u05e0\u05de\u05d7\u05e7 \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4"),Re()}catch(t){_.v.error("Delete failed:",t),w.oR.error("\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05de\u05d7\u05d9\u05e7\u05ea \u05d4\u05de\u05e1\u05de\u05da")}})(e.id,e.title),className:"p-2 text-red-400 hover:bg-red-500/20 rounded-lg transition-colors",title:"\u05de\u05d7\u05e7 \u05de\u05e1\u05de\u05da",children:(0,z.jsx)(h.A,{size:18})})]},e.id))})]}),(null===c||void 0===c?void 0:c.quality_metrics)&&c.quality_metrics.total_queries>0&&(0,z.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl p-6 border border-white/10",children:[(0,z.jsxs)("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[(0,z.jsx)(ce.A,{className:"text-cyan-400",size:20}),"\u05de\u05d3\u05d3\u05d9 \u05d0\u05d9\u05db\u05d5\u05ea \u05d5\u05d0\u05d9\u05de\u05d5\u05ea"]}),(0,z.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,z.jsxs)("div",{className:"bg-green-500/10 rounded-xl p-4 border border-green-500/20",children:[(0,z.jsxs)("div",{className:"flex items-center gap-2 text-green-400 mb-2",children:[(0,z.jsx)(T.A,{size:18}),(0,z.jsx)("span",{className:"text-sm",children:"\u05de\u05d0\u05d5\u05de\u05ea"})]}),(0,z.jsx)("div",{className:"text-2xl font-bold text-white",children:c.quality_metrics.verification_stats.verified})]}),(0,z.jsxs)("div",{className:"bg-yellow-500/10 rounded-xl p-4 border border-yellow-500/20",children:[(0,z.jsxs)("div",{className:"flex items-center gap-2 text-yellow-400 mb-2",children:[(0,z.jsx)(p.A,{size:18}),(0,z.jsx)("span",{className:"text-sm",children:"\u05d7\u05dc\u05e7\u05d9"})]}),(0,z.jsx)("div",{className:"text-2xl font-bold text-white",children:c.quality_metrics.verification_stats.partial})]}),(0,z.jsxs)("div",{className:"bg-gray-500/10 rounded-xl p-4 border border-gray-500/20",children:[(0,z.jsxs)("div",{className:"flex items-center gap-2 text-gray-400 mb-2",children:[(0,z.jsx)(V.A,{size:18}),(0,z.jsx)("span",{className:"text-sm",children:"\u05dc\u05d0 \u05de\u05d0\u05d5\u05de\u05ea"})]}),(0,z.jsx)("div",{className:"text-2xl font-bold text-white",children:c.quality_metrics.verification_stats.unverified})]}),(0,z.jsxs)("div",{className:"bg-red-500/10 rounded-xl p-4 border border-red-500/20",children:[(0,z.jsxs)("div",{className:"flex items-center gap-2 text-red-400 mb-2",children:[(0,z.jsx)(I.A,{size:18}),(0,z.jsx)("span",{className:"text-sm",children:"\u05e1\u05d5\u05ea\u05e8"})]}),(0,z.jsx)("div",{className:"text-2xl font-bold text-white",children:c.quality_metrics.verification_stats.conflicting})]})]})]}),d&&(0,z.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl p-6 border border-white/10",children:[(0,z.jsxs)("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[(0,z.jsx)(ne.A,{className:"text-amber-400",size:20}),"\u05de\u05d3\u05d3\u05d9 \u05dc\u05de\u05d9\u05d3\u05d4 - \u05d4\u05ea\u05e4\u05ea\u05d7\u05d5\u05ea \u05d4\u05d9\u05d3\u05e2 \u05e9\u05dc \u05d9\u05ea\u05e8\u05d5"]}),(0,z.jsxs)("div",{className:"mb-6",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,z.jsx)("span",{className:"text-white/70",children:"\u05e6\u05d9\u05d5\u05df \u05d1\u05e8\u05d9\u05d0\u05d5\u05ea \u05d4\u05d9\u05d3\u05e2"}),(0,z.jsxs)("span",{className:"text-2xl font-bold text-white",children:[d.health_score,"/100"]})]}),(0,z.jsx)("div",{className:"w-full h-4 bg-white/10 rounded-full overflow-hidden",children:(0,z.jsx)("div",{className:"h-full transition-all duration-500 ".concat(d.health_score>=75?"bg-gradient-to-r from-green-500 to-emerald-400":d.health_score>=50?"bg-gradient-to-r from-yellow-500 to-amber-400":"bg-gradient-to-r from-red-500 to-orange-400"),style:{width:"".concat(d.health_score,"%")}})})]}),(0,z.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,z.jsxs)("div",{className:"bg-white/5 rounded-xl p-4",children:[(0,z.jsx)("h4",{className:"text-white/70 text-sm mb-3",children:"\u05d9\u05e2\u05d9\u05dc\u05d5\u05ea \u05e9\u05d0\u05d9\u05dc\u05ea\u05d5\u05ea"}),(0,z.jsxs)("div",{className:"space-y-2",children:[(0,z.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,z.jsx)("span",{className:"text-white/50",children:'\u05e1\u05d4"\u05db \u05e9\u05d0\u05d9\u05dc\u05ea\u05d5\u05ea'}),(0,z.jsx)("span",{className:"text-white",children:d.query_effectiveness.total_queries})]}),(0,z.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,z.jsx)("span",{className:"text-white/50",children:"\u05d0\u05d7\u05d5\u05d6 \u05d4\u05e6\u05dc\u05d7\u05d4"}),(0,z.jsxs)("span",{className:"text-green-400",children:[d.query_effectiveness.success_rate,"%"]})]}),(0,z.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,z.jsx)("span",{className:"text-white/50",children:"\u05d1\u05d9\u05d8\u05d7\u05d5\u05df \u05de\u05de\u05d5\u05e6\u05e2"}),(0,z.jsxs)("span",{className:"text-purple-400",children:[d.query_effectiveness.average_confidence,"%"]})]})]})]}),(0,z.jsxs)("div",{className:"bg-white/5 rounded-xl p-4",children:[(0,z.jsx)("h4",{className:"text-white/70 text-sm mb-3",children:"\u05d3\u05d9\u05d5\u05e7 \u05d0\u05d9\u05de\u05d5\u05ea"}),(0,z.jsx)("div",{className:"flex items-center justify-center mb-3",children:(0,z.jsxs)("div",{className:"relative w-20 h-20",children:[(0,z.jsxs)("svg",{className:"w-full h-full transform -rotate-90",children:[(0,z.jsx)("circle",{cx:"40",cy:"40",r:"32",stroke:"currentColor",strokeWidth:"8",fill:"none",className:"text-white/10"}),(0,z.jsx)("circle",{cx:"40",cy:"40",r:"32",stroke:"currentColor",strokeWidth:"8",fill:"none",strokeDasharray:"".concat(2.01*d.verification_accuracy.accuracy_percent," 201"),className:"text-green-400"})]}),(0,z.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,z.jsxs)("span",{className:"text-white font-bold",children:[d.verification_accuracy.accuracy_percent,"%"]})})]})})]}),(0,z.jsxs)("div",{className:"bg-white/5 rounded-xl p-4",children:[(0,z.jsx)("h4",{className:"text-white/70 text-sm mb-3",children:"\u05db\u05d9\u05e1\u05d5\u05d9 \u05d9\u05d3\u05e2"}),(0,z.jsxs)("div",{className:"space-y-2",children:[Object.entries(d.knowledge_coverage.by_source_type).map(e=>{let[s,t]=e;return(0,z.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,z.jsx)("span",{className:"text-white/50",children:Pe(s)}),(0,z.jsxs)("span",{className:"text-white",children:[t.count," \u05de\u05e1\u05de\u05db\u05d9\u05dd"]})]},s)}),0===Object.keys(d.knowledge_coverage.by_source_type).length&&(0,z.jsx)("p",{className:"text-white/30 text-sm",children:"\u05d0\u05d9\u05df \u05de\u05e1\u05de\u05db\u05d9\u05dd \u05e2\u05d3\u05d9\u05d9\u05df"})]})]})]}),d.recommendations.length>0&&(0,z.jsxs)("div",{className:"bg-amber-500/10 border border-amber-500/30 rounded-xl p-4",children:[(0,z.jsxs)("h4",{className:"text-amber-400 font-medium mb-2 flex items-center gap-2",children:[(0,z.jsx)(p.A,{size:16}),"\u05d4\u05de\u05dc\u05e6\u05d5\u05ea \u05dc\u05e9\u05d9\u05e4\u05d5\u05e8"]}),(0,z.jsx)("ul",{className:"space-y-1",children:d.recommendations.map((e,s)=>(0,z.jsxs)("li",{className:"text-white/70 text-sm flex items-start gap-2",children:[(0,z.jsx)("span",{className:"text-amber-400 mt-1",children:"\u2022"}),e]},s))})]})]})]})};var me=t(6382),he=t(8706),pe=t(4669),ue=t(5347),be=t(5087);const je={0:{name:"\u05dc\u05dc\u05d0 \u05dc\u05de\u05d9\u05d3\u05d4",description:"Free tier",color:"gray"},1:{name:"\u05dc\u05de\u05d9\u05d3\u05d4 \u05d1\u05e1\u05d9\u05e1\u05d9\u05ea",description:"\u05d4\u05e2\u05d3\u05e4\u05d5\u05ea \u05de\u05e9\u05ea\u05de\u05e9",color:"blue"},2:{name:"\u05dc\u05de\u05d9\u05d3\u05d4 \u05de\u05ea\u05e7\u05d3\u05de\u05ea",description:"\u05e0\u05d9\u05e7\u05d5\u05d3 \u05d1\u05d9\u05d8\u05d7\u05d5\u05df",color:"cyan"},3:{name:"\u05dc\u05de\u05d9\u05d3\u05d4 \u05d7\u05d5\u05e6\u05ea-\u05ea\u05d9\u05e7\u05d9\u05dd",description:"\u05e0\u05d9\u05ea\u05d5\u05d7 \u05d3\u05e4\u05d5\u05e1\u05d9\u05dd",color:"green"},4:{name:"\u05dc\u05de\u05d9\u05d3\u05d4 \u05d7\u05d5\u05e6\u05ea-\u05de\u05e9\u05ea\u05de\u05e9\u05d9\u05dd",description:"\u05ea\u05d5\u05d1\u05e0\u05d5\u05ea \u05de\u05e6\u05d8\u05d1\u05e8\u05d5\u05ea",color:"yellow"},5:{name:"\u05de\u05d8\u05d0-\u05dc\u05de\u05d9\u05d3\u05d4",description:"\u05d1\u05d7\u05d9\u05e8\u05ea \u05d0\u05dc\u05d2\u05d5\u05e8\u05d9\u05ea\u05de\u05d9\u05dd",color:"orange"},6:{name:"\u05dc\u05de\u05d9\u05d3\u05ea \u05d7\u05d9\u05d6\u05d5\u05e7",description:"Q-learning",color:"red"},7:{name:"\u05dc\u05de\u05d9\u05d3\u05d4 \u05de\u05d1\u05d5\u05e1\u05e1\u05ea \u05ea\u05d5\u05e6\u05d0\u05d5\u05ea",description:"\u05d4\u05e6\u05dc\u05d7\u05d4 \u05d1\u05e2\u05d5\u05dc\u05dd \u05d4\u05d0\u05de\u05d9\u05ea\u05d9",color:"purple"}},ge={free:"text-gray-400",basic:"text-blue-400",professional:"text-purple-400",enterprise:"text-amber-400",admin:"text-red-400"};function Ne(){var e,s,t,a,c,n;const[x,m]=(0,l.useState)(!0),[h,u]=(0,l.useState)(null),[b,j]=(0,l.useState)([]),[g,y]=(0,l.useState)(null),[k,A]=(0,l.useState)(null),[S,C]=(0,l.useState)(null),[F,E]=(0,l.useState)(null),[L,R]=(0,l.useState)(""),[I,D]=(0,l.useState)("last_active"),[P,M]=(0,l.useState)(1),[$,q]=(0,l.useState)(1),[U,B]=(0,l.useState)("overview"),[J,K]=(0,l.useState)(!1),X=(0,l.useCallback)(async()=>{try{const e=await(0,f.apiGet)("/api/admin/memory/overview",{showErrorToast:!1});u(e)}catch(e){_.v.error("Failed to load memory overview:",e),w.oR.error("\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05d8\u05e2\u05d9\u05e0\u05ea \u05e1\u05e7\u05d9\u05e8\u05ea \u05d6\u05d9\u05db\u05e8\u05d5\u05df")}},[]),Y=(0,l.useCallback)(async()=>{try{const e=new URLSearchParams({page:P.toString(),limit:"20",sort_by:I});L&&e.append("filter_tier",L);const s=await(0,f.apiGet)("/api/admin/memory/users?".concat(e),{showErrorToast:!1});j(s.users),q(s.pagination.pages)}catch(e){_.v.error("Failed to load users:",e),w.oR.error("\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05d8\u05e2\u05d9\u05e0\u05ea \u05de\u05e9\u05ea\u05de\u05e9\u05d9\u05dd")}},[P,I,L]),H=(0,l.useCallback)(async e=>{try{const s=await(0,f.apiGet)("/api/admin/memory/users/".concat(e),{showErrorToast:!1});y(s),K(!0)}catch(s){_.v.error("Failed to load user details:",s),w.oR.error("\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05d8\u05e2\u05d9\u05e0\u05ea \u05e4\u05e8\u05d8\u05d9 \u05de\u05e9\u05ea\u05de\u05e9")}},[]),Q=(0,l.useCallback)(async()=>{try{const e=await(0,f.apiGet)("/api/admin/memory/learning-analytics?days=30",{showErrorToast:!1});A(e)}catch(e){_.v.error("Failed to load learning analytics:",e)}},[]),W=(0,l.useCallback)(async()=>{try{const e=await(0,f.apiGet)("/api/admin/memory/case-analytics",{showErrorToast:!1});C(e)}catch(e){_.v.error("Failed to load case analytics:",e)}},[]),V=(0,l.useCallback)(async()=>{try{const e=await(0,f.apiGet)("/api/admin/memory/agent-analytics?days=30",{showErrorToast:!1});E(e)}catch(e){_.v.error("Failed to load agent analytics:",e)}},[]);(0,l.useEffect)(()=>{(async()=>{m(!0),await Promise.all([X(),Y(),Q(),W(),V()]),m(!1)})()},[X,Y,Q,W,V]),(0,l.useEffect)(()=>{x||Y()},[P,I,L,Y,x]);const Z=async(e,s)=>{if(window.confirm("\u05d4\u05d0\u05dd \u05dc\u05d0\u05e4\u05e1 \u05d0\u05ea ".concat(s," \u05e2\u05d1\u05d5\u05e8 \u05de\u05e9\u05ea\u05de\u05e9 \u05d6\u05d4?")))try{const t={};"profile"===s&&(t.reset_profile=!0),"learning"===s&&(t.reset_learning=!0),"case_memory"===s&&(t.reset_case_memory=!0),await(0,f.$P)("/api/admin/memory/users/".concat(e,"/reset?").concat(new URLSearchParams(t)),{}),w.oR.success("\u05d4\u05d6\u05d9\u05db\u05e8\u05d5\u05df \u05d0\u05d5\u05e4\u05e1 \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4"),(null===g||void 0===g?void 0:g.user.id)===e&&H(e),X()}catch(t){_.v.error("Failed to reset memory:",t),w.oR.error("\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05d0\u05d9\u05e4\u05d5\u05e1 \u05d6\u05d9\u05db\u05e8\u05d5\u05df")}};return x?(0,z.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,z.jsx)(O.A,{className:"animate-spin text-purple-400",size:48})}):(0,z.jsxs)("div",{className:"space-y-6",dir:"rtl",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsxs)("div",{className:"flex items-center gap-3",children:[(0,z.jsx)("div",{className:"p-3 bg-purple-500/20 rounded-xl",children:(0,z.jsx)(me.A,{className:"text-purple-400",size:28})}),(0,z.jsxs)("div",{children:[(0,z.jsx)("h2",{className:"text-2xl font-bold text-white",children:"\u05e0\u05d9\u05d4\u05d5\u05dc \u05d6\u05d9\u05db\u05e8\u05d5\u05df \u05d5\u05dc\u05de\u05d9\u05d3\u05d4"}),(0,z.jsx)("p",{className:"text-white/60 text-sm",children:"\u05e1\u05e7\u05d9\u05e8\u05d4 \u05de\u05e7\u05d9\u05e4\u05d4 \u05e9\u05dc \u05db\u05dc \u05de\u05e2\u05e8\u05db\u05d5\u05ea \u05d4\u05d6\u05d9\u05db\u05e8\u05d5\u05df"})]})]}),(0,z.jsxs)("button",{onClick:()=>{X(),Y(),Q(),W(),V()},className:"flex items-center gap-2 px-4 py-2 bg-white/10 hover:bg-white/20 rounded-lg text-white transition-colors",children:[(0,z.jsx)(r.A,{size:18}),"\u05e8\u05e2\u05e0\u05df"]})]}),(0,z.jsx)("div",{className:"flex gap-2 border-b border-white/10 pb-2",children:[{id:"overview",label:"\u05e1\u05e7\u05d9\u05e8\u05d4 \u05db\u05dc\u05dc\u05d9\u05ea",icon:ce.A},{id:"users",label:"\u05de\u05e9\u05ea\u05de\u05e9\u05d9\u05dd",icon:N.A},{id:"learning",label:"\u05dc\u05de\u05d9\u05d3\u05d4",icon:ne.A},{id:"cases",label:"\u05ea\u05d9\u05e7\u05d9\u05dd",icon:v.A},{id:"agents",label:"\u05e1\u05d5\u05db\u05e0\u05d9\u05dd",icon:o.A}].map(e=>(0,z.jsxs)("button",{onClick:()=>B(e.id),className:"flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ".concat(U===e.id?"bg-purple-500/20 text-purple-400":"text-white/60 hover:text-white hover:bg-white/10"),children:[(0,z.jsx)(e.icon,{size:18}),e.label]},e.id))}),"overview"===U&&h&&(0,z.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,z.jsxs)("div",{className:"bg-gradient-to-br from-blue-500/20 to-cyan-500/20 rounded-2xl p-5 border border-blue-500/30",children:[(0,z.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,z.jsx)(he.A,{className:"text-blue-400",size:24}),(0,z.jsx)("span",{className:"text-white font-medium",children:"\u05db\u05d9\u05e1\u05d5\u05d9 \u05e4\u05e8\u05d5\u05e4\u05d9\u05dc\u05d9\u05dd"})]}),(0,z.jsxs)("div",{className:"text-3xl font-bold text-white mb-1",children:[h.overview.profile_coverage_percent,"%"]}),(0,z.jsxs)("p",{className:"text-white/60 text-sm",children:[h.overview.users_with_profile," / ",h.overview.total_users," \u05de\u05e9\u05ea\u05de\u05e9\u05d9\u05dd"]})]}),(0,z.jsxs)("div",{className:"bg-gradient-to-br from-purple-500/20 to-pink-500/20 rounded-2xl p-5 border border-purple-500/30",children:[(0,z.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,z.jsx)(me.A,{className:"text-purple-400",size:24}),(0,z.jsx)("span",{className:"text-white font-medium",children:"\u05de\u05e9\u05ea\u05de\u05e9\u05d9\u05dd \u05e2\u05dd \u05dc\u05de\u05d9\u05d3\u05d4"})]}),(0,z.jsx)("div",{className:"text-3xl font-bold text-white mb-1",children:h.overview.users_with_learning}),(0,z.jsxs)("p",{className:"text-white/60 text-sm",children:["\u05de\u05ea\u05d5\u05da ",h.overview.total_users," \u05de\u05e9\u05ea\u05de\u05e9\u05d9\u05dd"]})]}),(0,z.jsxs)("div",{className:"bg-gradient-to-br from-green-500/20 to-emerald-500/20 rounded-2xl p-5 border border-green-500/30",children:[(0,z.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,z.jsx)(G.A,{className:"text-green-400",size:24}),(0,z.jsx)("span",{className:"text-white font-medium",children:"\u05d6\u05d9\u05db\u05e8\u05d5\u05df \u05ea\u05d9\u05e7\u05d9\u05dd"})]}),(0,z.jsxs)("div",{className:"text-3xl font-bold text-white mb-1",children:[h.case_memory.memory_coverage_percent,"%"]}),(0,z.jsxs)("p",{className:"text-white/60 text-sm",children:[h.case_memory.cases_with_memory," / ",h.case_memory.total_cases," \u05ea\u05d9\u05e7\u05d9\u05dd"]})]}),(0,z.jsxs)("div",{className:"bg-gradient-to-br from-amber-500/20 to-orange-500/20 rounded-2xl p-5 border border-amber-500/30",children:[(0,z.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,z.jsx)(pe.A,{className:"text-amber-400",size:24}),(0,z.jsx)("span",{className:"text-white font-medium",children:"\u05e9\u05d9\u05d7\u05d5\u05ea"})]}),(0,z.jsx)("div",{className:"text-3xl font-bold text-white mb-1",children:h.chat_stats.total_messages.toLocaleString()}),(0,z.jsxs)("p",{className:"text-white/60 text-sm",children:[h.chat_stats.total_sessions," \u05e9\u05d9\u05d7\u05d5\u05ea, ",h.chat_stats.avg_messages_per_session," \u05de\u05de\u05d5\u05e6\u05e2"]})]}),(0,z.jsxs)("div",{className:"col-span-2 bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl p-5 border border-white/10",children:[(0,z.jsxs)("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[(0,z.jsx)(ue.A,{className:"text-purple-400",size:20}),"\u05d4\u05ea\u05e4\u05dc\u05d2\u05d5\u05ea \u05e8\u05de\u05d5\u05ea \u05dc\u05de\u05d9\u05d3\u05d4"]}),(0,z.jsx)("div",{className:"space-y-2",children:Object.entries(h.learning_levels).map(e=>{let[s,t]=e;const l=je[parseInt(s)]||{name:"Level ".concat(s),color:"gray"},a=t/Math.max(h.overview.total_users,1)*100;return(0,z.jsxs)("div",{className:"flex items-center gap-3",children:[(0,z.jsxs)("span",{className:"w-24 text-white/70 text-sm",children:["L",s,": ",l.name]}),(0,z.jsx)("div",{className:"flex-1 h-3 bg-white/10 rounded-full overflow-hidden",children:(0,z.jsx)("div",{className:"h-full bg-".concat(l.color,"-500"),style:{width:"".concat(a,"%"),backgroundColor:"var(--".concat(l.color,"-500, #8b5cf6)")}})}),(0,z.jsx)("span",{className:"w-12 text-white/70 text-sm text-left",children:t})]},s)})})]}),(0,z.jsxs)("div",{className:"col-span-2 bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl p-5 border border-white/10",children:[(0,z.jsxs)("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[(0,z.jsx)(i.A,{className:"text-amber-400",size:20}),"\u05d4\u05ea\u05e4\u05dc\u05d2\u05d5\u05ea \u05de\u05e0\u05d5\u05d9\u05d9\u05dd"]}),(0,z.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:Object.entries(h.tier_distribution).map(e=>{let[s,t]=e;return(0,z.jsxs)("div",{className:"bg-white/5 rounded-xl p-4 text-center",children:[(0,z.jsx)("div",{className:"text-2xl font-bold ".concat(ge[s]||"text-white"),children:t}),(0,z.jsx)("div",{className:"text-white/60 text-sm capitalize",children:s})]},s)})})]}),(0,z.jsxs)("div",{className:"col-span-full bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl p-5 border border-white/10",children:[(0,z.jsxs)("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[(0,z.jsx)(d.A,{className:"text-cyan-400",size:20}),"\u05e9\u05dc\u05de\u05d5\u05ea \u05e4\u05e8\u05d5\u05e4\u05d9\u05dc\u05d9\u05dd"]}),(0,z.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,z.jsxs)("div",{className:"bg-green-500/10 rounded-xl p-4 text-center border border-green-500/30",children:[(0,z.jsx)(T.A,{className:"mx-auto text-green-400 mb-2",size:32}),(0,z.jsx)("div",{className:"text-2xl font-bold text-green-400",children:h.profile_completeness.complete}),(0,z.jsx)("div",{className:"text-white/60 text-sm",children:"\u05de\u05dc\u05d0\u05d9\u05dd (80%+)"})]}),(0,z.jsxs)("div",{className:"bg-amber-500/10 rounded-xl p-4 text-center border border-amber-500/30",children:[(0,z.jsx)(p.A,{className:"mx-auto text-amber-400 mb-2",size:32}),(0,z.jsx)("div",{className:"text-2xl font-bold text-amber-400",children:h.profile_completeness.partial}),(0,z.jsx)("div",{className:"text-white/60 text-sm",children:"\u05d7\u05dc\u05e7\u05d9\u05d9\u05dd (30-80%)"})]}),(0,z.jsxs)("div",{className:"bg-red-500/10 rounded-xl p-4 text-center border border-red-500/30",children:[(0,z.jsx)(he.A,{className:"mx-auto text-red-400 mb-2",size:32}),(0,z.jsx)("div",{className:"text-2xl font-bold text-red-400",children:h.profile_completeness.empty}),(0,z.jsx)("div",{className:"text-white/60 text-sm",children:"\u05e8\u05d9\u05e7\u05d9\u05dd (<30%)"})]})]})]})]}),"users"===U&&(0,z.jsxs)("div",{className:"space-y-4",children:[(0,z.jsxs)("div",{className:"flex items-center gap-4 bg-white/5 rounded-xl p-4",children:[(0,z.jsx)(ie.A,{className:"text-white/50",size:20}),(0,z.jsxs)("select",{value:L,onChange:e=>{R(e.target.value),M(1)},className:"bg-white/10 border border-white/20 rounded-lg px-3 py-2 text-white",children:[(0,z.jsx)("option",{value:"",children:"\u05db\u05dc \u05d4\u05de\u05e0\u05d5\u05d9\u05d9\u05dd"}),(0,z.jsx)("option",{value:"free",children:"Free"}),(0,z.jsx)("option",{value:"basic",children:"Basic"}),(0,z.jsx)("option",{value:"professional",children:"Professional"}),(0,z.jsx)("option",{value:"enterprise",children:"Enterprise"})]}),(0,z.jsxs)("select",{value:I,onChange:e=>{D(e.target.value),M(1)},className:"bg-white/10 border border-white/20 rounded-lg px-3 py-2 text-white",children:[(0,z.jsx)("option",{value:"last_active",children:"\u05e4\u05e2\u05d9\u05dc\u05d5\u05ea \u05d0\u05d7\u05e8\u05d5\u05e0\u05d4"}),(0,z.jsx)("option",{value:"memory_score",children:"\u05e0\u05d9\u05e7\u05d5\u05d3 \u05d6\u05d9\u05db\u05e8\u05d5\u05df"}),(0,z.jsx)("option",{value:"learning_level",children:"\u05e8\u05de\u05ea \u05dc\u05de\u05d9\u05d3\u05d4"}),(0,z.jsx)("option",{value:"name",children:"\u05e9\u05dd"})]})]}),(0,z.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl border border-white/10 overflow-hidden",children:[(0,z.jsxs)("table",{className:"w-full",children:[(0,z.jsx)("thead",{className:"bg-white/5",children:(0,z.jsxs)("tr",{children:[(0,z.jsx)("th",{className:"text-right text-white/70 px-4 py-3 font-medium",children:"\u05de\u05e9\u05ea\u05de\u05e9"}),(0,z.jsx)("th",{className:"text-right text-white/70 px-4 py-3 font-medium",children:"\u05de\u05e0\u05d5\u05d9"}),(0,z.jsx)("th",{className:"text-right text-white/70 px-4 py-3 font-medium",children:"\u05e8\u05de\u05ea \u05dc\u05de\u05d9\u05d3\u05d4"}),(0,z.jsx)("th",{className:"text-right text-white/70 px-4 py-3 font-medium",children:"\u05e0\u05d9\u05e7\u05d5\u05d3 \u05d6\u05d9\u05db\u05e8\u05d5\u05df"}),(0,z.jsx)("th",{className:"text-right text-white/70 px-4 py-3 font-medium",children:"\u05ea\u05d9\u05e7\u05d9\u05dd"}),(0,z.jsx)("th",{className:"text-right text-white/70 px-4 py-3 font-medium",children:"\u05d4\u05d5\u05d3\u05e2\u05d5\u05ea"}),(0,z.jsx)("th",{className:"text-right text-white/70 px-4 py-3 font-medium",children:"\u05e4\u05e2\u05d5\u05dc\u05d5\u05ea"})]})}),(0,z.jsx)("tbody",{children:b.map(e=>{var s;return(0,z.jsxs)("tr",{className:"border-t border-white/5 hover:bg-white/5",children:[(0,z.jsx)("td",{className:"px-4 py-3",children:(0,z.jsxs)("div",{className:"flex items-center gap-3",children:[(0,z.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center ".concat(e.has_profile?"bg-green-500/20":"bg-white/10"),children:(0,z.jsx)(he.A,{className:e.has_profile?"text-green-400":"text-white/50",size:20})}),(0,z.jsxs)("div",{children:[(0,z.jsx)("div",{className:"text-white font-medium",children:e.name}),(0,z.jsx)("div",{className:"text-white/50 text-sm",children:e.email})]})]})}),(0,z.jsx)("td",{className:"px-4 py-3",children:(0,z.jsx)("span",{className:"px-2 py-1 rounded-lg text-sm ".concat(ge[e.tier]," bg-white/10"),children:e.tier})}),(0,z.jsx)("td",{className:"px-4 py-3",children:(0,z.jsxs)("div",{className:"flex items-center gap-2",children:[(0,z.jsx)("span",{className:"text-white",children:e.learning_level}),(0,z.jsx)("span",{className:"text-white/50 text-sm",children:(null===(s=je[e.learning_level])||void 0===s?void 0:s.name)||""})]})}),(0,z.jsx)("td",{className:"px-4 py-3",children:(0,z.jsxs)("div",{className:"flex items-center gap-2",children:[(0,z.jsx)("div",{className:"w-16 h-2 bg-white/10 rounded-full overflow-hidden",children:(0,z.jsx)("div",{className:"h-full ".concat(e.memory_score>=80?"bg-green-500":e.memory_score>=30?"bg-amber-500":"bg-red-500"),style:{width:"".concat(e.memory_score,"%")}})}),(0,z.jsxs)("span",{className:"text-white/70 text-sm",children:[e.memory_score,"%"]})]})}),(0,z.jsx)("td",{className:"px-4 py-3 text-white/70",children:e.case_count}),(0,z.jsx)("td",{className:"px-4 py-3 text-white/70",children:e.message_count}),(0,z.jsx)("td",{className:"px-4 py-3",children:(0,z.jsx)("button",{onClick:()=>H(e.id),className:"p-2 hover:bg-white/10 rounded-lg text-white/70 hover:text-white transition-colors",title:"\u05e6\u05e4\u05d4 \u05d1\u05e4\u05e8\u05d8\u05d9\u05dd",children:(0,z.jsx)(be.A,{size:18})})})]},e.id)})})]}),$>1&&(0,z.jsxs)("div",{className:"flex items-center justify-center gap-2 p-4 border-t border-white/10",children:[(0,z.jsx)("button",{onClick:()=>M(e=>Math.max(1,e-1)),disabled:1===P,className:"px-3 py-1 bg-white/10 rounded-lg text-white disabled:opacity-50",children:"\u05d4\u05e7\u05d5\u05d3\u05dd"}),(0,z.jsxs)("span",{className:"text-white/70",children:["\u05e2\u05de\u05d5\u05d3 ",P," \u05de\u05ea\u05d5\u05da ",$]}),(0,z.jsx)("button",{onClick:()=>M(e=>Math.min($,e+1)),disabled:P===$,className:"px-3 py-1 bg-white/10 rounded-lg text-white disabled:opacity-50",children:"\u05d4\u05d1\u05d0"})]})]})]}),"learning"===U&&k&&(0,z.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,z.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl p-5 border border-white/10",children:[(0,z.jsx)("h3",{className:"text-lg font-bold text-white mb-4",children:"\u05e1\u05d9\u05db\u05d5\u05dd \u05dc\u05de\u05d9\u05d3\u05d4"}),(0,z.jsxs)("div",{className:"space-y-3",children:[(0,z.jsxs)("div",{className:"flex justify-between",children:[(0,z.jsx)("span",{className:"text-white/70",children:"\u05de\u05e9\u05ea\u05de\u05e9\u05d9\u05dd \u05e2\u05dd \u05dc\u05de\u05d9\u05d3\u05d4"}),(0,z.jsx)("span",{className:"text-white font-medium",children:k.totals.users_with_learning})]}),(0,z.jsxs)("div",{className:"flex justify-between",children:[(0,z.jsx)("span",{className:"text-white/70",children:'\u05e1\u05d4"\u05db \u05d0\u05d9\u05e0\u05d8\u05e8\u05d0\u05e7\u05e6\u05d9\u05d5\u05ea'}),(0,z.jsx)("span",{className:"text-white font-medium",children:k.totals.total_interactions.toLocaleString()})]}),(0,z.jsxs)("div",{className:"flex justify-between",children:[(0,z.jsx)("span",{className:"text-white/70",children:"\u05ea\u05d9\u05e7\u05d5\u05e0\u05d9\u05dd"}),(0,z.jsx)("span",{className:"text-white font-medium",children:k.totals.total_corrections})]}),(0,z.jsxs)("div",{className:"flex justify-between",children:[(0,z.jsx)("span",{className:"text-white/70",children:"\u05e4\u05d9\u05d3\u05d1\u05e7"}),(0,z.jsx)("span",{className:"text-white font-medium",children:k.totals.total_feedback})]})]})]}),(0,z.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl p-5 border border-white/10",children:[(0,z.jsx)("h3",{className:"text-lg font-bold text-white mb-4",children:"\u05de\u05de\u05d5\u05e6\u05e2\u05d9\u05dd"}),(0,z.jsxs)("div",{className:"space-y-3",children:[(0,z.jsxs)("div",{className:"flex justify-between",children:[(0,z.jsx)("span",{className:"text-white/70",children:"\u05e8\u05de\u05ea \u05dc\u05de\u05d9\u05d3\u05d4 \u05de\u05de\u05d5\u05e6\u05e2\u05ea"}),(0,z.jsx)("span",{className:"text-white font-medium",children:k.averages.avg_learning_level})]}),(0,z.jsxs)("div",{className:"flex justify-between",children:[(0,z.jsx)("span",{className:"text-white/70",children:"\u05d0\u05d9\u05e0\u05d8\u05e8\u05d0\u05e7\u05e6\u05d9\u05d5\u05ea \u05dc\u05de\u05e9\u05ea\u05de\u05e9"}),(0,z.jsx)("span",{className:"text-white font-medium",children:k.averages.avg_interactions_per_user})]})]})]}),(0,z.jsxs)("div",{className:"col-span-full bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl p-5 border border-white/10",children:[(0,z.jsx)("h3",{className:"text-lg font-bold text-white mb-4",children:"\u05d0\u05e4\u05e7\u05d8\u05d9\u05d1\u05d9\u05d5\u05ea \u05dc\u05de\u05d9\u05d3\u05d4"}),(0,z.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,z.jsxs)("div",{className:"bg-white/5 rounded-xl p-4 text-center",children:[(0,z.jsxs)("div",{className:"text-3xl font-bold text-cyan-400",children:[k.effectiveness.correction_rate,"%"]}),(0,z.jsx)("div",{className:"text-white/60 text-sm",children:"\u05e9\u05d9\u05e2\u05d5\u05e8 \u05ea\u05d9\u05e7\u05d5\u05e0\u05d9\u05dd"})]}),(0,z.jsxs)("div",{className:"bg-white/5 rounded-xl p-4 text-center",children:[(0,z.jsxs)("div",{className:"text-3xl font-bold text-purple-400",children:[k.effectiveness.feedback_rate,"%"]}),(0,z.jsx)("div",{className:"text-white/60 text-sm",children:"\u05e9\u05d9\u05e2\u05d5\u05e8 \u05e4\u05d9\u05d3\u05d1\u05e7"})]})]})]})]}),"cases"===U&&S&&(0,z.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,z.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl p-5 border border-white/10",children:[(0,z.jsx)("h3",{className:"text-lg font-bold text-white mb-4",children:"\u05e1\u05d9\u05db\u05d5\u05dd \u05ea\u05d9\u05e7\u05d9\u05dd"}),(0,z.jsxs)("div",{className:"space-y-3",children:[(0,z.jsxs)("div",{className:"flex justify-between",children:[(0,z.jsx)("span",{className:"text-white/70",children:'\u05e1\u05d4"\u05db \u05ea\u05d9\u05e7\u05d9\u05dd'}),(0,z.jsx)("span",{className:"text-white font-medium",children:S.totals.cases})]}),(0,z.jsxs)("div",{className:"flex justify-between",children:[(0,z.jsx)("span",{className:"text-white/70",children:"\u05ea\u05d9\u05e7\u05d9\u05dd \u05e2\u05dd \u05d6\u05d9\u05db\u05e8\u05d5\u05df"}),(0,z.jsx)("span",{className:"text-white font-medium",children:S.totals.cases_with_memory})]}),(0,z.jsxs)("div",{className:"flex justify-between",children:[(0,z.jsx)("span",{className:"text-white/70",children:"\u05db\u05d9\u05e1\u05d5\u05d9 \u05d6\u05d9\u05db\u05e8\u05d5\u05df"}),(0,z.jsxs)("span",{className:"text-green-400 font-medium",children:[S.coverage.memory_coverage_percent,"%"]})]})]})]}),(0,z.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl p-5 border border-white/10",children:[(0,z.jsx)("h3",{className:"text-lg font-bold text-white mb-4",children:"\u05e0\u05ea\u05d5\u05e0\u05d9 \u05e0\u05d9\u05ea\u05d5\u05d7"}),(0,z.jsxs)("div",{className:"space-y-3",children:[(0,z.jsxs)("div",{className:"flex justify-between",children:[(0,z.jsx)("span",{className:"text-white/70",children:"\u05d8\u05e2\u05e0\u05d5\u05ea"}),(0,z.jsx)("span",{className:"text-white font-medium",children:S.totals.claims.toLocaleString()})]}),(0,z.jsxs)("div",{className:"flex justify-between",children:[(0,z.jsx)("span",{className:"text-white/70",children:"\u05e1\u05ea\u05d9\u05e8\u05d5\u05ea"}),(0,z.jsx)("span",{className:"text-red-400 font-medium",children:S.totals.contradictions})]}),(0,z.jsxs)("div",{className:"flex justify-between",children:[(0,z.jsx)("span",{className:"text-white/70",children:"\u05d9\u05e9\u05d5\u05d9\u05d5\u05ea"}),(0,z.jsx)("span",{className:"text-cyan-400 font-medium",children:S.totals.entities})]}),(0,z.jsxs)("div",{className:"flex justify-between",children:[(0,z.jsx)("span",{className:"text-white/70",children:"\u05d8\u05d5\u05e7\u05e0\u05d9\u05dd"}),(0,z.jsx)("span",{className:"text-white font-medium",children:S.totals.tokens_used.toLocaleString()})]})]})]}),(0,z.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl p-5 border border-white/10",children:[(0,z.jsx)("h3",{className:"text-lg font-bold text-white mb-4",children:"\u05de\u05de\u05d5\u05e6\u05e2\u05d9\u05dd \u05dc\u05ea\u05d9\u05e7"}),(0,z.jsxs)("div",{className:"space-y-3",children:[(0,z.jsxs)("div",{className:"flex justify-between",children:[(0,z.jsx)("span",{className:"text-white/70",children:"\u05d8\u05e2\u05e0\u05d5\u05ea"}),(0,z.jsx)("span",{className:"text-white font-medium",children:S.averages.claims_per_case})]}),(0,z.jsxs)("div",{className:"flex justify-between",children:[(0,z.jsx)("span",{className:"text-white/70",children:"\u05e1\u05ea\u05d9\u05e8\u05d5\u05ea"}),(0,z.jsx)("span",{className:"text-white font-medium",children:S.averages.contradictions_per_case})]}),(0,z.jsxs)("div",{className:"flex justify-between",children:[(0,z.jsx)("span",{className:"text-white/70",children:"\u05d9\u05e9\u05d5\u05d9\u05d5\u05ea"}),(0,z.jsx)("span",{className:"text-white font-medium",children:S.averages.entities_per_case})]}),(0,z.jsxs)("div",{className:"flex justify-between",children:[(0,z.jsx)("span",{className:"text-white/70",children:"\u05d8\u05d5\u05e7\u05e0\u05d9\u05dd"}),(0,z.jsx)("span",{className:"text-white font-medium",children:S.averages.tokens_per_case.toLocaleString()})]})]})]}),(0,z.jsxs)("div",{className:"col-span-full bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl p-5 border border-white/10",children:[(0,z.jsx)("h3",{className:"text-lg font-bold text-white mb-4",children:"\u05d4\u05ea\u05e4\u05dc\u05d2\u05d5\u05ea \u05e1\u05d8\u05d8\u05d5\u05e1\u05d9\u05dd"}),(0,z.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:Object.entries(S.status_distribution).map(e=>{let[s,t]=e;return(0,z.jsxs)("div",{className:"bg-white/5 rounded-xl p-4 text-center",children:[(0,z.jsx)("div",{className:"text-2xl font-bold text-white",children:t}),(0,z.jsx)("div",{className:"text-white/60 text-sm",children:s})]},s)})})]})]}),"agents"===U&&F&&(0,z.jsxs)("div",{className:"space-y-4",children:[(0,z.jsx)("div",{className:"bg-white/5 rounded-xl p-4 text-center",children:(0,z.jsxs)("span",{className:"text-white/70",children:["\u05ea\u05e7\u05d5\u05e4\u05d4: ",F.period_days," \u05d9\u05de\u05d9\u05dd | \u05ea\u05d9\u05e7\u05d9\u05dd \u05e9\u05e0\u05d5\u05ea\u05d7\u05d5: ",F.cases_analyzed]})}),(0,z.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(F.agent_stats).map(e=>{let[s,t]=e;return(0,z.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl p-5 border border-white/10",children:[(0,z.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,z.jsx)(o.A,{className:"text-amber-400",size:24}),(0,z.jsx)("span",{className:"text-white font-bold capitalize",children:s})]}),(0,z.jsxs)("div",{className:"space-y-2",children:[(0,z.jsxs)("div",{className:"flex justify-between",children:[(0,z.jsx)("span",{className:"text-white/70",children:"\u05d4\u05e8\u05e6\u05d5\u05ea"}),(0,z.jsx)("span",{className:"text-white font-medium",children:t.runs})]}),(0,z.jsxs)("div",{className:"flex justify-between",children:[(0,z.jsx)("span",{className:"text-white/70",children:"\u05d4\u05e6\u05dc\u05d7\u05d5\u05ea"}),(0,z.jsx)("span",{className:"text-green-400 font-medium",children:t.success})]}),(0,z.jsxs)("div",{className:"flex justify-between",children:[(0,z.jsx)("span",{className:"text-white/70",children:"\u05e9\u05d9\u05e2\u05d5\u05e8 \u05d4\u05e6\u05dc\u05d7\u05d4"}),(0,z.jsxs)("span",{className:"font-medium ".concat(t.success_rate>=90?"text-green-400":t.success_rate>=70?"text-amber-400":"text-red-400"),children:[t.success_rate,"%"]})]}),void 0!==t.total_pages&&(0,z.jsxs)("div",{className:"flex justify-between",children:[(0,z.jsx)("span",{className:"text-white/70",children:"\u05e2\u05de\u05d5\u05d3\u05d9\u05dd"}),(0,z.jsx)("span",{className:"text-white font-medium",children:t.total_pages.toLocaleString()})]}),void 0!==t.total_claims&&(0,z.jsxs)("div",{className:"flex justify-between",children:[(0,z.jsx)("span",{className:"text-white/70",children:"\u05d8\u05e2\u05e0\u05d5\u05ea"}),(0,z.jsx)("span",{className:"text-white font-medium",children:t.total_claims.toLocaleString()})]}),void 0!==t.total_entities&&(0,z.jsxs)("div",{className:"flex justify-between",children:[(0,z.jsx)("span",{className:"text-white/70",children:"\u05d9\u05e9\u05d5\u05d9\u05d5\u05ea"}),(0,z.jsx)("span",{className:"text-white font-medium",children:t.total_entities})]}),void 0!==t.total_found&&(0,z.jsxs)("div",{className:"flex justify-between",children:[(0,z.jsx)("span",{className:"text-white/70",children:"\u05e1\u05ea\u05d9\u05e8\u05d5\u05ea"}),(0,z.jsx)("span",{className:"text-white font-medium",children:t.total_found})]}),void 0!==t.total_insights&&(0,z.jsxs)("div",{className:"flex justify-between",children:[(0,z.jsx)("span",{className:"text-white/70",children:"\u05ea\u05d5\u05d1\u05e0\u05d5\u05ea"}),(0,z.jsx)("span",{className:"text-white font-medium",children:t.total_insights})]})]})]},s)})})]}),J&&g&&(0,z.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:(0,z.jsxs)("div",{className:"bg-slate-900 rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,z.jsxs)("div",{className:"sticky top-0 bg-slate-900 border-b border-white/10 p-4 flex items-center justify-between",children:[(0,z.jsxs)("div",{className:"flex items-center gap-3",children:[(0,z.jsx)(he.A,{className:"text-purple-400",size:32}),(0,z.jsxs)("div",{children:[(0,z.jsx)("h3",{className:"text-xl font-bold text-white",children:g.user.name}),(0,z.jsx)("p",{className:"text-white/60 text-sm",children:g.user.email})]})]}),(0,z.jsx)("button",{onClick:()=>K(!1),className:"p-2 hover:bg-white/10 rounded-lg text-white/70 hover:text-white",children:"\u2715"})]}),(0,z.jsxs)("div",{className:"p-6 space-y-6",children:[(0,z.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,z.jsxs)("div",{className:"bg-white/5 rounded-xl p-4 text-center",children:[(0,z.jsx)("div",{className:"text-lg font-bold ".concat(ge[g.user.tier]),children:g.user.tier}),(0,z.jsx)("div",{className:"text-white/60 text-sm",children:"\u05de\u05e0\u05d5\u05d9"})]}),(0,z.jsxs)("div",{className:"bg-white/5 rounded-xl p-4 text-center",children:[(0,z.jsx)("div",{className:"text-lg font-bold text-white",children:g.learning.level}),(0,z.jsx)("div",{className:"text-white/60 text-sm",children:"\u05e8\u05de\u05ea \u05dc\u05de\u05d9\u05d3\u05d4"})]}),(0,z.jsxs)("div",{className:"bg-white/5 rounded-xl p-4 text-center",children:[(0,z.jsxs)("div",{className:"text-lg font-bold text-white",children:[(null===(e=g.profile)||void 0===e?void 0:e.completeness)||0,"%"]}),(0,z.jsx)("div",{className:"text-white/60 text-sm",children:"\u05e9\u05dc\u05de\u05d5\u05ea \u05e4\u05e8\u05d5\u05e4\u05d9\u05dc"})]}),(0,z.jsxs)("div",{className:"bg-white/5 rounded-xl p-4 text-center",children:[(0,z.jsx)("div",{className:"text-lg font-bold text-white",children:g.cases.length}),(0,z.jsx)("div",{className:"text-white/60 text-sm",children:"\u05ea\u05d9\u05e7\u05d9\u05dd"})]})]}),g.profile&&(0,z.jsxs)("div",{className:"bg-white/5 rounded-xl p-4",children:[(0,z.jsx)("h4",{className:"text-white font-medium mb-3",children:"\u05e4\u05e8\u05d5\u05e4\u05d9\u05dc \u05de\u05e7\u05e6\u05d5\u05e2\u05d9"}),(0,z.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("span",{className:"text-white/50",children:"\u05ea\u05e4\u05e7\u05d9\u05d3: "}),(0,z.jsx)("span",{className:"text-white",children:g.profile.professional_identity.role||"\u05dc\u05d0 \u05d4\u05d5\u05d2\u05d3\u05e8"})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("span",{className:"text-white/50",children:"\u05d4\u05ea\u05de\u05d7\u05d5\u05d9\u05d5\u05ea: "}),(0,z.jsx)("span",{className:"text-white",children:(null===(s=g.profile.professional_identity.specializations)||void 0===s?void 0:s.join(", "))||"\u05dc\u05d0 \u05d4\u05d5\u05d2\u05d3\u05e8\u05d5"})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("span",{className:"text-white/50",children:"\u05e9\u05d5\u05e4\u05d8\u05d9\u05dd \u05de\u05d5\u05db\u05e8\u05d9\u05dd: "}),(0,z.jsx)("span",{className:"text-white",children:(null===(t=g.profile.professional_relationships.judges)||void 0===t?void 0:t.length)||0})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("span",{className:"text-white/50",children:'\u05e2\u05d5"\u05d3 \u05d9\u05e8\u05d9\u05d1\u05d9\u05dd: '}),(0,z.jsx)("span",{className:"text-white",children:(null===(a=g.profile.professional_relationships.opposing_lawyers)||void 0===a?void 0:a.length)||0})]})]}),(null===(c=g.profile.professional_relationships.opposing_lawyers)||void 0===c?void 0:c.length)>0&&(0,z.jsxs)("div",{className:"mt-4 pt-4 border-t border-white/10",children:[(0,z.jsx)("h5",{className:"text-white/70 text-sm mb-2",children:'\u05e8\u05e9\u05d9\u05de\u05ea \u05e2\u05d5"\u05d3 \u05d9\u05e8\u05d9\u05d1\u05d9\u05dd:'}),(0,z.jsx)("div",{className:"flex flex-wrap gap-2",children:g.profile.professional_relationships.opposing_lawyers.map((e,s)=>(0,z.jsxs)("span",{className:"px-2 py-1 rounded-lg text-xs ".concat("positive"===e.sentiment?"bg-green-500/20 text-green-400":"negative"===e.sentiment?"bg-red-500/20 text-red-400":"bg-purple-500/20 text-purple-300"),title:"".concat(e.style||""," | ").concat(e.notes||""," | \u05ea\u05d9\u05e7\u05d9\u05dd: ").concat(e.cases_count||1),children:[e.name,e.cases_count>1&&(0,z.jsxs)("span",{className:"text-white/50 mr-1",children:["(",e.cases_count,")"]})]},s))})]}),(null===(n=g.profile.professional_relationships.judges)||void 0===n?void 0:n.length)>0&&(0,z.jsxs)("div",{className:"mt-4 pt-4 border-t border-white/10",children:[(0,z.jsx)("h5",{className:"text-white/70 text-sm mb-2",children:"\u05e8\u05e9\u05d9\u05de\u05ea \u05e9\u05d5\u05e4\u05d8\u05d9\u05dd \u05de\u05d5\u05db\u05e8\u05d9\u05dd:"}),(0,z.jsx)("div",{className:"flex flex-wrap gap-2",children:g.profile.professional_relationships.judges.map((e,s)=>(0,z.jsx)("span",{className:"px-2 py-1 bg-amber-500/20 text-amber-300 rounded-lg text-xs",title:"".concat(e.court||""," | ").concat(e.notes||""),children:e.name},s))})]})]}),(0,z.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,z.jsxs)("div",{className:"bg-white/5 rounded-xl p-4",children:[(0,z.jsx)("h4",{className:"text-white font-medium mb-3",children:"\u05e9\u05d9\u05de\u05d5\u05e9 \u05d1\u05d8\u05d5\u05e7\u05e0\u05d9\u05dd"}),(0,z.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,z.jsxs)("div",{className:"flex justify-between",children:[(0,z.jsx)("span",{className:"text-white/50",children:'\u05e1\u05d4"\u05db'}),(0,z.jsx)("span",{className:"text-white",children:g.token_usage.total.toLocaleString()})]}),(0,z.jsxs)("div",{className:"flex justify-between",children:[(0,z.jsx)("span",{className:"text-white/50",children:"\u05d7\u05d5\u05d3\u05e9\u05d9"}),(0,z.jsx)("span",{className:"text-white",children:g.token_usage.monthly.toLocaleString()})]})]})]}),(0,z.jsxs)("div",{className:"bg-white/5 rounded-xl p-4",children:[(0,z.jsx)("h4",{className:"text-white font-medium mb-3",children:"\u05e2\u05dc\u05d5\u05d9\u05d5\u05ea"}),(0,z.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,z.jsxs)("div",{className:"flex justify-between",children:[(0,z.jsx)("span",{className:"text-white/50",children:'\u05e1\u05d4"\u05db'}),(0,z.jsxs)("span",{className:"text-white",children:["$",(g.cost.total_cents/1e5).toFixed(4)]})]}),(0,z.jsxs)("div",{className:"flex justify-between",children:[(0,z.jsx)("span",{className:"text-white/50",children:"\u05d7\u05d5\u05d3\u05e9\u05d9"}),(0,z.jsxs)("span",{className:"text-white",children:["$",(g.cost.monthly_cents/1e5).toFixed(4)]})]})]})]})]}),(0,z.jsxs)("div",{className:"bg-white/5 rounded-xl p-4",children:[(0,z.jsxs)("h4",{className:"text-white font-medium mb-3",children:["\u05ea\u05d9\u05e7\u05d9\u05dd (",g.cases.length,")"]}),(0,z.jsx)("div",{className:"max-h-48 overflow-y-auto space-y-2",children:g.cases.map(e=>(0,z.jsxs)("div",{className:"flex items-center justify-between bg-white/5 rounded-lg p-3",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("div",{className:"text-white font-medium",children:e.name}),(0,z.jsxs)("div",{className:"text-white/50 text-xs",children:[e.claims_count," \u05d8\u05e2\u05e0\u05d5\u05ea | ",e.contradictions_count," \u05e1\u05ea\u05d9\u05e8\u05d5\u05ea | ",e.entities_count," \u05d9\u05e9\u05d5\u05d9\u05d5\u05ea"]})]}),(0,z.jsx)("div",{className:"px-2 py-1 rounded text-xs ".concat("completed"===e.status?"bg-green-500/20 text-green-400":"analyzing"===e.status?"bg-amber-500/20 text-amber-400":"bg-white/10 text-white/70"),children:e.status})]},e.id))})]}),(0,z.jsxs)("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-4",children:[(0,z.jsxs)("h4",{className:"text-red-400 font-medium mb-3 flex items-center gap-2",children:[(0,z.jsx)(p.A,{size:18}),"\u05e4\u05e2\u05d5\u05dc\u05d5\u05ea \u05d0\u05d9\u05e4\u05d5\u05e1"]}),(0,z.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,z.jsx)("button",{onClick:()=>Z(g.user.id,"profile"),className:"px-3 py-2 bg-red-500/20 hover:bg-red-500/30 text-red-400 rounded-lg text-sm transition-colors",children:"\u05d0\u05e4\u05e1 \u05e4\u05e8\u05d5\u05e4\u05d9\u05dc"}),(0,z.jsx)("button",{onClick:()=>Z(g.user.id,"learning"),className:"px-3 py-2 bg-red-500/20 hover:bg-red-500/30 text-red-400 rounded-lg text-sm transition-colors",children:"\u05d0\u05e4\u05e1 \u05dc\u05de\u05d9\u05d3\u05d4"}),(0,z.jsx)("button",{onClick:()=>Z(g.user.id,"case_memory"),className:"px-3 py-2 bg-red-500/20 hover:bg-red-500/30 text-red-400 rounded-lg text-sm transition-colors",children:"\u05d0\u05e4\u05e1 \u05d6\u05d9\u05db\u05e8\u05d5\u05df \u05ea\u05d9\u05e7\u05d9\u05dd"})]})]})]})]})})]})}var ve=t(3850),we=t(3165),fe=t(8012),ye=t(4939);const _e={ocr:v.A,claims:u.A,entities:N.A,contradictions:p.A,intelligence:me.A,profiler:N.A,timeline:m.A,cross_exam:we.A,strategy:we.A,risk_assessment:i.A,red_flags:p.A,evidence_strength:fe.A,gap_analysis:u.A,narrative:v.A,verification:T.A,precedent:fe.A,adversarial:we.A,disputes:p.A,summary:v.A,insights:me.A,knowledge:me.A,legal_knowledge:me.A,settlement:fe.A,witness_credibility:be.A,court_behavior:fe.A,admin:i.A,monitoring:d.A,memory:me.A,learning:M.A,cache:o.A,chat_intent:u.A,graph:ce.A,deduplication:T.A,enrichment:M.A,legal_patterns:u.A,export:v.A,document_analysis:v.A,default:ye.A};function ke(){const[e,s]=(0,l.useState)([]),[t,a]=(0,l.useState)(null),[c,n]=(0,l.useState)(!0),[x,h]=(0,l.useState)(null),[u,b]=(0,l.useState)(null),[j,g]=(0,l.useState)(!0),N=(0,l.useCallback)(async()=>{try{h(null);const e=await(0,f.apiGet)("/api/admin/agents/activity",{showErrorToast:!1});s(e.activities||[]),a(e.overview||null),b(new Date)}catch(e){_.v.error("Failed to fetch agent activity:",e),h("\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05d8\u05e2\u05d9\u05e0\u05ea \u05e4\u05e2\u05d9\u05dc\u05d5\u05ea \u05e1\u05d5\u05db\u05e0\u05d9\u05dd")}finally{n(!1)}},[]);(0,l.useEffect)(()=>{N();let e=null;return j&&(e=setInterval(N,15e3)),()=>{e&&clearInterval(e)}},[N,j]);const w=e=>_e[e]||_e.default,y=e=>e<1e3?"".concat(e,"ms"):e<6e4?"".concat((e/1e3).toFixed(1),"s"):"".concat((e/6e4).toFixed(1),"m"),k=e.filter(e=>"running"===e.status),A=e.filter(e=>"pending"===e.status),S=e.filter(e=>"completed"===e.status),C=e.filter(e=>"failed"===e.status),F=e.filter(e=>"idle"===e.status);return c&&0===e.length?(0,z.jsx)("div",{className:"p-8 flex items-center justify-center",children:(0,z.jsxs)("div",{className:"text-center",children:[(0,z.jsx)(O.A,{className:"w-12 h-12 text-purple-500 animate-spin mx-auto mb-4"}),(0,z.jsx)("p",{className:"text-white text-lg",children:"\u05d8\u05d5\u05e2\u05df \u05e0\u05ea\u05d5\u05e0\u05d9 \u05e1\u05d5\u05db\u05e0\u05d9\u05dd..."})]})}):(0,z.jsx)("div",{className:"p-6",dir:"rtl",children:(0,z.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,z.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"\u05de\u05d5\u05e0\u05d9\u05d8\u05d5\u05e8 \u05e1\u05d5\u05db\u05e0\u05d9\u05dd"}),(0,z.jsx)("p",{className:"text-slate-400",children:"\u05de\u05e2\u05e7\u05d1 \u05d1\u05d6\u05de\u05df \u05d0\u05de\u05ea \u05d0\u05d7\u05e8 \u05e4\u05e2\u05d9\u05dc\u05d5\u05ea \u05db\u05dc \u05d4\u05e1\u05d5\u05db\u05e0\u05d9\u05dd \u05d1\u05de\u05e2\u05e8\u05db\u05ea"})]}),(0,z.jsxs)("div",{className:"flex items-center gap-3",children:[(0,z.jsxs)("label",{className:"flex items-center gap-2 text-sm text-white/70",children:[(0,z.jsx)("input",{type:"checkbox",checked:j,onChange:e=>g(e.target.checked),className:"rounded bg-white/10 border-white/20"}),"\u05e8\u05e2\u05e0\u05d5\u05df \u05d0\u05d5\u05d8\u05d5\u05de\u05d8\u05d9"]}),(0,z.jsxs)("button",{onClick:N,disabled:c,className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors flex items-center gap-2",children:[(0,z.jsx)(r.A,{size:18,className:c?"animate-spin":""}),"\u05e8\u05e2\u05e0\u05df"]})]})]}),x&&(0,z.jsxs)("div",{className:"mb-6 bg-red-500/10 border border-red-500/30 rounded-lg p-4 text-center",children:[(0,z.jsx)(p.A,{className:"w-8 h-8 text-red-500 mx-auto mb-2"}),(0,z.jsx)("p",{className:"text-red-400",children:x})]}),t&&(0,z.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6",children:[(0,z.jsx)("div",{className:"bg-white/10 backdrop-blur-lg rounded-lg p-6 border border-white/20",children:(0,z.jsxs)("div",{className:"flex items-center gap-3",children:[(0,z.jsx)(ye.A,{className:"h-8 w-8 text-purple-400"}),(0,z.jsxs)("div",{children:[(0,z.jsx)("p",{className:"text-white/70 text-sm",children:"\u05e1\u05d5\u05db\u05e0\u05d9\u05dd \u05db\u05d5\u05dc\u05dc"}),(0,z.jsx)("p",{className:"text-3xl font-bold text-white",children:t.total_agents})]})]})}),(0,z.jsx)("div",{className:"bg-white/10 backdrop-blur-lg rounded-lg p-6 border border-blue-500/30",children:(0,z.jsxs)("div",{className:"flex items-center gap-3",children:[(0,z.jsx)(d.A,{className:"h-8 w-8 text-blue-400"}),(0,z.jsxs)("div",{children:[(0,z.jsx)("p",{className:"text-white/70 text-sm",children:"\u05e4\u05e2\u05d9\u05dc\u05d9\u05dd \u05db\u05e8\u05d2\u05e2"}),(0,z.jsx)("p",{className:"text-3xl font-bold text-blue-400",children:t.active_agents})]})]})}),(0,z.jsx)("div",{className:"bg-white/10 backdrop-blur-lg rounded-lg p-6 border border-yellow-500/30",children:(0,z.jsxs)("div",{className:"flex items-center gap-3",children:[(0,z.jsx)(m.A,{className:"h-8 w-8 text-yellow-400"}),(0,z.jsxs)("div",{children:[(0,z.jsx)("p",{className:"text-white/70 text-sm",children:"\u05de\u05de\u05ea\u05d9\u05e0\u05d9\u05dd \u05d1\u05ea\u05d5\u05e8"}),(0,z.jsx)("p",{className:"text-3xl font-bold text-yellow-400",children:t.pending_tasks})]})]})}),(0,z.jsx)("div",{className:"bg-white/10 backdrop-blur-lg rounded-lg p-6 border border-green-500/30",children:(0,z.jsxs)("div",{className:"flex items-center gap-3",children:[(0,z.jsx)(v.A,{className:"h-8 w-8 text-green-400"}),(0,z.jsxs)("div",{children:[(0,z.jsx)("p",{className:"text-white/70 text-sm",children:"\u05ea\u05d9\u05e7\u05d9\u05dd \u05d1\u05e0\u05d9\u05ea\u05d5\u05d7"}),(0,z.jsx)("p",{className:"text-3xl font-bold text-green-400",children:t.cases_being_analyzed})]})]})}),(0,z.jsx)("div",{className:"bg-white/10 backdrop-blur-lg rounded-lg p-6 border border-white/20",children:(0,z.jsxs)("div",{className:"flex items-center gap-3",children:[(0,z.jsx)(o.A,{className:"h-8 w-8 text-orange-400"}),(0,z.jsxs)("div",{children:[(0,z.jsx)("p",{className:"text-white/70 text-sm",children:"\u05d8\u05d5\u05e7\u05e0\u05d9\u05dd \u05d4\u05d9\u05d5\u05dd"}),(0,z.jsxs)("p",{className:"text-3xl font-bold text-white",children:[((t.total_tokens_today||0)/1e3).toFixed(1),"K"]})]})]})})]}),(0,z.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,z.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-lg border border-blue-500/30 overflow-hidden",children:[(0,z.jsx)("div",{className:"p-4 border-b border-white/10 bg-blue-500/10",children:(0,z.jsxs)("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[(0,z.jsx)(O.A,{className:"animate-spin text-blue-400",size:20}),"\u05e1\u05d5\u05db\u05e0\u05d9\u05dd \u05e4\u05e2\u05d9\u05dc\u05d9\u05dd (",k.length,")"]})}),(0,z.jsx)("div",{className:"p-4 space-y-3 max-h-[400px] overflow-y-auto",children:0===k.length?(0,z.jsxs)("div",{className:"text-center py-8 text-white/50",children:[(0,z.jsx)(ye.A,{className:"mx-auto mb-2 opacity-50",size:32}),(0,z.jsx)("p",{children:"\u05d0\u05d9\u05df \u05e1\u05d5\u05db\u05e0\u05d9\u05dd \u05e4\u05e2\u05d9\u05dc\u05d9\u05dd \u05db\u05e8\u05d2\u05e2"})]}):k.map((e,s)=>{var t;const l=w(e.agent_type);return(0,z.jsxs)("div",{className:"bg-blue-500/10 rounded-lg p-4 border border-blue-500/30",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,z.jsxs)("div",{className:"flex items-center gap-2",children:[(0,z.jsx)("div",{className:"p-2 rounded-lg bg-blue-500/20",children:(0,z.jsx)(l,{size:18,className:"text-blue-400"})}),(0,z.jsxs)("div",{children:[(0,z.jsx)("span",{className:"text-white font-medium",children:e.agent_name}),(0,z.jsx)("p",{className:"text-white/50 text-xs",children:e.user_email})]})]}),(0,z.jsx)("span",{className:"text-blue-400 text-sm",children:e.duration_ms?y(e.duration_ms):""})]}),e.current_task&&(0,z.jsx)("p",{className:"text-white/70 text-sm mb-2 truncate",children:e.current_task}),void 0!==e.progress&&(0,z.jsx)("div",{className:"w-full h-2 bg-white/10 rounded-full overflow-hidden",children:(0,z.jsx)("div",{className:"h-full bg-blue-400 transition-all duration-300",style:{width:"".concat(e.progress,"%")}})}),(0,z.jsxs)("div",{className:"flex items-center justify-between mt-2 text-xs text-white/40",children:[(0,z.jsx)("span",{children:e.case_name||(null===(t=e.case_id)||void 0===t?void 0:t.slice(0,8))||""}),e.tokens_used&&(0,z.jsxs)("span",{children:[e.tokens_used.toLocaleString()," tokens"]})]})]},"active-".concat(e.agent_type,"-").concat(s))})})]}),(0,z.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-lg border border-yellow-500/30 overflow-hidden",children:[(0,z.jsx)("div",{className:"p-4 border-b border-white/10 bg-yellow-500/10",children:(0,z.jsxs)("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[(0,z.jsx)(m.A,{className:"text-yellow-400",size:20}),"\u05de\u05de\u05ea\u05d9\u05e0\u05d9\u05dd \u05d1\u05ea\u05d5\u05e8 (",A.length,")"]})}),(0,z.jsx)("div",{className:"p-4 space-y-2 max-h-[400px] overflow-y-auto",children:0===A.length?(0,z.jsxs)("div",{className:"text-center py-8 text-white/50",children:[(0,z.jsx)(T.A,{className:"mx-auto mb-2 opacity-50",size:32}),(0,z.jsx)("p",{children:"\u05d0\u05d9\u05df \u05de\u05e9\u05d9\u05de\u05d5\u05ea \u05de\u05de\u05ea\u05d9\u05e0\u05d5\u05ea"})]}):A.map((e,s)=>{var t,l;const a=w(e.agent_type);return(0,z.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-yellow-500/10 rounded-lg border border-yellow-500/20",children:[(0,z.jsx)("div",{className:"p-1.5 rounded bg-yellow-500/20",children:(0,z.jsx)(a,{size:16,className:"text-yellow-400"})}),(0,z.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,z.jsx)("span",{className:"text-white text-sm",children:e.agent_name}),(0,z.jsx)("p",{className:"text-white/40 text-xs truncate",children:e.case_name||(null===(t=e.case_id)||void 0===t?void 0:t.slice(0,12))||""})]}),(0,z.jsx)("span",{className:"text-yellow-400/70 text-xs",children:null===(l=e.user_email)||void 0===l?void 0:l.split("@")[0]})]},"pending-".concat(e.agent_type,"-").concat(s))})})]}),(0,z.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-lg border border-green-500/30 overflow-hidden",children:[(0,z.jsx)("div",{className:"p-4 border-b border-white/10 bg-green-500/10",children:(0,z.jsxs)("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[(0,z.jsx)(T.A,{className:"text-green-400",size:20}),"\u05d4\u05d5\u05e9\u05dc\u05de\u05d5 \u05dc\u05d0\u05d7\u05e8\u05d5\u05e0\u05d4 (",S.length,")"]})}),(0,z.jsx)("div",{className:"p-4 space-y-2 max-h-[400px] overflow-y-auto",children:0===S.length?(0,z.jsxs)("div",{className:"text-center py-8 text-white/50",children:[(0,z.jsx)(d.A,{className:"mx-auto mb-2 opacity-50",size:32}),(0,z.jsx)("p",{children:"\u05d0\u05d9\u05df \u05d4\u05e9\u05dc\u05de\u05d5\u05ea \u05d0\u05d7\u05e8\u05d5\u05e0\u05d5\u05ea"})]}):S.map((e,s)=>{const t=w(e.agent_type);return(0,z.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-green-500/10 rounded-lg border border-green-500/20",children:[(0,z.jsx)(T.A,{size:16,className:"text-green-400"}),(0,z.jsx)(t,{size:16,className:"text-white/50"}),(0,z.jsx)("span",{className:"text-white text-sm flex-1",children:e.agent_name}),e.tokens_used&&(0,z.jsxs)("span",{className:"text-white/40 text-xs",children:[e.tokens_used.toLocaleString()," tok"]}),e.duration_ms&&(0,z.jsx)("span",{className:"text-green-400/70 text-xs",children:y(e.duration_ms)})]},"completed-".concat(e.agent_type,"-").concat(s))})})]}),(0,z.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-lg border border-red-500/30 overflow-hidden",children:[(0,z.jsx)("div",{className:"p-4 border-b border-white/10 bg-red-500/10",children:(0,z.jsxs)("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[(0,z.jsx)(I.A,{className:"text-red-400",size:20}),"\u05e0\u05db\u05e9\u05dc\u05d5 (",C.length,")"]})}),(0,z.jsx)("div",{className:"p-4 space-y-2 max-h-[400px] overflow-y-auto",children:0===C.length?(0,z.jsxs)("div",{className:"text-center py-8 text-white/50",children:[(0,z.jsx)(i.A,{className:"mx-auto mb-2 opacity-50",size:32}),(0,z.jsx)("p",{children:"\u05d0\u05d9\u05df \u05db\u05e9\u05dc\u05d5\u05e0\u05d5\u05ea \u05d0\u05d7\u05e8\u05d5\u05e0\u05d9\u05dd"})]}):C.map((e,s)=>{var t,l;const a=w(e.agent_type);return(0,z.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-red-500/10 rounded-lg border border-red-500/20",children:[(0,z.jsx)(I.A,{size:16,className:"text-red-400"}),(0,z.jsx)(a,{size:16,className:"text-white/50"}),(0,z.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,z.jsx)("span",{className:"text-white text-sm",children:e.agent_name}),(0,z.jsx)("p",{className:"text-red-400/70 text-xs truncate",children:e.case_name||(null===(t=e.case_id)||void 0===t?void 0:t.slice(0,12))||""})]}),(0,z.jsx)("span",{className:"text-red-400/70 text-xs",children:null===(l=e.user_email)||void 0===l?void 0:l.split("@")[0]})]},"failed-".concat(e.agent_type,"-").concat(s))})})]})]}),(0,z.jsxs)("div",{className:"mt-6 bg-white/10 backdrop-blur-lg rounded-lg border border-white/20 overflow-hidden",children:[(0,z.jsxs)("div",{className:"p-4 border-b border-white/10 bg-white/5",children:[(0,z.jsxs)("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[(0,z.jsx)(ye.A,{className:"text-purple-400",size:20}),"\u05db\u05dc \u05d4\u05e1\u05d5\u05db\u05e0\u05d9\u05dd \u05d1\u05de\u05e2\u05e8\u05db\u05ea (",F.length+k.length+A.length,")"]}),(0,z.jsx)("p",{className:"text-white/50 text-sm mt-1",children:"37 \u05e1\u05d5\u05db\u05e0\u05d9\u05dd \u05e8\u05e9\u05d5\u05de\u05d9\u05dd - \u05e1\u05d5\u05db\u05e0\u05d9\u05dd \u05dc\u05d0 \u05e4\u05e2\u05d9\u05dc\u05d9\u05dd \u05de\u05d5\u05e6\u05d2\u05d9\u05dd \u05d1\u05e6\u05d1\u05e2 \u05d0\u05e4\u05d5\u05e8"})]}),(0,z.jsx)("div",{className:"p-4",children:(0,z.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3",children:[...k,...A,...F].map((e,s)=>{const t=w(e.agent_type),l="running"===e.status,a="pending"===e.status,i="idle"===e.status;return(0,z.jsxs)("div",{className:"p-3 rounded-lg border transition-all ".concat(l?"bg-blue-500/20 border-blue-500/50 shadow-lg shadow-blue-500/20":a?"bg-yellow-500/10 border-yellow-500/30":"bg-white/5 border-white/10 opacity-60 hover:opacity-100"),children:[(0,z.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,z.jsx)("div",{className:"p-1.5 rounded ".concat(l?"bg-blue-500/30":a?"bg-yellow-500/20":"bg-white/10"),children:(0,z.jsx)(t,{size:16,className:l?"text-blue-400":a?"text-yellow-400":"text-white/40"})}),(0,z.jsx)("span",{className:"text-sm font-medium truncate ".concat(l?"text-blue-300":a?"text-yellow-300":"text-white/60"),children:e.agent_name})]}),(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsx)("span",{className:"text-xs px-2 py-0.5 rounded ".concat(l?"bg-blue-500/30 text-blue-300":a?"bg-yellow-500/20 text-yellow-300":"bg-white/10 text-white/40"),children:l?"\ud83d\udfe2 \u05e4\u05e2\u05d9\u05dc":a?"\ud83d\udfe1 \u05de\u05de\u05ea\u05d9\u05df":"\u26aa \u05d6\u05de\u05d9\u05df"}),e.category&&(0,z.jsx)("span",{className:"text-[10px] text-white/30",children:e.category})]}),e.description&&i&&(0,z.jsx)("p",{className:"text-[10px] text-white/30 mt-1 line-clamp-2",children:e.description})]},"all-".concat(e.agent_type,"-").concat(s))})})})]}),u&&(0,z.jsx)("div",{className:"mt-6 text-center",children:(0,z.jsxs)("p",{className:"text-white/30 text-sm",children:["\u05e2\u05d5\u05d3\u05db\u05df \u05dc\u05d0\u05d7\u05e8\u05d5\u05e0\u05d4: ",u.toLocaleTimeString("he-IL")]})})]})})}var Ae=t(4968),Se=t(7365);function Ce(){const[e,s]=(0,l.useState)(!0),[t,a]=(0,l.useState)(null),[c,n]=(0,l.useState)([]),[x,o]=(0,l.useState)([]),[p,b]=(0,l.useState)(null),[j,g]=(0,l.useState)("overview"),[y,k]=(0,l.useState)(""),[A,S]=(0,l.useState)(""),[C]=(0,l.useState)(30),[F,E]=(0,l.useState)(!1),[L,R]=(0,l.useState)(null),T=(0,l.useCallback)(async()=>{try{const e=await(0,f.apiGet)("/api/admin/forensics/stats?days=".concat(C),{showErrorToast:!1});a(e)}catch(e){_.v.error("Failed to load forensics stats:",e)}},[C]),I=(0,l.useCallback)(async()=>{try{const e=new URLSearchParams;y&&e.set("category",y),e.set("min_count","1"),e.set("limit","100");const s=await(0,f.apiGet)("/api/admin/forensics/patterns?".concat(e.toString()),{showErrorToast:!1});n(s.patterns||[])}catch(e){_.v.error("Failed to load pattern frequencies:",e)}},[y]),D=(0,l.useCallback)(async()=>{try{const e=await(0,f.apiGet)("/api/admin/forensics/counsel-styleprints?limit=100",{showErrorToast:!1});o(e.styleprints||[])}catch(e){_.v.error("Failed to load counsel styleprints:",e)}},[]),P=(0,l.useCallback)(async()=>{try{const e=await(0,f.apiGet)("/api/admin/forensics/config",{showErrorToast:!1});b(e)}catch(e){_.v.error("Failed to load forensics config:",e)}},[]),G=(0,l.useCallback)(async()=>{s(!0),await Promise.all([T(),I(),D(),P()]),s(!1)},[T,I,D,P]);(0,l.useEffect)(()=>{G()},[G]);const $=x.filter(e=>{var s;return(null===(s=e.counsel_name)||void 0===s?void 0:s.toLowerCase().includes(A.toLowerCase()))||e.counsel_id.toLowerCase().includes(A.toLowerCase())}),q=e=>{switch(e){case"rhetoric":return"bg-blue-500/20 text-blue-300";case"contract":return"bg-purple-500/20 text-purple-300";case"counsel":return"bg-orange-500/20 text-orange-300";default:return"bg-gray-500/20 text-gray-300"}},U=e=>{switch(e){case"aggressive":return"text-red-400";case"assertive":return"text-orange-400";case"neutral":default:return"text-gray-400";case"conciliatory":return"text-green-400";case"defensive":return"text-blue-400"}};return e?(0,z.jsxs)("div",{className:"flex items-center justify-center h-64",children:[(0,z.jsx)(O.A,{className:"w-8 h-8 animate-spin text-purple-400"}),(0,z.jsx)("span",{className:"mr-3 text-white/70",children:"\u05d8\u05d5\u05e2\u05df \u05e0\u05ea\u05d5\u05e0\u05d9 \u05e4\u05d5\u05e8\u05e0\u05d6\u05d9\u05e7\u05d4..."})]}):(0,z.jsxs)("div",{className:"space-y-6",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsxs)("div",{className:"flex items-center gap-3",children:[(0,z.jsx)(Ae.A,{className:"w-8 h-8 text-purple-400"}),(0,z.jsx)("h2",{className:"text-2xl font-bold text-white",children:"\u05e0\u05d9\u05ea\u05d5\u05d7 \u05e4\u05d5\u05e8\u05e0\u05d6\u05d9"})]}),(0,z.jsxs)("button",{onClick:G,className:"flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 rounded-lg transition",children:[(0,z.jsx)(r.A,{size:18,className:"text-white"}),(0,z.jsx)("span",{className:"text-white",children:"\u05e8\u05e2\u05e0\u05df"})]})]}),(0,z.jsx)("div",{className:"flex gap-2 border-b border-white/20 pb-2",children:[{id:"overview",label:"\u05e1\u05e7\u05d9\u05e8\u05d4 \u05db\u05dc\u05dc\u05d9\u05ea",icon:ce.A},{id:"patterns",label:"\u05d3\u05e4\u05d5\u05e1\u05d9\u05dd",icon:we.A},{id:"counsel",label:"\u05d8\u05d1\u05d9\u05e2\u05d5\u05ea \u05d9\u05e8\u05d9\u05d1",icon:N.A},{id:"config",label:"\u05d4\u05d2\u05d3\u05e8\u05d5\u05ea",icon:Se.A}].map(e=>{let{id:s,label:t,icon:l}=e;return(0,z.jsxs)("button",{onClick:()=>g(s),className:"flex items-center gap-2 px-4 py-2 rounded-t-lg font-medium transition ".concat(j===s?"bg-purple-600 text-white":"bg-white/5 text-purple-300 hover:bg-white/10"),children:[(0,z.jsx)(l,{size:18}),t]},s)})}),"overview"===j&&t&&(0,z.jsxs)("div",{className:"space-y-6",children:[(0,z.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,z.jsx)("div",{className:"bg-white/10 backdrop-blur-lg rounded-lg p-6 border border-white/20",children:(0,z.jsxs)("div",{className:"flex items-center gap-3",children:[(0,z.jsx)(d.A,{className:"h-8 w-8 text-blue-400"}),(0,z.jsxs)("div",{children:[(0,z.jsx)("p",{className:"text-white/70 text-sm",children:'\u05e1\u05d4"\u05db \u05e0\u05d9\u05ea\u05d5\u05d7\u05d9\u05dd'}),(0,z.jsx)("p",{className:"text-3xl font-bold text-white",children:t.total_analyses})]})]})}),(0,z.jsx)("div",{className:"bg-white/10 backdrop-blur-lg rounded-lg p-6 border border-white/20",children:(0,z.jsxs)("div",{className:"flex items-center gap-3",children:[(0,z.jsx)(v.A,{className:"h-8 w-8 text-purple-400"}),(0,z.jsxs)("div",{children:[(0,z.jsx)("p",{className:"text-white/70 text-sm",children:"\u05ea\u05d9\u05e7\u05d9\u05dd \u05e2\u05dd \u05e4\u05d5\u05e8\u05e0\u05d6\u05d9\u05e7\u05d4"}),(0,z.jsx)("p",{className:"text-3xl font-bold text-white",children:t.cases_with_forensics})]})]})}),(0,z.jsx)("div",{className:"bg-white/10 backdrop-blur-lg rounded-lg p-6 border border-white/20",children:(0,z.jsxs)("div",{className:"flex items-center gap-3",children:[(0,z.jsx)(we.A,{className:"h-8 w-8 text-orange-400"}),(0,z.jsxs)("div",{children:[(0,z.jsx)("p",{className:"text-white/70 text-sm",children:"\u05d3\u05e4\u05d5\u05e1\u05d9\u05dd \u05d7\u05d5\u05e6\u05d9-\u05ea\u05d9\u05e7"}),(0,z.jsx)("p",{className:"text-3xl font-bold text-white",children:t.cross_case_patterns})]})]})}),(0,z.jsx)("div",{className:"bg-white/10 backdrop-blur-lg rounded-lg p-6 border border-white/20",children:(0,z.jsxs)("div",{className:"flex items-center gap-3",children:[(0,z.jsx)(m.A,{className:"h-8 w-8 text-green-400"}),(0,z.jsxs)("div",{children:[(0,z.jsx)("p",{className:"text-white/70 text-sm",children:"\u05d6\u05de\u05df \u05e0\u05d9\u05ea\u05d5\u05d7 \u05de\u05de\u05d5\u05e6\u05e2"}),(0,z.jsxs)("p",{className:"text-3xl font-bold text-white",children:[t.avg_analysis_time_ms.toFixed(0),"ms"]})]})]})})]}),(0,z.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,z.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-lg p-6 border border-white/20",children:[(0,z.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,z.jsx)(pe.A,{className:"text-blue-400",size:20}),(0,z.jsx)("h3",{className:"text-lg font-semibold text-white",children:"\u05e0\u05d9\u05ea\u05d5\u05d7 \u05e8\u05d8\u05d5\u05e8\u05d9"})]}),(0,z.jsx)("p",{className:"text-4xl font-bold text-blue-400",children:t.rhetoric_analyses}),(0,z.jsx)("p",{className:"text-white/50 text-sm mt-2",children:"\u05d6\u05d9\u05d4\u05d5\u05d9 \u05db\u05d5\u05d5\u05e0\u05d5\u05ea \u05e0\u05e1\u05ea\u05e8\u05d5\u05ea, \u05d4\u05e1\u05d7\u05d5\u05ea \u05d3\u05e2\u05ea"})]}),(0,z.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-lg p-6 border border-white/20",children:[(0,z.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,z.jsx)(fe.A,{className:"text-purple-400",size:20}),(0,z.jsx)("h3",{className:"text-lg font-semibold text-white",children:"\u05e0\u05d9\u05ea\u05d5\u05d7 \u05d7\u05d5\u05d6\u05d9"})]}),(0,z.jsx)("p",{className:"text-4xl font-bold text-purple-400",children:t.contract_analyses}),(0,z.jsx)("p",{className:"text-white/50 text-sm mt-2",children:"\u05e1\u05e2\u05d9\u05e4\u05d9\u05dd \u05d1\u05e2\u05d9\u05d9\u05ea\u05d9\u05d9\u05dd, \u05de\u05dc\u05db\u05d5\u05d3\u05d5\u05ea"})]}),(0,z.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-lg p-6 border border-white/20",children:[(0,z.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,z.jsx)(N.A,{className:"text-orange-400",size:20}),(0,z.jsx)("h3",{className:"text-lg font-semibold text-white",children:"\u05e0\u05d9\u05ea\u05d5\u05d7 \u05d9\u05e8\u05d9\u05d1"})]}),(0,z.jsx)("p",{className:"text-4xl font-bold text-orange-400",children:t.counsel_analyses}),(0,z.jsx)("p",{className:"text-white/50 text-sm mt-2",children:"\u05e1\u05d2\u05e0\u05d5\u05df, \u05d0\u05e1\u05d8\u05e8\u05d8\u05d2\u05d9\u05d4, \u05e0\u05e7\u05d5\u05d3\u05d5\u05ea \u05ea\u05d5\u05e8\u05e4\u05d4"})]})]}),t.top_detected_patterns.length>0&&(0,z.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-lg p-6 border border-white/20",children:[(0,z.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,z.jsx)(M.A,{className:"text-green-400",size:20}),"\u05d3\u05e4\u05d5\u05e1\u05d9\u05dd \u05e0\u05e4\u05d5\u05e6\u05d9\u05dd"]}),(0,z.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.top_detected_patterns.map((e,s)=>(0,z.jsxs)("div",{className:"bg-white/5 rounded-lg p-4",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,z.jsx)("span",{className:"text-white font-medium",children:e.pattern}),(0,z.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat(q(e.category)),children:e.category})]}),(0,z.jsx)("p",{className:"text-2xl font-bold text-white",children:e.count}),(0,z.jsx)("p",{className:"text-white/50 text-sm",children:"\u05de\u05d5\u05e4\u05e2\u05d9\u05dd"})]},s))})]})]}),"patterns"===j&&(0,z.jsxs)("div",{className:"space-y-4",children:[(0,z.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,z.jsxs)("select",{value:y,onChange:e=>k(e.target.value),className:"bg-white/10 border border-white/20 rounded-lg px-4 py-2 text-white",children:[(0,z.jsx)("option",{value:"",children:"\u05db\u05dc \u05d4\u05e7\u05d8\u05d2\u05d5\u05e8\u05d9\u05d5\u05ea"}),(0,z.jsx)("option",{value:"rhetoric",children:"\u05e8\u05d8\u05d5\u05e8\u05d9"}),(0,z.jsx)("option",{value:"contract",children:"\u05d7\u05d5\u05d6\u05d9"}),(0,z.jsx)("option",{value:"counsel",children:"\u05d9\u05e8\u05d9\u05d1"})]}),(0,z.jsxs)("button",{onClick:I,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg transition text-white",children:[(0,z.jsx)(ie.A,{size:16}),"\u05e1\u05e0\u05df"]})]}),(0,z.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-lg border border-white/20 overflow-hidden",children:[(0,z.jsxs)("table",{className:"w-full",children:[(0,z.jsx)("thead",{className:"bg-white/5",children:(0,z.jsxs)("tr",{children:[(0,z.jsx)("th",{className:"px-6 py-3 text-right text-sm font-semibold text-white/70",children:"\u05d3\u05e4\u05d5\u05e1"}),(0,z.jsx)("th",{className:"px-6 py-3 text-right text-sm font-semibold text-white/70",children:"\u05e7\u05d8\u05d2\u05d5\u05e8\u05d9\u05d4"}),(0,z.jsx)("th",{className:"px-6 py-3 text-right text-sm font-semibold text-white/70",children:"\u05de\u05d5\u05e4\u05e2\u05d9\u05dd"}),(0,z.jsx)("th",{className:"px-6 py-3 text-right text-sm font-semibold text-white/70",children:"\u05ea\u05d9\u05e7\u05d9\u05dd"}),(0,z.jsx)("th",{className:"px-6 py-3 text-right text-sm font-semibold text-white/70",children:"\u05d7\u05d5\u05de\u05e8\u05d4 \u05de\u05de\u05d5\u05e6\u05e2\u05ea"})]})}),(0,z.jsx)("tbody",{children:c.map((e,s)=>(0,z.jsxs)("tr",{className:"border-t border-white/10 hover:bg-white/5",children:[(0,z.jsx)("td",{className:"px-6 py-4 text-white font-medium",children:e.pattern_name}),(0,z.jsx)("td",{className:"px-6 py-4",children:(0,z.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat(q(e.category)),children:e.category})}),(0,z.jsx)("td",{className:"px-6 py-4 text-white",children:e.count}),(0,z.jsx)("td",{className:"px-6 py-4 text-white/70",children:e.cases.length}),(0,z.jsx)("td",{className:"px-6 py-4",children:(0,z.jsxs)("div",{className:"flex items-center gap-2",children:[(0,z.jsx)("div",{className:"flex-1 h-2 bg-white/10 rounded-full overflow-hidden max-w-[100px]",children:(0,z.jsx)("div",{className:"h-full ".concat(e.severity_avg>.7?"bg-red-500":e.severity_avg>.4?"bg-orange-500":"bg-green-500"),style:{width:"".concat(100*e.severity_avg,"%")}})}),(0,z.jsxs)("span",{className:"text-white/70 text-sm",children:[(100*e.severity_avg).toFixed(0),"%"]})]})})]},s))})]}),0===c.length&&(0,z.jsx)("div",{className:"text-center py-12 text-white/50",children:"\u05dc\u05d0 \u05e0\u05de\u05e6\u05d0\u05d5 \u05d3\u05e4\u05d5\u05e1\u05d9\u05dd"})]})]}),"counsel"===j&&(0,z.jsxs)("div",{className:"space-y-4",children:[(0,z.jsxs)("div",{className:"relative max-w-md",children:[(0,z.jsx)(u.A,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400",size:20}),(0,z.jsx)("input",{type:"text",placeholder:"\u05d7\u05e4\u05e9 \u05dc\u05e4\u05d9 \u05e9\u05dd \u05d0\u05d5 \u05de\u05d6\u05d4\u05d4...",value:A,onChange:e=>S(e.target.value),className:"w-full pr-12 pl-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400"})]}),(0,z.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:$.map(e=>(0,z.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-lg p-6 border border-white/20",children:[(0,z.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("h3",{className:"text-lg font-semibold text-white",children:e.counsel_name||"\u05dc\u05dc\u05d0 \u05e9\u05dd"}),(0,z.jsx)("p",{className:"text-white/50 text-sm",children:e.counsel_id})]}),(0,z.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("\u05d4\u05d0\u05dd \u05dc\u05de\u05d7\u05d5\u05e7 \u05d8\u05d1\u05d9\u05e2\u05ea \u05e1\u05d2\u05e0\u05d5\u05df \u05d6\u05d5?")){R(e);try{await(0,f.Al)("/api/admin/forensics/counsel-styleprints/".concat(e)),w.oR.success("\u05d8\u05d1\u05d9\u05e2\u05ea \u05e1\u05d2\u05e0\u05d5\u05df \u05e0\u05de\u05d7\u05e7\u05d4"),D()}catch(s){_.v.error("Failed to delete styleprint:",s),w.oR.error("\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05de\u05d7\u05d9\u05e7\u05d4")}finally{R(null)}}})(e.counsel_id),disabled:L===e.counsel_id,className:"p-2 text-red-400 hover:bg-red-500/20 rounded transition",children:L===e.counsel_id?(0,z.jsx)(O.A,{size:16,className:"animate-spin"}):(0,z.jsx)(h.A,{size:16})})]}),(0,z.jsxs)("div",{className:"space-y-3",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsx)("span",{className:"text-white/70",children:"\u05d8\u05d5\u05df \u05e2\u05d9\u05e7\u05e8\u05d9"}),(0,z.jsx)("span",{className:"font-medium ".concat(U(e.primary_tone)),children:e.primary_tone})]}),(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsx)("span",{className:"text-white/70",children:"\u05ea\u05d9\u05e7\u05d9\u05dd \u05e9\u05e0\u05d5\u05ea\u05d7\u05d5"}),(0,z.jsx)("span",{className:"text-white font-medium",children:e.cases_analyzed})]}),(0,z.jsxs)("div",{children:[(0,z.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,z.jsx)("span",{className:"text-white/70 text-sm",children:"\u05d0\u05d2\u05e8\u05e1\u05d9\u05d1\u05d9\u05d5\u05ea"}),(0,z.jsxs)("span",{className:"text-white/70 text-sm",children:[e.aggression_score.toFixed(0),"%"]})]}),(0,z.jsx)("div",{className:"h-2 bg-white/10 rounded-full overflow-hidden",children:(0,z.jsx)("div",{className:"h-full bg-red-500",style:{width:"".concat(e.aggression_score,"%")}})})]}),(0,z.jsxs)("div",{children:[(0,z.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,z.jsx)("span",{className:"text-white/70 text-sm",children:"\u05e4\u05d5\u05e8\u05de\u05dc\u05d9\u05d5\u05ea"}),(0,z.jsxs)("span",{className:"text-white/70 text-sm",children:[e.formality_score.toFixed(0),"%"]})]}),(0,z.jsx)("div",{className:"h-2 bg-white/10 rounded-full overflow-hidden",children:(0,z.jsx)("div",{className:"h-full bg-blue-500",style:{width:"".concat(e.formality_score,"%")}})})]}),(0,z.jsxs)("div",{className:"pt-2 border-t border-white/10 text-xs text-white/50",children:["\u05e0\u05e8\u05d0\u05d4 \u05dc\u05d0\u05d7\u05e8\u05d5\u05e0\u05d4: ",new Date(e.last_seen).toLocaleDateString("he-IL")]})]})]},e.counsel_id))}),0===$.length&&(0,z.jsxs)("div",{className:"text-center py-12 bg-white/10 backdrop-blur-lg rounded-lg border border-white/20",children:[(0,z.jsx)(N.A,{className:"mx-auto text-white/30 mb-4",size:48}),(0,z.jsx)("p",{className:"text-white/50",children:"\u05dc\u05d0 \u05e0\u05de\u05e6\u05d0\u05d5 \u05d8\u05d1\u05d9\u05e2\u05d5\u05ea \u05e1\u05d2\u05e0\u05d5\u05df"})]})]}),"config"===j&&p&&(0,z.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-lg p-6 border border-white/20",children:[(0,z.jsxs)("h3",{className:"text-lg font-semibold text-white mb-6 flex items-center gap-2",children:[(0,z.jsx)(Se.A,{className:"text-gray-400",size:20}),"\u05d4\u05d2\u05d3\u05e8\u05d5\u05ea \u05de\u05e2\u05e8\u05db\u05ea \u05e4\u05d5\u05e8\u05e0\u05d6\u05d9\u05ea"]}),(0,z.jsxs)("div",{className:"space-y-6",children:[(0,z.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{className:"block text-white/70 mb-2",children:"\u05e8\u05d2\u05d9\u05e9\u05d5\u05ea \u05e8\u05d8\u05d5\u05e8\u05d9\u05ea"}),(0,z.jsx)("input",{type:"range",min:"0",max:"1",step:"0.1",value:p.rhetoric_sensitivity,onChange:e=>b((0,H.A)((0,H.A)({},p),{},{rhetoric_sensitivity:parseFloat(e.target.value)})),className:"w-full"}),(0,z.jsxs)("div",{className:"text-center text-white mt-1",children:[(100*p.rhetoric_sensitivity).toFixed(0),"%"]})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{className:"block text-white/70 mb-2",children:"\u05e8\u05d2\u05d9\u05e9\u05d5\u05ea \u05d7\u05d5\u05d6\u05d9\u05ea"}),(0,z.jsx)("input",{type:"range",min:"0",max:"1",step:"0.1",value:p.contract_sensitivity,onChange:e=>b((0,H.A)((0,H.A)({},p),{},{contract_sensitivity:parseFloat(e.target.value)})),className:"w-full"}),(0,z.jsxs)("div",{className:"text-center text-white mt-1",children:[(100*p.contract_sensitivity).toFixed(0),"%"]})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{className:"block text-white/70 mb-2",children:"\u05e8\u05d2\u05d9\u05e9\u05d5\u05ea \u05d9\u05e8\u05d9\u05d1"}),(0,z.jsx)("input",{type:"range",min:"0",max:"1",step:"0.1",value:p.counsel_sensitivity,onChange:e=>b((0,H.A)((0,H.A)({},p),{},{counsel_sensitivity:parseFloat(e.target.value)})),className:"w-full"}),(0,z.jsxs)("div",{className:"text-center text-white mt-1",children:[(100*p.counsel_sensitivity).toFixed(0),"%"]})]})]}),(0,z.jsxs)("div",{className:"space-y-4",children:[(0,z.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,z.jsx)("input",{type:"checkbox",checked:p.enable_cross_case_memory,onChange:e=>b((0,H.A)((0,H.A)({},p),{},{enable_cross_case_memory:e.target.checked})),className:"w-5 h-5 rounded bg-white/10 border-white/30"}),(0,z.jsx)("span",{className:"text-white",children:"\u05d0\u05e4\u05e9\u05e8 \u05d6\u05d9\u05db\u05e8\u05d5\u05df \u05d7\u05d5\u05e6\u05d4-\u05ea\u05d9\u05e7\u05d9\u05dd"})]}),(0,z.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,z.jsx)("input",{type:"checkbox",checked:p.auto_analyze_on_upload,onChange:e=>b((0,H.A)((0,H.A)({},p),{},{auto_analyze_on_upload:e.target.checked})),className:"w-5 h-5 rounded bg-white/10 border-white/30"}),(0,z.jsx)("span",{className:"text-white",children:"\u05e0\u05d9\u05ea\u05d5\u05d7 \u05d0\u05d5\u05d8\u05d5\u05de\u05d8\u05d9 \u05d1\u05d4\u05e2\u05dc\u05d0\u05d4"})]})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{className:"block text-white/70 mb-2",children:"\u05e0\u05d9\u05ea\u05d5\u05d7\u05d9\u05dd \u05de\u05e7\u05d1\u05d9\u05dc\u05d9\u05dd \u05de\u05e7\u05e1\u05d9\u05de\u05dc\u05d9\u05d9\u05dd"}),(0,z.jsx)("input",{type:"number",min:"1",max:"20",value:p.max_concurrent_analyses,onChange:e=>b((0,H.A)((0,H.A)({},p),{},{max_concurrent_analyses:parseInt(e.target.value)||5})),className:"w-32 bg-white/10 border border-white/20 rounded-lg px-4 py-2 text-white"})]}),(0,z.jsx)("div",{className:"pt-4 border-t border-white/20",children:(0,z.jsx)("button",{onClick:async()=>{if(p){E(!0);try{await(0,f.mu)("/api/admin/forensics/config",p),w.oR.success("\u05d4\u05d2\u05d3\u05e8\u05d5\u05ea \u05e0\u05e9\u05de\u05e8\u05d5 \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4")}catch(e){_.v.error("Failed to save config:",e),w.oR.error("\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05e9\u05de\u05d9\u05e8\u05ea \u05d4\u05d2\u05d3\u05e8\u05d5\u05ea")}finally{E(!1)}}},disabled:F,className:"flex items-center gap-2 px-6 py-3 bg-green-600 hover:bg-green-700 disabled:bg-gray-600 rounded-lg transition text-white",children:F?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(O.A,{size:18,className:"animate-spin"}),"\u05e9\u05d5\u05de\u05e8..."]}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(i.A,{size:18}),"\u05e9\u05de\u05d5\u05e8 \u05d4\u05d2\u05d3\u05e8\u05d5\u05ea"]})})})]})]})]})}var ze=t(793),Fe=t(5264),Ee=t(7104),Le=t(4830);const Re={supreme:"\u05d1\u05d9\u05ea \u05d4\u05de\u05e9\u05e4\u05d8 \u05d4\u05e2\u05dc\u05d9\u05d5\u05df",district:"\u05d1\u05d9\u05ea \u05de\u05e9\u05e4\u05d8 \u05de\u05d7\u05d5\u05d6\u05d9",magistrate:"\u05d1\u05d9\u05ea \u05de\u05e9\u05e4\u05d8 \u05d4\u05e9\u05dc\u05d5\u05dd",labor:"\u05d1\u05d9\u05ea \u05d3\u05d9\u05df \u05dc\u05e2\u05d1\u05d5\u05d3\u05d4",family:"\u05d1\u05d9\u05ea \u05de\u05e9\u05e4\u05d8 \u05dc\u05e2\u05e0\u05d9\u05d9\u05e0\u05d9 \u05de\u05e9\u05e4\u05d7\u05d4",traffic:"\u05d1\u05d9\u05ea \u05de\u05e9\u05e4\u05d8 \u05dc\u05ea\u05e2\u05d1\u05d5\u05e8\u05d4",juvenile:"\u05d1\u05d9\u05ea \u05de\u05e9\u05e4\u05d8 \u05dc\u05e0\u05d5\u05e2\u05e8",unknown:"\u05d0\u05d7\u05e8"},Te=()=>{var e,s;const[t,a]=(0,l.useState)(null),[i,c]=(0,l.useState)({job_id:null,status:"idle"}),[n,d]=(0,l.useState)(!0),[x,h]=(0,l.useState)(!1),[b,j]=(0,l.useState)(!1),[g,y]=(0,l.useState)(!1),[k,A]=(0,l.useState)(!1),[S,C]=(0,l.useState)("spokesperson"),[F,E]=(0,l.useState)(5e3),[L,R]=(0,l.useState)("\u05de\u05d7\u05d5\u05d6\u05d9"),[D,P]=(0,l.useState)(!1),[$,q]=(0,l.useState)(!0),[U,B]=(0,l.useState)("import"),[J,X]=(0,l.useState)(0),[Y,H]=(0,l.useState)(500),[Q,W]=(0,l.useState)(1e3),[V,Z]=(0,l.useState)("\u05db\u05dc\u05dc\u05d9"),[se,te]=(0,l.useState)(!0),[le,ae]=(0,l.useState)(!1),[ie,re]=(0,l.useState)(!1),ce=(0,l.useRef)(null),ne=(0,l.useRef)(null),[de,xe]=(0,l.useState)(!1),[oe,me]=(0,l.useState)([]),[he,pe]=(0,l.useState)(0),[ue,be]=(0,l.useState)(""),[je,ge]=(0,l.useState)(""),[Ne,ve]=(0,l.useState)("needs_index"),[we,fe]=(0,l.useState)(0),ye=(0,l.useCallback)(async()=>{try{const e=await(0,f.apiGet)("/api/admin/court-decisions/stats");a(e)}catch(e){_.v.error("Error fetching court decisions stats:",e)}},[]),_e=(0,l.useCallback)(async()=>{try{const e=await(0,f.apiGet)("/api/admin/court-decisions/status");c(e),"running"===e.status?h(!0):(h(!1),j(!1))}catch(e){_.v.error("Error fetching import status:",e)}},[]),ke=(0,l.useCallback)(async()=>{try{xe(!0);const e=new URLSearchParams;e.set("status",Ne),e.set("limit",String(50)),e.set("offset",String(we)),je.trim()&&e.set("q",je.trim());const s=await(0,f.apiGet)("/api/admin/court-decisions/rulings?".concat(e.toString()));me(s.items||[]),pe(s.total||0)}catch(e){_.v.error("Error fetching rulings list:",e),w.oR.error("\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05d8\u05e2\u05d9\u05e0\u05ea \u05e8\u05e9\u05d9\u05de\u05ea \u05e4\u05e1\u05e7\u05d9 \u05d3\u05d9\u05df")}finally{xe(!1)}},[je,Ne,we]);(0,l.useEffect)(()=>{(async()=>{d(!0),await Promise.all([ye(),_e()]),d(!1)})()},[ye,_e]),(0,l.useEffect)(()=>{ke()},[ke]),(0,l.useEffect)(()=>{let e=null;return"running"===i.status&&(e=setInterval(_e,3e3)),()=>{e&&clearInterval(e)}},[i.status,_e]);const Ae=(0,l.useCallback)(async()=>{try{const e=await(0,f.apiGet)("/api/admin/court-decisions/pending-count");X(e.pending||0)}catch(e){_.v.error("Error fetching pending count:",e)}},[]);return(0,l.useEffect)(()=>{Ae()},[Ae]),n?(0,z.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,z.jsx)(O.A,{className:"w-8 h-8 text-blue-400 animate-spin"})}):(0,z.jsxs)("div",{className:"space-y-6",dir:"rtl",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsxs)("div",{className:"flex items-center gap-3",children:[(0,z.jsx)("div",{className:"w-12 h-12 bg-amber-500/20 rounded-xl flex items-center justify-center",children:(0,z.jsx)(ze.A,{className:"w-6 h-6 text-amber-400"})}),(0,z.jsxs)("div",{children:[(0,z.jsx)("h2",{className:"text-xl font-bold text-white",children:"\u05d9\u05d9\u05d1\u05d5\u05d0 \u05e4\u05e1\u05e7\u05d9 \u05d3\u05d9\u05df"}),(0,z.jsx)("p",{className:"text-sm text-white/60",children:"\u05d3\u05d5\u05d1\u05e8\u05d5\u05ea \u05d4\u05e8\u05e9\u05d5\u05ea \u05d4\u05e9\u05d5\u05e4\u05d8\u05ea"})]})]}),(0,z.jsx)("button",{onClick:()=>{ye(),_e(),ke()},className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg transition-colors",title:"\u05e8\u05e2\u05e0\u05df",children:(0,z.jsx)(r.A,{className:"w-5 h-5 text-white/70"})})]}),!(null!==t&&void 0!==t&&t.apify_configured)&&(0,z.jsxs)("div",{className:"bg-orange-500/20 border border-orange-500/50 rounded-xl p-4 flex items-start gap-3",children:[(0,z.jsx)(p.A,{className:"w-5 h-5 text-orange-400 mt-0.5"}),(0,z.jsxs)("div",{children:[(0,z.jsx)("h3",{className:"font-semibold text-orange-300",children:"Apify \u05dc\u05d0 \u05de\u05d5\u05d2\u05d3\u05e8"}),(0,z.jsxs)("p",{className:"text-sm text-orange-200/80 mt-1",children:["\u05d9\u05e9 \u05dc\u05d4\u05d2\u05d3\u05d9\u05e8 \u05d0\u05ea \u05d4\u05de\u05e9\u05ea\u05e0\u05d4 ",(0,z.jsx)("code",{className:"bg-black/30 px-1 rounded",children:"APIFY_API_TOKEN"})," \u05db\u05d3\u05d9 \u05dc\u05d4\u05e4\u05e2\u05d9\u05dc \u05d9\u05d9\u05d1\u05d5\u05d0 \u05e4\u05e1\u05e7\u05d9 \u05d3\u05d9\u05df."]})]})]}),(0,z.jsxs)("div",{className:"flex border-b border-white/10",children:[(0,z.jsxs)("button",{onClick:()=>B("import"),className:"flex-1 px-6 py-3 font-medium text-sm transition-colors flex items-center justify-center gap-2 ".concat("import"===U?"text-blue-400 border-b-2 border-blue-400 bg-blue-500/10":"text-white/60 hover:text-white/80 hover:bg-white/5"),children:[(0,z.jsx)(ee.A,{className:"w-4 h-4"}),"\u05d9\u05d9\u05d1\u05d5\u05d0 \u05dc\u05e7\u05d5\u05e8\u05e4\u05d5\u05e1"]}),(0,z.jsxs)("button",{onClick:()=>B("analyze"),className:"flex-1 px-6 py-3 font-medium text-sm transition-colors flex items-center justify-center gap-2 ".concat("analyze"===U?"text-amber-400 border-b-2 border-amber-400 bg-amber-500/10":"text-white/60 hover:text-white/80 hover:bg-white/5"),children:[(0,z.jsx)(o.A,{className:"w-4 h-4"}),"\u05e0\u05d9\u05ea\u05d5\u05d7 \u05e7\u05d5\u05e8\u05e4\u05d5\u05e1",J>0&&(0,z.jsx)("span",{className:"px-2 py-0.5 bg-amber-500/30 text-amber-300 rounded-full text-xs",children:J})]})]}),(0,z.jsx)("div",{className:"text-sm text-white/60 px-1",children:"import"===U?(0,z.jsxs)("p",{children:["\u05d9\u05d9\u05d1\u05d5\u05d0 = OCR + \u05d7\u05d9\u05dc\u05d5\u05e5 \u05de\u05d8\u05d0\u05d3\u05d0\u05d8\u05d0 + \u05d0\u05d9\u05e0\u05d3\u05d5\u05e7\u05e1 \u05dc\u05d7\u05d9\u05e4\u05d5\u05e9/\u05e4\u05e8\u05d5\u05e4\u05d9\u05dc\u05d9\u05dd. ",(0,z.jsx)("span",{className:"text-green-400",children:"\u05dc\u05dc\u05d0 \u05e0\u05d9\u05ea\u05d5\u05d7 \u05de\u05e9\u05e4\u05d8\u05d9."})]}):(0,z.jsxs)("p",{children:["\u05e0\u05d9\u05ea\u05d5\u05d7 = \u05ea\u05d5\u05e6\u05e8\u05d9\u05dd \u05de\u05ea\u05e7\u05d3\u05de\u05d9\u05dd (ArgumentOutcome), ",(0,z.jsx)("span",{className:"text-amber-400",children:"\u05d6\u05de\u05df \u05e8\u05d9\u05e6\u05d4 \u05d2\u05d1\u05d5\u05d4."})," \u05d4\u05e4\u05e2\u05dc\u05d4 \u05d9\u05d3\u05e0\u05d9\u05ea \u05d1\u05dc\u05d1\u05d3."]})}),"import"===U&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,z.jsxs)("div",{className:"bg-white/10 rounded-xl p-4",children:[(0,z.jsxs)("div",{className:"flex items-center gap-2 text-blue-400 mb-2",children:[(0,z.jsx)(G.A,{className:"w-5 h-5"}),(0,z.jsx)("span",{className:"text-sm",children:'\u05e1\u05d4"\u05db \u05e4\u05e1\u05e7\u05d9 \u05d3\u05d9\u05df'})]}),(0,z.jsx)("div",{className:"text-2xl font-bold text-white",children:((null===t||void 0===t?void 0:t.total_rulings)||0).toLocaleString()})]}),(0,z.jsxs)("div",{className:"bg-white/10 rounded-xl p-4",children:[(0,z.jsxs)("div",{className:"flex items-center gap-2 text-green-400 mb-2",children:[(0,z.jsx)(Fe.A,{className:"w-5 h-5"}),(0,z.jsx)("span",{className:"text-sm",children:"\u05e1\u05d5\u05d2\u05d9 \u05d1\u05ea\u05d9 \u05de\u05e9\u05e4\u05d8"})]}),(0,z.jsx)("div",{className:"text-2xl font-bold text-white",children:Object.keys((null===t||void 0===t?void 0:t.by_court_type)||{}).length})]}),(0,z.jsxs)("div",{className:"bg-white/10 rounded-xl p-4",children:[(0,z.jsxs)("div",{className:"flex items-center gap-2 text-purple-400 mb-2",children:[(0,z.jsx)(N.A,{className:"w-5 h-5"}),(0,z.jsx)("span",{className:"text-sm",children:"\u05e9\u05d5\u05e4\u05d8\u05d9\u05dd \u05d9\u05d9\u05d7\u05d5\u05d3\u05d9\u05d9\u05dd"})]}),(0,z.jsx)("div",{className:"text-2xl font-bold text-white",children:Object.keys((null===t||void 0===t?void 0:t.top_judges)||{}).length})]}),(0,z.jsxs)("div",{className:"bg-white/10 rounded-xl p-4",children:[(0,z.jsxs)("div",{className:"flex items-center gap-2 text-amber-400 mb-2",children:[(0,z.jsx)(m.A,{className:"w-5 h-5"}),(0,z.jsx)("span",{className:"text-sm",children:"\u05e1\u05e0\u05db\u05e8\u05d5\u05df \u05d0\u05d7\u05e8\u05d5\u05df"})]}),(0,z.jsx)("div",{className:"text-lg font-bold text-white",children:null!==t&&void 0!==t&&t.last_sync?new Date(t.last_sync).toLocaleDateString("he-IL"):"\u05dc\u05d0 \u05d1\u05d5\u05e6\u05e2"})]})]}),(0,z.jsxs)("div",{className:"bg-white/10 rounded-xl p-6",children:[(0,z.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"\u05d4\u05e4\u05e2\u05dc\u05ea \u05d9\u05d9\u05d1\u05d5\u05d0"}),(0,z.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,z.jsxs)("div",{className:"bg-black/20 rounded-xl p-4",children:[(0,z.jsxs)("h4",{className:"font-medium text-white mb-3 flex items-center gap-2",children:[(0,z.jsx)(Ee.A,{className:"w-4 h-4 text-blue-400"}),"\u05d9\u05d9\u05d1\u05d5\u05d0 \u05de\u05dc\u05d0"]}),(0,z.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{className:"block text-sm text-white/70 mb-1",children:"\u05de\u05e7\u05d5\u05e8:"}),(0,z.jsxs)("select",{value:S,onChange:e=>C(e.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white",disabled:x,children:[(0,z.jsx)("option",{value:"spokesperson",children:"\u05d3\u05d5\u05d1\u05e8\u05d5\u05ea \u05d4\u05e8\u05e9\u05d5\u05ea \u05d4\u05e9\u05d5\u05e4\u05d8\u05ea"}),(0,z.jsx)("option",{value:"supreme",children:"\u05d1\u05d9\u05ea \u05d4\u05de\u05e9\u05e4\u05d8 \u05d4\u05e2\u05dc\u05d9\u05d5\u05df"})]})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{className:"block text-sm text-white/70 mb-1",children:"\u05de\u05e7\u05e1\u05d9\u05de\u05d5\u05dd \u05e4\u05e1\u05e7\u05d9 \u05d3\u05d9\u05df:"}),(0,z.jsx)("input",{type:"number",value:F,onChange:e=>E(parseInt(e.target.value)||5e3),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white",min:100,max:15e3,disabled:x})]})]}),(0,z.jsx)("button",{onClick:async()=>{if(null!==t&&void 0!==t&&t.apify_configured)try{h(!0),await(0,f.$P)("/api/admin/court-decisions/import",{source:S,max_decisions:F}),w.oR.success("\u05d4\u05d9\u05d9\u05d1\u05d5\u05d0 \u05d4\u05d7\u05dc. \u05e2\u05e7\u05d5\u05d1 \u05d0\u05d7\u05e8 \u05d4\u05d4\u05ea\u05e7\u05d3\u05de\u05d5\u05ea \u05dc\u05de\u05d8\u05d4."),await _e()}catch(e){_.v.error("Error starting import:",e),w.oR.error(e.message||"\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05d4\u05e4\u05e2\u05dc\u05ea \u05d4\u05d9\u05d9\u05d1\u05d5\u05d0"),h(!1)}else w.oR.error("Apify \u05dc\u05d0 \u05de\u05d5\u05d2\u05d3\u05e8. \u05d4\u05d2\u05d3\u05e8 APIFY_API_TOKEN.")},disabled:x||b||!(null!==t&&void 0!==t&&t.apify_configured),className:"w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white rounded-lg font-medium flex items-center justify-center gap-2 transition-colors",children:x?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(O.A,{className:"w-4 h-4 animate-spin"}),"\u05de\u05d9\u05d9\u05d1\u05d0..."]}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Le.A,{className:"w-4 h-4"}),"\u05d4\u05ea\u05d7\u05dc \u05d9\u05d9\u05d1\u05d5\u05d0"]})})]}),(0,z.jsxs)("div",{className:"bg-black/20 rounded-xl p-4",children:[(0,z.jsxs)("h4",{className:"font-medium text-white mb-3 flex items-center gap-2",children:[(0,z.jsx)(r.A,{className:"w-4 h-4 text-green-400"}),"\u05e1\u05e0\u05db\u05e8\u05d5\u05df \u05d3\u05d5-\u05d7\u05d5\u05d3\u05e9\u05d9"]}),(0,z.jsx)("p",{className:"text-sm text-white/60 mb-4",children:"\u05de\u05d9\u05d9\u05d1\u05d0 \u05e8\u05e7 \u05e4\u05e1\u05e7\u05d9 \u05d3\u05d9\u05df \u05d7\u05d3\u05e9\u05d9\u05dd \u05e9\u05dc\u05d0 \u05e7\u05d9\u05d9\u05de\u05d9\u05dd \u05d1\u05de\u05d0\u05d2\u05e8. \u05de\u05d5\u05de\u05dc\u05e5 \u05dc\u05d4\u05e8\u05d9\u05e5 \u05db\u05dc \u05d7\u05d5\u05d3\u05e9\u05d9\u05d9\u05dd."}),(0,z.jsx)("button",{onClick:async()=>{if(null!==t&&void 0!==t&&t.apify_configured)try{j(!0),await(0,f.$P)("/api/admin/court-decisions/sync",{days_back:60}),w.oR.success("\u05d4\u05e1\u05e0\u05db\u05e8\u05d5\u05df \u05d4\u05d7\u05dc. \u05e2\u05e7\u05d5\u05d1 \u05d0\u05d7\u05e8 \u05d4\u05d4\u05ea\u05e7\u05d3\u05de\u05d5\u05ea \u05dc\u05de\u05d8\u05d4."),await _e()}catch(e){_.v.error("Error starting sync:",e),w.oR.error(e.message||"\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05d4\u05e4\u05e2\u05dc\u05ea \u05d4\u05e1\u05e0\u05db\u05e8\u05d5\u05df"),j(!1)}else w.oR.error("Apify \u05dc\u05d0 \u05de\u05d5\u05d2\u05d3\u05e8. \u05d4\u05d2\u05d3\u05e8 APIFY_API_TOKEN.")},disabled:x||b||!(null!==t&&void 0!==t&&t.apify_configured),className:"w-full px-4 py-2 bg-green-600 hover:bg-green-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white rounded-lg font-medium flex items-center justify-center gap-2 transition-colors",children:b?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(O.A,{className:"w-4 h-4 animate-spin"}),"\u05de\u05e1\u05e0\u05db\u05e8\u05df..."]}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(r.A,{className:"w-4 h-4"}),"\u05e1\u05e0\u05db\u05e8\u05d5\u05df \u05e2\u05db\u05e9\u05d9\u05d5"]})})]}),(0,z.jsxs)("div",{className:"bg-black/20 rounded-xl p-4",children:[(0,z.jsxs)("h4",{className:"font-medium text-white mb-3 flex items-center gap-2",children:[(0,z.jsx)(ee.A,{className:"w-4 h-4 text-purple-400"}),"\u05d4\u05e2\u05dc\u05d0\u05ea \u05e7\u05d1\u05e6\u05d9\u05dd \u05d9\u05d3\u05e0\u05d9\u05ea"]}),(0,z.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{className:"block text-sm text-white/70 mb-1",children:"\u05e1\u05d5\u05d2 \u05d1\u05d9\u05ea \u05de\u05e9\u05e4\u05d8:"}),(0,z.jsxs)("select",{value:L,onChange:e=>R(e.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white",disabled:g,children:[(0,z.jsx)("option",{value:"\u05e2\u05dc\u05d9\u05d5\u05df",children:"\u05d1\u05d9\u05ea \u05d4\u05de\u05e9\u05e4\u05d8 \u05d4\u05e2\u05dc\u05d9\u05d5\u05df"}),(0,z.jsx)("option",{value:"\u05de\u05d7\u05d5\u05d6\u05d9",children:"\u05d1\u05d9\u05ea \u05de\u05e9\u05e4\u05d8 \u05de\u05d7\u05d5\u05d6\u05d9"}),(0,z.jsx)("option",{value:"\u05e9\u05dc\u05d5\u05dd",children:"\u05d1\u05d9\u05ea \u05de\u05e9\u05e4\u05d8 \u05d4\u05e9\u05dc\u05d5\u05dd"}),(0,z.jsx)("option",{value:"\u05e2\u05d1\u05d5\u05d3\u05d4",children:"\u05d1\u05d9\u05ea \u05d3\u05d9\u05df \u05dc\u05e2\u05d1\u05d5\u05d3\u05d4"}),(0,z.jsx)("option",{value:"\u05de\u05e9\u05e4\u05d7\u05d4",children:"\u05d1\u05d9\u05ea \u05de\u05e9\u05e4\u05d8 \u05dc\u05e2\u05e0\u05d9\u05d9\u05e0\u05d9 \u05de\u05e9\u05e4\u05d7\u05d4"}),(0,z.jsx)("option",{value:"\u05db\u05dc\u05dc\u05d9",children:"\u05db\u05dc\u05dc\u05d9"})]})]}),(0,z.jsxs)("label",{className:"flex items-center gap-2 text-sm text-white/70 cursor-pointer",children:[(0,z.jsx)("input",{type:"checkbox",checked:D,onChange:e=>P(e.target.checked),className:"w-4 h-4 rounded bg-white/10 border-white/20",disabled:g}),"\u05e0\u05ea\u05d7 \u05d0\u05d5\u05d8\u05d5\u05de\u05d8\u05d9\u05ea \u05dc\u05d0\u05d7\u05e8 \u05d4\u05e2\u05dc\u05d0\u05d4"]}),(0,z.jsxs)("label",{className:"flex items-center gap-2 text-sm text-white/70 cursor-pointer",children:[(0,z.jsx)("input",{type:"checkbox",checked:$,onChange:e=>q(e.target.checked),className:"w-4 h-4 rounded bg-white/10 border-white/20",disabled:g}),"\u05d1\u05e6\u05e2 Normalize + Index \u05dc\u05d0\u05d7\u05e8 \u05d4\u05e2\u05dc\u05d0\u05d4"]})]}),(0,z.jsx)("input",{ref:ce,type:"file",multiple:!0,accept:".pdf,.txt,.docx,.doc",onChange:async e=>{const s=e.target.files;if(!s||0===s.length)return;const t=new FormData;Array.from(s).forEach(e=>{t.append("files",e)}),t.append("court_type",L),t.append("auto_analyze",String(D)),t.append("auto_index",String($));try{y(!0),await(0,f.yX)("/api/admin/court-decisions/upload-bulk",t,{timeoutMs:6e5}),w.oR.success("\u05de\u05ea\u05d7\u05d9\u05dc \u05e2\u05d9\u05d1\u05d5\u05d3 ".concat(s.length," \u05e7\u05d1\u05e6\u05d9\u05dd")),await _e()}catch(l){_.v.error("Error uploading files:",l),w.oR.error(l.message||"\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05d4\u05e2\u05dc\u05d0\u05d4"),y(!1)}ce.current&&(ce.current.value="")},className:"hidden"}),(0,z.jsx)("button",{onClick:()=>{var e;return null===(e=ce.current)||void 0===e?void 0:e.click()},disabled:g||x||b,className:"w-full px-4 py-2 bg-purple-600 hover:bg-purple-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white rounded-lg font-medium flex items-center justify-center gap-2 transition-colors",children:g?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(O.A,{className:"w-4 h-4 animate-spin"}),"\u05de\u05e2\u05dc\u05d4..."]}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(ee.A,{className:"w-4 h-4"}),"\u05d1\u05d7\u05e8 \u05e7\u05d1\u05e6\u05d9\u05dd (\u05e2\u05d3 100)"]})})]})]})]}),(0,z.jsxs)("div",{className:"bg-white/10 rounded-xl p-6",children:[(0,z.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"\u05d4\u05e2\u05dc\u05d0\u05ea TXT \u05de\u05e8\u05d5\u05d1\u05d4 (\u05e2\u05d3 10,000)"}),(0,z.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,z.jsxs)("div",{className:"bg-black/20 rounded-xl p-4 md:col-span-2",children:[(0,z.jsxs)("p",{className:"text-sm text-white/60 mb-3",children:["\u05de\u05d5\u05de\u05dc\u05e5 \u05e4\u05d5\u05e8\u05de\u05d8 ",(0,z.jsx)("strong",{children:"JSONL"})," (\u05db\u05dc \u05e9\u05d5\u05e8\u05d4 = JSON \u05e2\u05dd ",(0,z.jsx)("code",{className:"bg-black/30 px-1 rounded",children:"text"}),"), \u05d0\u05d5 \u05d8\u05e7\u05e1\u05d8 \u05e9\u05de\u05d5\u05e4\u05e8\u05d3 \u05e2\u05f4\u05d9 ",(0,z.jsx)("code",{className:"bg-black/30 px-1 rounded",children:"---"}),"."]}),(0,z.jsxs)("div",{className:"grid md:grid-cols-3 gap-3",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{className:"block text-sm text-white/70 mb-1",children:"\u05e1\u05d5\u05d2 \u05d1\u05d9\u05ea \u05de\u05e9\u05e4\u05d8:"}),(0,z.jsxs)("select",{value:V,onChange:e=>Z(e.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white",disabled:ie,children:[(0,z.jsx)("option",{value:"\u05db\u05dc\u05dc\u05d9",children:"\u05db\u05dc\u05dc\u05d9"}),(0,z.jsx)("option",{value:"\u05e2\u05dc\u05d9\u05d5\u05df",children:"\u05d1\u05d9\u05ea \u05d4\u05de\u05e9\u05e4\u05d8 \u05d4\u05e2\u05dc\u05d9\u05d5\u05df"}),(0,z.jsx)("option",{value:"\u05de\u05d7\u05d5\u05d6\u05d9",children:"\u05d1\u05d9\u05ea \u05de\u05e9\u05e4\u05d8 \u05de\u05d7\u05d5\u05d6\u05d9"}),(0,z.jsx)("option",{value:"\u05e9\u05dc\u05d5\u05dd",children:"\u05d1\u05d9\u05ea \u05de\u05e9\u05e4\u05d8 \u05d4\u05e9\u05dc\u05d5\u05dd"}),(0,z.jsx)("option",{value:"\u05e2\u05d1\u05d5\u05d3\u05d4",children:"\u05d1\u05d9\u05ea \u05d3\u05d9\u05df \u05dc\u05e2\u05d1\u05d5\u05d3\u05d4"}),(0,z.jsx)("option",{value:"\u05de\u05e9\u05e4\u05d7\u05d4",children:"\u05d1\u05d9\u05ea \u05de\u05e9\u05e4\u05d8 \u05dc\u05e2\u05e0\u05d9\u05d9\u05e0\u05d9 \u05de\u05e9\u05e4\u05d7\u05d4"})]})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{className:"block text-sm text-white/70 mb-1",children:"\u05db\u05de\u05d5\u05ea \u05dc\u05e2\u05d9\u05d1\u05d5\u05d3 (1\u201310,000):"}),(0,z.jsx)("input",{type:"number",min:1,max:1e4,value:Q,onChange:e=>W(Number(e.target.value)||1),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white",disabled:ie}),(0,z.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:[100,500,1e3,1e4].map(e=>(0,z.jsx)("button",{type:"button",onClick:()=>W(e),className:"px-2 py-1 text-xs rounded-lg bg-white/10 hover:bg-white/20 border border-white/10 text-white/80",disabled:ie,children:e.toLocaleString()},e))})]}),(0,z.jsxs)("div",{className:"flex flex-col justify-end gap-2",children:[(0,z.jsxs)("label",{className:"flex items-center gap-2 text-sm text-white/70 cursor-pointer",children:[(0,z.jsx)("input",{type:"checkbox",checked:se,onChange:e=>te(e.target.checked),className:"w-4 h-4 rounded bg-white/10 border-white/20",disabled:ie}),"Normalize + Index"]}),(0,z.jsxs)("label",{className:"flex items-center gap-2 text-sm text-white/70 cursor-pointer",children:[(0,z.jsx)("input",{type:"checkbox",checked:le,onChange:e=>ae(e.target.checked),className:"w-4 h-4 rounded bg-white/10 border-white/20",disabled:ie}),"\u05e0\u05ea\u05d7 \u05d0\u05d5\u05d8\u05d5\u05de\u05d8\u05d9\u05ea"]})]})]}),(0,z.jsx)("input",{ref:ne,type:"file",accept:".txt,.jsonl",onChange:async e=>{var s;const t=null===(s=e.target.files)||void 0===s?void 0:s[0];if(!t)return;const l=Number(Q||1e3);if(!Number.isFinite(l)||l<1||l>1e4)return void w.oR.error("\u05db\u05de\u05d5\u05ea \u05d7\u05d9\u05d9\u05d1\u05ea \u05dc\u05d4\u05d9\u05d5\u05ea \u05d1\u05d9\u05df 1 \u05dc-10,000");const a=new FormData;a.append("file",t),a.append("court_type",V),a.append("max_judgments",String(l)),a.append("auto_index",String(se)),a.append("auto_analyze",String(le));try{re(!0),await(0,f.yX)("/api/admin/court-decisions/upload-judgments-txt",a,{timeoutMs:6e5}),w.oR.success("\u05d4\u05e2\u05dc\u05d0\u05d4 \u05d4\u05ea\u05e7\u05d1\u05dc\u05d4. \u05de\u05ea\u05d7\u05d9\u05dc \u05e2\u05d9\u05d1\u05d5\u05d3 \u05e2\u05d3 ".concat(l.toLocaleString()," \u05e4\u05e1\u05e7\u05d9 \u05d3\u05d9\u05df")),await _e()}catch(i){_.v.error("Error uploading bulk judgments txt:",i),w.oR.error(i.message||"\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05d4\u05e2\u05dc\u05d0\u05ea TXT \u05de\u05e8\u05d5\u05d1\u05d4"),re(!1)}finally{ne.current&&(ne.current.value="")}},className:"hidden"}),(0,z.jsx)("div",{className:"mt-4",children:(0,z.jsx)("button",{onClick:()=>{var e;return null===(e=ne.current)||void 0===e?void 0:e.click()},disabled:ie||x||b||g,className:"w-full px-4 py-2 bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white rounded-lg font-medium flex items-center justify-center gap-2 transition-colors",children:ie?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(O.A,{className:"w-4 h-4 animate-spin"}),"\u05de\u05e2\u05dc\u05d4..."]}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(ee.A,{className:"w-4 h-4"}),"\u05d1\u05d7\u05e8 \u05e7\u05d5\u05d1\u05e5 TXT (\u05e2\u05d3 10,000)"]})})})]}),(0,z.jsxs)("div",{className:"bg-black/20 rounded-xl p-4",children:[(0,z.jsx)("h4",{className:"font-medium text-white mb-2",children:"\u05de\u05d4 \u05ea\u05e7\u05d1\u05dc \u05d0\u05d7\u05e8\u05d9 \u05d4\u05d4\u05e2\u05dc\u05d0\u05d4?"}),(0,z.jsxs)("ul",{className:"text-sm text-white/70 space-y-1",children:[(0,z.jsx)("li",{children:"\u2022 \u05e7\u05dc\u05d9\u05d8\u05d4 \u05dc\u05de\u05e1\u05d3 \u05e0\u05ea\u05d5\u05e0\u05d9\u05dd"}),(0,z.jsx)("li",{children:"\u2022 Normalize (\u05de\u05d6\u05d4\u05d9\u05dd \u05d3\u05d8\u05e8\u05de\u05d9\u05e0\u05d9\u05e1\u05d8\u05d9\u05d9\u05dd + \u05de\u05d8\u05d0\u2011\u05d3\u05d0\u05d8\u05d4)"}),(0,z.jsx)("li",{children:"\u2022 Index (FTS5/\u05d5\u05e7\u05d8\u05d5\u05e8\u05d9\u05dd \u05dc\u05e4\u05d9 \u05d6\u05de\u05d9\u05e0\u05d5\u05ea)"}),(0,z.jsx)("li",{children:"\u2022 \u05e0\u05d9\u05ea\u05d5\u05d7 \u05d0\u05d5\u05e4\u05e6\u05d9\u05d5\u05e0\u05dc\u05d9 (Analytics) \u05dc\u05e4\u05d9 \u05d1\u05d7\u05d9\u05e8\u05d4"})]})]})]})]}),(0,z.jsxs)("div",{className:"bg-white/10 rounded-xl p-6",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,z.jsx)("h3",{className:"text-lg font-semibold text-white",children:"\u05e0\u05d9\u05d4\u05d5\u05dc \u05e4\u05e1\u05e7\u05d9 \u05d3\u05d9\u05df (\u05de\u05d5\u05db\u05e0\u05d5\u05ea \u05dc\u05d9\u05d3\u05e2 \u05de\u05e9\u05e4\u05d8\u05d9)"}),(0,z.jsxs)("div",{className:"text-sm text-white/60",children:["\u05e1\u05d4\u05f4\u05db: ",he.toLocaleString()]})]}),(0,z.jsxs)("div",{className:"grid md:grid-cols-3 gap-3 mt-4",children:[(0,z.jsx)("div",{className:"md:col-span-2",children:(0,z.jsxs)("div",{className:"flex items-center gap-2 bg-black/20 border border-white/10 rounded-xl px-3 py-2",children:[(0,z.jsx)(u.A,{className:"w-4 h-4 text-white/50"}),(0,z.jsx)("input",{value:ue,onChange:e=>{be(e.target.value),fe(0)},placeholder:"\u05d7\u05d9\u05e4\u05d5\u05e9 \u05dc\u05e4\u05d9 \u05de\u05e1\u05e4\u05e8 \u05ea\u05d9\u05e7 / \u05e9\u05dd \u05ea\u05d9\u05e7 / \u05d1\u05d9\u05ea \u05de\u05e9\u05e4\u05d8 / \u05de\u05e7\u05d5\u05e8...",className:"w-full bg-transparent outline-none text-sm text-white placeholder:text-white/40"}),(0,z.jsx)("button",{onClick:()=>{ge(ue),fe(0)},className:"px-3 py-1.5 rounded-lg bg-white/10 hover:bg-white/20 text-white/80 text-sm",disabled:de,children:"\u05d7\u05e4\u05e9"})]})}),(0,z.jsx)("div",{children:(0,z.jsxs)("select",{value:Ne,onChange:e=>{ve(e.target.value),fe(0)},className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white",disabled:de,title:"\u05e1\u05d9\u05e0\u05d5\u05df \u05dc\u05e4\u05d9 \u05e1\u05d8\u05d8\u05d5\u05e1 \u05de\u05d5\u05db\u05e0\u05d5\u05ea",children:[(0,z.jsx)("option",{value:"needs_index",children:"\u05e6\u05e8\u05d9\u05da \u05d0\u05d9\u05e0\u05d3\u05d5\u05e7\u05e1"}),(0,z.jsx)("option",{value:"needs_analysis",children:"\u05e6\u05e8\u05d9\u05da \u05e0\u05d9\u05ea\u05d5\u05d7"}),(0,z.jsx)("option",{value:"ready",children:"\u05de\u05d5\u05db\u05df \u05dc\u05d9\u05d3\u05e2 \u05de\u05e9\u05e4\u05d8\u05d9"}),(0,z.jsx)("option",{value:"errored",children:"\u05e9\u05d2\u05d9\u05d0\u05d5\u05ea"}),(0,z.jsx)("option",{value:"all",children:"\u05d4\u05db\u05dc"})]})})]}),(0,z.jsx)("div",{className:"mt-4 overflow-x-auto",children:(0,z.jsxs)("table",{className:"min-w-full text-sm",children:[(0,z.jsx)("thead",{children:(0,z.jsxs)("tr",{className:"text-white/70 border-b border-white/10",children:[(0,z.jsx)("th",{className:"text-right py-2 px-2",children:"\u05ea\u05d9\u05e7"}),(0,z.jsx)("th",{className:"text-right py-2 px-2",children:"\u05d1\u05d9\u05ea \u05de\u05e9\u05e4\u05d8"}),(0,z.jsx)("th",{className:"text-right py-2 px-2",children:"\u05d0\u05d9\u05e0\u05d3\u05e7\u05e1"}),(0,z.jsx)("th",{className:"text-right py-2 px-2",children:"\u05e0\u05d9\u05ea\u05d5\u05d7"}),(0,z.jsx)("th",{className:"text-right py-2 px-2",children:"\u05de\u05d5\u05db\u05df"}),(0,z.jsx)("th",{className:"text-right py-2 px-2",children:"\u05ea\u05d0\u05e8\u05d9\u05da"})]})}),(0,z.jsx)("tbody",{children:de?(0,z.jsx)("tr",{children:(0,z.jsxs)("td",{colSpan:6,className:"py-6 text-center text-white/60",children:[(0,z.jsx)(O.A,{className:"w-5 h-5 animate-spin inline-block mr-2"}),"\u05d8\u05d5\u05e2\u05df..."]})}):0===oe.length?(0,z.jsx)("tr",{children:(0,z.jsx)("td",{colSpan:6,className:"py-6 text-center text-white/50",children:"\u05d0\u05d9\u05df \u05ea\u05d5\u05e6\u05d0\u05d5\u05ea"})}):oe.map(e=>(0,z.jsxs)("tr",{className:"border-b border-white/5 text-white/80",children:[(0,z.jsxs)("td",{className:"py-2 px-2",children:[(0,z.jsx)("div",{className:"font-medium text-white",children:e.case_number}),e.case_name&&(0,z.jsx)("div",{className:"text-xs text-white/60 line-clamp-1",children:e.case_name}),e.processing_error&&(0,z.jsx)("div",{className:"text-xs text-red-300 mt-1 line-clamp-1",children:e.processing_error})]}),(0,z.jsxs)("td",{className:"py-2 px-2",children:[(0,z.jsx)("div",{children:e.court}),e.court_type&&(0,z.jsx)("div",{className:"text-xs text-white/60",children:e.court_type})]}),(0,z.jsx)("td",{className:"py-2 px-2",children:e.is_indexed?(0,z.jsxs)("span",{className:"inline-flex items-center gap-1 text-green-300",children:[(0,z.jsx)(T.A,{className:"w-4 h-4"})," \u05db\u05df"]}):(0,z.jsxs)("span",{className:"inline-flex items-center gap-1 text-amber-300",children:[(0,z.jsx)(p.A,{className:"w-4 h-4"})," \u05dc\u05d0"]})}),(0,z.jsx)("td",{className:"py-2 px-2",children:e.is_analyzed?(0,z.jsxs)("span",{className:"inline-flex items-center gap-1 text-green-300",children:[(0,z.jsx)(T.A,{className:"w-4 h-4"})," \u05db\u05df"]}):(0,z.jsxs)("span",{className:"inline-flex items-center gap-1 text-white/50",children:[(0,z.jsx)(m.A,{className:"w-4 h-4"})," \u05dc\u05d0"]})}),(0,z.jsx)("td",{className:"py-2 px-2",children:e.ready_for_legal_knowledge?(0,z.jsxs)("span",{className:"inline-flex items-center gap-1 text-green-300",children:[(0,z.jsx)(T.A,{className:"w-4 h-4"})," \u05de\u05d5\u05db\u05df"]}):(0,z.jsxs)("span",{className:"inline-flex items-center gap-1 text-white/50",children:[(0,z.jsx)(I.A,{className:"w-4 h-4"})," \u05dc\u05d0"]})}),(0,z.jsx)("td",{className:"py-2 px-2 text-xs text-white/60",children:e.created_at?new Date(e.created_at).toLocaleString("he-IL"):"\u2014"})]},e.id))})]})}),(0,z.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,z.jsxs)("div",{className:"text-xs text-white/50",children:["\u05de\u05e6\u05d9\u05d2 ",0===he?0:we+1,"\u2013",Math.min(we+50,he)," \u05de\u05ea\u05d5\u05da ",he.toLocaleString()]}),(0,z.jsxs)("div",{className:"flex items-center gap-2",children:[(0,z.jsx)("button",{onClick:()=>{fe(Math.max(0,we-50))},disabled:0===we||de,className:"px-3 py-1.5 rounded-lg bg-white/10 hover:bg-white/20 disabled:opacity-50 text-white/80 text-sm",children:"\u05d4\u05e7\u05d5\u05d3\u05dd"}),(0,z.jsx)("button",{onClick:()=>{fe(we+50)},disabled:we+50>=he||de,className:"px-3 py-1.5 rounded-lg bg-white/10 hover:bg-white/20 disabled:opacity-50 text-white/80 text-sm",children:"\u05d4\u05d1\u05d0"})]})]})]})]}),"analyze"===U&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,z.jsxs)("div",{className:"bg-white/10 rounded-xl p-4",children:[(0,z.jsxs)("div",{className:"flex items-center gap-2 text-amber-400 mb-2",children:[(0,z.jsx)(m.A,{className:"w-5 h-5"}),(0,z.jsx)("span",{className:"text-sm",children:"\u05de\u05de\u05ea\u05d9\u05df \u05dc\u05e0\u05d9\u05ea\u05d5\u05d7"})]}),(0,z.jsx)("div",{className:"text-2xl font-bold text-white",children:J.toLocaleString()})]}),(0,z.jsxs)("div",{className:"bg-white/10 rounded-xl p-4",children:[(0,z.jsxs)("div",{className:"flex items-center gap-2 text-green-400 mb-2",children:[(0,z.jsx)(T.A,{className:"w-5 h-5"}),(0,z.jsx)("span",{className:"text-sm",children:"\u05e0\u05d5\u05ea\u05d7\u05d5"})]}),(0,z.jsx)("div",{className:"text-2xl font-bold text-white",children:(((null===t||void 0===t?void 0:t.total_rulings)||0)-J).toLocaleString()})]}),(0,z.jsxs)("div",{className:"bg-white/10 rounded-xl p-4",children:[(0,z.jsxs)("div",{className:"flex items-center gap-2 text-blue-400 mb-2",children:[(0,z.jsx)(G.A,{className:"w-5 h-5"}),(0,z.jsx)("span",{className:"text-sm",children:'\u05e1\u05d4"\u05db \u05d1\u05e7\u05d5\u05e8\u05e4\u05d5\u05e1'})]}),(0,z.jsx)("div",{className:"text-2xl font-bold text-white",children:((null===t||void 0===t?void 0:t.total_rulings)||0).toLocaleString()})]}),(0,z.jsxs)("div",{className:"bg-white/10 rounded-xl p-4",children:[(0,z.jsxs)("div",{className:"flex items-center gap-2 text-purple-400 mb-2",children:[(0,z.jsx)(M.A,{className:"w-5 h-5"}),(0,z.jsx)("span",{className:"text-sm",children:"\u05d0\u05d7\u05d5\u05d6 \u05e0\u05d9\u05ea\u05d5\u05d7"})]}),(0,z.jsxs)("div",{className:"text-2xl font-bold text-white",children:[null!==t&&void 0!==t&&t.total_rulings?Math.round((t.total_rulings-J)/t.total_rulings*100):0,"%"]})]})]}),(0,z.jsxs)("div",{className:"bg-amber-500/20 border border-amber-500/50 rounded-xl p-6",children:[(0,z.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,z.jsx)(o.A,{className:"w-6 h-6 text-amber-400"}),(0,z.jsxs)("div",{children:[(0,z.jsx)("h3",{className:"font-semibold text-amber-300 text-lg",children:"\u05d4\u05e4\u05e2\u05dc\u05ea \u05e0\u05d9\u05ea\u05d5\u05d7 \u05e7\u05d5\u05e8\u05e4\u05d5\u05e1"}),(0,z.jsx)("p",{className:"text-sm text-amber-200/80",children:"\u05e0\u05d9\u05ea\u05d5\u05d7 \u05de\u05e2\u05de\u05d9\u05e7: \u05d7\u05d9\u05dc\u05d5\u05e5 ArgumentOutcome, \u05d6\u05d9\u05d4\u05d5\u05d9 \u05e9\u05d5\u05e4\u05d8\u05d9\u05dd, \u05e1\u05d9\u05d5\u05d5\u05d2 \u05de\u05e9\u05e4\u05d8\u05d9"})]})]}),(0,z.jsxs)("div",{className:"grid md:grid-cols-4 gap-4 mb-4",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{className:"block text-sm text-amber-200/70 mb-1",children:"\u05db\u05de\u05d5\u05ea \u05dc\u05e0\u05d9\u05ea\u05d5\u05d7:"}),(0,z.jsxs)("select",{value:Y,onChange:e=>H(parseInt(e.target.value,10)||500),className:"w-full px-3 py-2 bg-black/30 border border-amber-500/30 rounded-lg text-white",disabled:k||x||b||g,children:[(0,z.jsx)("option",{value:100,children:"100"}),(0,z.jsx)("option",{value:500,children:"500"}),(0,z.jsx)("option",{value:1e3,children:"1,000"}),(0,z.jsx)("option",{value:5e3,children:"5,000"}),(0,z.jsx)("option",{value:1e4,children:"10,000"})]})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{className:"block text-sm text-amber-200/70 mb-1",children:"\u05e1\u05d5\u05d2 \u05d1\u05d9\u05ea \u05de\u05e9\u05e4\u05d8:"}),(0,z.jsxs)("select",{className:"w-full px-3 py-2 bg-black/30 border border-amber-500/30 rounded-lg text-white",disabled:k||x||b||g,defaultValue:"",children:[(0,z.jsx)("option",{value:"",children:"\u05d4\u05db\u05dc"}),(0,z.jsx)("option",{value:"supreme",children:"\u05d1\u05d9\u05ea \u05d4\u05de\u05e9\u05e4\u05d8 \u05d4\u05e2\u05dc\u05d9\u05d5\u05df"}),(0,z.jsx)("option",{value:"district",children:"\u05de\u05d7\u05d5\u05d6\u05d9"}),(0,z.jsx)("option",{value:"magistrate",children:"\u05e9\u05dc\u05d5\u05dd"}),(0,z.jsx)("option",{value:"labor",children:"\u05e2\u05d1\u05d5\u05d3\u05d4"}),(0,z.jsx)("option",{value:"family",children:"\u05de\u05e9\u05e4\u05d7\u05d4"})]})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{className:"block text-sm text-amber-200/70 mb-1",children:"\u05de\u05ea\u05d0\u05e8\u05d9\u05da:"}),(0,z.jsx)("input",{type:"date",className:"w-full px-3 py-2 bg-black/30 border border-amber-500/30 rounded-lg text-white",disabled:k||x||b||g})]}),(0,z.jsx)("div",{className:"flex items-end",children:(0,z.jsx)("button",{onClick:async()=>{try{A(!0),await(0,f.$P)("/api/admin/court-decisions/analyze?limit=".concat(encodeURIComponent(String(Y))),{}),w.oR.success("\u05d4\u05e0\u05d9\u05ea\u05d5\u05d7 \u05d4\u05d7\u05dc. \u05e2\u05e7\u05d5\u05d1 \u05d0\u05d7\u05e8 \u05d4\u05d4\u05ea\u05e7\u05d3\u05de\u05d5\u05ea \u05dc\u05de\u05d8\u05d4."),await _e()}catch(e){_.v.error("Error starting analysis:",e),w.oR.error(e.message||"\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05d4\u05e4\u05e2\u05dc\u05ea \u05d4\u05e0\u05d9\u05ea\u05d5\u05d7"),A(!1)}},disabled:k||x||b||g||0===J,className:"w-full px-4 py-2 bg-amber-600 hover:bg-amber-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white rounded-lg font-medium flex items-center justify-center gap-2 transition-colors",children:k?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(O.A,{className:"w-4 h-4 animate-spin"}),"\u05de\u05e0\u05ea\u05d7..."]}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(o.A,{className:"w-4 h-4"}),"\u05d4\u05ea\u05d7\u05dc \u05e0\u05d9\u05ea\u05d5\u05d7"]})})})]}),0===J&&(0,z.jsxs)("div",{className:"text-center text-green-300 py-4",children:[(0,z.jsx)(T.A,{className:"w-8 h-8 mx-auto mb-2"}),(0,z.jsx)("p",{children:"\u05db\u05dc \u05e4\u05e1\u05e7\u05d9 \u05d4\u05d3\u05d9\u05df \u05e0\u05d5\u05ea\u05d7\u05d5! \u05d0\u05d9\u05df \u05e4\u05e1\u05e7\u05d9 \u05d3\u05d9\u05df \u05d4\u05de\u05de\u05ea\u05d9\u05e0\u05d9\u05dd \u05dc\u05e0\u05d9\u05ea\u05d5\u05d7."})]})]}),(0,z.jsxs)("div",{className:"bg-white/10 rounded-xl p-4",children:[(0,z.jsxs)("h4",{className:"font-medium text-white mb-3 flex items-center gap-2",children:[(0,z.jsx)(v.A,{className:"w-4 h-4 text-amber-400"}),"\u05de\u05d4 \u05db\u05d5\u05dc\u05dc \u05d4\u05e0\u05d9\u05ea\u05d5\u05d7?"]}),(0,z.jsxs)("ul",{className:"text-sm text-white/70 space-y-2",children:[(0,z.jsxs)("li",{children:["\u2022 ",(0,z.jsx)("strong",{children:"ArgumentOutcome"})," - \u05d7\u05d9\u05dc\u05d5\u05e5 \u05d8\u05e2\u05e0\u05d5\u05ea \u05d5\u05ea\u05d5\u05e6\u05d0\u05d5\u05ea"]}),(0,z.jsxs)("li",{children:["\u2022 ",(0,z.jsx)("strong",{children:"\u05d6\u05d9\u05d4\u05d5\u05d9 \u05e9\u05d5\u05e4\u05d8\u05d9\u05dd"})," - \u05de\u05d9\u05e4\u05d5\u05d9 \u05e9\u05de\u05d5\u05ea \u05d5\u05e4\u05e8\u05d5\u05e4\u05d9\u05dc\u05d9\u05dd"]}),(0,z.jsxs)("li",{children:["\u2022 ",(0,z.jsx)("strong",{children:"\u05e1\u05d9\u05d5\u05d5\u05d2 \u05de\u05e9\u05e4\u05d8\u05d9"})," - \u05ea\u05d7\u05d5\u05de\u05d9 \u05de\u05e9\u05e4\u05d8, \u05d7\u05d5\u05e7\u05d9\u05dd \u05e8\u05dc\u05d5\u05d5\u05e0\u05d8\u05d9\u05d9\u05dd"]}),(0,z.jsxs)("li",{children:["\u2022 ",(0,z.jsx)("strong",{children:"\u05d0\u05d9\u05e0\u05d3\u05d5\u05e7\u05e1 \u05de\u05ea\u05e7\u05d3\u05dd"})," - \u05d5\u05e7\u05d8\u05d5\u05e8\u05d9\u05dd \u05dc\u05d7\u05d9\u05e4\u05d5\u05e9 \u05e1\u05de\u05e0\u05d8\u05d9"]})]}),(0,z.jsx)("p",{className:"text-xs text-white/50 mt-3",children:"\u26a0\ufe0f \u05e0\u05d9\u05ea\u05d5\u05d7 \u05d3\u05d5\u05e8\u05e9 \u05d6\u05de\u05df \u05e8\u05d9\u05e6\u05d4 \u05d2\u05d1\u05d5\u05d4 (~1-3 \u05e9\u05e0\u05d9\u05d5\u05ea \u05dc\u05e4\u05e1\u05e7 \u05d3\u05d9\u05df). \u05de\u05d5\u05de\u05dc\u05e5 \u05dc\u05d4\u05e8\u05d9\u05e5 \u05d1\u05dc\u05d9\u05dc\u05d4 \u05d0\u05d5 \u05d1\u05d6\u05de\u05e0\u05d9 \u05e2\u05d5\u05de\u05e1 \u05e0\u05de\u05d5\u05db\u05d9\u05dd."})]})]}),"idle"!==i.status&&(0,z.jsxs)("div",{className:"rounded-xl p-4 ".concat("running"===i.status?"bg-blue-500/20 border border-blue-500/50":"completed"===i.status?"bg-green-500/20 border border-green-500/50":"failed"===i.status?"bg-red-500/20 border border-red-500/50":"bg-white/10"),children:[(0,z.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,z.jsxs)("h3",{className:"font-semibold text-white flex items-center gap-2",children:["running"===i.status&&(0,z.jsx)(O.A,{className:"w-4 h-4 animate-spin text-blue-400"}),"completed"===i.status&&(0,z.jsx)(T.A,{className:"w-4 h-4 text-green-400"}),"failed"===i.status&&(0,z.jsx)(I.A,{className:"w-4 h-4 text-red-400"}),"\u05e1\u05d8\u05d8\u05d5\u05e1 \u05de\u05e9\u05d9\u05de\u05d4: ",i.job_id]}),"running"!==i.status&&(0,z.jsx)("button",{onClick:async()=>{try{await(0,f.Al)("/api/admin/court-decisions/reset-job"),w.oR.success("\u05e1\u05d8\u05d8\u05d5\u05e1 \u05d4\u05de\u05e9\u05d9\u05de\u05d4 \u05d0\u05d5\u05e4\u05e1"),await _e()}catch(e){w.oR.error(e.message||"\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05d0\u05d9\u05e4\u05d5\u05e1")}},className:"text-sm text-white/60 hover:text-white",children:"\u05d0\u05e4\u05e1"})]}),"running"===i.status&&i.progress&&(0,z.jsxs)("div",{className:"mb-3",children:[(0,z.jsxs)("div",{className:"flex justify-between text-sm text-white/70 mb-1",children:[(0,z.jsxs)("span",{children:["\u05d4\u05ea\u05e7\u05d3\u05de\u05d5\u05ea",i.progress.stage?" \u2022 ".concat(i.progress.stage):"",i.progress.type?" (".concat(i.progress.type,")"):"",i.progress.current_file?" \u2022 ".concat(i.progress.current_file):""]}),(0,z.jsxs)("span",{children:[null===(e=i.progress.current)||void 0===e?void 0:e.toLocaleString()," / ",null===(s=i.progress.total)||void 0===s?void 0:s.toLocaleString()]})]}),(0,z.jsx)("div",{className:"w-full bg-black/30 rounded-full h-2",children:(0,z.jsx)("div",{className:"bg-blue-500 rounded-full h-2 transition-all",style:{width:"".concat((i.progress.current||0)/(i.progress.total||1)*100,"%")}})})]}),i.stats&&(0,z.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("div",{className:"text-2xl font-bold text-green-400",children:i.stats.imported}),(0,z.jsx)("div",{className:"text-xs text-white/60",children:"\u05d9\u05d5\u05d1\u05d0\u05d5"})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("div",{className:"text-2xl font-bold text-yellow-400",children:i.stats.duplicates}),(0,z.jsx)("div",{className:"text-xs text-white/60",children:"\u05db\u05e4\u05d9\u05dc\u05d5\u05d9\u05d5\u05ea"})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("div",{className:"text-2xl font-bold text-red-400",children:i.stats.errors}),(0,z.jsx)("div",{className:"text-xs text-white/60",children:"\u05e9\u05d2\u05d9\u05d0\u05d5\u05ea"})]})]}),i.error&&(0,z.jsx)("div",{className:"mt-3 text-sm text-red-300 bg-red-900/30 rounded-lg p-2",children:i.error}),(0,z.jsxs)("div",{className:"mt-3 flex gap-4 text-xs text-white/50",children:[i.started_at&&(0,z.jsxs)("span",{children:["\u05d4\u05ea\u05d7\u05d9\u05dc: ",new Date(i.started_at).toLocaleString("he-IL")]}),i.completed_at&&(0,z.jsxs)("span",{children:["\u05d4\u05e1\u05ea\u05d9\u05d9\u05dd: ",new Date(i.completed_at).toLocaleString("he-IL")]})]})]}),"import"===U&&t&&t.total_rulings>0&&(0,z.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,z.jsxs)("div",{className:"bg-white/10 rounded-xl p-4",children:[(0,z.jsxs)("h3",{className:"font-semibold text-white mb-4 flex items-center gap-2",children:[(0,z.jsx)(Fe.A,{className:"w-4 h-4 text-blue-400"}),"\u05dc\u05e4\u05d9 \u05e1\u05d5\u05d2 \u05d1\u05d9\u05ea \u05de\u05e9\u05e4\u05d8"]}),(0,z.jsx)("div",{className:"space-y-2",children:Object.entries(t.by_court_type||{}).map(e=>{let[s,t]=e;return(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsx)("span",{className:"text-white/80",children:Re[s]||s}),(0,z.jsx)("span",{className:"text-white font-medium",children:t.toLocaleString()})]},s)})})]}),(0,z.jsxs)("div",{className:"bg-white/10 rounded-xl p-4",children:[(0,z.jsxs)("h3",{className:"font-semibold text-white mb-4 flex items-center gap-2",children:[(0,z.jsx)(K.A,{className:"w-4 h-4 text-green-400"}),"\u05dc\u05e4\u05d9 \u05e9\u05e0\u05d4"]}),(0,z.jsx)("div",{className:"space-y-2",children:Object.entries(t.by_year||{}).slice(0,10).map(e=>{let[s,t]=e;return(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsx)("span",{className:"text-white/80",children:s}),(0,z.jsx)("span",{className:"text-white font-medium",children:t.toLocaleString()})]},s)})})]})]}),"import"===U&&t&&Object.keys(t.top_judges||{}).length>0&&(0,z.jsxs)("div",{className:"bg-white/10 rounded-xl p-4",children:[(0,z.jsxs)("h3",{className:"font-semibold text-white mb-4 flex items-center gap-2",children:[(0,z.jsx)(N.A,{className:"w-4 h-4 text-purple-400"}),"\u05e9\u05d5\u05e4\u05d8\u05d9\u05dd \u05de\u05d5\u05d1\u05d9\u05dc\u05d9\u05dd"]}),(0,z.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-3",children:Object.entries(t.top_judges||{}).slice(0,12).map(e=>{let[s,t]=e;return(0,z.jsxs)("div",{className:"bg-black/20 rounded-lg p-3 flex items-center justify-between",children:[(0,z.jsx)("span",{className:"text-white/80 text-sm truncate",title:s,children:s}),(0,z.jsx)("span",{className:"text-purple-400 font-medium ml-2",children:t})]},s)})})]})]})};var Ie=t(7856),Oe=t(3782);const De=["\u05d4\u05ea\u05d9\u05d9\u05e9\u05e0\u05d5\u05ea","\u05e8\u05e9\u05dc\u05e0\u05d5\u05ea","\u05d4\u05e4\u05e8\u05ea \u05d7\u05d5\u05d6\u05d4","\u05e0\u05d6\u05e7","\u05e1\u05de\u05db\u05d5\u05ea","\u05e4\u05e8\u05d5\u05e6\u05d3\u05d5\u05e8\u05dc\u05d9","\u05e2\u05d5\u05d1\u05d3\u05ea\u05d9","\u05de\u05e9\u05e4\u05d8\u05d9","\u05e8\u05d0\u05d9\u05d9\u05ea\u05d9","\u05d2\u05d9\u05dc\u05d5\u05d9 \u05de\u05e1\u05de\u05db\u05d9\u05dd"],Pe=["\u05e0\u05d6\u05d9\u05e7\u05d9\u05df","\u05d7\u05d5\u05d6\u05d9\u05dd","\u05e2\u05d1\u05d5\u05d3\u05d4","\u05de\u05e9\u05e4\u05d7\u05d4","\u05de\u05e1\u05d7\u05e8\u05d9","\u05de\u05e7\u05e8\u05e7\u05e2\u05d9\u05df","\u05e4\u05dc\u05d9\u05dc\u05d9"],Ge=[{value:"\u05e2\u05dc\u05d9\u05d5\u05df",label:"\u05d1\u05d9\u05ea \u05d4\u05de\u05e9\u05e4\u05d8 \u05d4\u05e2\u05dc\u05d9\u05d5\u05df"},{value:"\u05de\u05d7\u05d5\u05d6\u05d9",label:"\u05d1\u05d9\u05ea \u05de\u05e9\u05e4\u05d8 \u05de\u05d7\u05d5\u05d6\u05d9"},{value:"\u05e9\u05dc\u05d5\u05dd",label:"\u05d1\u05d9\u05ea \u05de\u05e9\u05e4\u05d8 \u05d4\u05e9\u05dc\u05d5\u05dd"},{value:"\u05e2\u05d1\u05d5\u05d3\u05d4",label:"\u05d1\u05d9\u05ea \u05d3\u05d9\u05df \u05dc\u05e2\u05d1\u05d5\u05d3\u05d4"},{value:"\u05de\u05e9\u05e4\u05d7\u05d4",label:"\u05d1\u05d9\u05ea \u05de\u05e9\u05e4\u05d8 \u05dc\u05e2\u05e0\u05d9\u05d9\u05e0\u05d9 \u05de\u05e9\u05e4\u05d7\u05d4"},{value:"\u05ea\u05d1\u05d9\u05e2\u05d5\u05ea_\u05e7\u05d8\u05e0\u05d5\u05ea",label:"\u05ea\u05d1\u05d9\u05e2\u05d5\u05ea \u05e7\u05d8\u05e0\u05d5\u05ea"}],Me=[{value:"\u05ea\u05dc_\u05d0\u05d1\u05d9\u05d1",label:"\u05ea\u05dc \u05d0\u05d1\u05d9\u05d1"},{value:"\u05d9\u05e8\u05d5\u05e9\u05dc\u05d9\u05dd",label:"\u05d9\u05e8\u05d5\u05e9\u05dc\u05d9\u05dd"},{value:"\u05d7\u05d9\u05e4\u05d4",label:"\u05d7\u05d9\u05e4\u05d4"},{value:"\u05d1\u05d0\u05e8_\u05e9\u05d1\u05e2",label:"\u05d1\u05d0\u05e8 \u05e9\u05d1\u05e2"},{value:"\u05e0\u05e6\u05e8\u05ea",label:"\u05e0\u05e6\u05e8\u05ea"},{value:"\u05dc\u05d5\u05d3",label:"\u05dc\u05d5\u05d3 (\u05de\u05e8\u05db\u05d6)"},{value:"\u05e4\u05ea\u05d7_\u05ea\u05e7\u05d5\u05d5\u05d4",label:"\u05e4\u05ea\u05d7 \u05ea\u05e7\u05d5\u05d5\u05d4"},{value:"\u05e8\u05de\u05ea_\u05d2\u05df",label:"\u05e8\u05de\u05ea \u05d2\u05df"},{value:"\u05d0\u05e9\u05d3\u05d5\u05d3",label:"\u05d0\u05e9\u05d3\u05d5\u05d3"},{value:"\u05e8\u05d0\u05e9\u05d5\u05df_\u05dc\u05e6\u05d9\u05d5\u05df",label:"\u05e8\u05d0\u05e9\u05d5\u05df \u05dc\u05e6\u05d9\u05d5\u05df"},{value:"\u05d4\u05e8\u05e6\u05dc\u05d9\u05d4",label:"\u05d4\u05e8\u05e6\u05dc\u05d9\u05d4"},{value:"\u05db\u05e4\u05e8_\u05e1\u05d1\u05d0",label:"\u05db\u05e4\u05e8 \u05e1\u05d1\u05d0"},{value:"\u05e0\u05ea\u05e0\u05d9\u05d4",label:"\u05e0\u05ea\u05e0\u05d9\u05d4"},{value:"\u05d7\u05d3\u05e8\u05d4",label:"\u05d7\u05d3\u05e8\u05d4"},{value:"\u05e2\u05db\u05d5",label:"\u05e2\u05db\u05d5"},{value:"\u05d8\u05d1\u05e8\u05d9\u05d4",label:"\u05d8\u05d1\u05e8\u05d9\u05d4"},{value:"\u05e7\u05e8\u05d9\u05d5\u05ea",label:"\u05e7\u05e8\u05d9\u05d5\u05ea"},{value:"\u05d0\u05d9\u05dc\u05ea",label:"\u05d0\u05d9\u05dc\u05ea"}],$e=()=>{var e,s,t;const[a,i]=(0,l.useState)(!1),[c,n]=(0,l.useState)("arguments"),[d,x]=(0,l.useState)(De[0]),[o,m]=(0,l.useState)(""),[h,p]=(0,l.useState)(""),[u,b]=(0,l.useState)(""),[j,g]=(0,l.useState)(""),[N,y]=(0,l.useState)(null),[k,A]=(0,l.useState)(null),[S,C]=(0,l.useState)(Ge[1].value),[F,E]=(0,l.useState)(""),[L,R]=(0,l.useState)(null),T=(0,l.useCallback)(async()=>{i(!0);try{const e=new URLSearchParams({argument_type:d});o&&e.append("case_type",o),h&&e.append("court_type",h),u&&e.append("court_location",u),j&&e.append("judge_name",j);const s=await(0,f.apiGet)("/api/statistics/argument-success?".concat(e));y(s)}catch(e){404===e.status?(y(null),w.oR.info("\u05d0\u05d9\u05df \u05de\u05e1\u05e4\u05d9\u05e7 \u05e0\u05ea\u05d5\u05e0\u05d9\u05dd \u05dc\u05e1\u05d8\u05d8\u05d9\u05e1\u05d8\u05d9\u05e7\u05d4 \u05d6\u05d5")):(_.v.error("Error fetching argument stats:",e),w.oR.error("\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05d8\u05e2\u05d9\u05e0\u05ea \u05d4\u05e1\u05d8\u05d8\u05d9\u05e1\u05d8\u05d9\u05e7\u05d5\u05ea"))}finally{i(!1)}},[d,o,h,u,j]),I=(0,l.useCallback)(async()=>{i(!0);try{const e=new URLSearchParams({court_type:S}),s=await(0,f.apiGet)("/api/statistics/court-tendencies?".concat(e));A(s)}catch(e){_.v.error("Error fetching court tendencies:",e),A(null)}finally{i(!1)}},[S]),P=(0,l.useCallback)(async()=>{i(!0);try{const e=await(0,f.apiGet)("/api/statistics/case-types");R(e)}catch(e){_.v.error("Error fetching case type stats:",e)}finally{i(!1)}},[]);(0,l.useEffect)(()=>{"arguments"===c?T():"courts"===c?I():"cases"===c&&P()},[c,T,I,P]);const G=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blue";return(0,z.jsxs)("div",{className:"flex items-center gap-2",children:[(0,z.jsx)("div",{className:"flex-1 h-2 bg-white/10 rounded-full overflow-hidden",children:(0,z.jsx)("div",{className:"h-full ".concat({blue:"bg-blue-500",green:"bg-green-500",red:"bg-red-500",yellow:"bg-yellow-500"}[s]||"bg-blue-500"," rounded-full transition-all duration-500"),style:{width:"".concat(e,"%")}})}),(0,z.jsxs)("span",{className:"text-sm font-medium text-white min-w-[45px] text-left",children:[e.toFixed(1),"%"]})]})};return(0,z.jsxs)("div",{className:"space-y-6",dir:"rtl",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsxs)("div",{className:"flex items-center gap-3",children:[(0,z.jsx)("div",{className:"w-12 h-12 bg-blue-500/20 rounded-xl flex items-center justify-center",children:(0,z.jsx)(ce.A,{className:"w-6 h-6 text-blue-400"})}),(0,z.jsxs)("div",{children:[(0,z.jsx)("h2",{className:"text-xl font-bold text-white",children:"\u05e1\u05d8\u05d8\u05d9\u05e1\u05d8\u05d9\u05e7\u05d5\u05ea \u05de\u05e9\u05e4\u05d8\u05d9\u05d5\u05ea"}),(0,z.jsx)("p",{className:"text-sm text-white/60",children:"\u05e0\u05ea\u05d5\u05e0\u05d9\u05dd \u05d0\u05d2\u05e8\u05d2\u05d8\u05d9\u05d1\u05d9\u05d9\u05dd \u05de\u05e4\u05e1\u05e7\u05d9 \u05d3\u05d9\u05df \u05e4\u05d5\u05de\u05d1\u05d9\u05d9\u05dd"})]})]}),(0,z.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-green-500/20 border border-green-500/30 rounded-lg",children:[(0,z.jsx)(Ie.A,{className:"w-4 h-4 text-green-400"}),(0,z.jsx)("span",{className:"text-sm text-green-300",children:"\u05e0\u05ea\u05d5\u05e0\u05d9\u05dd \u05d0\u05d2\u05e8\u05d2\u05d8\u05d9\u05d1\u05d9\u05d9\u05dd \u05d1\u05dc\u05d1\u05d3"})]})]}),(0,z.jsx)("div",{className:"flex gap-2 border-b border-white/10 pb-2",children:[{id:"arguments",label:"\u05d4\u05e6\u05dc\u05d7\u05ea \u05d8\u05d9\u05e2\u05d5\u05e0\u05d9\u05dd",icon:v.A},{id:"courts",label:"\u05e0\u05d8\u05d9\u05d5\u05ea \u05d1\u05ea\u05d9 \u05de\u05e9\u05e4\u05d8",icon:Fe.A},{id:"cases",label:"\u05e1\u05d5\u05d2\u05d9 \u05ea\u05d9\u05e7\u05d9\u05dd",icon:fe.A}].map(e=>(0,z.jsxs)("button",{onClick:()=>n(e.id),className:"flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ".concat(c===e.id?"bg-blue-500/20 text-blue-400":"text-white/60 hover:text-white hover:bg-white/5"),children:[(0,z.jsx)(e.icon,{className:"w-4 h-4"}),e.label]},e.id))}),"arguments"===c&&(0,z.jsxs)("div",{className:"space-y-6",children:[(0,z.jsx)("div",{className:"bg-white/5 rounded-xl p-4",children:(0,z.jsxs)("div",{className:"grid md:grid-cols-4 gap-4",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{className:"block text-sm text-white/70 mb-1",children:"\u05e1\u05d5\u05d2 \u05d8\u05d9\u05e2\u05d5\u05df"}),(0,z.jsx)("select",{value:d,onChange:e=>x(e.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white",children:De.map(e=>(0,z.jsx)("option",{value:e,children:e},e))})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{className:"block text-sm text-white/70 mb-1",children:"\u05e1\u05d5\u05d2 \u05ea\u05d9\u05e7 (\u05d0\u05d5\u05e4\u05e6\u05d9\u05d5\u05e0\u05dc\u05d9)"}),(0,z.jsxs)("select",{value:o,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white",children:[(0,z.jsx)("option",{value:"",children:"\u05d4\u05db\u05dc"}),Pe.map(e=>(0,z.jsx)("option",{value:e,children:e},e))]})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{className:"block text-sm text-white/70 mb-1",children:"\u05e1\u05d5\u05d2 \u05d1\u05d9\u05ea \u05de\u05e9\u05e4\u05d8 (\u05d0\u05d5\u05e4\u05e6\u05d9\u05d5\u05e0\u05dc\u05d9)"}),(0,z.jsxs)("select",{value:h,onChange:e=>p(e.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white",children:[(0,z.jsx)("option",{value:"",children:"\u05d4\u05db\u05dc"}),Ge.map(e=>(0,z.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{className:"block text-sm text-white/70 mb-1",children:"\u05de\u05d9\u05e7\u05d5\u05dd \u05d1\u05d9\u05ea \u05de\u05e9\u05e4\u05d8 (\u05d0\u05d5\u05e4\u05e6\u05d9\u05d5\u05e0\u05dc\u05d9)"}),(0,z.jsxs)("select",{value:u,onChange:e=>b(e.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white",children:[(0,z.jsx)("option",{value:"",children:"\u05d4\u05db\u05dc"}),Me.map(e=>(0,z.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{className:"block text-sm text-white/70 mb-1",children:"\u05e9\u05dd \u05e9\u05d5\u05e4\u05d8 (\u05d0\u05d5\u05e4\u05e6\u05d9\u05d5\u05e0\u05dc\u05d9)"}),(0,z.jsx)("input",{type:"text",value:j,onChange:e=>g(e.target.value),placeholder:"\u05dc\u05d3\u05d5\u05d2\u05de\u05d4: \u05db\u05d4\u05df",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40"}),(0,z.jsx)("p",{className:"text-xs text-white/50 mt-1",children:"\u05e1\u05d9\u05db\u05d5\u05d9 \u05d4\u05d8\u05e2\u05e0\u05d4 \u05d0\u05e6\u05dc \u05d4\u05e9\u05d5\u05e4\u05d8"})]}),(0,z.jsx)("div",{className:"flex items-end",children:(0,z.jsxs)("button",{onClick:T,disabled:a,className:"w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 text-white rounded-lg font-medium flex items-center justify-center gap-2",children:[a?(0,z.jsx)(O.A,{className:"w-4 h-4 animate-spin"}):(0,z.jsx)(r.A,{className:"w-4 h-4"}),"\u05e2\u05d3\u05db\u05df"]})})]})}),N?(0,z.jsxs)("div",{className:"bg-white/10 rounded-xl p-6",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,z.jsxs)("h3",{className:"text-lg font-semibold text-white",children:["\u05d8\u05d9\u05e2\u05d5\u05e0\u05d9 ",N.argument_type,N.case_type&&" \u05d1\u05ea\u05d9\u05e7\u05d9 ".concat(N.case_type)]}),(0,z.jsxs)("div",{className:"text-sm text-white/60",children:["\u05de\u05d1\u05d5\u05e1\u05e1 \u05e2\u05dc ",N.total_cases," \u05de\u05e7\u05e8\u05d9\u05dd"]})]}),(0,z.jsx)("div",{className:"space-y-4 mb-6",children:Object.entries(N.rates).map(e=>{let[s,t]=e;return(0,z.jsxs)("div",{children:[(0,z.jsxs)("div",{className:"flex justify-between text-sm text-white/80 mb-1",children:[(0,z.jsxs)("span",{children:["accepted"===s&&"\u05d4\u05ea\u05e7\u05d1\u05dc","rejected"===s&&"\u05e0\u05d3\u05d7\u05d4","partially_accepted"===s&&"\u05d4\u05ea\u05e7\u05d1\u05dc \u05d7\u05dc\u05e7\u05d9\u05ea","not_addressed"===s&&"\u05dc\u05d0 \u05e0\u05d3\u05d5\u05df"]}),(0,z.jsxs)("span",{children:[t.count," \u05de\u05e7\u05e8\u05d9\u05dd"]})]}),G(t.rate,"accepted"===s?"green":"rejected"===s?"red":"partially_accepted"===s?"yellow":"blue")]},s)})}),(null===(e=N.insights)||void 0===e?void 0:e.length)>0&&(0,z.jsxs)("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4",children:[(0,z.jsx)("h4",{className:"font-medium text-blue-300 mb-2",children:"\u05ea\u05d5\u05d1\u05e0\u05d5\u05ea"}),(0,z.jsx)("ul",{className:"space-y-1 text-sm text-blue-200/80",children:N.insights.map((e,s)=>(0,z.jsxs)("li",{children:["\u2022 ",e]},s))})]})]}):!a&&(0,z.jsxs)("div",{className:"bg-white/5 rounded-xl p-12 text-center",children:[(0,z.jsx)(D.A,{className:"w-12 h-12 text-white/30 mx-auto mb-4"}),(0,z.jsx)("p",{className:"text-white/60",children:"\u05d0\u05d9\u05df \u05de\u05e1\u05e4\u05d9\u05e7 \u05e0\u05ea\u05d5\u05e0\u05d9\u05dd \u05dc\u05e1\u05d8\u05d8\u05d9\u05e1\u05d8\u05d9\u05e7\u05d4 \u05d6\u05d5"}),(0,z.jsx)("p",{className:"text-sm text-white/40 mt-2",children:"\u05e0\u05d3\u05e8\u05e9\u05d9\u05dd \u05dc\u05e4\u05d7\u05d5\u05ea 10 \u05de\u05e7\u05e8\u05d9\u05dd \u05dc\u05e0\u05d9\u05ea\u05d5\u05d7"})]})]}),"courts"===c&&(0,z.jsxs)("div",{className:"space-y-6",children:[(0,z.jsx)("div",{className:"bg-white/5 rounded-xl p-4",children:(0,z.jsxs)("div",{className:"flex gap-4 items-end",children:[(0,z.jsxs)("div",{className:"flex-1",children:[(0,z.jsx)("label",{className:"block text-sm text-white/70 mb-1",children:"\u05d1\u05d9\u05ea \u05de\u05e9\u05e4\u05d8"}),(0,z.jsx)("select",{value:S,onChange:e=>C(e.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white",children:Ge.map(e=>(0,z.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,z.jsxs)("button",{onClick:I,disabled:a,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 text-white rounded-lg font-medium flex items-center gap-2",children:[a?(0,z.jsx)(O.A,{className:"w-4 h-4 animate-spin"}):(0,z.jsx)(r.A,{className:"w-4 h-4"}),"\u05e2\u05d3\u05db\u05df"]})]})}),(null===k||void 0===k?void 0:k.summary)&&(0,z.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,z.jsxs)("div",{className:"bg-green-500/10 border border-green-500/30 rounded-xl p-4",children:[(0,z.jsxs)("h3",{className:"font-semibold text-green-300 mb-4 flex items-center gap-2",children:[(0,z.jsx)(M.A,{className:"w-5 h-5"}),"\u05d8\u05d9\u05e2\u05d5\u05e0\u05d9\u05dd \u05d7\u05d6\u05e7\u05d9\u05dd"]}),(0,z.jsx)("div",{className:"space-y-3",children:null===(s=k.summary.strongest_arguments)||void 0===s?void 0:s.map((e,s)=>(0,z.jsxs)("div",{className:"flex justify-between items-center",children:[(0,z.jsx)("span",{className:"text-white/80",children:e.type}),(0,z.jsxs)("span",{className:"text-green-400 font-medium",children:[e.rate.toFixed(1),"%"]})]},s))})]}),(0,z.jsxs)("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-4",children:[(0,z.jsxs)("h3",{className:"font-semibold text-red-300 mb-4 flex items-center gap-2",children:[(0,z.jsx)(Oe.A,{className:"w-5 h-5"}),"\u05d8\u05d9\u05e2\u05d5\u05e0\u05d9\u05dd \u05d7\u05dc\u05e9\u05d9\u05dd"]}),(0,z.jsx)("div",{className:"space-y-3",children:null===(t=k.summary.weakest_arguments)||void 0===t?void 0:t.map((e,s)=>(0,z.jsxs)("div",{className:"flex justify-between items-center",children:[(0,z.jsx)("span",{className:"text-white/80",children:e.type}),(0,z.jsxs)("span",{className:"text-red-400 font-medium",children:[e.rate.toFixed(1),"%"]})]},s))})]})]}),(null===k||void 0===k?void 0:k.tendencies)&&Object.keys(k.tendencies).length>0&&(0,z.jsx)("div",{className:"bg-white/10 rounded-xl overflow-hidden",children:(0,z.jsxs)("table",{className:"w-full",children:[(0,z.jsx)("thead",{className:"bg-white/5",children:(0,z.jsxs)("tr",{children:[(0,z.jsx)("th",{className:"text-right px-4 py-3 text-sm font-medium text-white/70",children:"\u05e1\u05d5\u05d2 \u05d8\u05d9\u05e2\u05d5\u05df"}),(0,z.jsx)("th",{className:"text-center px-4 py-3 text-sm font-medium text-white/70",children:'\u05e1\u05d4"\u05db'}),(0,z.jsx)("th",{className:"text-center px-4 py-3 text-sm font-medium text-white/70",children:"\u05d4\u05e6\u05dc\u05d7\u05d4"}),(0,z.jsx)("th",{className:"text-center px-4 py-3 text-sm font-medium text-white/70",children:"\u05e7\u05d1\u05dc\u05d4"}),(0,z.jsx)("th",{className:"text-center px-4 py-3 text-sm font-medium text-white/70",children:"\u05d3\u05d7\u05d9\u05d9\u05d4"})]})}),(0,z.jsx)("tbody",{children:Object.entries(k.tendencies).map(e=>{let[s,t]=e;return(0,z.jsxs)("tr",{className:"border-t border-white/5",children:[(0,z.jsx)("td",{className:"px-4 py-3 text-white/80",children:s}),(0,z.jsx)("td",{className:"px-4 py-3 text-center text-white/60",children:t.total}),(0,z.jsx)("td",{className:"px-4 py-3 text-center",children:(0,z.jsxs)("span",{className:"font-medium ".concat(t.success_rate>=50?"text-green-400":"text-red-400"),children:[t.success_rate.toFixed(1),"%"]})}),(0,z.jsxs)("td",{className:"px-4 py-3 text-center text-green-400",children:[t.acceptance_rate.toFixed(1),"%"]}),(0,z.jsxs)("td",{className:"px-4 py-3 text-center text-red-400",children:[t.rejection_rate.toFixed(1),"%"]})]},s)})})]})})]}),"cases"===c&&(0,z.jsx)("div",{className:"space-y-6",children:null!==L&&void 0!==L&&L.case_types&&Object.keys(L.case_types).length>0?(0,z.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(L.case_types).map(e=>{let[s,t]=e;return(0,z.jsxs)("div",{className:"bg-white/10 rounded-xl p-4",children:[(0,z.jsxs)("h3",{className:"font-semibold text-white mb-3 flex items-center gap-2",children:[(0,z.jsx)(fe.A,{className:"w-4 h-4 text-purple-400"}),s]}),(0,z.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,z.jsxs)("div",{className:"flex justify-between",children:[(0,z.jsx)("span",{className:"text-white/60",children:"\u05d8\u05d9\u05e2\u05d5\u05e0\u05d9\u05dd"}),(0,z.jsx)("span",{className:"text-white",children:t.total_arguments})]}),(0,z.jsxs)("div",{className:"flex justify-between",children:[(0,z.jsx)("span",{className:"text-white/60",children:"\u05d0\u05d7\u05d5\u05d6 \u05e7\u05d1\u05dc\u05d4"}),(0,z.jsxs)("span",{className:"text-green-400",children:[t.overall_acceptance_rate.toFixed(1),"%"]})]}),(0,z.jsxs)("div",{className:"flex justify-between",children:[(0,z.jsx)("span",{className:"text-white/60",children:"\u05d0\u05d7\u05d5\u05d6 \u05d3\u05d7\u05d9\u05d9\u05d4"}),(0,z.jsxs)("span",{className:"text-red-400",children:[t.overall_rejection_rate.toFixed(1),"%"]})]})]})]},s)})}):!a&&(0,z.jsxs)("div",{className:"bg-white/5 rounded-xl p-12 text-center",children:[(0,z.jsx)(D.A,{className:"w-12 h-12 text-white/30 mx-auto mb-4"}),(0,z.jsx)("p",{className:"text-white/60",children:"\u05d0\u05d9\u05df \u05e0\u05ea\u05d5\u05e0\u05d9\u05dd \u05d6\u05de\u05d9\u05e0\u05d9\u05dd"})]})}),a&&(0,z.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,z.jsxs)("div",{className:"bg-gray-800 rounded-xl p-6 flex items-center gap-3",children:[(0,z.jsx)(O.A,{className:"w-6 h-6 text-blue-400 animate-spin"}),(0,z.jsx)("span",{className:"text-white",children:"\u05d8\u05d5\u05e2\u05df \u05e0\u05ea\u05d5\u05e0\u05d9\u05dd..."})]})})]})};var qe=t(5258),Ue=t(7978);const Be={core:(0,z.jsx)(o.A,{className:"w-4 h-4"}),analysis:(0,z.jsx)(me.A,{className:"w-4 h-4"}),search:(0,z.jsx)(u.A,{className:"w-4 h-4"}),processing:(0,z.jsx)(qe.A,{className:"w-4 h-4"}),reports:(0,z.jsx)(v.A,{className:"w-4 h-4"}),editing:(0,z.jsx)(v.A,{className:"w-4 h-4"}),output:(0,z.jsx)(v.A,{className:"w-4 h-4"}),advanced:(0,z.jsx)(we.A,{className:"w-4 h-4"}),admin:(0,z.jsx)(i.A,{className:"w-4 h-4"})},Je=e=>e>=1e6?"".concat((e/1e6).toFixed(1),"M"):e>=1e3?"".concat((e/1e3).toFixed(0),"K"):e.toString(),Ke=()=>{var e;const[s,t]=(0,l.useState)(!1),[a,d]=(0,l.useState)([]),[x,o]=(0,l.useState)([]),[m,h]=(0,l.useState)("pro"),[u,b]=(0,l.useState)(null),[j,N]=(0,l.useState)(!1),[v,y]=(0,l.useState)([]),[_,k]=(0,l.useState)({monthly_tokens_limit:5e5,monthly_cases_limit:50,enabled_services:[],service_caps:{},notes:""}),[A,F]=(0,l.useState)(""),[E,L]=(0,l.useState)(""),[R,T]=(0,l.useState)(1e3),[I,O]=(0,l.useState)(null),D=(0,l.useCallback)(async()=>{try{t(!0);const e=await(0,f.apiGet)("/admin/subscriptions/policies");d(e||[])}catch(e){console.error("Failed to fetch policies:",e),w.oR.error("\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05d8\u05e2\u05d9\u05e0\u05ea \u05de\u05d3\u05d9\u05e0\u05d9\u05d5\u05ea")}finally{t(!1)}},[]),P=(0,l.useCallback)(async()=>{try{const e=await(0,f.apiGet)("/admin/subscriptions/services");o(e||[])}catch(e){console.error("Failed to fetch services:",e)}},[]),G=async e=>{try{const s=await(0,f.apiGet)("/admin/subscriptions/policies/".concat(e,"/history"));y(s||[]),N(!0)}catch(s){console.error("Failed to fetch history:",s),w.oR.error("\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05d8\u05e2\u05d9\u05e0\u05ea \u05d4\u05d9\u05e1\u05d8\u05d5\u05e8\u05d9\u05d4")}};(0,l.useEffect)(()=>{D(),P()},[D,P]),(0,l.useEffect)(()=>{const e=a.find(e=>e.tier===m&&e.is_active);e&&(e=>{k({monthly_tokens_limit:e.monthly_tokens_limit,monthly_cases_limit:e.monthly_cases_limit,enabled_services:[...e.enabled_services],service_caps:JSON.parse(JSON.stringify(e.service_caps)),notes:e.notes||""}),h(e.tier)})(e)},[m,a]);const M=a.reduce((e,s)=>(s.is_active&&(e[s.tier]=s),e),{}),$=["free","basic","pro","professional","firm","enterprise","admin"];return(0,z.jsxs)("div",{className:"p-6 space-y-6 bg-gray-900 min-h-screen text-white",dir:"rtl",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsxs)("div",{children:[(0,z.jsxs)("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[(0,z.jsx)(i.A,{className:"w-6 h-6 text-blue-400"}),"\u05de\u05e1\u05dc\u05d5\u05dc\u05d9\u05dd \u05d5\u05d4\u05e8\u05e9\u05d0\u05d5\u05ea"]}),(0,z.jsx)("p",{className:"text-gray-400 mt-1",children:"\u05e7\u05d5\u05d1\u05e2 \u05d0\u05d9\u05dc\u05d5 \u05e9\u05d9\u05e8\u05d5\u05ea\u05d9\u05dd \u05d6\u05de\u05d9\u05e0\u05d9\u05dd \u05dc\u05db\u05dc \u05e9\u05db\u05d1\u05d4 \u05d5\u05de\u05d4 \u05de\u05db\u05e1\u05ea \u05d4\u05d8\u05d5\u05e7\u05e0\u05d9\u05dd/\u05e4\u05e2\u05d5\u05dc\u05d5\u05ea."})]}),(0,z.jsxs)("button",{onClick:D,disabled:s,className:"flex items-center gap-2 px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors",children:[(0,z.jsx)(r.A,{className:"w-4 h-4 ".concat(s?"animate-spin":"")}),"\u05e8\u05e2\u05e0\u05d5\u05df"]})]}),(0,z.jsx)("div",{className:"flex gap-2 flex-wrap",children:$.map(e=>(0,z.jsx)("button",{onClick:()=>h(e),className:"px-4 py-2 rounded-lg font-medium transition-colors ".concat(m===e?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))}),(0,z.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,z.jsxs)("div",{className:"bg-gray-800 rounded-xl p-6 space-y-6",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsxs)("h2",{className:"text-xl font-semibold",children:["\u05e2\u05e8\u05d9\u05db\u05ea \u05de\u05d3\u05d9\u05e0\u05d9\u05d5\u05ea - ",m]}),(0,z.jsxs)("button",{onClick:()=>G(m),className:"text-sm text-blue-400 hover:text-blue-300 flex items-center gap-1",children:[(0,z.jsx)(Ue.A,{className:"w-4 h-4"}),"\u05d4\u05d9\u05e1\u05d8\u05d5\u05e8\u05d9\u05d4"]})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"\u05de\u05db\u05e1\u05ea \u05d8\u05d5\u05e7\u05e0\u05d9\u05dd \u05d7\u05d5\u05d3\u05e9\u05d9\u05ea"}),(0,z.jsx)("input",{type:"number",value:_.monthly_tokens_limit,onChange:e=>k(s=>(0,H.A)((0,H.A)({},s),{},{monthly_tokens_limit:parseInt(e.target.value)||0})),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white"}),(0,z.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[Je(_.monthly_tokens_limit)," \u05d8\u05d5\u05e7\u05e0\u05d9\u05dd \u05dc\u05d7\u05d5\u05d3\u05e9"]})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"\u05de\u05db\u05e1\u05ea \u05ea\u05d9\u05e7\u05d9\u05dd \u05d7\u05d5\u05d3\u05e9\u05d9\u05ea (\u05e8\u05d9\u05e7 = \u05dc\u05dc\u05d0 \u05d4\u05d2\u05d1\u05dc\u05d4)"}),(0,z.jsx)("input",{type:"number",value:null!==(e=_.monthly_cases_limit)&&void 0!==e?e:"",onChange:e=>k(s=>(0,H.A)((0,H.A)({},s),{},{monthly_cases_limit:e.target.value?parseInt(e.target.value):null})),placeholder:"\u05dc\u05dc\u05d0 \u05d4\u05d2\u05d1\u05dc\u05d4",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white"})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"\u05e9\u05d9\u05e8\u05d5\u05ea\u05d9\u05dd \u05e4\u05ea\u05d5\u05d7\u05d9\u05dd"}),(0,z.jsx)("p",{className:"text-xs text-gray-500 mb-3",children:"\u05e9\u05d9\u05e8\u05d5\u05ea \u05db\u05d1\u05d5\u05d9 \u05d9\u05d9\u05d7\u05e1\u05dd \u05dc\u05e4\u05e0\u05d9 \u05d1\u05d9\u05e6\u05d5\u05e2 \u05e4\u05e2\u05d5\u05dc\u05d4 \u05d9\u05e7\u05e8\u05d4."}),(0,z.jsx)("div",{className:"grid grid-cols-2 gap-2 max-h-60 overflow-y-auto",children:x.map(e=>(0,z.jsxs)("button",{onClick:()=>{return s=e.name,void k(e=>(0,H.A)((0,H.A)({},e),{},{enabled_services:e.enabled_services.includes(s)?e.enabled_services.filter(e=>e!==s):[...e.enabled_services,s]}));var s},className:"flex items-center gap-2 p-2 rounded-lg text-sm transition-colors ".concat(_.enabled_services.includes(e.name)?"bg-green-600/20 border border-green-500 text-green-300":"bg-gray-700 border border-gray-600 text-gray-400 hover:bg-gray-600"),children:[_.enabled_services.includes(e.name)?(0,z.jsx)(g.A,{className:"w-4 h-4"}):(0,z.jsx)(S.A,{className:"w-4 h-4"}),Be[e.category],(0,z.jsx)("span",{className:"truncate",children:e.display_name})]},e.name))})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"\u05de\u05d2\u05d1\u05dc\u05d5\u05ea \u05e4\u05e8-\u05e9\u05d9\u05e8\u05d5\u05ea"}),(0,z.jsx)("div",{className:"space-y-2",children:x.filter(e=>e.caps.length>0).map(e=>(0,z.jsxs)("div",{className:"bg-gray-700 rounded-lg p-3",children:[(0,z.jsx)("div",{className:"font-medium text-sm mb-2",children:e.display_name}),(0,z.jsx)("div",{className:"grid grid-cols-2 gap-2",children:e.caps.map(s=>{var t,l;return(0,z.jsxs)("div",{className:"flex items-center gap-2",children:[(0,z.jsxs)("span",{className:"text-xs text-gray-400 truncate flex-1",children:[s,":"]}),(0,z.jsx)("input",{type:"number",value:null!==(t=null===(l=_.service_caps[e.name])||void 0===l?void 0:l[s])&&void 0!==t?t:"",onChange:t=>{return l=e.name,a=s,i=t.target.value?parseInt(t.target.value):null,void k(e=>{const s=(0,H.A)({},e.service_caps);return null===i?s[l]&&(delete s[l][a],0===Object.keys(s[l]).length&&delete s[l]):(s[l]||(s[l]={}),s[l][a]=i),(0,H.A)((0,H.A)({},e),{},{service_caps:s})});var l,a,i},placeholder:"\u05dc\u05dc\u05d0",className:"w-20 bg-gray-600 border border-gray-500 rounded px-2 py-1 text-sm text-white"})]},s)})})]},e.name))})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"\u05d4\u05e2\u05e8\u05d5\u05ea"}),(0,z.jsx)("textarea",{value:_.notes,onChange:e=>k(s=>(0,H.A)((0,H.A)({},s),{},{notes:e.target.value})),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white h-20",placeholder:"\u05d4\u05e2\u05e8\u05d5\u05ea \u05dc\u05e6\u05d5\u05d5\u05ea..."})]}),(0,z.jsxs)("button",{onClick:async()=>{try{t(!0),await(0,f.$P)("/admin/subscriptions/policies",{tier:m,monthly_tokens_limit:_.monthly_tokens_limit,monthly_cases_limit:_.monthly_cases_limit,enabled_services:_.enabled_services,service_caps:_.service_caps,notes:_.notes||null}),w.oR.success("\u05d4\u05de\u05d3\u05d9\u05e0\u05d9\u05d5\u05ea \u05e2\u05d5\u05d3\u05db\u05e0\u05d4. \u05d4\u05e9\u05d9\u05e0\u05d5\u05d9\u05d9\u05dd \u05d7\u05dc\u05d9\u05dd \u05de\u05d9\u05d9\u05d3\u05d9\u05ea."),D()}catch(e){console.error("Failed to save policy:",e),w.oR.error("\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05e9\u05de\u05d9\u05e8\u05ea \u05de\u05d3\u05d9\u05e0\u05d9\u05d5\u05ea")}finally{t(!1)}},disabled:s,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-blue-600 hover:bg-blue-500 disabled:bg-gray-600 rounded-lg font-medium transition-colors",children:[(0,z.jsx)(C.A,{className:"w-5 h-5"}),"\u05e9\u05de\u05d5\u05e8 \u05de\u05d3\u05d9\u05e0\u05d9\u05d5\u05ea"]})]}),(0,z.jsxs)("div",{className:"space-y-6",children:[(0,z.jsxs)("div",{className:"bg-gray-800 rounded-xl p-6",children:[(0,z.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"\u05e1\u05e7\u05d9\u05e8\u05ea \u05de\u05d3\u05d9\u05e0\u05d9\u05d5\u05ea \u05e4\u05e2\u05d9\u05dc\u05d4"}),(0,z.jsx)("div",{className:"space-y-3",children:$.map(e=>{const s=M[e];return(0,z.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg cursor-pointer transition-colors ".concat(u===e?"bg-gray-700":"bg-gray-750 hover:bg-gray-700"),onClick:()=>b(u===e?null:e),children:[(0,z.jsxs)("div",{className:"flex items-center gap-3",children:[(0,z.jsx)("span",{className:"font-medium",children:e}),s?(0,z.jsxs)("span",{className:"text-xs text-green-400 flex items-center gap-1",children:[(0,z.jsx)(g.A,{className:"w-3 h-3"}),"\u05de\u05d5\u05d2\u05d3\u05e8"]}):(0,z.jsxs)("span",{className:"text-xs text-yellow-400 flex items-center gap-1",children:[(0,z.jsx)(p.A,{className:"w-3 h-3"}),"\u05dc\u05d0 \u05de\u05d5\u05d2\u05d3\u05e8"]})]}),(0,z.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-400",children:[s&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("span",{children:[Je(s.monthly_tokens_limit)," \u05d8\u05d5\u05e7\u05e0\u05d9\u05dd"]}),(0,z.jsxs)("span",{children:[s.enabled_services.length," \u05e9\u05d9\u05e8\u05d5\u05ea\u05d9\u05dd"]})]}),u===e?(0,z.jsx)(c.A,{className:"w-4 h-4"}):(0,z.jsx)(n.A,{className:"w-4 h-4"})]})]},e)})})]}),(0,z.jsxs)("div",{className:"bg-gray-800 rounded-xl p-6",children:[(0,z.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"\u05ea\u05e6\u05d5\u05d2\u05d4 \u05de\u05e7\u05d3\u05d9\u05de\u05d4"}),(0,z.jsxs)("div",{className:"space-y-4",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"\u05de\u05d6\u05d4\u05d4 \u05de\u05e9\u05ea\u05de\u05e9"}),(0,z.jsx)("input",{type:"text",value:A,onChange:e=>F(e.target.value),placeholder:"user_id...",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white"})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"\u05e9\u05d9\u05e8\u05d5\u05ea"}),(0,z.jsxs)("select",{value:E,onChange:e=>L(e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white",children:[(0,z.jsx)("option",{value:"",children:"\u05d1\u05d7\u05e8 \u05e9\u05d9\u05e8\u05d5\u05ea..."}),x.map(e=>(0,z.jsx)("option",{value:e.name,children:e.display_name},e.name))]})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"\u05d8\u05d5\u05e7\u05e0\u05d9\u05dd \u05de\u05e9\u05d5\u05e2\u05e8\u05d9\u05dd"}),(0,z.jsx)("input",{type:"number",value:R,onChange:e=>T(parseInt(e.target.value)||0),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white"})]}),(0,z.jsx)("button",{onClick:async()=>{if(A&&E)try{const e=await(0,f.$P)("/admin/subscriptions/preview",{user_id:A,service_name:E,estimated_tokens:R,cap_key:null,cap_delta:1});O(e)}catch(e){console.error("Preview failed:",e),w.oR.error("\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05ea\u05e6\u05d5\u05d2\u05d4 \u05de\u05e7\u05d3\u05d9\u05de\u05d4")}else w.oR.error("\u05e0\u05d0 \u05dc\u05de\u05dc\u05d0 \u05de\u05d6\u05d4\u05d4 \u05de\u05e9\u05ea\u05de\u05e9 \u05d5\u05e9\u05d9\u05e8\u05d5\u05ea")},className:"w-full px-4 py-2 bg-purple-600 hover:bg-purple-500 rounded-lg font-medium",children:"\u05d1\u05d3\u05d5\u05e7 \u05d4\u05e8\u05e9\u05d0\u05d5\u05ea"}),I&&(0,z.jsxs)("div",{className:"p-4 rounded-lg ".concat(I.allowed?"bg-green-900/30 border border-green-700":"bg-red-900/30 border border-red-700"),children:[(0,z.jsx)("div",{className:"flex items-center gap-2 font-medium mb-2",children:I.allowed?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(g.A,{className:"w-5 h-5 text-green-400"})," \u05de\u05d5\u05ea\u05e8"]}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(S.A,{className:"w-5 h-5 text-red-400"})," \u05d7\u05e1\u05d5\u05dd"]})}),I.reason&&(0,z.jsx)("p",{className:"text-sm text-gray-300",children:I.reason}),(0,z.jsxs)("div",{className:"mt-2 text-xs text-gray-400",children:[(0,z.jsxs)("div",{children:["\u05e9\u05d9\u05e8\u05d5\u05ea: ",I.service_enabled?"\u05de\u05d5\u05e4\u05e2\u05dc":"\u05de\u05d5\u05e9\u05d1\u05ea"]}),(0,z.jsxs)("div",{children:["\u05d8\u05d5\u05e7\u05e0\u05d9\u05dd: ",I.tokens_check.used,"/",I.tokens_check.limit," (\u05e0\u05d5\u05ea\u05e8 ",I.tokens_check.remaining,")"]})]})]})]})]})]})]}),j&&(0,z.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>N(!1),children:(0,z.jsxs)("div",{className:"bg-gray-800 rounded-xl p-6 max-w-2xl w-full max-h-[80vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,z.jsxs)("h2",{className:"text-xl font-semibold mb-4",children:["\u05d4\u05d9\u05e1\u05d8\u05d5\u05e8\u05d9\u05d9\u05ea \u05de\u05d3\u05d9\u05e0\u05d9\u05d5\u05ea - ",m]}),(0,z.jsx)("div",{className:"space-y-3",children:v.map((e,s)=>(0,z.jsxs)("div",{className:"p-4 rounded-lg ".concat(e.is_active?"bg-blue-900/30 border border-blue-700":"bg-gray-700"),children:[(0,z.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,z.jsxs)("div",{className:"flex items-center gap-2",children:[e.is_active&&(0,z.jsx)("span",{className:"text-xs bg-blue-600 px-2 py-0.5 rounded",children:"\u05e4\u05e2\u05d9\u05dc"}),(0,z.jsx)("span",{className:"text-sm text-gray-400",children:new Date(e.effective_from).toLocaleDateString("he-IL")})]}),!e.is_active&&(0,z.jsx)("button",{onClick:()=>(async(e,s)=>{try{await(0,f.$P)("/admin/subscriptions/policies/".concat(e,"/activate/").concat(s),{}),w.oR.success("\u05d4\u05de\u05d3\u05d9\u05e0\u05d9\u05d5\u05ea \u05d4\u05d5\u05e4\u05e2\u05dc\u05d4"),D(),G(e)}catch(t){console.error("Failed to activate policy:",t),w.oR.error("\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05d4\u05e4\u05e2\u05dc\u05ea \u05de\u05d3\u05d9\u05e0\u05d9\u05d5\u05ea")}})(m,e.id),className:"text-sm text-blue-400 hover:text-blue-300",children:"\u05d4\u05e4\u05e2\u05dc"})]}),(0,z.jsxs)("div",{className:"text-sm",children:[(0,z.jsx)("span",{className:"text-gray-400",children:"\u05d8\u05d5\u05e7\u05e0\u05d9\u05dd:"})," ",Je(e.monthly_tokens_limit)," |",(0,z.jsx)("span",{className:"text-gray-400 ml-2",children:"\u05e9\u05d9\u05e8\u05d5\u05ea\u05d9\u05dd:"})," ",e.enabled_services.length]}),e.notes&&(0,z.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e.notes})]},e.id))}),(0,z.jsx)("button",{onClick:()=>N(!1),className:"mt-4 w-full px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded-lg",children:"\u05e1\u05d2\u05d5\u05e8"})]})})]})};var Xe=t(1360),Ye=t(6174);const He=e=>e>=1e6?"".concat((e/1e6).toFixed(1),"M"):e>=1e3?"".concat((e/1e3).toFixed(0),"K"):e.toString(),Qe=e=>{let{used:s,limit:t,label:l}=e;const a=t>0?Math.min(100,s/t*100):0,i=a>90?"bg-red-500":a>70?"bg-yellow-500":"bg-green-500";return(0,z.jsxs)("div",{className:"space-y-1",children:[l&&(0,z.jsx)("div",{className:"text-xs text-gray-400",children:l}),(0,z.jsx)("div",{className:"h-2 bg-gray-700 rounded-full overflow-hidden",children:(0,z.jsx)("div",{className:"h-full ".concat(i," transition-all"),style:{width:"".concat(a,"%")}})}),(0,z.jsxs)("div",{className:"text-xs text-gray-500",children:[He(s)," / ",He(t)," (",a.toFixed(0),"%)"]})]})},We=()=>{const[e,s]=(0,l.useState)(!1),[t,a]=(0,l.useState)(""),[i,c]=(0,l.useState)(null),[n,d]=(0,l.useState)([]),[x,o]=(0,l.useState)(null),[m,h]=(0,l.useState)("merge"),[p,b]=(0,l.useState)([]),[j,N]=(0,l.useState)([]),[v,y]=(0,l.useState)({}),_=(0,l.useCallback)(async()=>{if(t.trim())try{s(!0);const[e,l]=await Promise.all([(0,f.apiGet)("/admin/subscriptions/users/".concat(t,"/entitlements")),(0,f.apiGet)("/admin/subscriptions/services")]);c(e),d(l||[]),o(null),h("merge"),b([]),N([]),y({})}catch(e){console.error("Failed to fetch user:",e),w.oR.error((null===e||void 0===e?void 0:e.message)||"\u05de\u05e9\u05ea\u05de\u05e9 \u05dc\u05d0 \u05e0\u05de\u05e6\u05d0"),c(null)}finally{s(!1)}else w.oR.error("\u05e0\u05d0 \u05dc\u05d4\u05d6\u05d9\u05df \u05de\u05d6\u05d4\u05d4 \u05de\u05e9\u05ea\u05de\u05e9")},[t]),k=async e=>{if(i)try{const s=e?"/admin/subscriptions/users/".concat(i.user_id,"/reset-usage?service_name=").concat(e):"/admin/subscriptions/users/".concat(i.user_id,"/reset-usage");await(0,f.$P)(s,{}),w.oR.success(e?"\u05e9\u05d9\u05de\u05d5\u05e9 ".concat(e," \u05d0\u05d5\u05e4\u05e1"):"\u05db\u05dc \u05d4\u05e9\u05d9\u05de\u05d5\u05e9 \u05d0\u05d5\u05e4\u05e1"),_()}catch(s){console.error("Failed to reset usage:",s),w.oR.error("\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05d0\u05d9\u05e4\u05d5\u05e1 \u05e9\u05d9\u05de\u05d5\u05e9")}},A=(e,s)=>{"add"===s?p.includes(e)?b(s=>s.filter(s=>s!==e)):(b(s=>[...s,e]),N(s=>s.filter(s=>s!==e))):j.includes(e)?N(s=>s.filter(s=>s!==e)):(N(s=>[...s,e]),b(s=>s.filter(s=>s!==e)))};return(0,z.jsxs)("div",{className:"p-6 space-y-6 bg-gray-900 min-h-screen text-white",dir:"rtl",children:[(0,z.jsxs)("div",{children:[(0,z.jsxs)("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[(0,z.jsx)(re.A,{className:"w-6 h-6 text-purple-400"}),"\u05d4\u05e8\u05e9\u05d0\u05d5\u05ea \u05de\u05e9\u05ea\u05de\u05e9"]}),(0,z.jsx)("p",{className:"text-gray-400 mt-1",children:"\u05e6\u05e4\u05d9\u05d9\u05d4 \u05d5\u05d4\u05e8\u05e9\u05d0\u05d5\u05ea \u05d7\u05e8\u05d9\u05d2\u05d5\u05ea \u05de\u05e2\u05d1\u05e8 \u05dc\u05de\u05d3\u05d9\u05e0\u05d9\u05d5\u05ea \u05d4\u05de\u05e1\u05dc\u05d5\u05dc."})]}),(0,z.jsxs)("div",{className:"flex gap-4",children:[(0,z.jsxs)("div",{className:"flex-1 relative",children:[(0,z.jsx)(u.A,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,z.jsx)("input",{type:"text",value:t,onChange:e=>a(e.target.value),onKeyDown:e=>"Enter"===e.key&&_(),placeholder:"\u05d7\u05e4\u05e9 \u05dc\u05e4\u05d9 \u05de\u05d6\u05d4\u05d4 \u05de\u05e9\u05ea\u05de\u05e9 \u05d0\u05d5 \u05d0\u05d9\u05de\u05d9\u05d9\u05dc...",className:"w-full bg-gray-800 border border-gray-700 rounded-lg pr-10 pl-4 py-3 text-white placeholder-gray-500"})]}),(0,z.jsxs)("button",{onClick:_,disabled:e,className:"flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-500 disabled:bg-gray-600 rounded-lg font-medium",children:[e?(0,z.jsx)(r.A,{className:"w-5 h-5 animate-spin"}):(0,z.jsx)(u.A,{className:"w-5 h-5"}),"\u05d7\u05e4\u05e9"]})]}),i&&(0,z.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,z.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,z.jsxs)("div",{className:"bg-gray-800 rounded-xl p-6",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,z.jsx)("h2",{className:"text-xl font-semibold",children:i.email}),(0,z.jsxs)("div",{className:"flex items-center gap-2",children:[(0,z.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat("admin"===i.tier?"bg-purple-600":"enterprise"===i.tier?"bg-blue-600":"pro"===i.tier?"bg-green-600":"bg-gray-600"),children:i.tier}),i.has_overrides&&(0,z.jsx)("span",{className:"px-2 py-1 rounded bg-yellow-600/30 text-yellow-400 text-xs",children:"\u05d9\u05e9 \u05d7\u05e8\u05d9\u05d2\u05d5\u05ea"})]})]}),(0,z.jsxs)("div",{className:"mb-6",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,z.jsx)("span",{className:"font-medium",children:"\u05e9\u05d9\u05de\u05d5\u05e9 \u05d8\u05d5\u05e7\u05e0\u05d9\u05dd \u05d7\u05d5\u05d3\u05e9\u05d9"}),(0,z.jsxs)("button",{onClick:()=>k(),className:"text-xs text-blue-400 hover:text-blue-300 flex items-center gap-1",children:[(0,z.jsx)(r.A,{className:"w-3 h-3"}),"\u05d0\u05e4\u05e1 \u05e9\u05d9\u05de\u05d5\u05e9"]})]}),(0,z.jsx)(Qe,{used:i.monthly_tokens_used,limit:i.monthly_tokens_limit})]}),(0,z.jsxs)("div",{children:[(0,z.jsxs)("div",{className:"font-medium mb-2",children:["\u05e9\u05d9\u05e8\u05d5\u05ea\u05d9\u05dd \u05e4\u05e2\u05d9\u05dc\u05d9\u05dd (",i.enabled_services.length,")"]}),(0,z.jsx)("div",{className:"flex flex-wrap gap-2",children:i.enabled_services.map(e=>(0,z.jsxs)("span",{className:"px-2 py-1 bg-gray-700 rounded text-sm flex items-center gap-1",children:[(0,z.jsx)(g.A,{className:"w-3 h-3 text-green-400"}),e]},e))})]})]}),Object.keys(i.usage_by_service).length>0&&(0,z.jsxs)("div",{className:"bg-gray-800 rounded-xl p-6",children:[(0,z.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\u05e9\u05d9\u05de\u05d5\u05e9 \u05e4\u05e8-\u05e9\u05d9\u05e8\u05d5\u05ea"}),(0,z.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(i.usage_by_service).map(e=>{let[s,t]=e;return(0,z.jsxs)("div",{className:"bg-gray-700 rounded-lg p-4",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,z.jsx)("span",{className:"font-medium",children:s}),(0,z.jsx)("button",{onClick:()=>k(s),className:"text-xs text-gray-400 hover:text-white",children:"\u05d0\u05e4\u05e1"})]}),Object.entries(t).map(e=>{let[s,t]=e;return(0,z.jsx)("div",{className:"mt-2",children:(0,z.jsx)(Qe,{used:t.used,limit:t.limit||999999,label:s})},s)})]},s)})})]})]}),(0,z.jsxs)("div",{className:"space-y-6",children:[(0,z.jsxs)("div",{className:"bg-gray-800 rounded-xl p-6",children:[(0,z.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,z.jsx)(Se.A,{className:"w-5 h-5 text-yellow-400"}),"\u05d4\u05e8\u05e9\u05d0\u05d5\u05ea \u05d7\u05e8\u05d9\u05d2\u05d5\u05ea"]}),(0,z.jsxs)("div",{className:"mb-4",children:[(0,z.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"\u05de\u05db\u05e1\u05ea \u05d8\u05d5\u05e7\u05e0\u05d9\u05dd (\u05d7\u05e8\u05d9\u05d2\u05d4)"}),(0,z.jsx)("input",{type:"number",value:null!==x&&void 0!==x?x:"",onChange:e=>o(e.target.value?parseInt(e.target.value):null),placeholder:"\u05d4\u05e9\u05ea\u05de\u05e9 \u05d1\u05d1\u05e8\u05d9\u05e8\u05ea \u05de\u05d7\u05d3\u05dc \u05e9\u05dc \u05d4\u05de\u05e1\u05dc\u05d5\u05dc",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white"}),(0,z.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"\u05d4\u05e9\u05d0\u05e8 \u05e8\u05d9\u05e7 \u05dc\u05e9\u05d9\u05de\u05d5\u05e9 \u05d1\u05de\u05d3\u05d9\u05e0\u05d9\u05d5\u05ea \u05d4\u05de\u05e1\u05dc\u05d5\u05dc"})]}),(0,z.jsxs)("div",{className:"mb-4",children:[(0,z.jsx)("label",{className:"block text-sm text-gray-400 mb-2",children:"\u05e9\u05d9\u05e0\u05d5\u05d9 \u05e9\u05d9\u05e8\u05d5\u05ea\u05d9\u05dd"}),(0,z.jsx)("div",{className:"max-h-40 overflow-y-auto space-y-1",children:n.map(e=>{const s=i.enabled_services.includes(e.name),t=p.includes(e.name),l=j.includes(e.name);return(0,z.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-700 rounded text-sm",children:[(0,z.jsx)("span",{className:s?"text-green-400":"text-gray-500",children:e.display_name}),(0,z.jsxs)("div",{className:"flex gap-1",children:[(0,z.jsx)("button",{onClick:()=>A(e.name,"add"),className:"p-1 rounded ".concat(t?"bg-green-600":"bg-gray-600 hover:bg-gray-500"),title:"\u05d4\u05d5\u05e1\u05e3",children:(0,z.jsx)(Xe.A,{className:"w-3 h-3"})}),(0,z.jsx)("button",{onClick:()=>A(e.name,"remove"),className:"p-1 rounded ".concat(l?"bg-red-600":"bg-gray-600 hover:bg-gray-500"),title:"\u05d4\u05e1\u05e8",children:(0,z.jsx)(Ye.A,{className:"w-3 h-3"})})]})]},e.name)})})]}),(0,z.jsxs)("div",{className:"mb-4",children:[(0,z.jsx)("label",{className:"block text-sm text-gray-400 mb-2",children:"\u05de\u05d2\u05d1\u05dc\u05d5\u05ea \u05d7\u05e8\u05d9\u05d2\u05d5\u05ea"}),(0,z.jsx)("div",{className:"space-y-2",children:n.filter(e=>e.caps.length>0&&i.enabled_services.includes(e.name)).map(e=>(0,z.jsxs)("div",{className:"bg-gray-700 rounded p-2",children:[(0,z.jsx)("div",{className:"text-xs text-gray-400 mb-1",children:e.display_name}),e.caps.map(s=>{var t,l;return(0,z.jsxs)("div",{className:"flex items-center gap-2",children:[(0,z.jsxs)("span",{className:"text-xs text-gray-500 flex-1 truncate",children:[s,":"]}),(0,z.jsx)("input",{type:"number",value:null!==(t=null===(l=v[e.name])||void 0===l?void 0:l[s])&&void 0!==t?t:"",onChange:t=>{return l=e.name,a=s,i=t.target.value?parseInt(t.target.value):null,void y(e=>{const s=(0,H.A)({},e);return null===i?s[l]&&(delete s[l][a],0===Object.keys(s[l]).length&&delete s[l]):(s[l]||(s[l]={}),s[l][a]=i),s});var l,a,i},placeholder:"\u05de\u05d3\u05d9\u05e0\u05d9\u05d5\u05ea",className:"w-20 bg-gray-600 border border-gray-500 rounded px-2 py-1 text-xs text-white"})]},s)})]},e.name))})]}),(0,z.jsxs)("button",{onClick:async()=>{if(i)try{s(!0);const e={};"replace"===m&&(p.length>0||j.length>0)?(e.enabled_services_mode="replace",e.enabled_services=p):(p.length>0&&(e.add_services=p),j.length>0&&(e.remove_services=j)),Object.keys(v).length>0&&(e.service_caps=v),await(0,f.$P)("/admin/subscriptions/users/".concat(i.user_id,"/override"),{monthly_token_quota:x,custom_limits:Object.keys(e).length>0?e:null}),w.oR.success("\u05d4\u05d4\u05e8\u05e9\u05d0\u05d5\u05ea \u05e2\u05d5\u05d3\u05db\u05e0\u05d5"),_()}catch(e){console.error("Failed to save overrides:",e),w.oR.error("\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05e9\u05de\u05d9\u05e8\u05ea \u05d4\u05e8\u05e9\u05d0\u05d5\u05ea")}finally{s(!1)}},disabled:e,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-yellow-600 hover:bg-yellow-500 disabled:bg-gray-600 rounded-lg font-medium",children:[(0,z.jsx)(C.A,{className:"w-5 h-5"}),"\u05e9\u05de\u05d5\u05e8 \u05d7\u05e8\u05d9\u05d2\u05d5\u05ea"]})]}),(0,z.jsxs)("div",{className:"bg-gray-800 rounded-xl p-6",children:[(0,z.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\u05de\u05d2\u05d1\u05dc\u05d5\u05ea \u05e9\u05d9\u05e8\u05d5\u05ea\u05d9\u05dd"}),(0,z.jsxs)("div",{className:"space-y-2 text-sm",children:[Object.entries(i.service_caps).map(e=>{let[s,t]=e;return(0,z.jsxs)("div",{className:"bg-gray-700 rounded p-3",children:[(0,z.jsx)("div",{className:"font-medium text-gray-300",children:s}),Object.entries(t).map(e=>{let[s,t]=e;return(0,z.jsxs)("div",{className:"text-xs text-gray-500",children:[s,": ",He(t)]},s)})]},s)}),0===Object.keys(i.service_caps).length&&(0,z.jsx)("p",{className:"text-gray-500 text-center py-4",children:"\u05d0\u05d9\u05df \u05de\u05d2\u05d1\u05dc\u05d5\u05ea \u05de\u05d5\u05d2\u05d3\u05e8\u05d5\u05ea"})]})]})]})]}),!i&&!e&&(0,z.jsxs)("div",{className:"text-center py-20",children:[(0,z.jsx)(re.A,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),(0,z.jsx)("h3",{className:"text-xl font-semibold text-gray-400",children:"\u05d7\u05e4\u05e9 \u05de\u05e9\u05ea\u05de\u05e9"}),(0,z.jsx)("p",{className:"text-gray-500 mt-2",children:"\u05d4\u05d6\u05df \u05de\u05d6\u05d4\u05d4 \u05de\u05e9\u05ea\u05de\u05e9 \u05db\u05d3\u05d9 \u05dc\u05e6\u05e4\u05d5\u05ea \u05d5\u05dc\u05e2\u05e8\u05d5\u05da \u05d0\u05ea \u05d4\u05d4\u05e8\u05e9\u05d0\u05d5\u05ea \u05e9\u05dc\u05d5"})]})]})};function Ve(){var e,s,t,k,S,C,F,E,T;let{defaultTab:I="cases"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const O=(0,a.Zp)(),D=(0,a.zy)(),G=()=>{const e=D.pathname;return"/admin/users"===e?"users":"/admin/stats"===e?"stats":"/admin/activity"===e?"activity":"/admin/tasks"===e?"tasks":"/admin/cache"===e?"cache":"/admin/metrics"===e?"metrics":"/admin/errors"===e?"errors":"/admin/knowledge"===e?"knowledge":"/admin/memory"===e?"memory":"/admin/costs"===e?"costs":"/admin/agents"===e?"agents":"/admin/forensics"===e?"forensics":"/admin/court"===e?"court":"/admin/legal-stats"===e?"legal-stats":"/admin/policies"===e?"policies":"/admin/user-entitlements"===e?"user-entitlements":"cases"},[M,q]=(0,l.useState)(G()),[U,B]=(0,l.useState)(null),[K,X]=(0,l.useState)([]),[H,Q]=(0,l.useState)(null),[W,V]=(0,l.useState)(null),[Z,ee]=(0,l.useState)(!1),[se,te]=(0,l.useState)(""),[le,ae]=(0,l.useState)(!1),[ie,re]=(0,l.useState)({totalActive:0,totalCost:0,totalTokens:0,avgDuration:0}),[ce,ne]=(0,l.useState)([]),[de,xe]=(0,l.useState)(""),[me,he]=(0,l.useState)(null),[pe,ue]=(0,l.useState)([]),[be,je]=(0,l.useState)(0),[ge,we]=(0,l.useState)(null),[fe,ye]=(0,l.useState)(null),[_e,Ae]=(0,l.useState)(null),[Se,ze]=(0,l.useState)(!1),[Fe,Ee]=(0,l.useState)(!1),[Le,Re]=(0,l.useState)(!1),[Ie,Oe]=(0,l.useState)(!1),[De,Pe]=(0,l.useState)(!1),[Ge,Me]=(0,l.useState)(null);(0,l.useEffect)(()=>{const e=G();e!==M&&q(e)},[D.pathname]);const qe=()=>{Ue(),Ye(),Ve(),He(),Qe()};(0,l.useEffect)(()=>{qe();const e=setInterval(()=>{document.hidden||qe()},3e4);return()=>clearInterval(e)},[]),(0,l.useEffect)(()=>{H&&Be(H)},[H]);const Ue=async()=>{try{const e=await(0,f.apiGet)("/api/admin/all-progress",{showErrorToast:!1});X(e.cases||[]);const s=e.cases||[],t=s.reduce((e,s)=>e+s.total_cost,0),l=s.reduce((e,s)=>e+s.total_tokens,0),a=s.length>0?s.reduce((e,s)=>e+s.duration_seconds,0)/s.length:0;re({totalActive:e.total_active||s.length,totalCost:t,totalTokens:l,avgDuration:a})}catch(e){_.v.error("Failed to load active cases:",e)}},Be=async e=>{try{const s=await(0,f.apiGet)("/api/admin/cases/".concat(e,"/detailed-progress"),{showErrorToast:!1});V(s)}catch(s){_.v.error("Failed to load detailed progress:",s)}},[Je,Xe]=(0,l.useState)(!1),Ye=async()=>{Xe(!0);try{var e;_.v.log("\ud83d\udd0d Loading admin users...");const s=await(0,f.apiGet)("/api/admin/users?limit=100",{showErrorToast:!1});_.v.log("\ud83d\udc65 Admin users response:",{count:null===s||void 0===s||null===(e=s.users)||void 0===e?void 0:e.length,total:null===s||void 0===s?void 0:s.total}),ne(s.users||[])}catch(s){_.v.error("Failed to load users:",s)}finally{Xe(!1)}},He=async()=>{try{const e=await(0,f.apiGet)("/api/admin/activity?limit=100",{showErrorToast:!1});ue(e.logs||[]),je(e.total||0)}catch(e){_.v.error("Failed to load activity logs:",e)}},Qe=async()=>{ze(!0),Ee(!0),Re(!0);try{const p=await(0,f.apiGet)("/api/admin/dashboard",{showErrorToast:!1}),u=(null===p||void 0===p?void 0:p.overview)||null,b=(null===p||void 0===p?void 0:p.cost_analysis)||null,j=(null===p||void 0===p?void 0:p.system_health)||null;var e,s,t,l,a,i,r,c,n,d,x,o,m,h;if(u||b)we({active_cases:null!==(e=null===u||void 0===u||null===(s=u.realtime)||void 0===s?void 0:s.active_cases)&&void 0!==e?e:0,total_cost:null!==(t=null!==(l=null!==(a=null===b||void 0===b?void 0:b.total_cost_usd)&&void 0!==a?a:null===u||void 0===u||null===(i=u.cost_24h)||void 0===i?void 0:i.total_cost_usd)&&void 0!==l?l:null===u||void 0===u||null===(r=u.costs)||void 0===r?void 0:r.overall_cost_usd)&&void 0!==t?t:0,total_tokens:null!==(c=null!==(n=null!==(d=null===b||void 0===b?void 0:b.total_tokens)&&void 0!==d?d:null===u||void 0===u||null===(x=u.cost_24h)||void 0===x?void 0:x.total_tokens)&&void 0!==n?n:null===u||void 0===u||null===(o=u.realtime)||void 0===o?void 0:o.total_tokens)&&void 0!==c?c:0,success_rate:null!==(m=null===u||void 0===u||null===(h=u.performance_week)||void 0===h?void 0:h.success_rate_percent)&&void 0!==m?m:0});else we(null);ye(b),Ae(j)}catch(p){_.v.error("Failed to load dashboard telemetry:",p)}finally{ze(!1),Ee(!1),Re(!1)}},Ve=async()=>{try{const e=await(0,f.apiGet)("/api/admin/stats",{showErrorToast:!1});he(e)}catch(e){_.v.error("Failed to load admin stats:",e)}},Ze=()=>{Ye()},es=ce.filter(e=>{var s,t;return(null===(s=e.email)||void 0===s?void 0:s.toLowerCase().includes(de.toLowerCase()))||(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(de.toLowerCase()))});return(0,z.jsxs)("div",{className:"p-6",dir:"rtl",children:[(0,z.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,z.jsx)("div",{className:"mb-8",children:(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsxs)("div",{className:"flex items-center gap-4",children:[(0,z.jsx)("div",{className:"w-16 h-16 bg-red-500/20 border-2 border-red-500 rounded-xl flex items-center justify-center",children:(0,z.jsx)(i.A,{size:32,className:"text-red-400"})}),(0,z.jsxs)("div",{children:[(0,z.jsx)("h1",{className:"text-4xl font-bold text-white mb-2",children:"\ud83c\udf9b\ufe0f \u05e4\u05d0\u05e0\u05dc \u05d0\u05d3\u05de\u05d9\u05df"}),(0,z.jsx)("p",{className:"text-white/70",children:"\u05de\u05e2\u05e7\u05d1 \u05d1\u05d6\u05de\u05df \u05d0\u05de\u05ea \u05d0\u05d7\u05e8 \u05d4\u05ea\u05d9\u05e7\u05d9\u05dd \u05d5\u05d4\u05de\u05e9\u05ea\u05de\u05e9\u05d9\u05dd"})]})]}),(0,z.jsxs)("button",{onClick:qe,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 rounded-lg hover:bg-blue-700 transition",children:[(0,z.jsx)(r.A,{size:20,className:"text-white"}),(0,z.jsx)("span",{className:"text-white",children:"\u05e8\u05e2\u05e0\u05df"})]})]})}),(0,z.jsxs)("div",{className:"mb-6 border-b border-white/20 pb-2",children:[(0,z.jsx)("div",{className:"flex flex-wrap gap-2",children:[{id:"ops",label:"\u05e0\u05d9\u05d4\u05d5\u05dc",hint:"\u05ea\u05d9\u05e7\u05d9\u05dd \u2022 \u05de\u05e9\u05ea\u05de\u05e9\u05d9\u05dd \u2022 \u05e4\u05e2\u05d9\u05dc\u05d5\u05ea \u2022 \u05e1\u05d8\u05d8\u05d9\u05e1\u05d8\u05d9\u05e7\u05d5\u05ea"},{id:"infra",label:"\u05ea\u05e9\u05ea\u05d9\u05d5\u05ea",hint:"Tasks \u2022 Cache \u2022 Metrics \u2022 Errors"},{id:"knowledge",label:"\u05d9\u05d3\u05e2",hint:"\u05d9\u05d3\u05e2 \u05de\u05e9\u05e4\u05d8\u05d9 \u2022 \u05d6\u05d9\u05db\u05e8\u05d5\u05df \u05d5\u05dc\u05de\u05d9\u05d3\u05d4"},{id:"ai",label:"AI/\u05e2\u05dc\u05d5\u05d9\u05d5\u05ea",hint:"\u05e2\u05dc\u05d5\u05d9\u05d5\u05ea \u2022 \u05e1\u05d5\u05db\u05e0\u05d9\u05dd \u2022 \u05e4\u05d5\u05e8\u05e0\u05d6\u05d9\u05e7\u05d4"}].map(e=>{const s=U===e.id;return(0,z.jsxs)("button",{onClick:()=>B(s=>s===e.id?null:e.id),className:"px-4 py-2 rounded-full text-sm border transition-all whitespace-nowrap ".concat(s?"bg-white/10 text-white border-white/20":"bg-white/5 text-white/70 border-white/10 hover:bg-white/10 hover:text-white"),title:e.hint,children:[e.label," ",s?(0,z.jsx)(c.A,{className:"inline-block ml-1",size:14}):(0,z.jsx)(n.A,{className:"inline-block ml-1",size:14})]},e.id)})}),U&&(0,z.jsx)("div",{className:"mt-3",children:(0,z.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-2",children:(()=>{const e=[{id:"cases",label:"\ud83d\udcca \u05ea\u05d9\u05e7\u05d9\u05dd \u05e4\u05e2\u05d9\u05dc\u05d9\u05dd (".concat(K.length,")"),path:"/admin"},{id:"users",label:"\ud83d\udc65 \u05de\u05e9\u05ea\u05de\u05e9\u05d9\u05dd (".concat(ce.length,")"),path:"/admin/users"},{id:"activity",label:"\ud83d\udccb \u05dc\u05d5\u05d2 \u05e4\u05e2\u05d9\u05dc\u05d5\u05ea (".concat(be,")"),path:"/admin/activity"},{id:"stats",label:"\ud83d\udcc8 \u05e1\u05d8\u05d8\u05d9\u05e1\u05d8\u05d9\u05e7\u05d5\u05ea",path:"/admin/stats"},{id:"policies",label:"\ud83d\udee1\ufe0f \u05de\u05e1\u05dc\u05d5\u05dc\u05d9\u05dd \u05d5\u05d4\u05e8\u05e9\u05d0\u05d5\u05ea",path:"/admin/policies"},{id:"user-entitlements",label:"\ud83d\udc64 \u05d4\u05e8\u05e9\u05d0\u05d5\u05ea \u05de\u05e9\u05ea\u05de\u05e9",path:"/admin/user-entitlements"}];return("ops"===U?e:"infra"===U?[{id:"tasks",label:"\u2699\ufe0f Background Tasks",path:"/admin/tasks"},{id:"cache",label:"\ud83d\udcbe Cache",path:"/admin/cache"},{id:"metrics",label:"\ud83d\udcca Metrics",path:"/admin/metrics"},{id:"errors",label:"\u26a0\ufe0f Errors",path:"/admin/errors"}]:"knowledge"===U?[{id:"knowledge",label:"\ud83d\udcda \u05d9\u05d3\u05e2 \u05de\u05e9\u05e4\u05d8\u05d9",path:"/admin/knowledge"},{id:"memory",label:"\ud83e\udde0 \u05d6\u05d9\u05db\u05e8\u05d5\u05df \u05d5\u05dc\u05de\u05d9\u05d3\u05d4",path:"/admin/memory"},{id:"court",label:"\u2696\ufe0f \u05e4\u05e1\u05e7\u05d9 \u05d3\u05d9\u05df",path:"/admin/court"},{id:"legal-stats",label:"\ud83d\udcca \u05e1\u05d8\u05d8\u05d9\u05e1\u05d8\u05d9\u05e7\u05d4 \u05de\u05e9\u05e4\u05d8\u05d9\u05ea",path:"/admin/legal-stats"}]:"ai"===U?[{id:"costs",label:"\ud83d\udcb0 \u05e2\u05dc\u05d5\u05d9\u05d5\u05ea \u05d5\u05d8\u05d5\u05e7\u05e0\u05d9\u05dd",path:"/admin/costs"},{id:"agents",label:"\ud83e\udd16 \u05e1\u05d5\u05db\u05e0\u05d9\u05dd",path:"/admin/agents"},{id:"forensics",label:"\ud83d\udd2c \u05e4\u05d5\u05e8\u05e0\u05d6\u05d9\u05e7\u05d4",path:"/admin/forensics"}]:[]).map(e=>(0,z.jsx)("button",{onClick:()=>{O(e.path),q(e.id),B(null)},className:"px-3 py-2 rounded-xl text-sm border transition-all ".concat(M===e.id?"bg-purple-600/30 text-white border-purple-500/40":"bg-white/5 text-purple-200 border-white/10 hover:bg-white/10"),children:e.label},e.id))})()})})]}),"cases"===M&&(0,z.jsxs)("div",{className:"space-y-6",children:[(0,z.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,z.jsx)("div",{className:"bg-white/10 backdrop-blur-lg rounded-lg p-6 border border-white/20",children:(0,z.jsxs)("div",{className:"flex items-center gap-3",children:[(0,z.jsx)(d.A,{className:"h-8 w-8 text-blue-400"}),(0,z.jsxs)("div",{children:[(0,z.jsx)("p",{className:"text-white/70 text-sm",children:"\u05ea\u05d9\u05e7\u05d9\u05dd \u05e4\u05e2\u05d9\u05dc\u05d9\u05dd"}),(0,z.jsx)("p",{className:"text-3xl font-bold text-white",children:ie.totalActive})]})]})}),(0,z.jsx)("div",{className:"bg-white/10 backdrop-blur-lg rounded-lg p-6 border border-white/20",children:(0,z.jsxs)("div",{className:"flex items-center gap-3",children:[(0,z.jsx)(x.A,{className:"h-8 w-8 text-green-400"}),(0,z.jsxs)("div",{children:[(0,z.jsx)("p",{className:"text-white/70 text-sm",children:"\u05e2\u05dc\u05d5\u05ea \u05db\u05d5\u05dc\u05dc\u05ea"}),(0,z.jsxs)("p",{className:"text-3xl font-bold text-white",children:["$",ie.totalCost.toFixed(2)]})]})]})}),(0,z.jsx)("div",{className:"bg-white/10 backdrop-blur-lg rounded-lg p-6 border border-white/20",children:(0,z.jsxs)("div",{className:"flex items-center gap-3",children:[(0,z.jsx)(o.A,{className:"h-8 w-8 text-yellow-400"}),(0,z.jsxs)("div",{children:[(0,z.jsx)("p",{className:"text-white/70 text-sm",children:"\u05d8\u05d5\u05e7\u05e0\u05d9\u05dd"}),(0,z.jsxs)("p",{className:"text-3xl font-bold text-white",children:[(ie.totalTokens/1e3).toFixed(1),"K"]})]})]})}),(0,z.jsx)("div",{className:"bg-white/10 backdrop-blur-lg rounded-lg p-6 border border-white/20",children:(0,z.jsxs)("div",{className:"flex items-center gap-3",children:[(0,z.jsx)(m.A,{className:"h-8 w-8 text-purple-400"}),(0,z.jsxs)("div",{children:[(0,z.jsx)("p",{className:"text-white/70 text-sm",children:"\u05d6\u05de\u05df \u05de\u05de\u05d5\u05e6\u05e2"}),(0,z.jsx)("p",{className:"text-3xl font-bold text-white",children:A(ie.avgDuration)})]})]})})]}),(0,z.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-lg border border-white/20",children:[(0,z.jsxs)("div",{className:"p-6 border-b border-white/20 flex justify-between items-center",children:[(0,z.jsx)("h2",{className:"text-2xl font-bold text-white",children:"\u05ea\u05d9\u05e7\u05d9\u05dd \u05e4\u05e2\u05d9\u05dc\u05d9\u05dd"}),(0,z.jsxs)("button",{onClick:()=>ee(!0),className:"flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition",children:[(0,z.jsx)(h.A,{size:18}),"\u05de\u05d7\u05e7 \u05d4\u05db\u05dc"]})]}),Z&&(0,z.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,z.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4 border border-red-500/50",children:[(0,z.jsxs)("div",{className:"flex items-center gap-3 text-red-400 mb-4",children:[(0,z.jsx)(p.A,{size:32}),(0,z.jsx)("h3",{className:"text-xl font-bold",children:"\u05de\u05d7\u05d9\u05e7\u05ea \u05db\u05dc \u05d4\u05ea\u05d9\u05e7\u05d9\u05dd"})]}),(0,z.jsxs)("p",{className:"text-white/80 mb-4",children:["\u05e4\u05e2\u05d5\u05dc\u05d4 \u05d6\u05d5 \u05ea\u05de\u05d7\u05e7 \u05d0\u05ea ",(0,z.jsx)("strong",{children:"\u05db\u05dc \u05d4\u05ea\u05d9\u05e7\u05d9\u05dd"})," \u05d1\u05de\u05e2\u05e8\u05db\u05ea \u05dc\u05e6\u05de\u05d9\u05ea\u05d5\u05ea.",(0,z.jsx)("br",{}),"\u05d2\u05d9\u05d1\u05d5\u05d9 \u05d0\u05d5\u05d8\u05d5\u05de\u05d8\u05d9 \u05d9\u05d9\u05d5\u05d5\u05e6\u05e8 \u05dc\u05e4\u05e0\u05d9 \u05d4\u05de\u05d7\u05d9\u05e7\u05d4."]}),(0,z.jsxs)("div",{className:"mb-4",children:[(0,z.jsxs)("label",{className:"text-white/70 text-sm block mb-2",children:["\u05d4\u05e7\u05dc\u05d3 ",(0,z.jsx)("code",{className:"bg-red-900 px-1 rounded",children:"DELETE ALL"})," \u05dc\u05d0\u05d9\u05e9\u05d5\u05e8:"]}),(0,z.jsx)("input",{type:"text",value:se,onChange:e=>te(e.target.value),placeholder:"DELETE ALL",className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white",dir:"ltr"})]}),(0,z.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,z.jsx)("button",{onClick:()=>{ee(!1),te("")},className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 text-white rounded",children:"\u05d1\u05d9\u05d8\u05d5\u05dc"}),(0,z.jsx)("button",{onClick:async()=>{if(_.v.log("\ud83d\uddd1\ufe0f handleDeleteAllCases called, deleteConfirmText:",se),"DELETE ALL"===se){ae(!0),_.v.log("\ud83d\uddd1\ufe0f Starting delete all cases...");try{var e,s,t;if(!y.useAuthStore.getState().token)throw new Error("\u05dc\u05d0 \u05de\u05d7\u05d5\u05d1\u05e8 \u05dc\u05de\u05e2\u05e8\u05db\u05ea");_.v.log("\ud83d\uddd1\ufe0f Calling DELETE /api/admin/cases...");const l=await(0,f.Al)("/api/admin/cases?confirmation=DELETE%20ALL&backup=true",{showErrorToast:!1});_.v.log("\ud83d\uddd1\ufe0f Delete result:",l);const a=null!==(e=null===l||void 0===l||null===(s=l.deleted)||void 0===s?void 0:s.cases)&&void 0!==e?e:0,i=(null===l||void 0===l?void 0:l.backup_file)||"\u05dc\u05d0 \u05e0\u05e9\u05de\u05e8",r=null!==(t=null===l||void 0===l?void 0:l.backup_record_count)&&void 0!==t?t:"\u05dc\u05d0 \u05d9\u05d3\u05d5\u05e2",c="number"===typeof(null===l||void 0===l?void 0:l.backup_size_bytes)?"".concat((l.backup_size_bytes/1024).toFixed(1),"KB"):"\u05dc\u05d0 \u05d6\u05de\u05d9\u05df";w.oR.success("\u05e0\u05de\u05d7\u05e7\u05d5 ".concat(a," \u05ea\u05d9\u05e7\u05d9\u05dd"),{description:"\u05d2\u05d9\u05d1\u05d5\u05d9: ".concat(i," (").concat(r," \u05e8\u05e9\u05d5\u05de\u05d5\u05ea, ").concat(c,")"),duration:5e3}),ee(!1),te(""),qe()}catch(l){_.v.error("\u274c Failed to delete all cases:",l);const e=l.message||"\u05e9\u05d2\u05d9\u05d0\u05d4 \u05dc\u05d0 \u05d9\u05d3\u05d5\u05e2\u05d4";w.oR.error("\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05de\u05d7\u05d9\u05e7\u05ea \u05ea\u05d9\u05e7\u05d9\u05dd",{description:e,duration:8e3})}finally{ae(!1)}}else w.oR.error("\u05d9\u05e9 \u05dc\u05d4\u05e7\u05dc\u05d9\u05d3 DELETE ALL \u05dc\u05d0\u05d9\u05e9\u05d5\u05e8")},disabled:"DELETE ALL"!==se||le,className:"px-4 py-2 rounded text-white flex items-center gap-2 ".concat("DELETE ALL"!==se||le?"bg-gray-600 cursor-not-allowed":"bg-red-600 hover:bg-red-700"),children:le?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(r.A,{size:16,className:"animate-spin"}),"\u05de\u05d5\u05d7\u05e7..."]}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h.A,{size:16}),"\u05de\u05d7\u05e7 \u05d4\u05db\u05dc"]})})]})]})}),(0,z.jsxs)("div",{className:"overflow-x-auto",children:[(0,z.jsxs)("table",{className:"w-full",children:[(0,z.jsx)("thead",{children:(0,z.jsxs)("tr",{className:"border-b border-white/20",children:[(0,z.jsx)("th",{className:"px-6 py-3 text-right text-sm font-semibold text-white/70",children:"Case ID"}),(0,z.jsx)("th",{className:"px-6 py-3 text-right text-sm font-semibold text-white/70",children:"\u05e1\u05d8\u05d8\u05d5\u05e1"}),(0,z.jsx)("th",{className:"px-6 py-3 text-right text-sm font-semibold text-white/70",children:"\u05d4\u05ea\u05e7\u05d3\u05de\u05d5\u05ea"}),(0,z.jsx)("th",{className:"px-6 py-3 text-right text-sm font-semibold text-white/70",children:"\u05e9\u05dc\u05d1 \u05e0\u05d5\u05db\u05d7\u05d9"}),(0,z.jsx)("th",{className:"px-6 py-3 text-right text-sm font-semibold text-white/70",children:"\u05d8\u05d5\u05e7\u05e0\u05d9\u05dd"}),(0,z.jsx)("th",{className:"px-6 py-3 text-right text-sm font-semibold text-white/70",children:"\u05e2\u05dc\u05d5\u05ea"}),(0,z.jsx)("th",{className:"px-6 py-3 text-right text-sm font-semibold text-white/70",children:"\u05d6\u05de\u05df"}),(0,z.jsx)("th",{className:"px-6 py-3 text-right text-sm font-semibold text-white/70",children:"\u05e4\u05e2\u05d5\u05dc\u05d5\u05ea"})]})}),(0,z.jsx)("tbody",{children:K.map(e=>(0,z.jsxs)("tr",{className:"border-b border-white/10 hover:bg-white/5 transition-colors",children:[(0,z.jsxs)("td",{className:"px-6 py-4 text-white font-mono text-sm",children:[e.case_id.slice(0,12),"..."]}),(0,z.jsx)("td",{className:"px-6 py-4",children:(0,z.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat("completed"===e.status?"bg-green-500/20 text-green-400":"processing"===e.status?"bg-blue-500/20 text-blue-400":"failed"===e.status?"bg-red-500/20 text-red-400":"bg-gray-500/20 text-gray-400"),children:e.status})}),(0,z.jsx)("td",{className:"px-6 py-4",children:(0,z.jsxs)("div",{className:"flex items-center gap-2",children:[(0,z.jsx)("div",{className:"flex-1 bg-white/10 rounded-full h-2 overflow-hidden",children:(0,z.jsx)("div",{className:"bg-purple-500 h-full transition-all duration-300",style:{width:"".concat(e.overall_progress,"%")}})}),(0,z.jsxs)("span",{className:"text-white text-sm",children:[e.overall_progress,"%"]})]})}),(0,z.jsx)("td",{className:"px-6 py-4 text-white text-sm",children:e.current_stage}),(0,z.jsx)("td",{className:"px-6 py-4 text-white text-sm",children:e.total_tokens.toLocaleString()}),(0,z.jsxs)("td",{className:"px-6 py-4 text-white text-sm",children:["$",e.total_cost.toFixed(4)]}),(0,z.jsx)("td",{className:"px-6 py-4 text-white text-sm",children:A(e.duration_seconds)}),(0,z.jsx)("td",{className:"px-6 py-4",children:(0,z.jsx)("button",{onClick:()=>Q(e.case_id),className:"px-3 py-1 bg-purple-600 hover:bg-purple-700 text-white rounded-lg text-sm transition-colors",children:"\u05e4\u05e8\u05d8\u05d9\u05dd"})})]},e.case_id))})]}),0===K.length&&(0,z.jsx)("div",{className:"text-center py-12 text-white/50",children:"\u05d0\u05d9\u05df \u05ea\u05d9\u05e7\u05d9\u05dd \u05e4\u05e2\u05d9\u05dc\u05d9\u05dd \u05db\u05e8\u05d2\u05e2"})]})]}),W&&(0,z.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-lg border border-white/20 p-6",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,z.jsxs)("h2",{className:"text-2xl font-bold text-white",children:["\ud83d\udcca \u05e4\u05d9\u05e8\u05d5\u05d8 \u05de\u05dc\u05d0 - ",null===H||void 0===H?void 0:H.slice(0,12),"..."]}),(0,z.jsx)("button",{onClick:()=>Q(null),className:"px-4 py-2 bg-red-500/20 text-red-400 rounded-lg hover:bg-red-500/30 transition-colors",children:"\u05e1\u05d2\u05d5\u05e8"})]}),(0,z.jsx)("div",{className:"overflow-x-auto",children:(0,z.jsxs)("table",{className:"w-full",children:[(0,z.jsx)("thead",{children:(0,z.jsxs)("tr",{className:"border-b border-white/20",children:[(0,z.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-white/70",children:"\u05e9\u05dc\u05d1"}),(0,z.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-white/70",children:"\u05de\u05d5\u05d3\u05dc"}),(0,z.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-white/70",children:"Input"}),(0,z.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-white/70",children:"Output"}),(0,z.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-white/70",children:'\u05e1\u05d4"\u05db \u05d8\u05d5\u05e7\u05e0\u05d9\u05dd'}),(0,z.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-white/70",children:"\u05e2\u05dc\u05d5\u05ea Input"}),(0,z.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-white/70",children:"\u05e2\u05dc\u05d5\u05ea Output"}),(0,z.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-white/70",children:'\u05e1\u05d4"\u05db \u05e2\u05dc\u05d5\u05ea'}),(0,z.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-white/70",children:"\u05d6\u05de\u05df"}),(0,z.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-white/70",children:"\u05de\u05d4\u05d9\u05e8\u05d5\u05ea"})]})}),(0,z.jsx)("tbody",{children:Object.entries(W.detailed_costs).map(e=>{let[s,t]=e;const l=t;return(0,z.jsxs)("tr",{className:"border-b border-white/10",children:[(0,z.jsx)("td",{className:"px-4 py-3 text-white font-semibold",children:s}),(0,z.jsx)("td",{className:"px-4 py-3 text-white/70 text-sm",children:l.model}),(0,z.jsx)("td",{className:"px-4 py-3 text-white/70 text-sm",children:l.tokens.input.toLocaleString()}),(0,z.jsx)("td",{className:"px-4 py-3 text-white/70 text-sm",children:l.tokens.output.toLocaleString()}),(0,z.jsx)("td",{className:"px-4 py-3 text-white font-semibold",children:l.tokens.total.toLocaleString()}),(0,z.jsxs)("td",{className:"px-4 py-3 text-white/70 text-sm",children:["$",l.cost_breakdown.input_cost.toFixed(4)]}),(0,z.jsxs)("td",{className:"px-4 py-3 text-white/70 text-sm",children:["$",l.cost_breakdown.output_cost.toFixed(4)]}),(0,z.jsxs)("td",{className:"px-4 py-3 text-green-400 font-semibold",children:["$",l.cost_breakdown.total_cost.toFixed(4)]}),(0,z.jsx)("td",{className:"px-4 py-3 text-white/70 text-sm",children:A(l.duration)}),(0,z.jsxs)("td",{className:"px-4 py-3 text-white/70 text-sm",children:[Math.round(l.tokens_per_second)," t/s"]})]},s)})}),(0,z.jsx)("tfoot",{children:(0,z.jsxs)("tr",{className:"bg-white/5",children:[(0,z.jsx)("td",{colSpan:4,className:"px-4 py-3 text-white font-bold text-right",children:'\u05e1\u05d4"\u05db'}),(0,z.jsx)("td",{className:"px-4 py-3 text-white font-bold",children:W.totals.tokens.toLocaleString()}),(0,z.jsx)("td",{colSpan:2}),(0,z.jsxs)("td",{className:"px-4 py-3 text-green-400 font-bold text-lg",children:["$",W.totals.cost.toFixed(4)]}),(0,z.jsx)("td",{colSpan:2})]})})]})})]})]}),"users"===M&&(0,z.jsxs)("div",{className:"space-y-6",children:[(0,z.jsxs)("div",{className:"relative",children:[(0,z.jsx)(u.A,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400",size:20}),(0,z.jsx)("input",{type:"text",placeholder:"\u05d7\u05e4\u05e9 \u05de\u05e9\u05ea\u05de\u05e9...",value:de,onChange:e=>xe(e.target.value),className:"w-full pr-12 pl-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),Je&&(0,z.jsxs)("div",{className:"text-center py-8 bg-white/10 backdrop-blur-lg rounded-lg border border-white/20",children:[(0,z.jsx)(r.A,{className:"animate-spin mx-auto text-purple-400",size:32}),(0,z.jsx)("p",{className:"text-white/70 mt-4",children:"\u05d8\u05d5\u05e2\u05df \u05de\u05e9\u05ea\u05de\u05e9\u05d9\u05dd..."})]}),!Je&&(0,z.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-lg border border-white/20 overflow-hidden",children:[(0,z.jsxs)("table",{className:"w-full",children:[(0,z.jsx)("thead",{className:"bg-white/10 border-b border-white/10",children:(0,z.jsxs)("tr",{children:[(0,z.jsx)("th",{className:"px-4 py-4 text-right text-sm font-semibold text-white",children:"\u05d0\u05d9\u05de\u05d9\u05d9\u05dc"}),(0,z.jsx)("th",{className:"px-4 py-4 text-right text-sm font-semibold text-white",children:"Tier"}),(0,z.jsx)("th",{className:"px-3 py-4 text-center text-sm font-semibold text-white",children:"\u05ea\u05d9\u05e7\u05d9\u05dd"}),(0,z.jsx)("th",{className:"px-4 py-4 text-right text-sm font-semibold text-white",children:"\ud83d\udcb0 \u05e2\u05dc\u05d5\u05ea \u05d7\u05d5\u05d3\u05e9\u05d9\u05ea"}),(0,z.jsx)("th",{className:"px-4 py-4 text-right text-sm font-semibold text-white",children:"\u26a1 \u05d8\u05d5\u05e7\u05e0\u05d9\u05dd \u05d7\u05d5\u05d3\u05e9\u05d9"}),(0,z.jsx)("th",{className:"px-4 py-4 text-right text-sm font-semibold text-white",children:"\ud83d\udcb5 \u05e2\u05dc\u05d5\u05ea \u05db\u05d5\u05dc\u05dc\u05ea"}),(0,z.jsx)("th",{className:"px-3 py-4 text-right text-sm font-semibold text-white",children:"\u05e1\u05d8\u05d8\u05d5\u05e1"}),(0,z.jsx)("th",{className:"px-4 py-4 text-center text-sm font-semibold text-white",children:"\u05e4\u05e2\u05d5\u05dc\u05d5\u05ea"})]})}),(0,z.jsx)("tbody",{className:"divide-y divide-white/10",children:es.map(e=>(0,z.jsxs)("tr",{className:"hover:bg-white/5 transition",children:[(0,z.jsx)("td",{className:"px-4 py-4",children:(0,z.jsxs)("div",{className:"flex items-center gap-2",children:[e.is_admin&&(0,z.jsx)(b.A,{size:16,className:"text-yellow-400"}),(0,z.jsx)("span",{className:"font-medium text-white truncate max-w-[200px]",title:e.email,children:e.email})]})}),(0,z.jsx)("td",{className:"px-4 py-4",children:(0,z.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("admin"===e.subscription_tier?"bg-red-500/20 text-red-300 border border-red-500/50":"enterprise"===e.subscription_tier?"bg-purple-500/20 text-purple-300":"professional"===e.subscription_tier?"bg-blue-500/20 text-blue-300":"basic"===e.subscription_tier?"bg-green-500/20 text-green-300":"bg-gray-500/20 text-gray-300"),children:e.subscription_tier})}),(0,z.jsx)("td",{className:"px-3 py-4 text-center",children:(0,z.jsx)("span",{className:"font-bold text-white",children:e.cases_count||0})}),(0,z.jsx)("td",{className:"px-4 py-4",children:(0,z.jsxs)("span",{className:"font-semibold ".concat((e.monthly_cost_cents||0)>5e3?"text-orange-400":"text-green-400"),children:["$",((e.monthly_cost_cents||0)/100).toFixed(2)]})}),(0,z.jsx)("td",{className:"px-4 py-4",children:(0,z.jsxs)("span",{className:"text-blue-300",children:[((e.monthly_tokens_used||0)/1e3).toFixed(1),"K"]})}),(0,z.jsx)("td",{className:"px-4 py-4",children:(0,z.jsxs)("span",{className:"text-white font-bold",children:["$",((e.total_cost_cents||0)/100).toFixed(2)]})}),(0,z.jsx)("td",{className:"px-3 py-4",children:e.is_banned?(0,z.jsxs)("span",{className:"flex items-center gap-1 text-red-400 text-sm",children:[(0,z.jsx)(j.A,{size:14}),"\u05d7\u05e1\u05d5\u05dd"]}):(0,z.jsxs)("span",{className:"flex items-center gap-1 text-green-400 text-sm",children:[(0,z.jsx)(g.A,{size:14}),"\u05e4\u05e2\u05d9\u05dc"]})}),(0,z.jsx)("td",{className:"px-4 py-4",children:(0,z.jsx)("div",{className:"flex items-center justify-center gap-1",children:!e.is_admin&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("button",{onClick:()=>{return s=e.id,t=e.email,l=e.subscription_tier,Me({id:s,email:t,tier:l}),void Oe(!0);var s,t,l},className:"px-2 py-1 bg-blue-600 rounded hover:bg-blue-700 transition text-xs text-white",children:"\u05e2\u05d3\u05db\u05d5\u05df"}),!e.is_banned&&(0,z.jsx)("button",{onClick:()=>{return s=e.id,t=e.email,l=e.subscription_tier,Me({id:s,email:t,tier:l}),void Pe(!0);var s,t,l},className:"px-2 py-1 bg-red-600 rounded hover:bg-red-700 transition text-xs text-white",children:"\u05d7\u05e1\u05d5\u05dd"})]})})})]},e.id))})]}),0===es.length&&(0,z.jsx)("div",{className:"text-center py-12 text-gray-400",children:"\u05dc\u05d0 \u05e0\u05de\u05e6\u05d0\u05d5 \u05de\u05e9\u05ea\u05de\u05e9\u05d9\u05dd"})]})]}),"stats"===M&&(0,z.jsxs)("div",{className:"space-y-6",children:[ge&&(0,z.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,z.jsx)("div",{className:"bg-white/10 backdrop-blur-lg rounded-lg p-6 border border-white/20",children:(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("p",{className:"text-sm text-white/70",children:"\u05ea\u05d9\u05e7\u05d9\u05dd \u05e4\u05e2\u05d9\u05dc\u05d9\u05dd"}),(0,z.jsx)("p",{className:"text-3xl font-bold text-white mt-2",children:ge.active_cases||0})]}),(0,z.jsx)(d.A,{className:"text-green-400",size:32})]})}),(0,z.jsx)("div",{className:"bg-white/10 backdrop-blur-lg rounded-lg p-6 border border-white/20",children:(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("p",{className:"text-sm text-white/70",children:"\u05e2\u05dc\u05d5\u05ea \u05db\u05d5\u05dc\u05dc\u05ea"}),(0,z.jsxs)("p",{className:"text-3xl font-bold text-white mt-2",children:["$",(null===(e=ge.total_cost)||void 0===e?void 0:e.toFixed(2))||"0.00"]})]}),(0,z.jsx)(x.A,{className:"text-yellow-400",size:32})]})}),(0,z.jsx)("div",{className:"bg-white/10 backdrop-blur-lg rounded-lg p-6 border border-white/20",children:(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("p",{className:"text-sm text-white/70",children:"\u05e9\u05d9\u05de\u05d5\u05e9 \u05d1\u05d8\u05d5\u05e7\u05e0\u05d9\u05dd"}),(0,z.jsx)("p",{className:"text-3xl font-bold text-white mt-2",children:(null===(s=ge.total_tokens)||void 0===s?void 0:s.toLocaleString())||"0"})]}),(0,z.jsx)(o.A,{className:"text-blue-400",size:32})]})}),(0,z.jsx)("div",{className:"bg-white/10 backdrop-blur-lg rounded-lg p-6 border border-white/20",children:(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("p",{className:"text-sm text-white/70",children:"\u05d0\u05d7\u05d5\u05d6 \u05d4\u05e6\u05dc\u05d7\u05d4"}),(0,z.jsxs)("p",{className:"text-3xl font-bold text-white mt-2",children:[(null===(t=ge.success_rate)||void 0===t?void 0:t.toFixed(1))||"0","%"]})]}),(0,z.jsx)(m.A,{className:"text-purple-400",size:32})]})})]}),me&&(0,z.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,z.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-lg border border-white/20 p-6",children:[(0,z.jsxs)("h3",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[(0,z.jsx)(N.A,{size:24,className:"text-blue-400"}),"\u05e1\u05d8\u05d8\u05d9\u05e1\u05d8\u05d9\u05e7\u05d5\u05ea \u05de\u05e9\u05ea\u05de\u05e9\u05d9\u05dd"]}),(0,z.jsxs)("div",{className:"space-y-3",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsx)("span",{className:"text-white/70",children:'\u05e1\u05d4"\u05db \u05de\u05e9\u05ea\u05de\u05e9\u05d9\u05dd'}),(0,z.jsx)("span",{className:"text-2xl font-bold text-white",children:me.users.total})]}),(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsx)("span",{className:"text-white/70",children:"\u05e4\u05e2\u05d9\u05dc\u05d9\u05dd (30 \u05d9\u05d5\u05dd)"}),(0,z.jsx)("span",{className:"text-xl font-bold text-green-400",children:me.users.active_30d})]}),(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsx)("span",{className:"text-white/70",children:"\u05d7\u05d3\u05e9\u05d9\u05dd \u05d4\u05d9\u05d5\u05dd"}),(0,z.jsx)("span",{className:"text-xl font-bold text-blue-400",children:me.users.new_today})]}),(0,z.jsxs)("div",{className:"mt-4 pt-4 border-t border-white/20",children:[(0,z.jsx)("h4",{className:"text-sm font-semibold text-white/70 mb-2",children:"\u05dc\u05e4\u05d9 Tier:"}),me.users.by_tier&&Object.entries(me.users.by_tier).map(e=>{let[s,t]=e;return(0,z.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,z.jsx)("span",{className:"text-white/70 capitalize",children:s}),(0,z.jsx)("span",{className:"font-bold text-white",children:t})]},s)})]})]})]}),(0,z.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-lg border border-white/20 p-6",children:[(0,z.jsxs)("h3",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[(0,z.jsx)(v.A,{size:24,className:"text-purple-400"}),"\u05e1\u05d8\u05d8\u05d9\u05e1\u05d8\u05d9\u05e7\u05d5\u05ea \u05ea\u05d9\u05e7\u05d9\u05dd"]}),(0,z.jsxs)("div",{className:"space-y-3",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsx)("span",{className:"text-white/70",children:'\u05e1\u05d4"\u05db \u05ea\u05d9\u05e7\u05d9\u05dd'}),(0,z.jsx)("span",{className:"text-2xl font-bold text-white",children:me.cases.total})]}),(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsx)("span",{className:"text-white/70",children:"\u05e4\u05e2\u05d9\u05dc\u05d9\u05dd (30 \u05d9\u05d5\u05dd)"}),(0,z.jsx)("span",{className:"text-xl font-bold text-purple-400",children:me.cases.active_30d})]}),(0,z.jsxs)("div",{className:"mt-4 pt-4 border-t border-white/20",children:[(0,z.jsx)("h4",{className:"text-sm font-semibold text-white/70 mb-2",children:"\u05dc\u05e4\u05d9 \u05e1\u05d8\u05d8\u05d5\u05e1:"}),me.cases.by_status&&Object.entries(me.cases.by_status).map(e=>{let[s,t]=e;return(0,z.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,z.jsx)("span",{className:"text-white/70 capitalize",children:s}),(0,z.jsx)("span",{className:"font-bold text-white",children:t})]},s)})]})]})]})]}),fe&&(0,z.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-lg border border-white/20 p-6",children:[(0,z.jsxs)("h3",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[(0,z.jsx)(x.A,{size:24,className:"text-yellow-400"}),"\u05e4\u05d9\u05dc\u05d5\u05d7 \u05e2\u05dc\u05d5\u05d9\u05d5\u05ea"]}),(0,z.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[fe.by_model&&(0,z.jsxs)("div",{children:[(0,z.jsx)("h4",{className:"text-sm font-semibold text-white/70 mb-3",children:"\u05dc\u05e4\u05d9 \u05de\u05d5\u05d3\u05dc:"}),(0,z.jsx)("div",{className:"space-y-2",children:Object.entries(fe.by_model).map(e=>{var s,t;let[l,a]=e;return(0,z.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,z.jsx)("span",{className:"text-white/70",children:l}),(0,z.jsxs)("div",{className:"flex items-center gap-4",children:[(0,z.jsxs)("span",{className:"text-white",children:["$",(null===(s=a.cost)||void 0===s?void 0:s.toFixed(2))||"0.00"]}),(0,z.jsxs)("span",{className:"text-white/50 text-xs",children:[(null===(t=a.tokens)||void 0===t?void 0:t.toLocaleString())||"0"," tokens"]})]})]},l)})})]}),fe.by_user&&(0,z.jsxs)("div",{children:[(0,z.jsx)("h4",{className:"text-sm font-semibold text-white/70 mb-3",children:"\u05dc\u05e4\u05d9 \u05de\u05e9\u05ea\u05de\u05e9 (Top 5):"}),(0,z.jsx)("div",{className:"space-y-2",children:Object.entries(fe.by_user).slice(0,5).map(e=>{var s;let[t,l]=e;return(0,z.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,z.jsx)("span",{className:"text-white/70 truncate max-w-[200px]",children:t}),(0,z.jsxs)("span",{className:"text-white",children:["$",(null===(s=l.cost)||void 0===s?void 0:s.toFixed(2))||"0.00"]})]},t)})})]})]})]}),_e&&(0,z.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-lg border border-white/20 p-6",children:[(0,z.jsxs)("h3",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[(0,z.jsx)(i.A,{size:24,className:"text-green-400"}),"\u05ea\u05e7\u05d9\u05e0\u05d5\u05ea \u05d4\u05de\u05e2\u05e8\u05db\u05ea"]}),(0,z.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[_e.disk&&(0,z.jsxs)("div",{children:[(0,z.jsx)("p",{className:"text-sm text-white/70 mb-2",children:"\u05e9\u05d9\u05de\u05d5\u05e9 \u05d1\u05d3\u05d9\u05e1\u05e7"}),(0,z.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,z.jsx)("span",{className:"text-2xl font-bold text-white",children:null===(k=_e.disk.used_gb)||void 0===k?void 0:k.toFixed(1)}),(0,z.jsxs)("span",{className:"text-white/70",children:["/ ",null===(S=_e.disk.total_gb)||void 0===S?void 0:S.toFixed(1)," GB"]})]}),(0,z.jsx)("div",{className:"mt-2 h-2 bg-white/10 rounded-full overflow-hidden",children:(0,z.jsx)("div",{className:"h-full bg-green-500",style:{width:"".concat(_e.disk.usage_percent||0,"%")}})})]}),_e.memory&&(0,z.jsxs)("div",{children:[(0,z.jsx)("p",{className:"text-sm text-white/70 mb-2",children:"\u05e9\u05d9\u05de\u05d5\u05e9 \u05d1\u05d6\u05d9\u05db\u05e8\u05d5\u05df"}),(0,z.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,z.jsx)("span",{className:"text-2xl font-bold text-white",children:null===(C=_e.memory.used_gb)||void 0===C?void 0:C.toFixed(1)}),(0,z.jsxs)("span",{className:"text-white/70",children:["/ ",null===(F=_e.memory.total_gb)||void 0===F?void 0:F.toFixed(1)," GB"]})]}),(0,z.jsx)("div",{className:"mt-2 h-2 bg-white/10 rounded-full overflow-hidden",children:(0,z.jsx)("div",{className:"h-full bg-blue-500",style:{width:"".concat(_e.memory.usage_percent||0,"%")}})})]}),_e.api_calls&&(0,z.jsxs)("div",{children:[(0,z.jsx)("p",{className:"text-sm text-white/70 mb-2",children:"\u05e7\u05e8\u05d9\u05d0\u05d5\u05ea API (24h)"}),(0,z.jsx)("div",{className:"text-2xl font-bold text-white",children:(null===(E=_e.api_calls.total_24h)||void 0===E?void 0:E.toLocaleString())||"0"}),(0,z.jsxs)("div",{className:"mt-2 text-sm text-green-400",children:["\u2191 ",(null===(T=_e.api_calls.success_rate)||void 0===T?void 0:T.toFixed(1))||"0","% \u05d4\u05e6\u05dc\u05d7\u05d4"]})]})]})]}),(Se||Fe||Le)&&(0,z.jsxs)("div",{className:"text-center py-8",children:[(0,z.jsx)(r.A,{className:"animate-spin mx-auto text-purple-400",size:32}),(0,z.jsx)("p",{className:"text-white/70 mt-4",children:"\u05d8\u05d5\u05e2\u05df \u05e0\u05ea\u05d5\u05e0\u05d9\u05dd..."})]})]})]}),"tasks"===M&&(0,z.jsx)(P,{}),"cache"===M&&(0,z.jsx)($,{}),"metrics"===M&&(0,z.jsx)(J,{}),"errors"===M&&(0,z.jsx)(Y,{}),"knowledge"===M&&(0,z.jsx)(oe,{}),"memory"===M&&(0,z.jsx)(Ne,{}),"costs"===M&&(0,z.jsx)(ve.default,{}),"agents"===M&&(0,z.jsx)(ke,{}),"forensics"===M&&(0,z.jsx)(Ce,{}),"court"===M&&(0,z.jsx)(Te,{}),"legal-stats"===M&&(0,z.jsx)($e,{}),"policies"===M&&(0,z.jsx)(Ke,{}),"user-entitlements"===M&&(0,z.jsx)(We,{}),"activity"===M&&(0,z.jsx)("div",{className:"space-y-6",children:(0,z.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-lg border border-white/20 overflow-hidden",children:[(0,z.jsxs)("table",{className:"w-full",children:[(0,z.jsx)("thead",{children:(0,z.jsxs)("tr",{className:"bg-white/5 border-b border-white/20",children:[(0,z.jsx)("th",{className:"px-6 py-3 text-right text-xs font-semibold text-white/70 uppercase",children:"\u05ea\u05d0\u05e8\u05d9\u05da"}),(0,z.jsx)("th",{className:"px-6 py-3 text-right text-xs font-semibold text-white/70 uppercase",children:"\u05d0\u05d3\u05de\u05d9\u05df"}),(0,z.jsx)("th",{className:"px-6 py-3 text-right text-xs font-semibold text-white/70 uppercase",children:"\u05e4\u05e2\u05d5\u05dc\u05d4"}),(0,z.jsx)("th",{className:"px-6 py-3 text-right text-xs font-semibold text-white/70 uppercase",children:"\u05e7\u05d8\u05d2\u05d5\u05e8\u05d9\u05d4"}),(0,z.jsx)("th",{className:"px-6 py-3 text-right text-xs font-semibold text-white/70 uppercase",children:"\u05de\u05e9\u05d0\u05d1"}),(0,z.jsx)("th",{className:"px-6 py-3 text-right text-xs font-semibold text-white/70 uppercase",children:"\u05e1\u05d8\u05d8\u05d5\u05e1"}),(0,z.jsx)("th",{className:"px-6 py-3 text-right text-xs font-semibold text-white/70 uppercase",children:"\u05e4\u05e8\u05d8\u05d9\u05dd"})]})}),(0,z.jsx)("tbody",{children:pe.map(e=>(0,z.jsxs)("tr",{className:"border-b border-white/10 hover:bg-white/5 transition",children:[(0,z.jsx)("td",{className:"px-6 py-4 text-sm text-gray-400",children:e.created_at?new Date(e.created_at).toLocaleString("he-IL"):"-"}),(0,z.jsx)("td",{className:"px-6 py-4",children:(0,z.jsx)("div",{className:"text-sm text-white",children:e.admin_email||"Unknown"})}),(0,z.jsx)("td",{className:"px-6 py-4",children:(0,z.jsx)("div",{className:"text-sm text-white font-medium",children:e.action_type})}),(0,z.jsx)("td",{className:"px-6 py-4",children:(0,z.jsx)("span",{className:"px-2 py-1 bg-blue-500/20 text-blue-300 rounded text-xs",children:e.action_category})}),(0,z.jsx)("td",{className:"px-6 py-4",children:(0,z.jsx)("div",{className:"text-sm text-gray-400",children:e.resource_type&&e.resource_id?"".concat(e.resource_type,":").concat(e.resource_id.substring(0,8),"..."):"-"})}),(0,z.jsx)("td",{className:"px-6 py-4",children:(0,z.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat("success"===e.status?"bg-green-500/20 text-green-300":"bg-red-500/20 text-red-300"),children:e.status})}),(0,z.jsx)("td",{className:"px-6 py-4",children:(0,z.jsx)("div",{className:"text-xs text-gray-400 max-w-xs truncate",children:e.details?JSON.stringify(e.details).substring(0,50):"-"})})]},e.id))})]}),0===pe.length&&(0,z.jsx)("div",{className:"text-center py-12 text-gray-400",children:"\u05d0\u05d9\u05df \u05e4\u05e2\u05d9\u05dc\u05d5\u05ea \u05dc\u05d4\u05e6\u05d2\u05d4"})]})}),Ge&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(L,{isOpen:Ie,onClose:()=>Oe(!1),onSuccess:Ze,userId:Ge.id,userEmail:Ge.email,currentTier:Ge.tier}),(0,z.jsx)(R,{isOpen:De,onClose:()=>Pe(!1),onSuccess:Ze,userId:Ge.id,userEmail:Ge.email})]})]})}}}]);
//# sourceMappingURL=6695.1801a6f2.chunk.js.map